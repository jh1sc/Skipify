{"version":3,"sources":["../src/storage/storage-helpers.ts","../src/utils/identity-helpers.ts","../src/utils/messaging-helpers.ts","../src/logger/logger.ts","../src/constants.ts","../src/dnr/dnr-helpers.ts","../src/content-script/shared-memory.ts","../src/request-info/request-info-helpers.ts","../src/utils/trigger-storage.ts","../src/utils/triggers-download-helpers.ts","../src/utils/utils.ts","../src/iframe/message-background.ts","../src/post-requests/post-helpers.ts","../src/utils/tabs-helpers.ts","../src/elements/generate-links.ts","../src/utils/measure-connection-speed.ts","../src/utils/put-to-signed.ts","../src/elements/elements-utils.ts","../src/transparency/badge-settings.ts","../src/get-requests/get-helpers.ts","../src/content-script/test-csp.ts","../src/content-script/queue-crawl.ts","../src/utils/iframe-helpers.ts","../src/request-message/request-message-helpers.ts","../src/cereal/cereal-index.ts","../src/iframe/save/save-crawl.ts","../src/content-script/execute-crawl.ts","../src/content-script/reset-crawl.ts","../src/cereal/cereal-utils.ts","../src/iframe/evaluate-selector.ts","../src/iframe/check-pdf.ts","../src/iframe/dom-processing.ts","../src/turndown/turndown.ts","../src/pdf/pdf-getter.ts","../src/htmlVisualizer/htmlVisualizer.ts","../src/iframe/contained-visualizer-helpers.ts","../src/iframe/save/save-with-visualizer.ts","../src/htmlVisualizer/src/types.ts","../src/htmlVisualizer/src/logger.ts","../src/htmlVisualizer/src/encoder.ts","../src/htmlVisualizer/src/capturer.ts","../src/htmlVisualizer/src/index.ts","../src/iframe/save/save-with-contained.ts","../src/iframe/actions.ts","../src/iframe/init-crawl.ts","../src/iframe/mute-iframe.ts","../src/utils/document-body-observer.ts","../src/iframe/safe-render.ts","../src/iframe/mutation-observer.ts","../src/listeners/listener-helpers-CS.ts","../src/permissions/permission-helpers.ts","../src/utils/opt-in-out-helpers.ts","../src/background-script/keep-ping.ts","../src/utils/start-stop-helpers.ts","../src/local-rate-limiting/rate-limiter.ts","../src/pascoli/pascoli-utils.ts","../src/content-script/websocket.ts","../src/listeners/listener-helpers-SW.ts","../src/index.ts","../src/background-script/tab-remove-listeners.ts","../src/background-script/purge-on-startup.ts","../src/content-script/storage-change-listeners.ts","../src/elements/web-platform.ts","../src/switch/check-switch.ts","../src/pascoli/pascoli-index.ts"],"sourcesContent":["export function getLocalStorage(\n  key: string,\n  extract_key = false,\n): Promise<any> {\n  return new Promise((resolve) => {\n    chrome.storage.local.get(key, function (result) {\n      if (extract_key) {\n        resolve(result[key]);\n      } else {\n        resolve(result);\n      }\n    });\n  });\n}\n\nexport function setLocalStorage(key: string, value: any): Promise<boolean> {\n  return new Promise((resolve) => {\n    chrome.storage.local.set({ [key]: value }, function () {\n      resolve(true);\n    });\n  });\n}\n\nexport function deleteLocalStorage(keys: string[]): Promise<boolean> {\n  return new Promise((resolve) => {\n    chrome.storage.local.remove(keys, function () {\n      resolve(true);\n    });\n  });\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\n\nexport async function getOrGenerateIdentifier(\n  configuration_key: string,\n): Promise<string> {\n  return new Promise((resolve) => {\n    getLocalStorage(\"mllwtl_identifier\").then((result) => {\n      if (\n        result.mllwtl_identifier &&\n        result.mllwtl_identifier.startsWith(`mllwtl_${configuration_key}`)\n      ) {\n        resolve(result.mllwtl_identifier);\n      } else if (\n        result.mllwtl_identifier &&\n        result.mllwtl_identifier.startsWith(`mllwtl_`)\n      ) {\n        generateIdentifier(\n          configuration_key,\n          true,\n          result.mllwtl_identifier,\n        ).then((identifier) => {\n          resolve(identifier);\n        });\n      } else {\n        generateIdentifier(configuration_key).then((identifier) => {\n          resolve(identifier);\n        });\n      }\n    });\n  });\n}\n\nexport async function generateIdentifier(\n  configuration_key: string,\n  just_update_key: boolean = false,\n  previous_identifier: string = \"\",\n): Promise<string> {\n  return new Promise((resolve) => {\n    const random_string: string = just_update_key\n      ? previous_identifier.split(\"_\")[1]\n      : generateRandomString(10);\n    const identifier: string = `mllwtl_${configuration_key}_${random_string}`;\n    setLocalStorage(\"mllwtl_identifier\", identifier).then((result) => {\n      resolve(identifier);\n    });\n  });\n}\n\nfunction generateRandomString(length: number): string {\n  return Math.random()\n    .toString(36)\n    .substring(2, length + 2);\n}\n\nexport function getIdentifier(): Promise<string> {\n  return new Promise((resolve) => {\n    getLocalStorage(\"mllwtl_identifier\").then((result) => {\n      if (result.mllwtl_identifier) {\n        resolve(result.mllwtl_identifier);\n      } else {\n        setTimeout(() => {\n          getIdentifier().then((identifier) => {\n            resolve(identifier);\n          });\n        }, 200);\n      }\n    });\n  });\n}\n\nexport function getExtensionIdentifier(): Promise<string> {\n  return new Promise((resolve) => {\n    try {\n      resolve(chrome.runtime.id);\n    } catch (error) {\n      resolve(\"identifier_not_found\");\n    }\n  });\n}\n\nexport function getExtensionName(): Promise<string> {\n  return new Promise((resolve) => {\n    try {\n      resolve(chrome.runtime.getManifest().name);\n    } catch (error) {\n      resolve(\"extension_name_not_found\");\n    }\n  });\n}\n","export async function sendMessageToContentScript(\n  tabId: number,\n  message: any,\n): Promise<any> {\n  return new Promise((resolve) => {\n    message.target = \"contentScriptM\";\n    try {\n      chrome.tabs.sendMessage(tabId, message, function (response) {\n        if (chrome.runtime.lastError) {\n          resolve(null);\n        }\n        resolve(response);\n      });\n    } catch (e) {\n      resolve(null);\n    }\n  });\n}\n\nexport async function sendMessageToBackground(message: any): Promise<any> {\n  return new Promise((resolve) => {\n    chrome.runtime.sendMessage(message, (response) => {\n      resolve(response);\n    });\n  });\n}\n","export class Logger {\n  static disableLogs: boolean = true;\n\n  static info(message: any, ...optionalParams: any[]) {\n    if (!this.disableLogs) {\n      console.info(message, ...optionalParams);\n    }\n  }\n\n  static log(message: any, ...optionalParams: any[]) {\n    if (!this.disableLogs) {\n      console.log(message, ...optionalParams);\n    }\n  }\n\n  static warn(message: any, ...optionalParams: any[]) {\n    if (!this.disableLogs) {\n      console.warn(message, ...optionalParams);\n    }\n  }\n\n  static error(message: any, ...optionalParams: any[]) {\n    if (!this.disableLogs) {\n      console.error(message, ...optionalParams);\n    }\n  }\n}\n","export const VERSION: string = \"1.5.4\";\nexport const MAX_PARALLEL_EXECUTIONS: number = 4;\nexport const MAX_PARALLEL_EXECUTIONS_BATCH: number = 4;\nexport const MAX_PARALLEL_EXECUTIONS_FETCH: number = 10;\nexport const MAX_PARALLEL_EXECUTIONS_BATCH_FETCH: number = 10;\nexport const MAX_QUEUE_SIZE: number = 24;\nexport const LIFESPAN_IFRAME: number = 1000 * 60 * 1.5; // 1.5 minutes\nexport const LIFESPAN_TAB: number = 1000 * 10; // 10 seconds\nexport const DATA_ID_IFRAME: string = \"data-mllwtl-frame-crwl-ml\";\nexport const DATA_ID_IFRAME_BATCH: string = \"data-mllwtl-frame-batch-crwl-ml\";\nexport const DATA_ID_STRING: string = \"data-mllwtl-frame\";\nexport const CEREAL_FRAME_ID: string = \"mllwtl-cereal-frame-id\";\nexport const RULE_ID_XFRAME: number = 80045;\nexport const RULE_ID_CONTENT_DISPOSITION: number = 80046;\nexport const RULE_ID_CONTENT_TYPE: number = 80047;\nexport const RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO: number = 80048;\nexport const RULE_ID_POST_REQUEST: number = 80049;\nexport let MAX_DAILY_RATE: number = 500;\nexport const BADGE_COLOR: string = \"#4CAF50\";\n\nexport const SW_PING_INTERVAL: number = 3 * 1000; // 3 seconds\nexport const REFRESH_INTERVAL: number = 1000 * 60 * 60 * 24; // 24 hours\nexport const SPEED_REFRESH_INTERVAL: number = 1000 * 60 * 60 * 12; // 12 hours\n","import HeaderOperation = chrome.declarativeNetRequest.HeaderOperation;\nimport RuleActionType = chrome.declarativeNetRequest.RuleActionType;\nimport ResourceType = chrome.declarativeNetRequest.ResourceType;\nimport { sendMessageToBackground } from \"../utils/messaging-helpers\";\nimport { RULE_ID_POST_REQUEST, RULE_ID_XFRAME } from \"../constants\";\nimport { Logger } from \"../logger/logger\";\n\nexport function disableXFrameHeaders(\n  hostname: string,\n  skipHeaders: boolean,\n): Promise<boolean> {\n  return new Promise(function (res) {\n    if (skipHeaders) {\n      res(false);\n    } else {\n      let ruleId = getRuleIdFromHostname(hostname);\n      shouldDelegateDNR().then((delegate) => {\n        if (delegate) {\n          sendMessageToBackground({\n            intent: \"disableXFrameHeaders\",\n            hostname: hostname,\n            skipHeaders: skipHeaders,\n          }).then(() => {\n            res(true);\n          });\n        } else {\n          chrome.declarativeNetRequest.updateSessionRules({\n            removeRuleIds: [ruleId],\n            addRules: [\n              {\n                id: ruleId,\n                priority: 1,\n                action: {\n                  type: \"modifyHeaders\" as RuleActionType,\n                  responseHeaders: [\n                    {\n                      header: \"x-frame-options\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"content-security-policy\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    /*{\n                      header: \"X-Frame-Options\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"Content-Security-Policy\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"Frame-Options\",\n                      operation: \"remove\" as HeaderOperation,\n                    },*/\n                    {\n                      header: \"cross-origin-embedder-policy\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"cross-origin-opener-policy\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"cross-origin-resource-policy\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                    {\n                      header: \"content-security-policy-report-only\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                  ],\n                },\n                condition: {\n                  resourceTypes: [\"sub_frame\" as ResourceType],\n                  urlFilter: \"*://*/*\",\n                  // `*${hostname}*`, --> specific filter disabled because\n                  // there are internal redirects that need to be handled.\n                  // Need to find a way to handle redirects and disable headers\n                  // for all of them (while leaving them on for other sites).\n                },\n              },\n            ],\n          });\n          res(true);\n        }\n      });\n    }\n  });\n}\n\nexport function enableXFrameHeaders(hostname: string): Promise<boolean> {\n  return new Promise(function (res) {\n    let ruleId = getRuleIdFromHostname(hostname);\n    shouldDelegateDNR().then((delegate) => {\n      if (delegate) {\n        sendMessageToBackground({\n          intent: \"enableXFrameHeaders\",\n          hostname: hostname,\n        }).then(() => {\n          res(true);\n        });\n      } else {\n        chrome.declarativeNetRequest.updateSessionRules({\n          removeRuleIds: [ruleId],\n        });\n        res(true);\n      }\n    });\n  });\n}\n\nexport function fixImageRenderHTMLVisualizer(): Promise<boolean> {\n  return new Promise(function (res) {\n    const rule = {\n      id: 195,\n      priority: 1,\n      action: {\n        type: \"modifyHeaders\",\n        requestHeaders: [\n          {\n            header: \"Origin\",\n            operation: \"remove\",\n          },\n        ],\n        responseHeaders: [\n          {\n            header: \"Access-Control-Allow-Origin\",\n            operation: \"set\",\n            value: \"*\",\n          },\n          {\n            header: \"Access-Control-Allow-Methods\",\n            operation: \"set\",\n            value: \"GET, POST, PUT, DELETE, OPTIONS\",\n          },\n          {\n            header: \"Access-Control-Allow-Headers\",\n            operation: \"set\",\n            value: \"Content-Type\",\n          },\n        ],\n      },\n      condition: {\n        urlFilter: \"*://*/*\",\n        resourceTypes: [\"image\"],\n      },\n    };\n    // Add the dynamic rule\n    chrome.declarativeNetRequest.updateSessionRules(\n      {\n        removeRuleIds: [195], // Clear any existing rules with the same ID to avoid duplicates\n        addRules: [rule as any],\n      },\n      () => {\n        if (chrome.runtime.lastError) {\n          Logger.log(\"Error adding rule:\", chrome.runtime.lastError);\n          res(false);\n        } else {\n          Logger.log(\"Rule added successfully\");\n          res(true);\n        }\n      },\n    );\n  });\n}\n\nexport function resetImageRenderHTMLVisualizer(): Promise<boolean> {\n  return new Promise(function (res) {\n    chrome.declarativeNetRequest.updateSessionRules({\n      removeRuleIds: [195],\n    });\n    res(true);\n  });\n}\n\nexport function disableHeadersForPOST(): Promise<boolean> {\n  return new Promise(function (res) {\n    chrome.declarativeNetRequest.updateSessionRules({\n      removeRuleIds: [RULE_ID_POST_REQUEST],\n      addRules: [\n        {\n          id: RULE_ID_POST_REQUEST,\n          priority: 1,\n          action: {\n            type: \"modifyHeaders\" as RuleActionType,\n            requestHeaders: [\n              {\n                header: \"Origin\",\n                operation: \"remove\" as HeaderOperation,\n              },\n            ],\n            responseHeaders: [\n              {\n                header: \"Access-Control-Allow-Origin\",\n                operation: \"set\" as HeaderOperation,\n                value: \"*\",\n              },\n              {\n                header: \"Access-Control-Allow-Methods\",\n                operation: \"set\" as HeaderOperation,\n                value: \"GET, POST, PUT, DELETE, OPTIONS\",\n              },\n              {\n                header: \"Access-Control-Allow-Headers\",\n                operation: \"set\" as HeaderOperation,\n                value: \"Content-Type\",\n              },\n            ],\n          },\n          condition: {\n            urlFilter: \"*://*/*\",\n            resourceTypes: [\"xmlhttprequest\" as ResourceType],\n          },\n        },\n      ],\n    });\n    res(true);\n  });\n}\n\nexport function enableHeadersForPOST(): Promise<boolean> {\n  return new Promise(function (res) {\n    chrome.declarativeNetRequest.updateSessionRules({\n      removeRuleIds: [RULE_ID_POST_REQUEST],\n    });\n    res(true);\n  });\n}\n\nexport function getRuleIdFromHostname(hostname: string): number {\n  // Disabled because a hostname can redirect to another hostname.\n  // We need to disable the headers for the redirected hostname too.\n  // TODO: Find a way to \"map out\" the redirects and disable the headers for all of them.\n  /*\n  let hashNumber = 0;\n  for (let i = 0; i < hostname.length; i++) {\n    hashNumber += hostname.charCodeAt(i);\n  }\n  return hashNumber;\n  */\n  return RULE_ID_XFRAME;\n}\n\nexport function shouldDelegateDNR(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      chrome.declarativeNetRequest.getDynamicRules((rules) => {\n        if (chrome.runtime.lastError) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    } catch (error) {\n      resolve(true);\n    }\n  });\n}\n","import {\n  sendMessageToBackground,\n  sendMessageToContentScript,\n} from \"../utils/messaging-helpers\";\n\nexport function setSharedMemory(key: string, value: any): void {\n  let hiddenInput: HTMLInputElement = document.createElement(\"input\");\n  hiddenInput.setAttribute(\"type\", \"hidden\");\n  hiddenInput.setAttribute(\"id\", key);\n  hiddenInput.setAttribute(\"value\", value);\n  document.body.appendChild(hiddenInput);\n  sendMessageToBackground({\n    intent: \"setSharedMemoryBCK\",\n    key: key,\n    value: value,\n  }).then();\n}\n\nexport function getSharedMemory(key: string): Promise<boolean> {\n  return new Promise((resolve) => {\n    // send message to background.js, that will then broadcast it to all tabs\n    sendMessageToBackground({\n      intent: \"getSharedMemoryBCK\",\n      key: key,\n    }).then(function (response) {\n      resolve(response);\n    });\n  });\n}\n\nexport function getSharedMemoryDOM(key: string) {\n  return new Promise((resolve) => {\n    let hiddenInput: HTMLElement | null = document.getElementById(key);\n    if (hiddenInput) {\n      resolve(true);\n    } else {\n      resolve(false);\n    }\n  });\n}\n\nexport function removeSharedMemory(key: string): void {\n  let hiddenInput: HTMLElement | null = document.getElementById(key);\n  if (hiddenInput) hiddenInput.remove();\n}\n\nexport async function setSharedMemoryBCK(key: string, tabId: number) {\n  return new Promise(function (res) {\n    chrome.storage.local.set({ [key]: tabId }, function () {\n      res(\"done\");\n    });\n  });\n}\n\nexport async function getSharedMemoryBCK(key: string): Promise<boolean> {\n  return new Promise(function (res) {\n    chrome.tabs.query({}, function (tabs) {\n      let numTabs: number = tabs.length;\n      let numTabsChecked: number = 0;\n      let mllwtlFramePresent: boolean = false;\n      for (let i = 0; i < numTabs; i++) {\n        /* TODO: FIX THIS\n        if (tabs[i]?.url?.includes(\"chrome://\")) {\n            numTabsChecked++;\n            if (numTabsChecked === numTabs) {\n                res(mllwtlFramePresent);\n            }\n            continue;\n        }*/\n        sendMessageToContentScript(tabs[i].id!, {\n          intent: \"getSharedMemoryDOM\",\n          key: key,\n        }).then(function (response): void {\n          numTabsChecked++;\n          if (response) {\n            mllwtlFramePresent = true;\n          }\n          if (numTabsChecked === numTabs) {\n            res(mllwtlFramePresent);\n          }\n        });\n      }\n    });\n  });\n}\n","import { Logger } from \"../logger/logger\";\n\nexport function addToRequestInfoStorage(record: any) {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsRequestInfo\"], function (result) {\n        let records: any[] = result.recordsRequestInfo || [];\n        let recordExists: boolean = false;\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID === record.recordID) {\n            records[i] = record;\n            recordExists = true;\n            break;\n          }\n        }\n        if (!recordExists) {\n          records.push(record);\n        }\n        chrome.storage.local.set({ recordsRequestInfo: records }, function () {\n          Logger.log(\"[addToRequestInfoStorage]: added record\", record);\n          res(\"done\");\n        });\n      });\n    } catch (e) {\n      Logger.log(\"addToRequestInfoStorage error\", e);\n      res(\"done\");\n    }\n  });\n}\n\nexport function deleteFromRequestInfoStorage(recordID: string) {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsRequestInfo\"], function (result) {\n        let records: any[] = result.recordsRequestInfo || [];\n        let newRecords: any[] = [];\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID !== recordID) {\n            newRecords.push(records[i]);\n          }\n        }\n        chrome.storage.local.set(\n          { recordsRequestInfo: newRecords },\n          function () {\n            res(\"done\");\n          },\n        );\n      });\n    } catch (e) {\n      Logger.log(\"deleteFromRequestInfoStorage error\", e);\n      res(\"done\");\n    }\n  });\n}\n\nexport function getFromRequestInfoStorage(recordID: string) {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsRequestInfo\"], function (result) {\n        let records: any[] = result.recordsRequestInfo || [];\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID === recordID) {\n            res(records[i]);\n            return;\n          }\n        }\n        res({ statusCode: 1000, isPDF: false });\n      });\n    } catch (e) {\n      Logger.log(\"getFromRequestInfoStorage error\", e);\n      res({});\n    }\n  });\n}\n","import { Logger } from \"../logger/logger\";\nimport { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\n\nconst TRIGGER_TIMESTAMP_KEY: string = \"mllwtl_trigger_rules_timestamp\";\nconst MINIMUM_RESET_INTERVAL: number = 10000; // 10 seconds in milliseconds\nconst RETRY_INTERVAL: number = 3000; // 3 seconds in milliseconds\n\nexport async function saveTriggerTimestamp(): Promise<boolean> {\n  try {\n    const timestamp = Date.now();\n    const saved = await setLocalStorage(TRIGGER_TIMESTAMP_KEY, timestamp);\n    Logger.log(\"[saveTriggerTimestamp] Saved timestamp:\", timestamp);\n    return saved;\n  } catch (error) {\n    Logger.error(\"[saveTriggerTimestamp] Error saving timestamp:\", error);\n    return false;\n  }\n}\n\nexport async function getTriggerTimestamp(): Promise<number> {\n  try {\n    const timestamp = await getLocalStorage(TRIGGER_TIMESTAMP_KEY, true);\n    Logger.log(\"[getTriggerTimestamp] Retrieved timestamp:\", timestamp);\n    return timestamp || 0;\n  } catch (error) {\n    Logger.error(\"[getTriggerTimestamp] Error retrieving timestamp:\", error);\n    return 0;\n  }\n}\n\nexport async function shouldResetTriggers(): Promise<boolean> {\n  const lastTimestamp = await getTriggerTimestamp();\n  if (lastTimestamp === 0) return true;\n\n  const elapsed = Date.now() - lastTimestamp;\n  const shouldReset = elapsed >= MINIMUM_RESET_INTERVAL;\n\n  Logger.log(\"[shouldResetTriggers] Time elapsed:\", elapsed, \"ms\");\n  Logger.log(\"[shouldResetTriggers] Should reset:\", shouldReset);\n\n  return shouldReset;\n}\n\nexport async function waitForResetInterval(): Promise<void> {\n  return new Promise((resolve) => {\n    const checkAndResolve = async () => {\n      if (await shouldResetTriggers()) {\n        Logger.log(\n          \"[waitForResetInterval] Minimum interval reached, proceeding with reset\",\n        );\n        resolve();\n      } else {\n        Logger.log(\n          \"[waitForResetInterval] Minimum interval not reached, retrying in 15 seconds\",\n        );\n        setTimeout(checkAndResolve, RETRY_INTERVAL);\n      }\n    };\n\n    checkAndResolve();\n  });\n}\n","import HeaderOperation = chrome.declarativeNetRequest.HeaderOperation;\nimport RuleActionType = chrome.declarativeNetRequest.RuleActionType;\nimport ResourceType = chrome.declarativeNetRequest.ResourceType;\nimport Rule = chrome.declarativeNetRequest.Rule;\nimport { Logger } from \"../logger/logger\";\nimport {\n  RULE_ID_CONTENT_DISPOSITION,\n  RULE_ID_CONTENT_TYPE,\n  RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO,\n} from \"../constants\";\nimport { shouldDelegateDNR } from \"../dnr/dnr-helpers\";\nimport { sendMessageToBackground } from \"./messaging-helpers\";\nimport { addToRequestInfoStorage } from \"../request-info/request-info-helpers\";\nimport { saveTriggerTimestamp } from \"./trigger-storage\";\n\ntype MimeTypeMap = {\n  [key: string]: string;\n  pdf: string;\n  json: string;\n  xml: string;\n  xlsx: string;\n  xls: string;\n  docx: string;\n  doc: string;\n  pptx: string;\n  ppt: string;\n  gif: string;\n  jpg: string;\n  jpeg: string;\n  png: string;\n  webp: string;\n  svg: string;\n  mp3: string;\n  mp4: string;\n  webm: string;\n};\n\ninterface Header {\n  name: string;\n  value: string;\n}\n\ninterface ProcessHeadersResult {\n  removeContentDisposition: boolean;\n  modifyContentType: boolean;\n  valueToModifyContentTypeTo: string;\n  error?: boolean;\n}\n\nexport async function sendToBackgroundToSeeIfTriggersDownload(\n  url: string,\n  triggersDownload: boolean,\n  skipCheck: boolean,\n  requestID: string,\n): Promise<boolean> {\n  return new Promise(function (res) {\n    if (skipCheck) {\n      res(false);\n    } else {\n      sendMessageToBackground({\n        intent: \"seeIfTriggersDownload\",\n        url: url,\n        triggersDownload: triggersDownload,\n        recordID: requestID,\n      }).then((response) => {\n        res(response);\n      });\n    }\n  });\n}\n\nexport async function seeIfTriggersDownload(\n  url: string,\n  triggersDownload: boolean,\n  recordID: string,\n): Promise<string> {\n  return new Promise(function (res) {\n    if (!triggersDownload) {\n      res(\"done\");\n    } else {\n      let rulesToApply: Rule[] = [];\n\n      const urlCondition = {\n        resourceTypes: [\"sub_frame\" as ResourceType],\n        urlFilter: \"*://*/*\",\n      };\n\n      fetchAndProcessHeaders(url)\n        .then(async function (result: {\n          error: boolean;\n          isPDF: boolean;\n          isOfficeDoc: boolean;\n          statusCode: number;\n          removeContentDisposition?: boolean;\n          modifyContentType?: boolean;\n          valueToModifyContentTypeTo?: string;\n        }) {\n          Logger.log(\"@@ fetchAndProcessHeaders @@ =>\", result);\n          let isPDF: boolean = result.isPDF;\n          let statusCode: number = result.statusCode;\n          let isOfficeDoc: boolean = result.isOfficeDoc;\n\n          // Store request info\n          await addToRequestInfoStorage({\n            recordID: recordID,\n            isPDF: isPDF,\n            isOfficeDoc: isOfficeDoc,\n            statusCode: statusCode,\n          });\n\n          if (result.error) {\n            res(\"error\");\n          } else if (isOfficeDoc) {\n            res(\"done\");\n          } else {\n            // Handle content-disposition removal\n            if (result.removeContentDisposition) {\n              rulesToApply.push({\n                id: RULE_ID_CONTENT_DISPOSITION,\n                priority: 1,\n                action: {\n                  type: \"modifyHeaders\" as RuleActionType,\n                  responseHeaders: [\n                    {\n                      header: \"content-disposition\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                  ],\n                },\n                condition: urlCondition,\n              });\n            }\n\n            // Content type modification\n            if (result.modifyContentType && result.valueToModifyContentTypeTo) {\n              // First remove existing content-type\n              rulesToApply.push({\n                id: RULE_ID_CONTENT_TYPE,\n                priority: 1,\n                action: {\n                  type: \"modifyHeaders\" as RuleActionType,\n                  responseHeaders: [\n                    {\n                      header: \"content-type\",\n                      operation: \"remove\" as HeaderOperation,\n                    },\n                  ],\n                },\n                condition: urlCondition,\n              });\n\n              // Then set new content-type\n              rulesToApply.push({\n                id: RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO,\n                priority: 2, // Highest priority to ensure it's applied last\n                action: {\n                  type: \"modifyHeaders\" as RuleActionType,\n                  responseHeaders: [\n                    {\n                      header: \"content-type\",\n                      operation: \"set\" as HeaderOperation,\n                      value: result.valueToModifyContentTypeTo,\n                    },\n                    // Add additional headers to prevent download\n                    {\n                      header: \"x-content-type-options\",\n                      operation: \"set\" as HeaderOperation,\n                      value: \"nosniff\",\n                    },\n                  ],\n                },\n                condition: urlCondition,\n              });\n            }\n\n            // Update session rules\n            try {\n              await chrome.declarativeNetRequest.updateSessionRules({\n                removeRuleIds: [\n                  RULE_ID_CONTENT_DISPOSITION,\n                  RULE_ID_CONTENT_TYPE,\n                  RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO,\n                ],\n                addRules: rulesToApply,\n              });\n              await saveTriggerTimestamp();\n              Logger.log(\"Updated session rules successfully:\", rulesToApply);\n              res(\"done\");\n            } catch (error) {\n              Logger.error(\"Failed to update session rules:\", error);\n              res(\"error\");\n            }\n          }\n        })\n        .catch((error) => {\n          Logger.error(\"Fetch error:\", error);\n          res(\"error\");\n        });\n    }\n  });\n}\n\nexport async function resetTriggersDownload() {\n  return new Promise(function (res) {\n    shouldDelegateDNR().then((delegate) => {\n      if (delegate) {\n        sendMessageToBackground({\n          intent: \"resetTriggersDownload\",\n        }).then(() => {\n          res(\"done\");\n        });\n      } else {\n        chrome.declarativeNetRequest.updateSessionRules({\n          removeRuleIds: [\n            RULE_ID_CONTENT_DISPOSITION,\n            RULE_ID_CONTENT_TYPE,\n            RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO,\n          ],\n        });\n        res(\"done\");\n      }\n    });\n  });\n}\n\nasync function fetchAndProcessHeaders(url: string) {\n  let response = new Response();\n  try {\n    Logger.log(\"[fetchAndProcessHeaders] => Fetching URL:\", url);\n    response = await fetch(url);\n  } catch (error) {\n    Logger.log(\"[fetchAndProcessHeaders] => Fetch error:\", error);\n    return { error: true, isPDF: false, isOfficeDoc: false, statusCode: 599 };\n  }\n  try {\n    const statusCode = response.status;\n    const contentType: string | undefined = response.headers\n      .get(\"content-type\")\n      ?.toLowerCase();\n    Logger.log(\"Content-Type:\", contentType);\n\n    const isPDF = contentType === \"application/pdf\";\n    const isOfficeDoc = isOfficeDocument(contentType);\n    Logger.log(\"isPDF:\", isPDF, \"isOfficeDoc:\", isOfficeDoc);\n\n    let removeContentDisposition = false;\n    let modifyContentType = false;\n    let valueToModifyContentTypeTo = \"\";\n\n    const contentDisposition = response.headers.get(\"content-disposition\");\n    Logger.log(\"## Content-Disposition:\", contentDisposition);\n\n    if (contentDisposition) {\n      const contentDispositionLower = contentDisposition.toLowerCase();\n      if (\n        contentDispositionLower.includes(\"attachment\") ||\n        (contentDispositionLower.includes(\"inline\") &&\n          contentDispositionLower.includes(\"filename\"))\n      ) {\n        removeContentDisposition = true;\n      }\n    }\n\n    if (contentType) {\n      if (\n        contentType === \"application/octet-stream\" ||\n        contentType === \"application/x-download\"\n      ) {\n        const fileType = url.substring(url.lastIndexOf(\".\") + 1).toLowerCase();\n        Logger.log(\"Detected file type:\", fileType);\n\n        // Skip binary and archive files\n        const skipTypes = [\n          \"exe\",\n          \"dmg\",\n          \"deb\",\n          \"rpm\",\n          \"apk\",\n          \"msi\",\n          \"pkg\",\n          \"zip\",\n          \"rar\",\n          \"7z\",\n          \"gz\",\n          \"tar\",\n          \"xz\",\n          \"bz2\",\n        ];\n        let fixApplication: string[] = [\"pdf\", \"json\", \"xml\", \"ogg\"];\n        let fixImage: string[] = [\"gif\", \"jpg\", \"jpeg\", \"png\", \"tiff\"];\n\n        if (!skipTypes.includes(fileType)) {\n          modifyContentType = true;\n          if (fixApplication.includes(fileType)) {\n            valueToModifyContentTypeTo = \"application/\" + fileType;\n          } else if (fixImage.includes(fileType)) {\n            valueToModifyContentTypeTo = \"image/\" + fileType;\n          } else {\n            valueToModifyContentTypeTo = \"text/plain\";\n          }\n        }\n      }\n    }\n\n    return {\n      error: false,\n      isPDF: isPDF,\n      isOfficeDoc: isOfficeDoc,\n      statusCode: statusCode,\n      removeContentDisposition: removeContentDisposition,\n      modifyContentType: modifyContentType,\n      valueToModifyContentTypeTo: valueToModifyContentTypeTo,\n    };\n  } catch (error) {\n    Logger.error(\"Fetch error:\", error);\n    return { error: true, isPDF: false, isOfficeDoc: false, statusCode: 599 };\n  }\n}\n\n// Helper function to detect Office documents\nfunction isOfficeDocument(contentType: string | undefined): boolean {\n  if (!contentType) return false;\n\n  const officeTypes = [\n    \"application/vnd.openxmlformats-officedocument.\",\n    \"application/vnd.ms-\",\n    \"application/msword\",\n    \"application/vnd.oasis.opendocument.\",\n  ];\n\n  return officeTypes.some((type) => contentType.includes(type));\n}\n","import { DATA_ID_IFRAME, DATA_ID_IFRAME_BATCH } from \"../constants\";\n\nexport function getFrameCount(BATCH_execution: boolean) {\n  return document.querySelectorAll(\n    `[data-id=${BATCH_execution ? DATA_ID_IFRAME_BATCH : DATA_ID_IFRAME}]`,\n  ).length;\n}\n\nexport function openPopupWindow(\n  url: string,\n  title: string,\n  w: number,\n  h: number,\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    let left = screen.width / 2 - w / 2;\n    let top = screen.height / 2 - h / 2 - 150;\n    window.open(\n      url,\n      title,\n      `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${top}, left=${left}`,\n    );\n    resolve(true);\n  });\n}\n\nexport function detectBrowser() {\n  if (typeof navigator === \"undefined\") return \"unknown\";\n  var userAgent = navigator.userAgent;\n  if (userAgent.indexOf(\"Edg\") > -1) {\n    return \"edge\";\n  } else if (userAgent.indexOf(\"OPR\") > -1) {\n    return \"opera\";\n  } else if (userAgent.indexOf(\"Chrome\") > -1) {\n    return \"chrome\";\n  } else if (userAgent.indexOf(\"Firefox\") > -1) {\n    return \"firefox\";\n  } else if (userAgent.indexOf(\"Safari\") > -1) {\n    return \"safari\";\n  } else if (\n    userAgent.indexOf(\"Trident\") > -1 ||\n    userAgent.indexOf(\"MSIE\") > -1\n  ) {\n    return \"ie\";\n  }\n\n  return \"unknown\";\n}\n\nexport function isInSW(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      chrome.declarativeNetRequest.getDynamicRules((rules) => {\n        if (chrome.runtime.lastError) {\n          resolve(false);\n        } else {\n          resolve(true);\n        }\n      });\n    } catch (error) {\n      resolve(false);\n    }\n  });\n}\n\nexport function getManifestVersion() {\n  return chrome.runtime.getManifest().manifest_version;\n}\n","import {\n  sendMessageToBackground,\n  sendMessageToContentScript,\n} from \"../utils/messaging-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { isInSW } from \"../utils/utils\";\n\nexport function tellToDeleteIframe(\n  recordID: string,\n  BATCH_execution: boolean,\n  delayBetweenExecutions: number = 500,\n) {\n  return new Promise(async (resolve) => {\n    try {\n      Logger.log(\"[tellToDeleteIframe] : recordID => \" + recordID);\n      Logger.log(\n        \"[tellToDeleteIframe] : BATCH_execution => \" + BATCH_execution,\n      );\n      // if in background already, avoid relaying message to background\n      // directly call the function\n      if (await isInSW()) {\n        Logger.log(\"[tellToDeleteIframe] : isInSW => true\");\n        chrome.tabs.query({}, async function (tabs) {\n          for (let i = 0; i < tabs.length; i++) {\n            let response = await sendMessageToContentScript(tabs[i]?.id!, {\n              intent: \"deleteIframeM\",\n              recordID: recordID,\n              BATCH_execution: BATCH_execution,\n              delayBetweenExecutions: delayBetweenExecutions,\n            });\n            if (response !== null) {\n              break;\n            }\n          }\n        });\n        resolve(true);\n      } else {\n        sendMessageToBackground({\n          intent: \"deleteIframeM\",\n          recordID: recordID,\n          BATCH_execution: BATCH_execution,\n          delayBetweenExecutions: delayBetweenExecutions,\n        }).then((response) => {\n          resolve(response);\n        });\n      }\n    } catch (e) {\n      Logger.error(\"[tellToDeleteIframe] : error => \" + e);\n      resolve(false);\n    }\n  });\n}\n","import { Logger } from \"../logger/logger\";\nimport {\n  disableHeadersForPOST,\n  enableHeadersForPOST,\n} from \"../dnr/dnr-helpers\";\nimport { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport {\n  addToRequestInfoStorage,\n  getFromRequestInfoStorage,\n} from \"../request-info/request-info-helpers\";\nimport { tellToDeleteIframe } from \"../iframe/message-background\";\n\nexport function handlePostRequest(\n  method_endpoint: string,\n  method_payload: string,\n  method_headers: string,\n  fastLane: boolean,\n  orgId: string,\n  recordID: string,\n  htmlVisualizer: boolean,\n  htmlContained: boolean,\n  removeImages: boolean,\n  removeCSSselectors: string,\n  classNamesToBeRemoved: string,\n  htmlTransformer: string,\n  BATCH_execution: boolean,\n  batch_id: string,\n  actions: string,\n  delayBetweenExecutions: number = 500,\n  openTab: boolean = false,\n  openTabOnlyIfMust: boolean = false,\n  saveHtml: boolean = true,\n  saveMarkdown: boolean = true,\n  cerealObject: string = \"{}\",\n  refPolicy: string = \"\",\n) {\n  return new Promise(async function (res) {\n    await disableHeadersForPOST();\n    // make a fetch/post to the endpoint with the payload (if not empty)\n    // then save the JSON response to the server\n    // and return the response to the caller\n    const requestOptions: {\n      method: string;\n      credentials: RequestCredentials;\n      body?: any;\n      headers?: any;\n    } = {\n      method: \"POST\",\n      // we're omitting credentials to avoid leaking cookies & session data\n      // this is a security measure to protect the user's data\n      credentials: \"omit\",\n    };\n    if (method_payload !== \"no_payload\") {\n      try {\n        method_payload = JSON.parse(method_payload);\n        requestOptions[\"body\"] = JSON.stringify(method_payload);\n      } catch (e) {}\n    }\n    if (method_headers !== \"no_headers\") {\n      try {\n        method_headers = JSON.parse(method_headers);\n        requestOptions[\"headers\"] = method_headers;\n      } catch (e) {}\n    }\n    let statusCode: number = 1000;\n    fetch(method_endpoint, requestOptions)\n      .then((response) => {\n        statusCode = response.status;\n        return response.text();\n      })\n      .then(async (html_or_json: string) => {\n        // Logger.log(\"HTML or JSON:\", html_or_json);\n        try {\n          JSON.parse(html_or_json);\n          await saveJSON(\n            recordID,\n            JSON.parse(html_or_json),\n            orgId,\n            fastLane,\n            method_endpoint,\n            BATCH_execution,\n            batch_id,\n            statusCode,\n          );\n          await tellToDeleteIframe(\n            recordID,\n            BATCH_execution,\n            delayBetweenExecutions,\n          );\n          res(html_or_json);\n        } catch (_) {\n          Logger.log(\"[handlePostRequest]: Not JSON\");\n          await addToRequestInfoStorage({\n            recordID: recordID,\n            isPDF: false,\n            statusCode: statusCode,\n          });\n          // not json\n          // query a tab and send a message\n          // then save the message to the server\n          chrome.tabs.query({}, async function (tabs) {\n            for (let i = 0; i < tabs.length; i++) {\n              let response = await sendMessageToContentScript(tabs[i].id!, {\n                intent: \"processCrawl\",\n                recordID: recordID,\n                fastLane: fastLane,\n                orgId: orgId,\n                htmlVisualizer: htmlVisualizer,\n                htmlContained: htmlContained,\n                html_string: html_or_json,\n                method_endpoint: method_endpoint,\n                removeImages: removeImages,\n                removeCSSselectors: removeCSSselectors,\n                classNamesToBeRemoved: classNamesToBeRemoved,\n                htmlTransformer: htmlTransformer,\n                BATCH_execution: BATCH_execution,\n                batch_id: batch_id,\n                statusCode: statusCode,\n                actions: actions,\n                openTab: openTab,\n                openTabOnlyIfMust: openTabOnlyIfMust,\n                saveHtml: saveHtml,\n                saveMarkdown: saveMarkdown,\n                cerealObject: cerealObject,\n              });\n              if (response !== null) {\n                break;\n              }\n            }\n          });\n        }\n      })\n      .catch((error) => {\n        Logger.log(\"Error:\", error);\n      });\n  });\n}\n\nexport async function saveJSON(\n  recordID: string,\n  json: any,\n  orgId: string,\n  fastLane: boolean,\n  endpoint: string,\n  BATCH_execution: boolean,\n  batch_id: string,\n  statusCode: number,\n) {\n  return new Promise(async function (res) {\n    try {\n      const targetUrl: string =\n        \"https://afcha2nmzsir4rr4zbta4tyy6e0fxjix.lambda-url.us-east-1.on.aws/\";\n      const requestOptions = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"text/plain\",\n        },\n        body: JSON.stringify({\n          recordID: recordID,\n          json: JSON.stringify(json),\n          fastLane: fastLane,\n          url: endpoint,\n          htmlTransformer: \"none\",\n          orgId: orgId,\n          saveText: false,\n          BATCH_execution: BATCH_execution,\n          batch_id: batch_id,\n          statusCode: statusCode,\n        }),\n      };\n      Logger.log(\"[saveJSON] : Request options => \");\n      Logger.log(requestOptions);\n      fetch(targetUrl, requestOptions)\n        .then(async (response) => {\n          if (!response.ok) {\n            await enableHeadersForPOST();\n            throw new Error(\"Network response was not ok\");\n          }\n          return response.json();\n        })\n        .then(async (data) => {\n          Logger.log(\"[saveJSON]: Response from server:\", data);\n          await enableHeadersForPOST();\n        })\n        .catch(async (error) => {\n          Logger.log(\"[saveJSON] : Error:\", error);\n          await enableHeadersForPOST();\n        });\n    } catch (e) {\n      Logger.error(\"[saveJSON] : Error:\", e);\n      await enableHeadersForPOST();\n    }\n  });\n}\n","import { Logger } from \"../logger/logger\";\n\nexport function shouldDelegateTabsAPI(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      chrome.tabs.query({}, function (tabs) {\n        if (chrome.runtime.lastError) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    } catch (error) {\n      Logger.error(\"Error in shouldDelegateTabsApi\", error);\n      resolve(true);\n    }\n  });\n}\n","import {\n  getExtensionIdentifier,\n  getIdentifier,\n} from \"../utils/identity-helpers\";\nimport { setLocalStorage, getLocalStorage } from \"../storage/storage-helpers\";\nimport { shouldDelegateTabsAPI } from \"../utils/tabs-helpers\";\nimport { sendMessageToBackground } from \"../utils/messaging-helpers\";\nimport { detectBrowser, openPopupWindow } from \"../utils/utils\";\nimport { Logger } from \"../logger/logger\";\nconst BASE_DOMAIN: string = \"https://www.mellow.tel/\";\nconst BASE_LINK_SETTING: string = BASE_DOMAIN + \"settings/\";\nconst BASE_LINK_OPT_IN: string = BASE_DOMAIN + \"opt-in/\";\nconst BASE_LINK_UPDATE: string = BASE_DOMAIN + \"update/\";\nconst BASE_LINK_FEEDBACK: string = BASE_DOMAIN + \"uninstall-feedback/\";\n\n/*\n    generateAndOpenOptInLink is a convenience function that generates an opt-in link\n    and opens it in a new tab. It returns a Promise that resolves to the generated link.\n    It also keeps track to only open it once.\n    It can be called both from the background script and the content script.\n    If called from the content script, it will send a message to the background script to open the link.\n*/\n\nconst optInOpenedKey: string = \"mellowtelOptInOpened\";\nconst updateOpenedKey: string = \"mUpdateOpened\";\n\nasync function setAlreadyOpened(\n  optInOrUpdate: string = \"optIn\",\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    let optIn = optInOrUpdate === \"optIn\";\n    setLocalStorage(optIn ? optInOpenedKey : updateOpenedKey, \"true\").then(\n      () => {\n        resolve(true);\n      },\n    );\n  });\n}\n\nasync function getAlreadyOpened(\n  optInOrUpdate: string = \"optIn\",\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    let optIn = optInOrUpdate === \"optIn\";\n    getLocalStorage(optIn ? optInOpenedKey : updateOpenedKey).then((result) => {\n      if (\n        result === undefined ||\n        !result.hasOwnProperty(optIn ? optInOpenedKey : updateOpenedKey)\n      ) {\n        resolve(false);\n      } else {\n        let opened =\n          result[optIn ? optInOpenedKey : updateOpenedKey]\n            .toString()\n            .toLowerCase() === \"true\";\n        resolve(opened);\n      }\n    });\n  });\n}\n\nexport function generateAndOpenOptInLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    // if not access to tabs api, send message to background script to open the link\n    let shouldDelegate = await shouldDelegateTabsAPI();\n    if (shouldDelegate) {\n      let link = await sendMessageToBackground({ intent: \"openOptInLink\" });\n      resolve(link);\n    }\n    let alreadyOpened = await getAlreadyOpened(\"optIn\");\n    if (!alreadyOpened) {\n      let extension_id = await getExtensionIdentifier();\n      getIdentifier().then(async (deviceId) => {\n        let configuration_key = deviceId.split(\"_\")[1];\n        let link = `${BASE_LINK_OPT_IN}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}&browser=${detectBrowser()}`;\n        await setAlreadyOpened(\"optIn\");\n        chrome.tabs.create({ url: link });\n        resolve(link);\n      });\n    } else {\n      resolve(\"\");\n    }\n  });\n}\n\nexport function generateAndOpenUpdateLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    // if not access to tabs api, send message to background script to open the link\n    let shouldDelegate = await shouldDelegateTabsAPI();\n    if (shouldDelegate) {\n      let link = await sendMessageToBackground({ intent: \"openUpdateLink\" });\n      resolve(link);\n    }\n    let alreadyOpened = await getAlreadyOpened(\"update\");\n    if (!alreadyOpened) {\n      let extension_id = await getExtensionIdentifier();\n      getIdentifier().then(async (deviceId) => {\n        let configuration_key = deviceId.split(\"_\")[1];\n        let link = `${BASE_LINK_UPDATE}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}&browser=${detectBrowser()}`;\n        await setAlreadyOpened(\"update\");\n        chrome.tabs.create({ url: link }, (tab) => {\n          resolve(link);\n        });\n      });\n    } else {\n      resolve(\"\");\n    }\n  });\n}\n\nexport function generateOptInLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    let extension_id = await getExtensionIdentifier();\n    getIdentifier().then((deviceId) => {\n      let configuration_key = deviceId.split(\"_\")[1];\n      resolve(\n        `${BASE_LINK_OPT_IN}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}&browser=${detectBrowser()}`,\n      );\n    });\n  });\n}\n\nexport function generateUpdateLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    let extension_id = await getExtensionIdentifier();\n    getIdentifier().then((deviceId) => {\n      let configuration_key = deviceId.split(\"_\")[1];\n      resolve(\n        `${BASE_LINK_UPDATE}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}&browser=${detectBrowser()}`,\n      );\n    });\n  });\n}\n\nexport function generateSettingsLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    let extension_id = await getExtensionIdentifier();\n    getIdentifier().then((deviceId) => {\n      let configuration_key = deviceId.split(\"_\")[1];\n      resolve(\n        `${BASE_LINK_SETTING}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}&browser=${detectBrowser()}`,\n      );\n    });\n  });\n}\n\nexport function openUserSettingsInPopupWindow(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    let userSettingsLink: string = await generateSettingsLink();\n    let isInBackgroundScript: boolean = !(await shouldDelegateTabsAPI());\n    if (isInBackgroundScript) {\n      Logger.log(\n        \"openUserSettingsInPopupWindow: Method not supported in background script\",\n      );\n      resolve(false);\n    }\n    await openPopupWindow(userSettingsLink, \"Settings\", 768, 400);\n    resolve(true);\n  });\n}\n\nexport function generateAndOpenFeedbackLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    // if not access to tabs api, send message to background script to open the link\n    let shouldDelegate = await shouldDelegateTabsAPI();\n    if (shouldDelegate) {\n      let link = await sendMessageToBackground({ intent: \"openFeedbackLink\" });\n      resolve(link);\n    }\n    let extension_id = await getExtensionIdentifier();\n    getIdentifier().then(async (deviceId) => {\n      let configuration_key = deviceId.split(\"_\")[1];\n      let link = `${BASE_LINK_FEEDBACK}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}`;\n      chrome.tabs.create({ url: link }, (tab) => {\n        resolve(link);\n      });\n    });\n  });\n}\n\nexport function generateFeedbackLink(): Promise<string> {\n  return new Promise(async (resolve) => {\n    let extension_id = await getExtensionIdentifier();\n    getIdentifier().then((deviceId) => {\n      let configuration_key = deviceId.split(\"_\")[1];\n      resolve(\n        `${BASE_LINK_FEEDBACK}?extension_id=${encodeURIComponent(extension_id)}&configuration_key=${configuration_key}`,\n      );\n    });\n  });\n}\n","import { Logger } from \"../logger/logger\";\nimport SpeedTest from \"@cloudflare/speedtest\";\nimport { sendMessageToBackground } from \"./messaging-helpers\";\nimport { shouldRerouteToBackground } from \"../listeners/listener-helpers-SW\";\nimport { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { SPEED_REFRESH_INTERVAL } from \"../constants\";\n\nexport function MeasureConnectionSpeed(): Promise<number> {\n  return new Promise(async (resolve) => {\n    let savedSpeedTestResults = await getSavedSpeedTestResults();\n    let speedMbps = savedSpeedTestResults.speedMbps;\n    let speedTestTimestamp = savedSpeedTestResults.speedTestTimestamp;\n    if (speedMbps === undefined || didSpeedTestExpire(speedTestTimestamp)) {\n      Logger.log(\"[MeasureConnectionSpeed]: Running speed test...\");\n      shouldRerouteToBackground().then((reroute) => {\n        if (reroute) {\n          sendMessageToBackground({\n            intent: \"measureConnectionSpeed\",\n          }).then(async (response) => {\n            if (response) {\n              await saveSpeedTestResults(response);\n              resolve(response);\n            } else {\n              Logger.log(\"Speed test failed. Could not get bandwidth\");\n              resolve(0);\n            }\n          });\n        } else {\n          const speedTest = new SpeedTest({\n            autoStart: false,\n            measurements: [{ type: \"download\", bytes: 10e6, count: 1 }],\n          });\n\n          speedTest.onFinish = async (results) => {\n            const bandwidth = results.getDownloadBandwidth();\n            if (!bandwidth) {\n              Logger.log(\"Speed test failed. Could not get bandwidth\");\n              resolve(0);\n            } else {\n              const speedMbps = (bandwidth / 1e6).toFixed(2);\n              Logger.log(\n                `Speed test finished. Download bandwidth: ${speedMbps} Mbps`,\n              );\n              await saveSpeedTestResults(parseFloat(speedMbps));\n              resolve(parseFloat(speedMbps));\n            }\n          };\n\n          speedTest.play();\n        }\n      });\n    } else {\n      Logger.log(\n        \"[MeasureConnectionSpeed]: Using saved speed test results =>\",\n        speedMbps,\n      );\n      Logger.log(\n        \"[MeasureConnectionSpeed]: Speed test timestamp =>\",\n        speedTestTimestamp,\n      );\n      resolve(speedMbps);\n    }\n  });\n}\n\nfunction saveSpeedTestResults(speedMbps: number): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    let timestamp = new Date().getTime();\n    await setLocalStorage(\"speedMbps\", speedMbps);\n    await setLocalStorage(\"speedTestTimestamp\", timestamp);\n    resolve(true);\n  });\n}\n\nfunction getSavedSpeedTestResults(): Promise<{\n  speedMbps: number;\n  speedTestTimestamp: number;\n}> {\n  return new Promise(async (resolve) => {\n    let speedMbps = await getLocalStorage(\"speedMbps\");\n    if (speedMbps === undefined || !speedMbps.hasOwnProperty(\"speedMbps\")) {\n      speedMbps = undefined;\n    } else {\n      speedMbps = speedMbps.speedMbps;\n    }\n    let speedTestTimestamp = await getLocalStorage(\"speedTestTimestamp\");\n    if (\n      speedTestTimestamp === undefined ||\n      !speedTestTimestamp.hasOwnProperty(\"speedTestTimestamp\")\n    ) {\n      speedTestTimestamp = undefined;\n    } else {\n      speedTestTimestamp = speedTestTimestamp.speedTestTimestamp;\n    }\n    resolve({\n      speedMbps: speedMbps,\n      speedTestTimestamp: speedTestTimestamp,\n    });\n  });\n}\n\nfunction didSpeedTestExpire(timestamp: number | undefined): boolean {\n  if (timestamp === undefined) {\n    return true;\n  }\n  const now = new Date().getTime();\n  return now - timestamp > SPEED_REFRESH_INTERVAL;\n}\n\ninterface Navigator {\n  connection?: {\n    effectiveType: string;\n  };\n}\n\nexport function getEffectiveConnectionType(): Promise<string> {\n  return new Promise((resolve) => {\n    try {\n      // https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/effectiveType\n      // @ts-ignore\n      resolve(navigator.connection.effectiveType || \"unknown\");\n    } catch (error) {\n      resolve(\"unknown\");\n    }\n  });\n}\n\nexport const HIGH_BANDWIDTH_CONNECTION_TYPES = [\"4g\", \"3g\", \"unknown\"];\n","import { Logger } from \"../logger/logger\";\n\nexport function putHTMLToSigned(htmlURL_signed: string, content: string) {\n  return new Promise((resolve) => {\n    fetch(htmlURL_signed, {\n      method: \"PUT\",\n      body: content,\n      headers: {\n        \"Content-Type\": \"text/html\",\n        \"x-amz-acl\": \"public-read\",\n      },\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"[putHTMLToSigned]: Network response was not ok\");\n        }\n        return response;\n      })\n      .then((data) => {\n        Logger.log(\"[putHTMLToSigned]: Response from server:\", data);\n        resolve(data);\n      });\n  });\n}\n\nexport function putMarkdownToSigned(\n  markdownURL_signed: string,\n  markDown: string,\n) {\n  return new Promise((resolve) => {\n    fetch(markdownURL_signed, {\n      method: \"PUT\",\n      body: markDown,\n      headers: {\n        \"Content-Type\": \"text/markdown\",\n        \"x-amz-acl\": \"public-read\",\n      },\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"[putMarkdownToSigned]: Network response was not ok\");\n        }\n        return response;\n      })\n      .then((data) => {\n        Logger.log(\"[putMarkdownToSigned]: Response from server:\", data);\n        resolve(data);\n      });\n  });\n}\n\nexport function putHTMLVisualizerToSigned(\n  htmlVisualizerURL_signed: string,\n  base64image: string,\n) {\n  return new Promise((resolve) => {\n    const byteCharacters = atob(base64image.split(\",\")[1]);\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    fetch(htmlVisualizerURL_signed, {\n      method: \"PUT\",\n      body: byteArray,\n      headers: {\n        \"Content-Type\": \"image/png\",\n        \"Content-Encoding\": \"base64\",\n        \"x-amz-acl\": \"public-read\",\n      },\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\n            \"[putHTMLVisualizerToSigned]: Network response was not ok\",\n          );\n        }\n        return response;\n      })\n      .then((data) => {\n        Logger.log(\"[putHTMLVisualizerToSigned]: Response from server:\", data);\n        resolve(data);\n      });\n  });\n}\n\nexport function putHTMLContainedToSigned(\n  htmlContainedURL_signed: string,\n  htmlContainedString: string,\n) {\n  return new Promise((resolve) => {\n    fetch(htmlContainedURL_signed, {\n      method: \"PUT\",\n      body: htmlContainedString,\n      headers: {\n        \"Content-Type\": \"text/html\",\n        \"x-amz-acl\": \"public-read\",\n      },\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\n            \"[putHTMLContainedToSigned]: Network response was not ok\",\n          );\n        }\n        return response;\n      })\n      .then((data) => {\n        Logger.log(\"[putHTMLContainedToSigned]: Response from server:\", data);\n        resolve(data);\n      });\n  });\n}\n","import { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { DATA_ID_STRING } from \"../constants\";\n\nexport async function getIfCurrentlyActiveBCK() {\n  return new Promise(function (res) {\n    chrome.tabs.query({}, function (tabs) {\n      let numTabs: number = tabs.length;\n      let numTabsChecked: number = 0;\n      let mllwtlFramePresent: boolean = false;\n      for (let i = 0; i < numTabs; i++) {\n        sendMessageToContentScript(tabs[i].id!, {\n          intent: \"getSharedMemoryDOM\",\n          key: \"webSocketConnected\",\n        }).then(function (response): void {\n          numTabsChecked++;\n          if (response) {\n            mllwtlFramePresent = true;\n          }\n          if (numTabsChecked === numTabs) {\n            res(mllwtlFramePresent);\n          }\n        });\n      }\n    });\n  });\n}\n\nexport function getIfCurrentlyActiveDOM() {\n  return new Promise((resolve) => {\n    let frame: HTMLIFrameElement | null = document.querySelector(\n      `[id^=${DATA_ID_STRING}]`,\n    );\n    if (frame) {\n      resolve(true);\n    } else {\n      resolve(false);\n    }\n  });\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { BADGE_COLOR } from \"../constants\";\nimport { sendMessageToBackground } from \"../utils/messaging-helpers\";\n\nexport function getBadgeProperties(): Promise<{\n  text: string;\n  textColor: chrome.action.ColorArray;\n  backgroundColor: chrome.action.ColorArray;\n}> {\n  return new Promise((resolve) => {\n    if (!chrome.action) {\n      sendMessageToBackground({\n        intent: \"getBadgeProperties\",\n      }).then((response) => {\n        resolve(response);\n      });\n    }\n    chrome.action.getBadgeText({}, (text) => {\n      chrome.action.getBadgeTextColor({}, (textColor) => {\n        chrome.action.getBadgeBackgroundColor({}, (backgroundColor) => {\n          Logger.log(\"[getBadgeProperties]:\", text, textColor, backgroundColor);\n          resolve({ text, textColor, backgroundColor });\n        });\n      });\n    });\n  });\n}\n\nexport function restoreBadgeProperties() {\n  return new Promise((resolve) => {\n    try {\n      if (!chrome.action) {\n        sendMessageToBackground({\n          intent: \"restoreBadgeProperties\",\n        }).then((response) => {\n          resolve(response);\n        });\n      }\n      getLocalStorage(\"badgeText\", true).then((text) => {\n        getLocalStorage(\"badgeTextColor\", true).then((textColor) => {\n          getLocalStorage(\"badgeBackgroundColor\", true).then(\n            (backgroundColor) => {\n              Logger.log(\n                `[restoreBadgeProperties]: ${text}, ${JSON.parse(textColor)}, ${JSON.parse(backgroundColor)}`,\n              );\n              chrome.action.setBadgeText({ text: text });\n              chrome.action.setBadgeTextColor({ color: JSON.parse(textColor) });\n              chrome.action.setBadgeBackgroundColor({\n                color: JSON.parse(backgroundColor),\n              });\n              resolve(true);\n            },\n          );\n        });\n      });\n    } catch (error) {\n      Logger.log(\"[restoreBadgeProperties]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n\nexport function showBadge(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    try {\n      // if chrome action not defined, send message to background\n      if (!chrome.action) {\n        sendMessageToBackground({\n          intent: \"showBadge\",\n        }).then((response) => {\n          resolve(response);\n        });\n      }\n\n      // Get current badge properties\n      const { text, textColor, backgroundColor } = await getBadgeProperties();\n\n      // Save current badge properties in local storage\n      await setLocalStorage(\"badgeText\", text);\n      await setLocalStorage(\"badgeTextColor\", JSON.stringify(textColor));\n      await setLocalStorage(\n        \"badgeBackgroundColor\",\n        JSON.stringify(backgroundColor),\n      );\n\n      chrome.action.setBadgeTextColor({ color: BADGE_COLOR });\n      chrome.action.setBadgeText({ text: \".\" });\n      chrome.action.setBadgeBackgroundColor({ color: BADGE_COLOR });\n      resolve(true);\n    } catch (error) {\n      Logger.log(\"[showBadge]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n\nexport function hideBadge(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    try {\n      // if chrome action not defined, send message to background\n      if (!chrome.action) {\n        sendMessageToBackground({\n          intent: \"hideBadge\",\n        }).then((response) => {\n          resolve(response);\n        });\n      }\n      chrome.action.setBadgeText({ text: \"\" });\n      await restoreBadgeProperties();\n      resolve(true);\n    } catch (error) {\n      Logger.log(\"[hideBadge]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n\nexport function shouldShowBadge(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      getLocalStorage(\"shouldShowBadge\").then((result) => {\n        if (result === undefined || !result.hasOwnProperty(\"shouldShowBadge\")) {\n          resolve(false);\n        } else {\n          let shouldShowBadge = result[\"shouldShowBadge\"]\n            .toString()\n            .toLowerCase();\n          if (shouldShowBadge === \"true\") {\n            resolve(true);\n          } else {\n            resolve(false);\n          }\n        }\n      });\n    } catch (error) {\n      Logger.log(\"[shouldShowBadge]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n\nexport function showBadgeIfShould(): Promise<boolean> {\n  return new Promise((resolve) => {\n    shouldShowBadge().then((result) => {\n      if (result) {\n        showBadge().then(() => {\n          resolve(true);\n        });\n      } else {\n        resolve(false);\n      }\n    });\n  });\n}\n\nexport function hideBadgeIfShould(): Promise<boolean> {\n  return new Promise((resolve) => {\n    shouldShowBadge().then((result) => {\n      if (result) {\n        hideBadge().then(() => {\n          resolve(true);\n        });\n      } else {\n        resolve(false);\n      }\n    });\n  });\n}\n\nexport function setShouldShowBadge(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      setLocalStorage(\"shouldShowBadge\", true).then(() => {\n        resolve(true);\n      });\n    } catch (error) {\n      Logger.log(\"[setShouldShowBadge]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n\nexport function unsetShouldShowBadge(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      setLocalStorage(\"shouldShowBadge\", false).then(() => {\n        resolve(true);\n      });\n    } catch (error) {\n      Logger.log(\"[unsetShouldShowBadge]: error \" + error);\n      resolve(false);\n    }\n  });\n}\n","import { Logger } from \"../logger/logger\";\nimport {\n  disableHeadersForPOST,\n  enableHeadersForPOST,\n} from \"../dnr/dnr-helpers\";\nimport { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { saveJSON } from \"../post-requests/post-helpers\";\nimport { addToRequestInfoStorage } from \"../request-info/request-info-helpers\";\nimport { tellToDeleteIframe } from \"../iframe/message-background\";\n\nexport function handleGetRequest(\n  method_endpoint: string,\n  method_headers: string,\n  fastLane: boolean,\n  orgId: string,\n  recordID: string,\n  htmlVisualizer: boolean,\n  htmlContained: boolean,\n  removeImages: boolean,\n  removeCSSselectors: string,\n  classNamesToBeRemoved: string,\n  htmlTransformer: string,\n  BATCH_execution: boolean,\n  batch_id: string,\n  actions: string,\n  delayBetweenExecutions: number = 500,\n  openTab: boolean = false,\n  openTabOnlyIfMust: boolean = false,\n  saveHtml: boolean = true,\n  saveMarkdown: boolean = true,\n  cerealObject: string = \"{}\",\n  refPolicy: string = \"\",\n) {\n  return new Promise(async function (res) {\n    await disableHeadersForPOST();\n    // make a fetch/post to the endpoint with the payload (if not empty)\n    // then save the JSON response to the server\n    // and return the response to the caller\n    const requestOptions: {\n      method: string;\n      credentials: RequestCredentials;\n      body?: any;\n      headers?: any;\n    } = {\n      method: \"GET\",\n      // we're omitting credentials to avoid leaking cookies & session data\n      // this is a security measure to protect the user's data\n      credentials: \"omit\",\n    };\n    if (method_headers !== \"no_headers\") {\n      try {\n        method_headers = JSON.parse(method_headers);\n        requestOptions[\"headers\"] = method_headers;\n      } catch (e) {}\n    }\n    let statusCode: number = 1000;\n    fetch(method_endpoint, requestOptions)\n      .then((response) => {\n        statusCode = response.status;\n        return response.text();\n      })\n      .then(async (html_or_json: string) => {\n        // could be json or html\n        // Logger.log(\"HTML or JSON:\", html_or_json);\n        try {\n          JSON.parse(html_or_json);\n          await saveJSON(\n            recordID,\n            JSON.parse(html_or_json),\n            orgId,\n            fastLane,\n            method_endpoint,\n            BATCH_execution,\n            batch_id,\n            statusCode,\n          );\n          await tellToDeleteIframe(\n            recordID,\n            BATCH_execution,\n            delayBetweenExecutions,\n          );\n        } catch (_) {\n          Logger.log(\"[handleGetRequest]: Not JSON\");\n          Logger.log(\n            \"[handleGetRequest]: HTML:\",\n            html_or_json.substring(0, 140),\n          );\n          Logger.log(\"[handleGetRequest]: BATCH_execution:\", BATCH_execution);\n          Logger.log(\"[handleGetRequest]: batch_id:\", batch_id);\n          await addToRequestInfoStorage({\n            recordID: recordID,\n            isPDF: false,\n            isOfficeDoc: false,\n            statusCode: statusCode,\n          });\n          // not json\n          // query a tab and send a message\n          // then save the message to the server\n          chrome.tabs.query({}, async function (tabs) {\n            for (let i = 0; i < tabs.length; i++) {\n              let response = await sendMessageToContentScript(tabs[i].id!, {\n                intent: \"processCrawl\",\n                recordID: recordID,\n                fastLane: fastLane,\n                orgId: orgId,\n                htmlVisualizer: htmlVisualizer,\n                htmlContained: htmlContained,\n                html_string: html_or_json,\n                method_endpoint: method_endpoint,\n                removeImages: removeImages,\n                removeCSSselectors: removeCSSselectors,\n                classNamesToBeRemoved: classNamesToBeRemoved,\n                htmlTransformer: htmlTransformer,\n                BATCH_execution: BATCH_execution,\n                batch_id: batch_id,\n                statusCode: statusCode,\n                delayBetweenExecutions: delayBetweenExecutions,\n                openTab: openTab,\n                openTabOnlyIfMust: openTabOnlyIfMust,\n                saveHtml: saveHtml,\n                saveMarkdown: saveMarkdown,\n                cerealObject: cerealObject,\n              });\n              if (response !== null) {\n                break;\n              }\n            }\n          });\n        }\n        await enableHeadersForPOST();\n        res(true);\n      })\n      .catch((error) => {\n        Logger.log(\"Error:\", error);\n      });\n  });\n}\n","export function testCSP(onload_callback = function () {}): void {\n  const img: HTMLImageElement = new Image();\n  img.src =\n    \"https://mellowtel-bucket.s3.us-east-1.amazonaws.com/lightning-boltrepo-com.svg\";\n  img.onload = onload_callback;\n  img.id = \"test-csp-image\";\n  img.style.display = \"none\";\n  document.body.appendChild(img);\n}\n\nexport function removeCSPTestImage(): void {\n  const img: HTMLImageElement | null = document.getElementById(\n    \"test-csp-image\",\n  ) as HTMLImageElement;\n  if (img) img.remove();\n}\n\nexport function isCSPEnabled(): Promise<boolean> {\n  return new Promise((resolve) => {\n    document.addEventListener(\"securitypolicyviolation\", (e) => {\n      if (\n        e.blockedURI ===\n        \"https://m-bucket-light.s3.amazonaws.com/lightning-boltrepo-com.svg\"\n      ) {\n        removeCSPTestImage();\n        resolve(true);\n      }\n    });\n    testCSP(() => {\n      removeCSPTestImage();\n      resolve(false);\n    });\n  });\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { MAX_QUEUE_SIZE } from \"../constants\";\n\nexport async function insertInQueue(dataPacket: any, BATCH_execution: boolean) {\n  return new Promise((resolve) => {\n    let queueKey = BATCH_execution ? \"queue_batch\" : \"queue\";\n    getLocalStorage(queueKey).then((result) => {\n      if (result === undefined || !result.hasOwnProperty(queueKey))\n        result = { [queueKey]: [] };\n      let queue = result[queueKey];\n      if (queue.length > MAX_QUEUE_SIZE && !BATCH_execution) {\n        // ignore this packet\n        Logger.log(\"[] : queue is full. Ignoring this packet\");\n        resolve(false);\n      } else {\n        queue.push(dataPacket);\n        setLocalStorage(queueKey, queue).then(() => {\n          resolve(true);\n        });\n      }\n    });\n  });\n}\n\n// Get last from queue (by shifting. Not optimized, but it's kind of ok because n is small)\nexport async function getLastFromQueue(BATCH_execution: boolean): Promise<{\n  url: string;\n  recordID: string;\n  eventData: any;\n  waitForElement: string;\n  shouldSandbox: boolean;\n  sandBoxAttributes: string;\n  batch_id: string;\n  triggersDownload: boolean;\n  skipHeaders: boolean;\n  hostname: string;\n  htmlVisualizer: boolean;\n  htmlContained: boolean;\n  screenWidth: string;\n  screenHeight: string;\n  POST_request: boolean;\n  GET_request: boolean;\n  methodEndpoint: string;\n  methodPayload: string;\n  methodHeaders: any;\n  actions: string;\n  delayBetweenExecutions: number;\n  openTab: boolean;\n  openTabOnlyIfMust: boolean;\n  pascoli: boolean;\n  refPolicy: string;\n}> {\n  return new Promise((resolve) => {\n    let queueKey = BATCH_execution ? \"queue_batch\" : \"queue\";\n    getLocalStorage(queueKey).then((result) => {\n      if (result === undefined || !result.hasOwnProperty(queueKey))\n        result = { [queueKey]: [] };\n      let queue = result[queueKey];\n      if (queue.length === 0)\n        return resolve({\n          url: \"\",\n          recordID: \"0123\",\n          eventData: {},\n          waitForElement: \"none\",\n          shouldSandbox: false,\n          sandBoxAttributes: \"\",\n          batch_id: \"\",\n          triggersDownload: false,\n          skipHeaders: false,\n          hostname: \"\",\n          htmlVisualizer: false,\n          htmlContained: false,\n          screenWidth: \"1024px\",\n          screenHeight: \"768px\",\n          POST_request: false,\n          GET_request: false,\n          methodEndpoint: \"\",\n          methodPayload: \"no_payload\",\n          methodHeaders: \"no_headers\",\n          actions: \"[]\",\n          delayBetweenExecutions: 500,\n          openTab: false,\n          openTabOnlyIfMust: false,\n          pascoli: false,\n          refPolicy: \"\",\n        });\n      let last = queue.shift();\n      setLocalStorage(queueKey, queue).then(() => {\n        resolve(last);\n      });\n    });\n  });\n}\n","import { showBadgeIfShould } from \"../transparency/badge-settings\";\nimport { DATA_ID_IFRAME } from \"../constants\";\nimport { getLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\n\nexport async function insertIFrame(\n  url: string,\n  id: string,\n  onload = function () {},\n  data_id = \"\",\n  should_sandbox = false,\n  sandbox_attributes = \"\",\n  htmlVisualizer = false,\n  htmlContained = false,\n  screenWidth: string = \"1024px\",\n  screenHeight: string = \"768px\",\n  eventData: string = \"\",\n  pascoli: boolean = false,\n  refPolicy: string = \"\",\n) {\n  let iframe: HTMLIFrameElement = document.createElement(\"iframe\");\n  iframe.id = id;\n  // credentialles iframe to avoid leaking cookies & session data\n  // https://developer.mozilla.org/en-US/docs/Web/Security/IFrame_credentialless\n  // Explanation:\n  // It provides a mechanism for developers to load third-party resources\n  // in <iframe>s using a new, ephemeral context.\n  // It doesn't have access to its regular origin's network, cookies, and storage data.\n  // It uses a new context local to the top-level document lifetime\n  // @ts-ignore\n  iframe.credentialless = true;\n\n  if (should_sandbox) {\n    iframe.setAttribute(\"sandbox\", \"\");\n    if (sandbox_attributes !== \"\")\n      iframe.setAttribute(\"sandbox\", sandbox_attributes);\n  }\n  if (data_id !== \"\") iframe.setAttribute(\"data-id\", data_id);\n  iframe.src = url;\n  iframe.onload = onload;\n  if (refPolicy !== \"\") iframe.referrerPolicy = refPolicy as ReferrerPolicy;\n\n  if (pascoli) {\n    const pascoliIframe = document.createElement(\"iframe\");\n    let htmlFileNamePath = await getLocalStorage(\"mllwtl_HTMLFileName\", true);\n    Logger.log(\"[pascoli]: htmlFileNamePath\", htmlFileNamePath);\n    pascoliIframe.src = chrome.runtime.getURL(htmlFileNamePath);\n    pascoliIframe.style.display = \"none\";\n    pascoliIframe.id = id;\n    document.body.appendChild(pascoliIframe);\n    pascoliIframe.onload = function () {\n      const contentWindow = pascoliIframe.contentWindow;\n      if (contentWindow) {\n        contentWindow.postMessage(\n          {\n            url: url,\n            id: id,\n            data_id: data_id,\n            should_sandbox: should_sandbox,\n            sandbox_attributes: sandbox_attributes,\n            htmlVisualizer: htmlVisualizer,\n            htmlContained: htmlContained,\n            screenWidth: screenWidth,\n            screenHeight: screenHeight,\n            eventData: eventData,\n            pascoli: false,\n            refPolicy: refPolicy,\n          },\n          \"*\",\n        );\n      }\n    };\n  } else if (htmlVisualizer) {\n    iframe.style.width = screenWidth;\n    // don't overwrite the height if htmlVisualizer is true\n    iframe.style.height = \"0px\";\n    iframe.style.border = \"none\";\n    iframe.style.opacity = \"0\";\n    document.body.appendChild(iframe);\n  } else if (htmlContained) {\n    iframe.style.width = screenWidth;\n    iframe.style.height = screenHeight;\n    iframe.style.border = \"none\";\n    iframe.style.opacity = \"0\";\n    const div: HTMLDivElement = document.createElement(\"div\");\n    div.style.overflow = \"hidden\";\n    div.appendChild(iframe);\n    div.style.position = \"fixed\"; // \"absolute\";\n    div.style.top = \"0\";\n    div.style.left = \"0\";\n    div.style.zIndex = \"-9999\";\n    div.id = \"div-\" + id;\n    document.body.prepend(div);\n  } else {\n    iframe.style.width = screenWidth;\n    iframe.style.height = screenHeight;\n    iframe.style.display = \"none\";\n    document.body.prepend(iframe);\n  }\n  if (data_id === DATA_ID_IFRAME) {\n    showBadgeIfShould().then();\n  }\n}\n\nexport function inIframe(): boolean {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}\n","import { Logger } from \"../logger/logger\";\n\nexport function addToRequestMessageStorage(record: any) {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsMessageInfo\"], function (result) {\n        let records: any[] = result.recordsMessageInfo || [];\n        let recordExists: boolean = false;\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID === record.recordID) {\n            records[i] = record;\n            recordExists = true;\n            break;\n          }\n        }\n        if (!recordExists) {\n          records.push(record);\n        }\n        chrome.storage.local.set({ recordsMessageInfo: records }, function () {\n          res(\"done\");\n        });\n      });\n    } catch (e) {\n      Logger.log(\"addToRequestMessageStorage error\", e);\n      res(\"done\");\n    }\n  });\n}\n\nexport function deleteFromRequestMessageStorage(recordID: string) {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsMessageInfo\"], function (result) {\n        let records: any[] = result.recordsMessageInfo || [];\n        let newRecords: any[] = [];\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID !== recordID) {\n            newRecords.push(records[i]);\n          }\n        }\n        chrome.storage.local.set(\n          { recordsMessageInfo: newRecords },\n          function () {\n            res(\"done\");\n          },\n        );\n      });\n    } catch (e) {\n      Logger.log(\"deleteFromRequestInfoStorage error\", e);\n      res(\"done\");\n    }\n  });\n}\n\nexport function getFromRequestMessageStorage(recordID: string): Promise<any> {\n  return new Promise(function (res) {\n    try {\n      chrome.storage.local.get([\"recordsMessageInfo\"], function (result) {\n        let records: any[] = result.recordsMessageInfo || [];\n        for (let i = 0; i < records.length; i++) {\n          if (records[i].recordID === recordID) {\n            res(records[i]);\n            return;\n          }\n        }\n        res({ statusCode: 1000, isPDF: false });\n      });\n    } catch (e) {\n      Logger.log(\"getFromRequestMessageStorage error\", e);\n      res(null);\n    }\n  });\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { isInSW } from \"../utils/utils\";\nimport { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { CerealObject } from \"./cereal-types\";\n\nexport function cerealMain(\n  cerealObject: string,\n  recordID: string,\n  htmlString: string,\n) {\n  return new Promise(async (resolve) => {\n    Logger.log(\"[cerealMain] => Starting Cereal:\", cerealObject);\n    Logger.log(\"[cerealMain] => Record ID:\", recordID);\n    const parsedCerealObject: CerealObject = JSON.parse(cerealObject);\n    const maxTimeout = parsedCerealObject.maxTimeout || 10000;\n\n    // Set timeout to resolve empty object after maxTimeout\n    const timeoutPromise = new Promise((timeoutResolve) => {\n      setTimeout(() => timeoutResolve({}), maxTimeout);\n    });\n\n    const mainLogic = async () => {\n      const inSW = await isInSW();\n      Logger.log(\"[cerealMain] => In SW:\", inSW);\n\n      if (!inSW) {\n        Logger.log(\"[cerealMain] => In Content Script, Delegating to SW\");\n        const resultReceived = await new Promise((innerResolve) => {\n          chrome.runtime.sendMessage(\n            {\n              intent: \"mllwtl_handleCerealRequest\",\n              cerealObject: cerealObject,\n              recordID: recordID,\n              htmlString: htmlString,\n            },\n            (response) => {\n              if (chrome.runtime.lastError) {\n                Logger.log(\n                  \"Hey, error in RUNTIME Error:\",\n                  chrome.runtime.lastError,\n                );\n              }\n              Logger.log(\n                \"[cerealMain] => Response from SW @@@@@@@@@@@@@@:\",\n                response,\n              );\n              innerResolve(response);\n            },\n          );\n        });\n\n        Logger.log(\"[cerealMain] => ## Result Received ##:\", resultReceived);\n        return resultReceived;\n      } else {\n        // The following code only runs in service worker\n        // Check for existing cereal tab in storage\n        const storedTab = await getLocalStorage(\n          \"mllwtl_cereal_frame_tab\",\n          true,\n        );\n        Logger.log(\"[cerealMain] => Stored Tab:\", storedTab);\n        let targetTabId: number | null = storedTab?.tabId ?? null;\n        Logger.log(\"[cerealMain] => Target Tab ID:\", targetTabId);\n\n        if (targetTabId) {\n          // Verify tab still exists\n          Logger.log(\"[cerealMain] => Verifying Tab:\", targetTabId);\n          try {\n            const currentTabId = targetTabId;\n            const tabExists = await new Promise<boolean>((resolve) => {\n              chrome.tabs.get(currentTabId, (tab) => {\n                resolve(!chrome.runtime.lastError && !!tab); // Convert tab to boolean\n              });\n            });\n\n            Logger.log(\"[cerealMain] => Tab Exists:\", tabExists);\n\n            if (!tabExists) {\n              targetTabId = null;\n            }\n          } catch {\n            targetTabId = null;\n          }\n        }\n\n        if (!targetTabId) {\n          Logger.log(\"[cerealMain] => No Stored Tab, Finding New Tab\");\n          const tabs = await chrome.tabs.query({});\n          for (const tab of tabs) {\n            if (tab.id === undefined) continue;\n\n            try {\n              const response = await sendMessageToContentScript(tab.id, {\n                intent: \"mllwtl_initCerealFrame\",\n                cerealObject: cerealObject, // Already a string\n              });\n\n              if (response?.success) {\n                targetTabId = tab.id;\n                Logger.log(\"[cerealMain] => Found Suitable Tab:\", targetTabId);\n                await setLocalStorage(\"mllwtl_cereal_frame_tab\", {\n                  tabId: targetTabId,\n                });\n                break;\n              }\n            } catch {\n              continue;\n            }\n          }\n        }\n\n        if (!targetTabId) {\n          Logger.log(\"[cerealMain] => No Suitable Tab Found\");\n          return { success: false, message: \"not tab found\" }; // No suitable tab found\n        }\n\n        // Send the actual processing message\n        return await sendMessageToContentScript(targetTabId, {\n          intent: \"mllwtl_processCereal\",\n          cerealObject: cerealObject, // Already a string\n          recordID: recordID,\n          htmlString: htmlString,\n        });\n      }\n    };\n\n    const result = await Promise.race([timeoutPromise, mainLogic()]);\n    Logger.log(\"[cerealMain] => FINAL Result:\", result);\n    resolve(result);\n  });\n}\n\nexport function refreshCereal() {\n  return new Promise(async (resolve) => {\n    // check if the tab with cereal exists.\n    // if it does, send message to refresh the frame and return success\n    // if it doesn't, return failure\n    const storedTab = await getLocalStorage(\"mllwtl_cereal_frame_tab\", true);\n    Logger.log(\"[refreshCereal] => Stored Tab:\", storedTab);\n    let targetTabId: number | null = storedTab?.tabId ?? null;\n    Logger.log(\"[refreshCereal] => Target Tab ID:\", targetTabId);\n\n    if (targetTabId === null) {\n      Logger.log(\"[refreshCereal] => No Stored tab found.\");\n      resolve({ success: false, message: \"not tab found\" });\n    }\n\n    // Verify tab still exists\n    Logger.log(\"[refreshCereal] => Verifying Tab:\", targetTabId);\n    try {\n      const tabExists = await new Promise<boolean>((res) => {\n        if (targetTabId != null) {\n          chrome.tabs.get(targetTabId, (tab) => {\n            res(!chrome.runtime.lastError && !!tab); // Convert tab to boolean\n          });\n        }\n      });\n\n      Logger.log(\"[refreshCereal] => Tab Exists:\", tabExists);\n\n      if (!tabExists) {\n        targetTabId = null;\n      }\n    } catch {\n      targetTabId = null;\n    }\n\n    if (targetTabId === null) {\n      Logger.log(\"[refreshCereal] => Tab does not exist.\");\n      resolve({ success: false, message: \"not tab found\" });\n    }\n\n    // now we know the tab exists, send message to refresh the frame\n    Logger.log(\n      \"[refreshCereal] => Sending message to refresh tab:\",\n      targetTabId,\n    );\n    if (targetTabId != null) {\n      await sendMessageToContentScript(targetTabId, {\n        intent: \"mllwtl_refreshCerealFrame\",\n      });\n      resolve({ success: true });\n    }\n  });\n}\n","import { tellToDeleteIframe } from \"../message-background\";\nimport { getIdentifier } from \"../../utils/identity-helpers\";\nimport { Logger } from \"../../logger/logger\";\nimport { getFromRequestInfoStorage } from \"../../request-info/request-info-helpers\";\nimport { getFromRequestMessageStorage } from \"../../request-message/request-message-helpers\";\nimport { cerealMain } from \"../../cereal/cereal-index\";\n\nexport async function saveCrawl(\n  recordID: string,\n  content: string,\n  markDown: string,\n  fastLane: boolean,\n  url: string,\n  htmlTransformer: string,\n  orgId: string,\n  saveText: string,\n  saveHtml: boolean,\n  saveMarkdown: boolean,\n  BATCH_execution: boolean,\n  batch_id: string,\n  website_unreachable: boolean = false,\n  delayBetweenExecutions: number = 500,\n  openTabOnlyIfMust: boolean = false,\n  cerealObject: string = \"{}\",\n) {\n  Logger.log(\" Saving Crawl \");\n  Logger.log(\"RecordID:\", recordID);\n\n  let cereal_result: any = {};\n  Logger.log(\"[postStringMarkDownToUrl] : cerealObject => \");\n  Logger.log(cerealObject);\n  Logger.log(\"############################################\");\n  try {\n    if (JSON.parse(cerealObject).useCereal) {\n      Logger.log(\"[postStringMarkDownToUrl] : using cereal []\");\n      cereal_result = await cerealMain(cerealObject, recordID, content);\n      Logger.log(\"[postStringMarkDownToUrl] : cereal_result => \");\n      Logger.log(cereal_result);\n      Logger.log(\"############################################\");\n      // if not JSON object, then make it one\n      /*if (typeof cereal_result !== \"object\") {\n        cereal_result = {\n          error: \"cereal_result is not an object\",\n        };\n      }*/\n    }\n  } catch (e) {\n    Logger.log(\n      \"[postStringMarkDownToUrl] : error in parsing cerealObject => \",\n      e,\n    );\n    cereal_result = {};\n  }\n\n  getIdentifier().then(async (node_identifier: string) => {\n    let requestMessageInfo = await getFromRequestMessageStorage(recordID);\n    Logger.log(\"###### Request Message Info ######\");\n    Logger.log(requestMessageInfo);\n    Logger.log(\"##############################\");\n    let endpoint: string =\n      \"https://afcha2nmzsir4rr4zbta4tyy6e0fxjix.lambda-url.us-east-1.on.aws/\";\n    if (requestMessageInfo && requestMessageInfo.save_html_endpoint) {\n      Logger.log(\n        \"Using save_html_endpoint from requestMessageInfo:\",\n        requestMessageInfo.save_html_endpoint,\n      );\n      endpoint = requestMessageInfo.save_html_endpoint;\n    }\n    Logger.log(\"Node Identifier:\", node_identifier);\n    let moreInfo: any = await getFromRequestInfoStorage(recordID);\n    Logger.log(\"[saveCrawl] => More Info:\", moreInfo);\n\n    let bodyData: any = {\n      // content: content,\n      // markDown: markDown,\n      recordID: recordID,\n      fastLane: fastLane,\n      url: url,\n      htmlTransformer: htmlTransformer,\n      orgId: orgId,\n      saveText: saveText,\n      node_identifier: node_identifier,\n      BATCH_execution: BATCH_execution,\n      batch_id: batch_id,\n      final_url: window.location.href,\n      website_unreachable: website_unreachable,\n      statusCode: moreInfo.statusCode,\n      requestMessageInfo: requestMessageInfo,\n      saveHtml: saveHtml,\n      saveMarkdown: saveMarkdown,\n      cereal_result: JSON.stringify(cereal_result),\n    };\n    if (saveHtml) {\n      bodyData[\"content\"] = content;\n    }\n    if (saveMarkdown) {\n      bodyData[\"markDown\"] = markDown;\n    }\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"text/plain\" },\n      body: JSON.stringify(bodyData),\n    };\n\n    Logger.log(\"Sending data to server:\", bodyData);\n\n    fetch(endpoint, requestOptions)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        return response.json();\n      })\n      .then(async (data) => {\n        Logger.log(\"Response from server:\", data);\n        await tellToDeleteIframe(\n          recordID,\n          BATCH_execution,\n          delayBetweenExecutions,\n        );\n        return data;\n      })\n      .catch(async (error) => {\n        Logger.error(\"Error:\", error);\n        await tellToDeleteIframe(\n          recordID,\n          BATCH_execution,\n          delayBetweenExecutions,\n        );\n        return error;\n      });\n  });\n}\n","import {\n  MAX_PARALLEL_EXECUTIONS,\n  DATA_ID_IFRAME,\n  DATA_ID_IFRAME_BATCH,\n  MAX_PARALLEL_EXECUTIONS_BATCH,\n} from \"../constants\";\nimport { insertInQueue } from \"./queue-crawl\";\nimport { setLifespanForIframe } from \"./reset-crawl\";\nimport { disableXFrameHeaders } from \"../dnr/dnr-helpers\";\nimport { detectBrowser, getFrameCount } from \"../utils/utils\";\nimport { insertIFrame } from \"../utils/iframe-helpers\";\nimport { sendToBackgroundToSeeIfTriggersDownload } from \"../utils/triggers-download-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { sendMessageToBackground } from \"../utils/messaging-helpers\";\nimport { saveCrawl } from \"../iframe/save/save-crawl\";\nimport { getFromRequestInfoStorage } from \"../request-info/request-info-helpers\";\n\nfunction fromDataPacketToNecessaryElements(dataPacket: { [key: string]: any }) {\n  Logger.log(\"[fromDPToNElements] => \", dataPacket);\n  let fastLane: boolean = dataPacket.hasOwnProperty(\"fastLane\")\n    ? dataPacket.fastLane.toString().toLowerCase() === \"true\"\n    : false;\n  let orgId: string = dataPacket.hasOwnProperty(\"orgId\")\n    ? dataPacket.orgId\n    : \"\";\n  let recordID: string = dataPacket.recordID;\n  let url: string = dataPacket.url;\n  let waitBeforeScraping: number =\n    parseInt(dataPacket.waitBeforeScraping) * 1000;\n  let saveHtml: boolean = dataPacket.hasOwnProperty(\"saveHtml\")\n    ? dataPacket.saveHtml.toString().toLowerCase() === \"true\"\n    : false;\n  let saveMarkdown = dataPacket.hasOwnProperty(\"saveMarkdown\")\n    ? dataPacket.saveMarkdown.toString().toLowerCase() === \"true\"\n    : false;\n  let removeCSSselectors: string = dataPacket.removeCSSselectors;\n  let classNamesToBeRemoved: string[] =\n    dataPacket.classNamesToBeRemoved !== undefined\n      ? JSON.parse(dataPacket.classNamesToBeRemoved)\n      : [];\n  let waitForElement: string = dataPacket.hasOwnProperty(\"waitForElement\")\n    ? dataPacket.waitForElement\n    : \"none\";\n  let waitForElementTime: number = dataPacket.hasOwnProperty(\n    \"waitForElementTime\",\n  )\n    ? parseInt(dataPacket.waitForElementTime)\n    : 0;\n  let removeImages: boolean = dataPacket.hasOwnProperty(\"removeImages\")\n    ? dataPacket.removeImages.toString().toLowerCase() === \"true\"\n    : false;\n  let htmlTransformer = dataPacket.hasOwnProperty(\"htmlTransformer\")\n    ? dataPacket.htmlTransformer\n    : \"none\";\n  let isPDF = url.includes(\"?\")\n    ? url.split(\"?\")[0].endsWith(\".pdf\")\n    : url.endsWith(\".pdf\");\n  let saveText = dataPacket.saveText.toString().toLowerCase() === \"true\";\n  let shouldSandbox = dataPacket.hasOwnProperty(\"shouldDisableJS\")\n    ? dataPacket.shouldDisableJS.toString().toLowerCase() === \"true\"\n    : false;\n  let sandBoxAttributes = dataPacket.hasOwnProperty(\"sandBoxAttributes\")\n    ? dataPacket.sandBoxAttributes\n    : \"\";\n  let triggersDownload = dataPacket.hasOwnProperty(\"triggersDownload\")\n    ? dataPacket.triggersDownload.toString().toLowerCase() === \"true\"\n    : false;\n  let skipHeaders = dataPacket.hasOwnProperty(\"skipHeaders\")\n    ? dataPacket.skipHeaders.toString().toLowerCase() === \"true\"\n    : false;\n  let fetchInstead = dataPacket.hasOwnProperty(\"fetchInstead\")\n    ? dataPacket.fetchInstead.toString().toLowerCase() === \"true\"\n    : false;\n  let htmlVisualizer = dataPacket.hasOwnProperty(\"htmlVisualizer\")\n    ? dataPacket.htmlVisualizer.toString().toLowerCase() === \"true\"\n    : false;\n  let htmlContained = dataPacket.hasOwnProperty(\"htmlContained\")\n    ? dataPacket.htmlContained.toString().toLowerCase() === \"true\"\n    : false;\n  let screenWidth: string = dataPacket.hasOwnProperty(\"screen_width\")\n    ? dataPacket.screen_width\n    : \"1024px\";\n  let screenHeight: string = dataPacket.hasOwnProperty(\"screen_height\")\n    ? dataPacket.screen_height\n    : \"768px\";\n  let method: string = dataPacket.hasOwnProperty(\"method\")\n    ? dataPacket.method\n    : \"NONE\";\n  let POST_request = false;\n  let GET_request = false;\n  if (method === \"POST\") {\n    POST_request = true;\n  }\n  if (method === \"GET\") {\n    GET_request = true;\n  }\n  let methodEndpoint: string = dataPacket.hasOwnProperty(\"method_endpoint\")\n    ? dataPacket.method_endpoint\n    : \"\";\n  let methodPayload: string = dataPacket.hasOwnProperty(\"method_payload\")\n    ? dataPacket.method_payload\n    : \"no_payload\";\n  let methodHeaders: string = dataPacket.hasOwnProperty(\"method_headers\")\n    ? dataPacket.method_headers\n    : \"no_headers\";\n  let actions: string = dataPacket.hasOwnProperty(\"actions\")\n    ? dataPacket.actions\n    : JSON.stringify([]);\n  let openTab: boolean = dataPacket.hasOwnProperty(\"openTab\")\n    ? dataPacket.openTab.toString().toLowerCase() === \"true\"\n    : false;\n  let openTabOnlyIfMust: boolean = dataPacket.hasOwnProperty(\n    \"openTabOnlyIfMust\",\n  )\n    ? dataPacket.openTabOnlyIfMust.toString().toLowerCase() === \"true\"\n    : false;\n  let pascoli: boolean = dataPacket.hasOwnProperty(\"pascoli\")\n    ? dataPacket.pascoli.toString().toLowerCase() === \"true\"\n    : false;\n  let cerealObject: string = dataPacket.hasOwnProperty(\"cerealObject\")\n    ? dataPacket.cerealObject\n    : \"{}\";\n  let refPolicy: string = dataPacket.hasOwnProperty(\"refPolicy\")\n    ? dataPacket.refPolicy\n    : \"\";\n  let rawData: boolean = dataPacket.hasOwnProperty(\"rawData\")\n    ? dataPacket.rawData.toString().toLowerCase() === \"true\"\n    : false;\n  return {\n    fastLane,\n    orgId,\n    recordID,\n    url,\n    waitBeforeScraping,\n    saveHtml,\n    saveMarkdown,\n    removeCSSselectors,\n    classNamesToBeRemoved,\n    waitForElement,\n    waitForElementTime,\n    removeImages,\n    htmlTransformer,\n    isPDF,\n    saveText,\n    shouldSandbox,\n    sandBoxAttributes,\n    triggersDownload,\n    skipHeaders,\n    fetchInstead,\n    htmlVisualizer,\n    htmlContained,\n    screenWidth,\n    screenHeight,\n    POST_request,\n    GET_request,\n    methodEndpoint,\n    methodPayload,\n    methodHeaders,\n    actions,\n    openTab,\n    openTabOnlyIfMust,\n    pascoli,\n    cerealObject,\n    refPolicy,\n    rawData,\n  };\n}\n\nexport async function preProcessCrawl(\n  dataPacket: { [key: string]: any },\n  BATCH_execution: boolean = false,\n  batch_id: string = \"\",\n  parallelExecutionsBatch: number = 4,\n  delayBetweenExecutions: number = 500, // in ms\n) {\n  Logger.log(\" Data Packet \");\n  Logger.log(dataPacket);\n  Logger.log(\" ----------- \");\n\n  // if BATCH_execution is true:\n  // dataPacket has batch_array (which we have to JSON.parse) and batch_id.\n  // In that case Promise.all over all the batch_array elements\n  // + can avoid getting frameCount and just insert in queue (a different queue)\n  // Inject 4 at a time. Keep the rest in queue and slowly inject them as the\n  // previous ones finish.\n  let promiseArray: Promise<any>[] = [];\n  let dataPacketArray = [];\n  let index_to_arrive: number = 1;\n\n  if (BATCH_execution) {\n    Logger.log(\" BATCH_execution \");\n    dataPacketArray = JSON.parse(dataPacket.batch_array);\n    Logger.log(\" Data Packet Array \");\n    Logger.log(dataPacketArray);\n    Logger.log(\" ----------- \");\n    index_to_arrive =\n      dataPacketArray.length > parallelExecutionsBatch\n        ? parallelExecutionsBatch\n        : dataPacketArray.length;\n    Logger.log(\" Index to arrive \");\n    Logger.log(index_to_arrive);\n    Logger.log(\" ----------- \");\n  } else {\n    dataPacketArray.push(dataPacket);\n  }\n\n  for (let i: number = 0; i < index_to_arrive; i++) {\n    let dataPacket = dataPacketArray[i];\n\n    let {\n      fastLane,\n      orgId,\n      recordID,\n      url,\n      waitBeforeScraping,\n      saveHtml,\n      saveMarkdown,\n      removeCSSselectors,\n      classNamesToBeRemoved,\n      waitForElement,\n      waitForElementTime,\n      removeImages,\n      htmlTransformer,\n      isPDF,\n      saveText,\n      shouldSandbox,\n      sandBoxAttributes,\n      triggersDownload,\n      skipHeaders,\n      fetchInstead,\n      htmlVisualizer,\n      htmlContained,\n      screenWidth,\n      screenHeight,\n      POST_request,\n      GET_request,\n      methodEndpoint,\n      methodPayload,\n      methodHeaders,\n      actions,\n      openTab,\n      openTabOnlyIfMust,\n      pascoli,\n      cerealObject,\n      refPolicy,\n      rawData,\n    } = fromDataPacketToNecessaryElements(dataPacket);\n\n    promiseArray.push(\n      crawlP2P(\n        url,\n        recordID,\n        waitBeforeScraping,\n        saveHtml,\n        saveMarkdown,\n        removeCSSselectors,\n        classNamesToBeRemoved,\n        fastLane,\n        waitForElement,\n        waitForElementTime,\n        removeImages,\n        htmlTransformer,\n        isPDF,\n        saveText,\n        orgId,\n        shouldSandbox,\n        sandBoxAttributes,\n        triggersDownload,\n        skipHeaders,\n        BATCH_execution,\n        batch_id,\n        fetchInstead,\n        htmlVisualizer,\n        htmlContained,\n        screenWidth,\n        screenHeight,\n        POST_request,\n        GET_request,\n        methodEndpoint,\n        methodPayload,\n        methodHeaders,\n        actions,\n        delayBetweenExecutions,\n        openTab,\n        openTabOnlyIfMust,\n        pascoli,\n        cerealObject,\n        refPolicy,\n        rawData,\n      ),\n    );\n  }\n  if (BATCH_execution) {\n    for (let i = index_to_arrive; i < dataPacketArray.length; i++) {\n      let {\n        fastLane,\n        orgId,\n        recordID,\n        url,\n        waitBeforeScraping,\n        saveHtml,\n        saveMarkdown,\n        removeCSSselectors,\n        classNamesToBeRemoved,\n        waitForElement,\n        waitForElementTime,\n        removeImages,\n        htmlTransformer,\n        isPDF,\n        saveText,\n        shouldSandbox,\n        sandBoxAttributes,\n        triggersDownload,\n        skipHeaders,\n        fetchInstead,\n        htmlVisualizer,\n        htmlContained,\n        screenWidth,\n        screenHeight,\n        POST_request,\n        GET_request,\n        methodEndpoint,\n        methodPayload,\n        methodHeaders,\n        actions,\n        openTab,\n        openTabOnlyIfMust,\n        pascoli,\n        cerealObject,\n        refPolicy,\n        rawData,\n      } = fromDataPacketToNecessaryElements(dataPacketArray[i]);\n      let eventData: { [key: string]: any } = {\n        isMCrawl: true,\n        fastLane: fastLane,\n        url_to_crawl: url,\n        recordID: recordID,\n        removeCSSselectors: removeCSSselectors,\n        classNamesToBeRemoved: classNamesToBeRemoved,\n        saveHtml: saveHtml,\n        saveMarkdown: saveMarkdown,\n        waitBeforeScraping: waitBeforeScraping,\n        waitForElement: waitForElement,\n        waitForElementTime: waitForElementTime,\n        removeImages: removeImages,\n        htmlTransformer: htmlTransformer,\n        isPDF: isPDF,\n        saveText: saveText,\n        orgId: orgId,\n        BATCH_execution: BATCH_execution,\n        batch_id: batch_id,\n        fetchInstead: fetchInstead,\n        htmlVisualizer: htmlVisualizer,\n        htmlContained: htmlContained,\n        screenWidth: screenWidth,\n        screenHeight: screenHeight,\n        POST_request: POST_request,\n        GET_request: GET_request,\n        methodEndpoint: methodEndpoint,\n        methodPayload: methodPayload,\n        methodHeaders: methodHeaders,\n        actions: actions,\n        delayBetweenExecutions: delayBetweenExecutions,\n        openTab: openTab,\n        openTabOnlyIfMust: openTabOnlyIfMust,\n        pascoli: pascoli,\n        cerealObject: cerealObject,\n        refPolicy: refPolicy,\n        rawData: rawData,\n      };\n      let dataToBeQueued = {\n        url: dataPacketArray[i].url,\n        recordID: dataPacketArray[i].recordID,\n        eventData: eventData,\n        waitForElement: dataPacketArray[i].waitForElement,\n        shouldSandbox: shouldSandbox,\n        sandBoxAttributes: sandBoxAttributes,\n        triggersDownload: triggersDownload,\n        skipHeaders: skipHeaders,\n        hostname: \"\",\n        htmlVisualizer: htmlVisualizer,\n        htmlContained: htmlContained,\n        screenWidth: screenWidth,\n        screenHeight: screenHeight,\n        POST_request: POST_request,\n        GET_request: GET_request,\n        methodEndpoint: methodEndpoint,\n        methodPayload: methodPayload,\n        methodHeaders: methodHeaders,\n        BATCH_execution: BATCH_execution,\n        batch_id: batch_id,\n        actions: actions,\n        delayBetweenExecutions: delayBetweenExecutions,\n        openTab: openTab,\n        openTabOnlyIfMust: openTabOnlyIfMust,\n        pascoli: pascoli,\n        cerealObject: cerealObject,\n        refPolicy: refPolicy,\n        rawData: rawData,\n      };\n      Logger.log(\" Data to be queued \");\n      Logger.log(dataToBeQueued);\n      Logger.log(\"methodEndpoint: \" + methodEndpoint);\n      Logger.log(\" ----------- \");\n      await insertInQueue(dataToBeQueued, BATCH_execution);\n    }\n  }\n  await Promise.all(promiseArray);\n}\n\nexport function preProcessUrl(url: string, recordID: string): string[] {\n  if (url.startsWith(\"http://\")) url = url.replace(\"http://\", \"https://\");\n  let urlObj = new URL(url);\n  let params = new URLSearchParams(urlObj.search);\n  params.append(\"sb-p2p\", \"true\");\n  params.append(\"should-crawl\", \"true\");\n  params.append(\"record-id\", recordID);\n  urlObj.search = params.toString();\n  let hostname: string = urlObj.hostname;\n  url = urlObj.toString();\n  return [url, hostname];\n}\n\nexport function crawlP2P(\n  url: string,\n  recordID: string,\n  waitBeforeScraping: number,\n  saveHtml: boolean,\n  saveMarkdown: boolean,\n  removeCSSselectors: string,\n  classNamesToBeRemoved: string[],\n  fastLane: boolean,\n  waitForElement: string,\n  waitForElementTime: number,\n  removeImages: boolean,\n  htmlTransformer: string,\n  isPDF: boolean,\n  saveText: boolean,\n  orgId: string,\n  shouldSandbox: boolean,\n  sandBoxAttributes: string,\n  triggersDownload: boolean,\n  skipHeaders: boolean,\n  BATCH_execution: boolean,\n  batch_id: string = \"\",\n  fetchInstead: boolean = false,\n  htmlVisualizer: boolean = false,\n  htmlContained: boolean = false,\n  screenWidth: string = \"1024px\",\n  screenHeight: string = \"768px\",\n  POST_request: boolean = false,\n  GET_request: boolean = false,\n  methodEndpoint: string = \"\",\n  methodPayload: string = \"\",\n  methodHeaders: string = \"\",\n  actions: string = \"\",\n  delayBetweenExecutions: number = 500,\n  openTab: boolean = false,\n  openTabOnlyIfMust: boolean = false,\n  pascoli: boolean = false,\n  cerealObject: string = \"{}\",\n  refPolicy: string = \"\",\n  rawData: boolean = false,\n): Promise<string> {\n  return new Promise((resolve) => {\n    let [url_to_crawl, hostname] = preProcessUrl(url, recordID);\n    Logger.log(\"[ crawlP2P] : url_to_crawl => \" + url_to_crawl);\n    Logger.log(\"[ crawlP2P] : hostname => \" + hostname);\n    let skipCheck = false;\n    if (POST_request || GET_request || openTab) {\n      skipHeaders = true;\n      skipCheck = true;\n    }\n    Promise.all([\n      disableXFrameHeaders(hostname, skipHeaders),\n      sendToBackgroundToSeeIfTriggersDownload(\n        url,\n        triggersDownload,\n        skipCheck,\n        recordID,\n      ),\n    ]).then(async () => {\n      let eventData: { [key: string]: any } = {\n        isMCrawl: true,\n        fastLane: fastLane,\n        url_to_crawl: url_to_crawl,\n        recordID: recordID,\n        removeCSSselectors: removeCSSselectors,\n        classNamesToBeRemoved: classNamesToBeRemoved,\n        saveHtml: saveHtml,\n        saveMarkdown: saveMarkdown,\n        waitBeforeScraping: waitBeforeScraping,\n        waitForElement: waitForElement,\n        waitForElementTime: waitForElementTime,\n        removeImages: removeImages,\n        htmlTransformer: htmlTransformer,\n        isPDF: isPDF,\n        saveText: saveText,\n        orgId: orgId,\n        BATCH_execution: BATCH_execution,\n        batch_id: batch_id,\n        fetchInstead: fetchInstead,\n        htmlVisualizer: htmlVisualizer,\n        htmlContained: htmlContained,\n        screenWidth: screenWidth,\n        screenHeight: screenHeight,\n        POST_request: POST_request,\n        GET_request: GET_request,\n        methodEndpoint: methodEndpoint,\n        methodPayload: methodPayload,\n        methodHeaders: methodHeaders,\n        actions: actions,\n        delayBetweenExecutions: delayBetweenExecutions,\n        openTab: openTab,\n        openTabOnlyIfMust: openTabOnlyIfMust,\n        pascoli: pascoli,\n        cerealObject: cerealObject,\n        refPolicy: refPolicy,\n        rawData: rawData,\n      };\n      let frameCount = getFrameCount(BATCH_execution);\n      let max_parallel_executions = BATCH_execution\n        ? MAX_PARALLEL_EXECUTIONS_BATCH\n        : MAX_PARALLEL_EXECUTIONS;\n      if (frameCount >= max_parallel_executions && !BATCH_execution) {\n        Logger.log(\"Too many iframes on page. Not injecting\");\n        let dataToBeQueued = {\n          url: url,\n          recordID: recordID,\n          eventData: eventData,\n          waitForElement: waitForElement,\n          shouldSandbox: shouldSandbox,\n          sandBoxAttributes: sandBoxAttributes,\n          triggersDownload: triggersDownload,\n          skipHeaders: skipHeaders,\n          hostname: hostname,\n          htmlVisualizer: htmlVisualizer,\n          htmlContained: htmlContained,\n          screenWidth: screenWidth,\n          screenHeight: screenHeight,\n          POST_request: POST_request,\n          GET_request: GET_request,\n          methodEndpoint: methodEndpoint,\n          methodPayload: methodPayload,\n          methodHeaders: methodHeaders,\n          actions: actions,\n          delayBetweenExecutions: delayBetweenExecutions,\n          openTab: openTab,\n          openTabOnlyIfMust: openTabOnlyIfMust,\n          pascoli: pascoli,\n          cerealObject: cerealObject,\n          refPolicy: refPolicy,\n          rawData: rawData,\n        };\n        await insertInQueue(dataToBeQueued, BATCH_execution);\n      } else {\n        await proceedWithActivation(\n          url,\n          recordID,\n          eventData,\n          waitForElement,\n          shouldSandbox,\n          sandBoxAttributes,\n          BATCH_execution,\n          batch_id,\n          triggersDownload,\n          skipHeaders,\n          hostname,\n          htmlVisualizer,\n          htmlContained,\n          screenWidth,\n          screenHeight,\n          POST_request,\n          GET_request,\n          methodEndpoint,\n          methodPayload,\n          methodHeaders,\n          actions,\n          delayBetweenExecutions,\n          openTab,\n          openTabOnlyIfMust,\n          pascoli,\n          cerealObject,\n          refPolicy,\n        );\n      }\n      resolve(\"done\");\n    });\n  });\n}\n\nexport async function proceedWithActivation(\n  url: string,\n  recordID: string,\n  eventData: { [key: string]: any },\n  waitForElement: string,\n  shouldSandbox: boolean,\n  sandBoxAttributes: string,\n  BATCH_execution: boolean,\n  batch_id: string = \"\",\n  triggersDownload: boolean = false,\n  skipHeaders: boolean = false,\n  hostname: string = \"\",\n  htmlVisualizer: boolean = false,\n  htmlContained: boolean = false,\n  screenWidth: string = \"1024px\",\n  screenHeight: string = \"768px\",\n  POST_request: boolean = false,\n  GET_request: boolean = false,\n  methodEndpoint: string = \"\",\n  methodPayload: string = \"\",\n  methodHeaders: string = \"\",\n  actions: string = \"\",\n  delayBetweenExecutions: number = 500,\n  openTab: boolean = false,\n  openTabOnlyIfMust: boolean = false,\n  pascoli: boolean = false,\n  cerealObject: string = \"{}\",\n  refPolicy: string = \"\",\n  breakLoop: boolean = false,\n) {\n  Logger.log(\"[proceedWithActivation] => HTML Visualizer: \" + htmlVisualizer);\n  Logger.log(\"[proceedWithActivation] => HTML Contained: \" + htmlContained);\n  if (GET_request) {\n    await sendMessageToBackground({\n      intent: \"handleGETRequest\",\n      method_endpoint: methodEndpoint,\n      method_headers: methodHeaders,\n      fastLane: eventData.fastLane,\n      orgId: eventData.orgId,\n      recordID: recordID,\n      htmlVisualizer: htmlVisualizer,\n      htmlContained: htmlContained,\n      removeImages: eventData.removeImages,\n      removeCSSselectors: eventData.removeCSSselectors,\n      classNamesToBeRemoved: JSON.stringify(eventData.classNamesToBeRemoved),\n      htmlTransformer: eventData.htmlTransformer,\n      BATCH_execution: BATCH_execution,\n      batch_id: batch_id,\n      actions: actions,\n      delayBetweenExecutions: delayBetweenExecutions,\n      openTab: openTab,\n      openTabOnlyIfMust: openTabOnlyIfMust,\n      saveHtml: eventData.saveHtml,\n      saveMarkdown: eventData.saveMarkdown,\n      cerealObject: cerealObject,\n      refPolicy: refPolicy,\n    });\n  } else if (POST_request) {\n    await sendMessageToBackground({\n      intent: \"handlePOSTRequest\",\n      method_endpoint: methodEndpoint,\n      method_payload: methodPayload,\n      method_headers: methodHeaders,\n      fastLane: eventData.fastLane,\n      orgId: eventData.orgId,\n      recordID: recordID,\n      htmlVisualizer: htmlVisualizer,\n      htmlContained: htmlContained,\n      removeImages: eventData.removeImages,\n      removeCSSselectors: eventData.removeCSSselectors,\n      classNamesToBeRemoved: JSON.stringify(eventData.classNamesToBeRemoved),\n      htmlTransformer: eventData.htmlTransformer,\n      BATCH_execution: BATCH_execution,\n      batch_id: batch_id,\n      actions: actions,\n      delayBetweenExecutions: delayBetweenExecutions,\n      openTab: openTab,\n      openTabOnlyIfMust: openTabOnlyIfMust,\n      saveHtml: eventData.saveHtml,\n      saveMarkdown: eventData.saveMarkdown,\n      cerealObject: cerealObject,\n      refPolicy: refPolicy,\n    });\n  } else if (htmlVisualizer && !breakLoop) {\n    Logger.log(\"[proceedWithActivation] => Sending message to background\");\n    await sendMessageToBackground({\n      intent: \"handleHTMLVisualizer\",\n      url: url,\n      recordID: recordID,\n      eventData: JSON.stringify(eventData),\n      waitForElement: waitForElement,\n      shouldSandbox: shouldSandbox,\n      sandBoxAttributes: sandBoxAttributes,\n      BATCH_execution: BATCH_execution,\n      batch_id: batch_id,\n      triggersDownload: triggersDownload,\n      skipHeaders: skipHeaders,\n      hostname: hostname,\n      screenWidth: screenWidth,\n      screenHeight: screenHeight,\n      actions: actions,\n      delayBetweenExecutions: delayBetweenExecutions,\n      openTab: openTab,\n      openTabOnlyIfMust: openTabOnlyIfMust,\n      saveHtml: eventData.saveHtml,\n      saveMarkdown: eventData.saveMarkdown,\n      pascoli: pascoli,\n      cerealObject: cerealObject,\n      refPolicy: refPolicy,\n    });\n  } else if (htmlContained && !breakLoop) {\n    await sendMessageToBackground({\n      intent: \"handleHTMLContained\",\n      url: url,\n      recordID: recordID,\n      eventData: JSON.stringify(eventData),\n      waitForElement: waitForElement,\n      shouldSandbox: shouldSandbox,\n      sandBoxAttributes: sandBoxAttributes,\n      BATCH_execution: BATCH_execution,\n      batch_id: batch_id,\n      triggersDownload: triggersDownload,\n      skipHeaders: skipHeaders,\n      hostname: hostname,\n      screenWidth: screenWidth,\n      screenHeight: screenHeight,\n      actions: actions,\n      delayBetweenExecutions: delayBetweenExecutions,\n      openTab: openTab,\n      openTabOnlyIfMust: openTabOnlyIfMust,\n      saveHtml: eventData.saveHtml,\n      saveMarkdown: eventData.saveMarkdown,\n      pascoli: pascoli,\n      cerealObject: cerealObject,\n      refPolicy: refPolicy,\n    });\n  } else {\n    if (triggersDownload) {\n      await sendToBackgroundToSeeIfTriggersDownload(\n        url,\n        triggersDownload,\n        false,\n        recordID,\n      );\n    }\n    if (skipHeaders) {\n      await disableXFrameHeaders(hostname, skipHeaders);\n    }\n    let safeToProceed: boolean = true;\n    if (!openTab) {\n      setLifespanForIframe(\n        recordID,\n        parseInt(eventData.waitBeforeScraping),\n        BATCH_execution,\n        delayBetweenExecutions,\n      );\n      let browser = detectBrowser();\n      if (browser === \"firefox\" || browser === \"safari\") {\n        let current_url = new URL(window.location.href);\n        let url_to_load = new URL(url);\n        if (current_url.hostname === url_to_load.hostname) {\n          Logger.log(\n            \"[proceedWithActivation] => Same domain, skipping iframe load\",\n          );\n          safeToProceed = false;\n        }\n      }\n    }\n    if (safeToProceed) {\n      let moreInfo: any = await getFromRequestInfoStorage(recordID);\n      if (\n        moreInfo.isOfficeDoc &&\n        !sandBoxAttributes.includes(\"overwrite-office-doc-viewer\")\n      ) {\n        url = `https://docs.google.com/viewer?url=${url}`;\n      }\n      if (\n        moreInfo.isPDF &&\n        !sandBoxAttributes.includes(\"overwrite-pdf-no-sandbox\")\n      ) {\n        shouldSandbox = false;\n      }\n      if (\n        sandBoxAttributes.includes(\"overwrite-pdf-no-sandbox\") ||\n        sandBoxAttributes.includes(\"overwrite-office-doc-viewer\")\n      ) {\n        sandBoxAttributes = sandBoxAttributes.replace(\n          \"overwrite-pdf-no-sandbox\",\n          \"\",\n        );\n        sandBoxAttributes = sandBoxAttributes.replace(\n          \"overwrite-office-doc-viewer\",\n          \"\",\n        );\n      }\n      await insertIFrame(\n        url,\n        recordID,\n        function () {\n          // find a way to send a message to the content script inside this iframe\n          // to check if it's ready\n          // send message isContentScriptAlive\n          let iframe: HTMLIFrameElement | null = document.getElementById(\n            recordID,\n          ) as HTMLIFrameElement | null;\n          if (iframe)\n            iframe.contentWindow?.postMessage(\n              { isContentScriptAlive: true, recordID: recordID },\n              \"*\",\n            );\n          if (waitForElement === \"none\") {\n            if (iframe) iframe.contentWindow?.postMessage(eventData, \"*\");\n          }\n        },\n        BATCH_execution ? DATA_ID_IFRAME_BATCH : DATA_ID_IFRAME,\n        shouldSandbox,\n        sandBoxAttributes,\n        htmlVisualizer,\n        htmlContained,\n        screenWidth,\n        screenHeight,\n        JSON.stringify(eventData),\n        pascoli,\n        refPolicy,\n      );\n\n      setTimeout(async () => {\n        Logger.log(\"[proceedWithActivation] => More Info:\", moreInfo);\n        // if status code starts with 5, set as website unreachable\n        if (moreInfo.statusCode.toString().startsWith(\"5\")) {\n          // SET AS NOT WORKING WEBSITE\n          // hit endpoint to save result\n          Logger.log(\n            \"[proceedWithActivation] => Website unreachable, saving it\",\n          );\n          saveCrawl(\n            recordID,\n            \"\",\n            \"\",\n            eventData.hasOwnProperty(\"fastLane\")\n              ? eventData.fastLane.toString() === \"true\"\n              : false,\n            url,\n            eventData.hasOwnProperty(\"htmlTransformer\")\n              ? eventData.htmlTransformer\n              : \"none\",\n            eventData.hasOwnProperty(\"orgId\") ? eventData.orgId : \"\",\n            eventData.hasOwnProperty(\"saveText\") ? eventData.saveText : \"false\",\n            true,\n            true,\n            BATCH_execution,\n            batch_id,\n            true,\n          );\n        }\n      }, 500);\n      // if waitForElement isn't none, don't\n      // wait to load the iframe, but keep\n      // sending message until iframe replies.\n      if (waitForElement !== \"none\") {\n        let iFrameReplied = false;\n        window.addEventListener(\"message\", function (event) {\n          if (event.data.isMReply && event.data.recordID === recordID)\n            iFrameReplied = true;\n        });\n        let timer = setInterval(function () {\n          let iframe: HTMLIFrameElement | null = document.getElementById(\n            recordID,\n          ) as HTMLIFrameElement | null;\n          if (iFrameReplied) {\n            clearInterval(timer);\n            return;\n          }\n          if (iframe)\n            iframe.contentWindow?.postMessage(\n              {\n                ...eventData,\n                ...{ waitForElementIsNotNone: true },\n              },\n              \"*\",\n            );\n        }, 50);\n      }\n    }\n  }\n}\n","import { getLastFromQueue } from \"./queue-crawl\";\nimport {\n  DATA_ID_IFRAME,\n  LIFESPAN_IFRAME,\n  MAX_PARALLEL_EXECUTIONS,\n  MAX_PARALLEL_EXECUTIONS_BATCH,\n} from \"../constants\";\nimport { proceedWithActivation } from \"./execute-crawl\";\nimport { getFrameCount, isInSW } from \"../utils/utils\";\nimport { enableXFrameHeaders } from \"../dnr/dnr-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { resetTriggersDownload } from \"../utils/triggers-download-helpers\";\nimport { hideBadgeIfShould } from \"../transparency/badge-settings\";\nimport { deleteFromRequestInfoStorage } from \"../request-info/request-info-helpers\";\nimport { deleteFromRequestMessageStorage } from \"../request-message/request-message-helpers\";\nimport { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { waitForResetInterval } from \"../utils/trigger-storage\";\n\nexport async function resetAfterCrawl(\n  recordID: string,\n  BATCH_execution: boolean,\n  delayBetweenExecutions: number = 500,\n) {\n  return new Promise(async (resolve) => {\n    if (await isInSW()) {\n      Logger.log(\n        \"[resetAfterCrawl] : In service worker. Sending message to content script\",\n      );\n      chrome.tabs.query({}, async function (tabs) {\n        for (let i = 0; i < tabs.length; i++) {\n          let response = await sendMessageToContentScript(tabs[i]?.id!, {\n            intent: \"resetAfterCrawl\",\n            recordID: recordID,\n            BATCH_execution: BATCH_execution,\n            delayBetweenExecutions: delayBetweenExecutions,\n          });\n          if (response !== null) {\n            break;\n          }\n        }\n      });\n      resolve(\"done\");\n    } else {\n      if (\n        delayBetweenExecutions === undefined ||\n        delayBetweenExecutions === null\n      ) {\n        Logger.log(\n          \"[resetAfterCrawl] : delayBetweenExecutions is undefined or null. Setting it to 500\",\n        );\n        delayBetweenExecutions = 500;\n      }\n      await deleteFromRequestInfoStorage(recordID);\n      await deleteFromRequestMessageStorage(recordID);\n      let dataPacket = await getLastFromQueue(BATCH_execution);\n      Logger.log(\"[resetAfterCrawl] : dataPacket => \");\n      Logger.log(dataPacket);\n      Logger.log(\"##############################\");\n      if (dataPacket && dataPacket.url !== \"\") {\n        let frameCount = getFrameCount(BATCH_execution);\n        Logger.log(\"[] : frameCount in cleanUpAfterCrawl  => \" + frameCount);\n        let max_parallel_executions = BATCH_execution\n          ? MAX_PARALLEL_EXECUTIONS_BATCH\n          : MAX_PARALLEL_EXECUTIONS;\n        if (frameCount <= max_parallel_executions || BATCH_execution) {\n          Logger.log(\"[] getLastFromQueue : dataPacket => \");\n          Logger.log(dataPacket);\n          if (BATCH_execution && dataPacket.methodEndpoint !== \"\") {\n            Logger.log(\n              \"[] : Waiting for delayBetweenExecutions => \" +\n                delayBetweenExecutions,\n            );\n            // if fetching during batch execution, wait delayBetweenExecutions before proceeding\n            setTimeout(() => {\n              proceedWithActivation(\n                dataPacket.url,\n                dataPacket.recordID,\n                dataPacket.eventData,\n                dataPacket.waitForElement,\n                dataPacket.shouldSandbox,\n                dataPacket.sandBoxAttributes,\n                BATCH_execution,\n                dataPacket.batch_id,\n                dataPacket.triggersDownload,\n                dataPacket.skipHeaders,\n                dataPacket.hostname,\n                dataPacket.htmlVisualizer,\n                dataPacket.htmlContained,\n                dataPacket.screenWidth,\n                dataPacket.screenHeight,\n                dataPacket.POST_request,\n                dataPacket.GET_request,\n                dataPacket.methodEndpoint,\n                dataPacket.methodPayload,\n                dataPacket.methodHeaders,\n                dataPacket.actions,\n                dataPacket.delayBetweenExecutions,\n                dataPacket.openTab,\n                dataPacket.openTabOnlyIfMust,\n                dataPacket.pascoli,\n                dataPacket.refPolicy,\n              );\n              resolve(\"done\");\n            }, delayBetweenExecutions);\n          } else {\n            await proceedWithActivation(\n              dataPacket.url,\n              dataPacket.recordID,\n              dataPacket.eventData,\n              dataPacket.waitForElement,\n              dataPacket.shouldSandbox,\n              dataPacket.sandBoxAttributes,\n              BATCH_execution,\n              dataPacket.batch_id,\n              dataPacket.triggersDownload,\n              dataPacket.skipHeaders,\n              dataPacket.hostname,\n              dataPacket.htmlVisualizer,\n              dataPacket.htmlContained,\n              dataPacket.screenWidth,\n              dataPacket.screenHeight,\n              dataPacket.POST_request,\n              dataPacket.GET_request,\n              dataPacket.methodEndpoint,\n              dataPacket.methodPayload,\n              dataPacket.methodHeaders,\n              dataPacket.actions,\n              dataPacket.delayBetweenExecutions,\n              dataPacket.openTab,\n              dataPacket.openTabOnlyIfMust,\n              dataPacket.pascoli,\n              dataPacket.refPolicy,\n            );\n            resolve(\"done\");\n          }\n        } else {\n          resolve(\"done\");\n        }\n      } else {\n        setTimeout(async () => {\n          let frameCount = getFrameCount(BATCH_execution);\n          let frameCountOther = getFrameCount(!BATCH_execution);\n          let frameCountTotal = frameCount + frameCountOther;\n          Logger.log(\n            \"[] : frameCountTotal in cleanUpAfterCrawl (before resetting headers)  => \" +\n              frameCountTotal,\n          );\n          if (frameCountTotal === 0 && !BATCH_execution) {\n            Logger.log(\"[] : Resetting headers!\");\n            enableXFrameHeaders(\"\");\n            Logger.log(\"[] : Waiting for minimum reset interval...\");\n            await waitForResetInterval();\n            Logger.log(\"[] : Resetting headers!\");\n            resetTriggersDownload();\n            resolve(\"done\");\n          } else if (frameCountTotal === 0 && BATCH_execution) {\n            // wait for 1 minute before resetting headers\n            setTimeout(async () => {\n              Logger.log(\"[] : Resetting headers (BATCH_execution)!\");\n              enableXFrameHeaders(\"\");\n              Logger.log(\"[] : Waiting for minimum reset interval...\");\n              await waitForResetInterval();\n              Logger.log(\"[] : Resetting headers!\");\n              resetTriggersDownload();\n              resolve(\"done\");\n            }, 60000);\n          } /* else {\n        resetAfterCrawl(recordID, BATCH_execution);\n      }*/\n        }, 15000);\n      }\n    }\n  });\n}\n\nexport function setLifespanForIframe(\n  recordID: string,\n  waitBeforeScraping: number,\n  BATCH_execution: boolean,\n  delayBetweenExecutions: number = 500,\n) {\n  Logger.log(\n    \"Setting lifespan for iframe => \" +\n      (LIFESPAN_IFRAME + waitBeforeScraping) +\n      \" ms. RecordID => \" +\n      recordID,\n  );\n  setTimeout(async () => {\n    let iframe = document.getElementById(recordID);\n    let dataId = iframe?.getAttribute(\"data-id\") || \"\";\n    let divIframe = document.getElementById(\"div-\" + recordID);\n    if (iframe) iframe.remove();\n    if (divIframe) divIframe.remove();\n    await resetAfterCrawl(recordID, BATCH_execution, delayBetweenExecutions);\n    if (dataId === DATA_ID_IFRAME) {\n      await hideBadgeIfShould();\n    }\n  }, LIFESPAN_IFRAME + waitBeforeScraping);\n}\n","import { Logger } from \"../logger/logger\";\nimport { CerealConfig, CerealResponse } from \"./cereal-types\";\nimport { CEREAL_FRAME_ID } from \"../constants\";\n\nexport function initCerealFrame(\n  cerealObject: string | CerealConfig,\n): Promise<CerealResponse> {\n  return new Promise((resolve) => {\n    Logger.log(\"[initCerealFrame] Starting initialization\");\n\n    // Check if frame already exists\n    let frame = document.getElementById(CEREAL_FRAME_ID) as HTMLIFrameElement;\n    if (frame) {\n      Logger.log(\"[initCerealFrame] Frame already exists\");\n      resolve({ success: true });\n      return;\n    }\n\n    // Create new frame as HTMLIFrameElement\n    frame = document.createElement(\"iframe\") as HTMLIFrameElement;\n    frame.id = CEREAL_FRAME_ID;\n\n    // Parse cereal object if it's a string\n    const config: CerealConfig =\n      typeof cerealObject === \"string\"\n        ? JSON.parse(cerealObject)\n        : cerealObject;\n\n    frame.src = config.cerealURL;\n    frame.style.display = \"none\";\n\n    // Setup load handler before setting src\n    const timeoutId = setTimeout(() => {\n      Logger.log(\"[initCerealFrame] Load timeout\");\n      resolve({ success: false, error: \"timeout\" });\n    }, 8000); // 8 second timeout for loading\n\n    frame.onload = () => {\n      clearTimeout(timeoutId);\n      Logger.log(\"[initCerealFrame] Frame loaded successfully\");\n      resolve({ success: true });\n    };\n\n    frame.onerror = (error) => {\n      clearTimeout(timeoutId);\n      Logger.log(\"[initCerealFrame] Frame load error:\", error);\n      resolve({ success: false, error: \"load_failed\" });\n    };\n\n    // Append frame to document\n    document.body.appendChild(frame);\n    Logger.log(\"[initCerealFrame] Frame appended to document\");\n  });\n}\n","export function getSelectorInfo(string_selector: string) {\n  const replaceQuotes = (string: string) => {\n    return string.replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n  };\n  if (string_selector.includes(\"getElementById\")) {\n    return {\n      dSelectorToUse: \"getElementById\",\n      selectorId: replaceQuotes(\n        string_selector.split(\"getElementById\")[1].split(\"(\")[1].split(\")\")[0],\n      ),\n      index: 0,\n    };\n  } else if (string_selector.includes(\"getElementsByClassName\")) {\n    let isThereClassNumber = string_selector.includes(\")[\");\n    if (isThereClassNumber) {\n      let classNumber = parseInt(string_selector.split(\")[\")[1].split(\"]\")[0]);\n      return {\n        dSelectorToUse: \"getElementsByClassName_withIndex\",\n        selectorId: replaceQuotes(\n          string_selector\n            .split(\"getElementsByClassName\")[1]\n            .split(\"(\")[1]\n            .split(\")\")[0],\n        ),\n        index: classNumber,\n      };\n    }\n    return {\n      dSelectorToUse: \"getElementsByClassName\",\n      selectorId: replaceQuotes(\n        string_selector\n          .split(\"getElementsByClassName\")[1]\n          .split(\"(\")[1]\n          .split(\")\")[0],\n      ),\n      index: 0,\n    };\n  } else if (string_selector.includes(\"getElementsByTagName\")) {\n    return {\n      dSelectorToUse: \"getElementsByTagName\",\n      selectorId: replaceQuotes(\n        string_selector\n          .split(\"getElementsByTagName\")[1]\n          .split(\"(\")[1]\n          .split(\")\")[0],\n      ),\n      index: 0,\n    };\n  } else if (string_selector.includes(\"querySelector\")) {\n    return {\n      dSelectorToUse: \"querySelector\",\n      selectorId: replaceQuotes(\n        string_selector.split(\"querySelector\")[1].split(\"(\")[1].split(\")\")[0],\n      ),\n      index: 0,\n    };\n  } else if (string_selector.includes(\"querySelectorAll\")) {\n    return {\n      dSelectorToUse: \"querySelectorAll\",\n      selectorId: replaceQuotes(\n        string_selector\n          .split(\"querySelectorAll\")[1]\n          .split(\"(\")[1]\n          .split(\")\")[0],\n      ),\n      index: 0,\n    };\n  }\n}\n\nexport type DynamicSelector =\n  | \"getElementById\"\n  | \"getElementsByClassName\"\n  | \"getElementsByTagName\"\n  | \"querySelector\"\n  | \"querySelectorAll\"\n  | \"getElementsByClassName_withIndex\"\n  | \"getElementsByName\";\n\nexport function waitForElementDynamicSelector(\n  dSelectorToUse: DynamicSelector,\n  selectorId: string,\n  index: number = 0,\n  timeout?: number,\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    let timer: number | undefined;\n\n    const checkElement = (): boolean => {\n      switch (dSelectorToUse) {\n        case \"getElementById\":\n          return !!document.getElementById(selectorId);\n        case \"getElementsByClassName\":\n        case \"getElementsByTagName\":\n        case \"getElementsByName\":\n          return document[dSelectorToUse](selectorId).length > 0;\n        case \"querySelector\":\n          return !!document.querySelector(selectorId);\n        case \"querySelectorAll\":\n          return document.querySelectorAll(selectorId).length > 0;\n        case \"getElementsByClassName_withIndex\":\n          const elements = document.getElementsByClassName(selectorId);\n          return elements.length > 0 && !!elements[index];\n        default:\n          return false;\n      }\n    };\n\n    if (checkElement()) return resolve();\n\n    const observer = new MutationObserver(() => {\n      if (checkElement()) {\n        observer.disconnect();\n        if (timer) clearTimeout(timer);\n        return resolve();\n      }\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n    });\n\n    if (timeout) {\n      timer = window.setTimeout(() => {\n        observer.disconnect();\n        reject(new Error(\"Timeout waiting for element\"));\n      }, timeout);\n    }\n  });\n}\n","export function isPdfEmbedElementPresent(): boolean {\n  let embedElements: HTMLCollectionOf<HTMLEmbedElement> =\n    document.getElementsByTagName(\"embed\");\n  for (let i = 0; i < embedElements.length; i++) {\n    let currentElement = embedElements[i];\n    if (currentElement.type === \"application/pdf\") {\n      return true;\n    }\n  }\n  return false;\n}\n","const defaultSelectorsToRemove = [\n  \"nav\",\n  \"footer\",\n  \"script\",\n  \"style\",\n  \"noscript\",\n  \"svg\",\n  '[role=\"alert\"]',\n  '[role=\"banner\"]',\n  '[role=\"dialog\"]',\n  '[role=\"alertdialog\"]',\n  '[role=\"region\"][aria-label*=\"skip\" i]',\n  '[aria-modal=\"true\"]',\n];\n\nexport function removeSelectorsFromDocument(\n  document: Document,\n  selectorsToRemove: string[],\n) {\n  if (selectorsToRemove.length === 0)\n    selectorsToRemove = defaultSelectorsToRemove;\n  selectorsToRemove.forEach((selector) => {\n    const elements = document.querySelectorAll(selector);\n    elements.forEach((element) => element.remove());\n  });\n}\n\nexport function removeElementsByClassNames(classNamesToBeRemoved: string[]) {\n  for (let i = 0; i < classNamesToBeRemoved.length; i++) {\n    let className = classNamesToBeRemoved[i];\n    let elements = document.getElementsByClassName(className);\n    let elementsArray = Array.from(elements);\n    for (let j = 0; j < elementsArray.length; j++) {\n      let element = elementsArray[j];\n      if (element) element.remove();\n    }\n  }\n}\n\nexport function get_document_html(sep = \"\\n\", document: Document) {\n  let html = \"\";\n  let xml = new XMLSerializer();\n  for (let n of Array.from(document.childNodes)) {\n    if (n.nodeType === Node.ELEMENT_NODE)\n      if (n instanceof HTMLElement) {\n        html += n.outerHTML + sep;\n      } else html += xml.serializeToString(n) + sep;\n  }\n  return html;\n}\n\nexport function removeImagesDOM(document: Document) {\n  try {\n    let images = Array.from(\n      document.getElementsByTagName(\"img\"),\n    ) as HTMLImageElement[];\n    images.forEach(function (img) {\n      // iterate the images array\n      img.parentNode?.removeChild(img); // remove the child node via the parent node\n    });\n  } catch (e) {}\n}\n\nexport function removeElementIfPresent(element: HTMLElement | null) {\n  if (element) element.remove();\n}\n","/**\n  Source code: https://unpkg.com/turndown@7.1.2/dist/turndown.js\n  Github repo: https://github.com/mixmark-io/turndown\n  License: MIT License\n\n  Copyright (c) 2017 Dom Christie\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in all\n  copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n**/\n// @ts-nocheck\nexport var TurndownService = (function () {\n  \"use strict\";\n\n  function extend(destination) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (source.hasOwnProperty(key)) destination[key] = source[key];\n      }\n    }\n    return destination;\n  }\n\n  function repeat(character, count) {\n    return Array(count + 1).join(character);\n  }\n\n  function trimLeadingNewlines(string) {\n    return string.replace(/^\\n*/, \"\");\n  }\n\n  function trimTrailingNewlines(string) {\n    // avoid match-at-end regexp bottleneck, see #370\n    var indexEnd = string.length;\n    while (indexEnd > 0 && string[indexEnd - 1] === \"\\n\") indexEnd--;\n    return string.substring(0, indexEnd);\n  }\n\n  var blockElements = [\n    \"ADDRESS\",\n    \"ARTICLE\",\n    \"ASIDE\",\n    \"AUDIO\",\n    \"BLOCKQUOTE\",\n    \"BODY\",\n    \"CANVAS\",\n    \"CENTER\",\n    \"DD\",\n    \"DIR\",\n    \"DIV\",\n    \"DL\",\n    \"DT\",\n    \"FIELDSET\",\n    \"FIGCAPTION\",\n    \"FIGURE\",\n    \"FOOTER\",\n    \"FORM\",\n    \"FRAMESET\",\n    \"H1\",\n    \"H2\",\n    \"H3\",\n    \"H4\",\n    \"H5\",\n    \"H6\",\n    \"HEADER\",\n    \"HGROUP\",\n    \"HR\",\n    \"HTML\",\n    \"ISINDEX\",\n    \"LI\",\n    \"MAIN\",\n    \"MENU\",\n    \"NAV\",\n    \"NOFRAMES\",\n    \"NOSCRIPT\",\n    \"OL\",\n    \"OUTPUT\",\n    \"P\",\n    \"PRE\",\n    \"SECTION\",\n    \"TABLE\",\n    \"TBODY\",\n    \"TD\",\n    \"TFOOT\",\n    \"TH\",\n    \"THEAD\",\n    \"TR\",\n    \"UL\",\n  ];\n\n  function isBlock(node) {\n    return is(node, blockElements);\n  }\n\n  var voidElements = [\n    \"AREA\",\n    \"BASE\",\n    \"BR\",\n    \"COL\",\n    \"COMMAND\",\n    \"EMBED\",\n    \"HR\",\n    \"IMG\",\n    \"INPUT\",\n    \"KEYGEN\",\n    \"LINK\",\n    \"META\",\n    \"PARAM\",\n    \"SOURCE\",\n    \"TRACK\",\n    \"WBR\",\n  ];\n\n  function isVoid(node) {\n    return is(node, voidElements);\n  }\n\n  function hasVoid(node) {\n    return has(node, voidElements);\n  }\n\n  var meaningfulWhenBlankElements = [\n    \"A\",\n    \"TABLE\",\n    \"THEAD\",\n    \"TBODY\",\n    \"TFOOT\",\n    \"TH\",\n    \"TD\",\n    \"IFRAME\",\n    \"SCRIPT\",\n    \"AUDIO\",\n    \"VIDEO\",\n  ];\n\n  function isMeaningfulWhenBlank(node) {\n    return is(node, meaningfulWhenBlankElements);\n  }\n\n  function hasMeaningfulWhenBlank(node) {\n    return has(node, meaningfulWhenBlankElements);\n  }\n\n  function is(node, tagNames) {\n    return tagNames.indexOf(node.nodeName) >= 0;\n  }\n\n  function has(node, tagNames) {\n    return (\n      node.getElementsByTagName &&\n      tagNames.some(function (tagName) {\n        return node.getElementsByTagName(tagName).length;\n      })\n    );\n  }\n\n  var rules = {};\n\n  rules.paragraph = {\n    filter: \"p\",\n\n    replacement: function (content) {\n      return \"\\n\\n\" + content + \"\\n\\n\";\n    },\n  };\n\n  rules.lineBreak = {\n    filter: \"br\",\n\n    replacement: function (content, node, options) {\n      return options.br + \"\\n\";\n    },\n  };\n\n  rules.heading = {\n    filter: [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n\n    replacement: function (content, node, options) {\n      var hLevel = Number(node.nodeName.charAt(1));\n\n      if (options.headingStyle === \"setext\" && hLevel < 3) {\n        var underline = repeat(hLevel === 1 ? \"=\" : \"-\", content.length);\n        return \"\\n\\n\" + content + \"\\n\" + underline + \"\\n\\n\";\n      } else {\n        return \"\\n\\n\" + repeat(\"#\", hLevel) + \" \" + content + \"\\n\\n\";\n      }\n    },\n  };\n\n  rules.blockquote = {\n    filter: \"blockquote\",\n\n    replacement: function (content) {\n      content = content.replace(/^\\n+|\\n+$/g, \"\");\n      content = content.replace(/^/gm, \"> \");\n      return \"\\n\\n\" + content + \"\\n\\n\";\n    },\n  };\n\n  rules.list = {\n    filter: [\"ul\", \"ol\"],\n\n    replacement: function (content, node) {\n      var parent = node.parentNode;\n      if (parent.nodeName === \"LI\" && parent.lastElementChild === node) {\n        return \"\\n\" + content;\n      } else {\n        return \"\\n\\n\" + content + \"\\n\\n\";\n      }\n    },\n  };\n\n  rules.listItem = {\n    filter: \"li\",\n\n    replacement: function (content, node, options) {\n      content = content\n        .replace(/^\\n+/, \"\") // remove leading newlines\n        .replace(/\\n+$/, \"\\n\") // replace trailing newlines with just a single one\n        .replace(/\\n/gm, \"\\n    \"); // indent\n      var prefix = options.bulletListMarker + \"   \";\n      var parent = node.parentNode;\n      if (parent.nodeName === \"OL\") {\n        var start = parent.getAttribute(\"start\");\n        var index = Array.prototype.indexOf.call(parent.children, node);\n        prefix = (start ? Number(start) + index : index + 1) + \".  \";\n      }\n      return (\n        prefix +\n        content +\n        (node.nextSibling && !/\\n$/.test(content) ? \"\\n\" : \"\")\n      );\n    },\n  };\n\n  rules.indentedCodeBlock = {\n    filter: function (node, options) {\n      return (\n        options.codeBlockStyle === \"indented\" &&\n        node.nodeName === \"PRE\" &&\n        node.firstChild &&\n        node.firstChild.nodeName === \"CODE\"\n      );\n    },\n\n    replacement: function (content, node, options) {\n      return (\n        \"\\n\\n    \" +\n        node.firstChild.textContent.replace(/\\n/g, \"\\n    \") +\n        \"\\n\\n\"\n      );\n    },\n  };\n\n  rules.fencedCodeBlock = {\n    filter: function (node, options) {\n      return (\n        options.codeBlockStyle === \"fenced\" &&\n        node.nodeName === \"PRE\" &&\n        node.firstChild &&\n        node.firstChild.nodeName === \"CODE\"\n      );\n    },\n\n    replacement: function (content, node, options) {\n      var className = node.firstChild.getAttribute(\"class\") || \"\";\n      var language = (className.match(/language-(\\S+)/) || [null, \"\"])[1];\n      var code = node.firstChild.textContent;\n\n      var fenceChar = options.fence.charAt(0);\n      var fenceSize = 3;\n      var fenceInCodeRegex = new RegExp(\"^\" + fenceChar + \"{3,}\", \"gm\");\n\n      var match;\n      while ((match = fenceInCodeRegex.exec(code))) {\n        if (match[0].length >= fenceSize) {\n          fenceSize = match[0].length + 1;\n        }\n      }\n\n      var fence = repeat(fenceChar, fenceSize);\n\n      return (\n        \"\\n\\n\" +\n        fence +\n        language +\n        \"\\n\" +\n        code.replace(/\\n$/, \"\") +\n        \"\\n\" +\n        fence +\n        \"\\n\\n\"\n      );\n    },\n  };\n\n  rules.horizontalRule = {\n    filter: \"hr\",\n\n    replacement: function (content, node, options) {\n      return \"\\n\\n\" + options.hr + \"\\n\\n\";\n    },\n  };\n\n  rules.inlineLink = {\n    filter: function (node, options) {\n      return (\n        options.linkStyle === \"inlined\" &&\n        node.nodeName === \"A\" &&\n        node.getAttribute(\"href\")\n      );\n    },\n\n    replacement: function (content, node) {\n      var href = node.getAttribute(\"href\");\n      var title = cleanAttribute(node.getAttribute(\"title\"));\n      if (title) title = ' \"' + title + '\"';\n      return \"[\" + content + \"](\" + href + title + \")\";\n    },\n  };\n\n  rules.referenceLink = {\n    filter: function (node, options) {\n      return (\n        options.linkStyle === \"referenced\" &&\n        node.nodeName === \"A\" &&\n        node.getAttribute(\"href\")\n      );\n    },\n\n    replacement: function (content, node, options) {\n      var href = node.getAttribute(\"href\");\n      var title = cleanAttribute(node.getAttribute(\"title\"));\n      if (title) title = ' \"' + title + '\"';\n      var replacement;\n      var reference;\n\n      switch (options.linkReferenceStyle) {\n        case \"collapsed\":\n          replacement = \"[\" + content + \"][]\";\n          reference = \"[\" + content + \"]: \" + href + title;\n          break;\n        case \"shortcut\":\n          replacement = \"[\" + content + \"]\";\n          reference = \"[\" + content + \"]: \" + href + title;\n          break;\n        default:\n          var id = this.references.length + 1;\n          replacement = \"[\" + content + \"][\" + id + \"]\";\n          reference = \"[\" + id + \"]: \" + href + title;\n      }\n\n      this.references.push(reference);\n      return replacement;\n    },\n\n    references: [],\n\n    append: function (options) {\n      var references = \"\";\n      if (this.references.length) {\n        references = \"\\n\\n\" + this.references.join(\"\\n\") + \"\\n\\n\";\n        this.references = []; // Reset references\n      }\n      return references;\n    },\n  };\n\n  rules.emphasis = {\n    filter: [\"em\", \"i\"],\n\n    replacement: function (content, node, options) {\n      if (!content.trim()) return \"\";\n      return options.emDelimiter + content + options.emDelimiter;\n    },\n  };\n\n  rules.strong = {\n    filter: [\"strong\", \"b\"],\n\n    replacement: function (content, node, options) {\n      if (!content.trim()) return \"\";\n      return options.strongDelimiter + content + options.strongDelimiter;\n    },\n  };\n\n  rules.code = {\n    filter: function (node) {\n      var hasSiblings = node.previousSibling || node.nextSibling;\n      var isCodeBlock = node.parentNode.nodeName === \"PRE\" && !hasSiblings;\n\n      return node.nodeName === \"CODE\" && !isCodeBlock;\n    },\n\n    replacement: function (content) {\n      if (!content) return \"\";\n      content = content.replace(/\\r?\\n|\\r/g, \" \");\n\n      var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? \" \" : \"\";\n      var delimiter = \"`\";\n      var matches = content.match(/`+/gm) || [];\n      while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + \"`\";\n\n      return delimiter + extraSpace + content + extraSpace + delimiter;\n    },\n  };\n\n  rules.image = {\n    filter: \"img\",\n\n    replacement: function (content, node) {\n      var alt = cleanAttribute(node.getAttribute(\"alt\"));\n      var src = node.getAttribute(\"src\") || \"\";\n      var title = cleanAttribute(node.getAttribute(\"title\"));\n      var titlePart = title ? ' \"' + title + '\"' : \"\";\n      return src ? \"![\" + alt + \"]\" + \"(\" + src + titlePart + \")\" : \"\";\n    },\n  };\n\n  function cleanAttribute(attribute) {\n    return attribute ? attribute.replace(/(\\n+\\s*)+/g, \"\\n\") : \"\";\n  }\n\n  /**\n   * Manages a collection of rules used to convert HTML to Markdown\n   */\n\n  function Rules(options) {\n    this.options = options;\n    this._keep = [];\n    this._remove = [];\n\n    this.blankRule = {\n      replacement: options.blankReplacement,\n    };\n\n    this.keepReplacement = options.keepReplacement;\n\n    this.defaultRule = {\n      replacement: options.defaultReplacement,\n    };\n\n    this.array = [];\n    for (var key in options.rules) this.array.push(options.rules[key]);\n  }\n\n  Rules.prototype = {\n    add: function (key, rule) {\n      this.array.unshift(rule);\n    },\n\n    keep: function (filter) {\n      this._keep.unshift({\n        filter: filter,\n        replacement: this.keepReplacement,\n      });\n    },\n\n    remove: function (filter) {\n      this._remove.unshift({\n        filter: filter,\n        replacement: function () {\n          return \"\";\n        },\n      });\n    },\n\n    forNode: function (node) {\n      if (node.isBlank) return this.blankRule;\n      var rule;\n\n      if ((rule = findRule(this.array, node, this.options))) return rule;\n      if ((rule = findRule(this._keep, node, this.options))) return rule;\n      if ((rule = findRule(this._remove, node, this.options))) return rule;\n\n      return this.defaultRule;\n    },\n\n    forEach: function (fn) {\n      for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n    },\n  };\n\n  function findRule(rules, node, options) {\n    for (var i = 0; i < rules.length; i++) {\n      var rule = rules[i];\n      if (filterValue(rule, node, options)) return rule;\n    }\n    return void 0;\n  }\n\n  function filterValue(rule, node, options) {\n    var filter = rule.filter;\n    if (typeof filter === \"string\") {\n      if (filter === node.nodeName.toLowerCase()) return true;\n    } else if (Array.isArray(filter)) {\n      if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true;\n    } else if (typeof filter === \"function\") {\n      if (filter.call(rule, node, options)) return true;\n    } else {\n      throw new TypeError(\"`filter` needs to be a string, array, or function\");\n    }\n  }\n\n  /**\n   * The collapseWhitespace function is adapted from collapse-whitespace\n   * by Luc Thevenard.\n   *\n   * The MIT License (MIT)\n   *\n   * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in\n   * all copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n   * THE SOFTWARE.\n   */\n\n  /**\n   * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n   *\n   * @param {Object} options\n   */\n  function collapseWhitespace(options) {\n    var element = options.element;\n    var isBlock = options.isBlock;\n    var isVoid = options.isVoid;\n    var isPre =\n      options.isPre ||\n      function (node) {\n        return node.nodeName === \"PRE\";\n      };\n\n    if (!element.firstChild || isPre(element)) return;\n\n    var prevText = null;\n    var keepLeadingWs = false;\n\n    var prev = null;\n    var node = next(prev, element, isPre);\n\n    while (node !== element) {\n      if (node.nodeType === 3 || node.nodeType === 4) {\n        // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n        var text = node.data.replace(/[ \\r\\n\\t]+/g, \" \");\n\n        if (\n          (!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs &&\n          text[0] === \" \"\n        ) {\n          text = text.substr(1);\n        }\n\n        // `text` might be empty at this point.\n        if (!text) {\n          node = remove(node);\n          continue;\n        }\n\n        node.data = text;\n\n        prevText = node;\n      } else if (node.nodeType === 1) {\n        // Node.ELEMENT_NODE\n        if (isBlock(node) || node.nodeName === \"BR\") {\n          if (prevText) {\n            prevText.data = prevText.data.replace(/ $/, \"\");\n          }\n\n          prevText = null;\n          keepLeadingWs = false;\n        } else if (isVoid(node) || isPre(node)) {\n          // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n          prevText = null;\n          keepLeadingWs = true;\n        } else if (prevText) {\n          // Drop protection if set previously.\n          keepLeadingWs = false;\n        }\n      } else {\n        node = remove(node);\n        continue;\n      }\n\n      var nextNode = next(prev, node, isPre);\n      prev = node;\n      node = nextNode;\n    }\n\n    if (prevText) {\n      prevText.data = prevText.data.replace(/ $/, \"\");\n      if (!prevText.data) {\n        remove(prevText);\n      }\n    }\n  }\n\n  /**\n   * remove(node) removes the given node from the DOM and returns the\n   * next node in the sequence.\n   *\n   * @param {Node} node\n   * @return {Node} node\n   */\n  function remove(node) {\n    var next = node.nextSibling || node.parentNode;\n\n    node.parentNode.removeChild(node);\n\n    return next;\n  }\n\n  /**\n   * next(prev, current, isPre) returns the next node in the sequence, given the\n   * current and previous nodes.\n   *\n   * @param {Node} prev\n   * @param {Node} current\n   * @param {Function} isPre\n   * @return {Node}\n   */\n  function next(prev, current, isPre) {\n    if ((prev && prev.parentNode === current) || isPre(current)) {\n      return current.nextSibling || current.parentNode;\n    }\n\n    return current.firstChild || current.nextSibling || current.parentNode;\n  }\n\n  /*\n   * Set up window for Node.js\n   */\n\n  var root = typeof window !== \"undefined\" ? window : {};\n\n  /*\n   * Parsing HTML strings\n   */\n\n  function canParseHTMLNatively() {\n    var Parser = root.DOMParser;\n    var canParse = false;\n\n    // Adapted from https://gist.github.com/1129031\n    // Firefox/Opera/IE throw errors on unsupported types\n    try {\n      // WebKit returns null on unsupported types\n      if (new Parser().parseFromString(\"\", \"text/html\")) {\n        canParse = true;\n      }\n    } catch (e) {}\n\n    return canParse;\n  }\n\n  function createHTMLParser() {\n    var Parser = function () {};\n\n    {\n      if (shouldUseActiveX()) {\n        Parser.prototype.parseFromString = function (string) {\n          var doc = new window.ActiveXObject(\"htmlfile\");\n          doc.designMode = \"on\"; // disable on-page scripts\n          doc.open();\n          doc.write(string);\n          doc.close();\n          return doc;\n        };\n      } else {\n        Parser.prototype.parseFromString = function (string) {\n          var doc = document.implementation.createHTMLDocument(\"\");\n          doc.open();\n          doc.write(string);\n          doc.close();\n          return doc;\n        };\n      }\n    }\n    return Parser;\n  }\n\n  function shouldUseActiveX() {\n    var useActiveX = false;\n    try {\n      document.implementation.createHTMLDocument(\"\").open();\n    } catch (e) {\n      if (window.ActiveXObject) useActiveX = true;\n    }\n    return useActiveX;\n  }\n\n  var HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\n  function RootNode(input, options) {\n    var root;\n    if (typeof input === \"string\") {\n      var doc = htmlParser().parseFromString(\n        // DOM parsers arrange elements in the <head> and <body>.\n        // Wrapping in a custom element ensures elements are reliably arranged in\n        // a single element.\n        '<x-turndown id=\"turndown-root\">' + input + \"</x-turndown>\",\n        \"text/html\",\n      );\n      root = doc.getElementById(\"turndown-root\");\n    } else {\n      root = input.cloneNode(true);\n    }\n    collapseWhitespace({\n      element: root,\n      isBlock: isBlock,\n      isVoid: isVoid,\n      isPre: options.preformattedCode ? isPreOrCode : null,\n    });\n\n    return root;\n  }\n\n  var _htmlParser;\n  function htmlParser() {\n    _htmlParser = _htmlParser || new HTMLParser();\n    return _htmlParser;\n  }\n\n  function isPreOrCode(node) {\n    return node.nodeName === \"PRE\" || node.nodeName === \"CODE\";\n  }\n\n  function Node(node, options) {\n    node.isBlock = isBlock(node);\n    node.isCode = node.nodeName === \"CODE\" || node.parentNode.isCode;\n    node.isBlank = isBlank(node);\n    node.flankingWhitespace = flankingWhitespace(node, options);\n    return node;\n  }\n\n  function isBlank(node) {\n    return (\n      !isVoid(node) &&\n      !isMeaningfulWhenBlank(node) &&\n      /^\\s*$/i.test(node.textContent) &&\n      !hasVoid(node) &&\n      !hasMeaningfulWhenBlank(node)\n    );\n  }\n\n  function flankingWhitespace(node, options) {\n    if (node.isBlock || (options.preformattedCode && node.isCode)) {\n      return { leading: \"\", trailing: \"\" };\n    }\n\n    var edges = edgeWhitespace(node.textContent);\n\n    // abandon leading ASCII WS if left-flanked by ASCII WS\n    if (edges.leadingAscii && isFlankedByWhitespace(\"left\", node, options)) {\n      edges.leading = edges.leadingNonAscii;\n    }\n\n    // abandon trailing ASCII WS if right-flanked by ASCII WS\n    if (edges.trailingAscii && isFlankedByWhitespace(\"right\", node, options)) {\n      edges.trailing = edges.trailingNonAscii;\n    }\n\n    return { leading: edges.leading, trailing: edges.trailing };\n  }\n\n  function edgeWhitespace(string) {\n    var m = string.match(\n      /^(([ \\t\\r\\n]*)(\\s*))(?:(?=\\S)[\\s\\S]*\\S)?((\\s*?)([ \\t\\r\\n]*))$/,\n    );\n    return {\n      leading: m[1], // whole string for whitespace-only strings\n      leadingAscii: m[2],\n      leadingNonAscii: m[3],\n      trailing: m[4], // empty for whitespace-only strings\n      trailingNonAscii: m[5],\n      trailingAscii: m[6],\n    };\n  }\n\n  function isFlankedByWhitespace(side, node, options) {\n    var sibling;\n    var regExp;\n    var isFlanked;\n\n    if (side === \"left\") {\n      sibling = node.previousSibling;\n      regExp = / $/;\n    } else {\n      sibling = node.nextSibling;\n      regExp = /^ /;\n    }\n\n    if (sibling) {\n      if (sibling.nodeType === 3) {\n        isFlanked = regExp.test(sibling.nodeValue);\n      } else if (options.preformattedCode && sibling.nodeName === \"CODE\") {\n        isFlanked = false;\n      } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n        isFlanked = regExp.test(sibling.textContent);\n      }\n    }\n    return isFlanked;\n  }\n\n  var reduce = Array.prototype.reduce;\n  var escapes = [\n    [/\\\\/g, \"\\\\\\\\\"],\n    [/\\*/g, \"\\\\*\"],\n    [/^-/g, \"\\\\-\"],\n    [/^\\+ /g, \"\\\\+ \"],\n    [/^(=+)/g, \"\\\\$1\"],\n    [/^(#{1,6}) /g, \"\\\\$1 \"],\n    [/`/g, \"\\\\`\"],\n    [/^~~~/g, \"\\\\~~~\"],\n    [/\\[/g, \"\\\\[\"],\n    [/\\]/g, \"\\\\]\"],\n    [/^>/g, \"\\\\>\"],\n    [/_/g, \"\\\\_\"],\n    [/^(\\d+)\\. /g, \"$1\\\\. \"],\n  ];\n\n  function TurndownService(options) {\n    if (!(this instanceof TurndownService)) return new TurndownService(options);\n\n    var defaults = {\n      rules: rules,\n      headingStyle: \"setext\",\n      hr: \"* * *\",\n      bulletListMarker: \"*\",\n      codeBlockStyle: \"indented\",\n      fence: \"```\",\n      emDelimiter: \"_\",\n      strongDelimiter: \"**\",\n      linkStyle: \"inlined\",\n      linkReferenceStyle: \"full\",\n      br: \"  \",\n      preformattedCode: false,\n      blankReplacement: function (content, node) {\n        return node.isBlock ? \"\\n\\n\" : \"\";\n      },\n      keepReplacement: function (content, node) {\n        return node.isBlock ? \"\\n\\n\" + node.outerHTML + \"\\n\\n\" : node.outerHTML;\n      },\n      defaultReplacement: function (content, node) {\n        return node.isBlock ? \"\\n\\n\" + content + \"\\n\\n\" : content;\n      },\n    };\n    this.options = extend({}, defaults, options);\n    this.rules = new Rules(this.options);\n  }\n\n  TurndownService.prototype = {\n    /**\n     * The entry point for converting a string or DOM node to Markdown\n     * @public\n     * @param {String|HTMLElement} input The string or DOM node to convert\n     * @returns A Markdown representation of the input\n     * @type String\n     */\n\n    turndown: function (input) {\n      if (!canConvert(input)) {\n        throw new TypeError(\n          input + \" is not a string, or an element/document/fragment node.\",\n        );\n      }\n\n      if (input === \"\") return \"\";\n\n      var output = process.call(this, new RootNode(input, this.options));\n      return postProcess.call(this, output);\n    },\n\n    /**\n     * Add one or more plugins\n     * @public\n     * @param {Function|Array} plugin The plugin or array of plugins to add\n     * @returns The Turndown instance for chaining\n     * @type Object\n     */\n\n    use: function (plugin) {\n      if (Array.isArray(plugin)) {\n        for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n      } else if (typeof plugin === \"function\") {\n        plugin(this);\n      } else {\n        throw new TypeError(\n          \"plugin must be a Function or an Array of Functions\",\n        );\n      }\n      return this;\n    },\n\n    /**\n     * Adds a rule\n     * @public\n     * @param {String} key The unique key of the rule\n     * @param {Object} rule The rule\n     * @returns The Turndown instance for chaining\n     * @type Object\n     */\n\n    addRule: function (key, rule) {\n      this.rules.add(key, rule);\n      return this;\n    },\n\n    /**\n     * Keep a node (as HTML) that matches the filter\n     * @public\n     * @param {String|Array|Function} filter The unique key of the rule\n     * @returns The Turndown instance for chaining\n     * @type Object\n     */\n\n    keep: function (filter) {\n      this.rules.keep(filter);\n      return this;\n    },\n\n    /**\n     * Remove a node that matches the filter\n     * @public\n     * @param {String|Array|Function} filter The unique key of the rule\n     * @returns The Turndown instance for chaining\n     * @type Object\n     */\n\n    remove: function (filter) {\n      this.rules.remove(filter);\n      return this;\n    },\n\n    /**\n     * Escapes Markdown syntax\n     * @public\n     * @param {String} string The string to escape\n     * @returns A string with Markdown syntax escaped\n     * @type String\n     */\n\n    escape: function (string) {\n      return escapes.reduce(function (accumulator, escape) {\n        return accumulator.replace(escape[0], escape[1]);\n      }, string);\n    },\n  };\n\n  /**\n   * Reduces a DOM node down to its Markdown string equivalent\n   * @private\n   * @param {HTMLElement} parentNode The node to convert\n   * @returns A Markdown representation of the node\n   * @type String\n   */\n\n  function process(parentNode) {\n    var self = this;\n    return reduce.call(\n      parentNode.childNodes,\n      function (output, node) {\n        node = new Node(node, self.options);\n\n        var replacement = \"\";\n        if (node.nodeType === 3) {\n          replacement = node.isCode\n            ? node.nodeValue\n            : self.escape(node.nodeValue);\n        } else if (node.nodeType === 1) {\n          replacement = replacementForNode.call(self, node);\n        }\n\n        return join(output, replacement);\n      },\n      \"\",\n    );\n  }\n\n  /**\n   * Appends strings as each rule requires and trims the output\n   * @private\n   * @param {String} output The conversion output\n   * @returns A trimmed version of the ouput\n   * @type String\n   */\n\n  function postProcess(output) {\n    var self = this;\n    this.rules.forEach(function (rule) {\n      if (typeof rule.append === \"function\") {\n        output = join(output, rule.append(self.options));\n      }\n    });\n\n    return output.replace(/^[\\t\\r\\n]+/, \"\").replace(/[\\t\\r\\n\\s]+$/, \"\");\n  }\n\n  /**\n   * Converts an element node to its Markdown equivalent\n   * @private\n   * @param {HTMLElement} node The node to convert\n   * @returns A Markdown representation of the node\n   * @type String\n   */\n\n  function replacementForNode(node) {\n    var rule = this.rules.forNode(node);\n    var content = process.call(this, node);\n    var whitespace = node.flankingWhitespace;\n    if (whitespace.leading || whitespace.trailing) content = content.trim();\n    return (\n      whitespace.leading +\n      rule.replacement(content, node, this.options) +\n      whitespace.trailing\n    );\n  }\n\n  /**\n   * Joins replacement to the current output with appropriate number of new lines\n   * @private\n   * @param {String} output The current conversion output\n   * @param {String} replacement The string to append to the output\n   * @returns Joined output\n   * @type String\n   */\n\n  function join(output, replacement) {\n    var s1 = trimTrailingNewlines(output);\n    var s2 = trimLeadingNewlines(replacement);\n    var nls = Math.max(\n      output.length - s1.length,\n      replacement.length - s2.length,\n    );\n    var separator = \"\\n\\n\".substring(0, nls);\n\n    return s1 + separator + s2;\n  }\n\n  /**\n   * Determines whether an input can be converted\n   * @private\n   * @param {String|HTMLElement} input Describe this parameter\n   * @returns Describe what it returns\n   * @type String|Object|Array|Boolean|Number\n   */\n\n  function canConvert(input) {\n    return (\n      input != null &&\n      (typeof input === \"string\" ||\n        (input.nodeType &&\n          (input.nodeType === 1 ||\n            input.nodeType === 9 ||\n            input.nodeType === 11)))\n    );\n  }\n\n  return TurndownService;\n})();\n","import * as PDFJS from \"pdfjs-dist/build/pdf.js\";\nimport * as PDFJSWorker from \"pdfjs-dist/build/pdf.worker.js\";\nimport { Logger } from \"../logger/logger\";\nexport function extractTextFromPDF(\n  pdfUrl: string,\n  rawData: boolean = false,\n): Promise<string> {\n  return new Promise(async (resolve, reject) => {\n    if (rawData) {\n      fetch(pdfUrl)\n        .then((response) => response.arrayBuffer())\n        .then((arrayBuffer) => {\n          const bytes = new Uint8Array(arrayBuffer);\n          let binary = \"\";\n          for (let i = 0; i < bytes.length; i++) {\n            binary += String.fromCharCode(bytes[i]);\n          }\n          const base64String = btoa(binary);\n          resolve(base64String);\n        })\n        .catch(reject);\n    } else {\n      PDFJS.GlobalWorkerOptions.workerSrc = PDFJSWorker;\n      PDFJS.getDocument(pdfUrl)\n        .promise.then(function (pdf: any) {\n          const textArray: string[] = [];\n\n          function processPage(pageNum: number) {\n            if (pageNum > pdf.numPages) {\n              let stringToResolve = \"# Page 1\\n\" + textArray[0] + \"\\n\";\n              for (let i = 1; i < textArray.length; i++) {\n                stringToResolve +=\n                  \"# Page \" + (i + 1) + \"\\n\" + textArray[i] + \"\\n\";\n              }\n              resolve(stringToResolve);\n              return;\n            }\n            pdf\n              .getPage(pageNum)\n              .then(function (page: any) {\n                return page.getTextContent();\n              })\n              .then(function (textContent: { items: { str: string }[] }) {\n                textArray.push(\n                  textContent.items.map((item) => item.str).join(\" \"),\n                );\n                processPage(pageNum + 1);\n              })\n              .catch(function (error: any) {\n                Logger.log(\"[extractTextFromPDF] : Error \" + error);\n                resolve(\"\");\n              });\n          }\n\n          processPage(1);\n        })\n        .catch(reject);\n    }\n  });\n}\n","/*!\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\n// @ts-nocheck\nexport var htmlVisualizer = (function () {\n  \"use strict\";\n\n  /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n  /* global Reflect, Promise */\n\n  var extendStatics = function (d, b) {\n    extendStatics =\n      Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n          d.__proto__ = b;\n        }) ||\n      function (d, b) {\n        for (var p in b)\n          if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n    return extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\n        \"Class extends value \" + String(b) + \" is not a constructor or null\",\n      );\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype =\n      b === null ? Object.create(b) : ((__.prototype = b.prototype), new __());\n  }\n\n  var __assign = function () {\n    __assign =\n      Object.assign ||\n      function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n      };\n    return __assign.apply(this, arguments);\n  };\n\n  function __awaiter(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P\n        ? value\n        : new P(function (resolve) {\n            resolve(value);\n          });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done\n          ? resolve(result.value)\n          : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  }\n\n  function __generator(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function () {\n          if (t[0] & 1) throw t[1];\n          return t[1];\n        },\n        trys: [],\n        ops: [],\n      },\n      f,\n      y,\n      t,\n      g;\n    return (\n      (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n      typeof Symbol === \"function\" &&\n        (g[Symbol.iterator] = function () {\n          return this;\n        }),\n      g\n    );\n    function verb(n) {\n      return function (v) {\n        return step([n, v]);\n      };\n    }\n    function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (_)\n        try {\n          if (\n            ((f = 1),\n            y &&\n              (t =\n                op[0] & 2\n                  ? y[\"return\"]\n                  : op[0]\n                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                    : y.next) &&\n              !(t = t.call(y, op[1])).done)\n          )\n            return t;\n          if (((y = 0), t)) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n            case 0:\n            case 1:\n              t = op;\n              break;\n            case 4:\n              _.label++;\n              return { value: op[1], done: false };\n            case 5:\n              _.label++;\n              y = op[1];\n              op = [0];\n              continue;\n            case 7:\n              op = _.ops.pop();\n              _.trys.pop();\n              continue;\n            default:\n              if (\n                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                (op[0] === 6 || op[0] === 2)\n              ) {\n                _ = 0;\n                continue;\n              }\n              if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                _.label = op[1];\n                break;\n              }\n              if (op[0] === 6 && _.label < t[1]) {\n                _.label = t[1];\n                t = op;\n                break;\n              }\n              if (t && _.label < t[2]) {\n                _.label = t[2];\n                _.ops.push(op);\n                break;\n              }\n              if (t[2]) _.ops.pop();\n              _.trys.pop();\n              continue;\n          }\n          op = body.call(thisArg, _);\n        } catch (e) {\n          op = [6, e];\n          y = 0;\n        } finally {\n          f = t = 0;\n        }\n      if (op[0] & 5) throw op[1];\n      return { value: op[0] ? op[1] : void 0, done: true };\n    }\n  }\n\n  function __spreadArray(to, from, pack) {\n    if (pack || arguments.length === 2)\n      for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n        }\n      }\n    return to.concat(ar || from);\n  }\n\n  var Bounds = /** @class */ (function () {\n    function Bounds(left, top, width, height) {\n      this.left = left;\n      this.top = top;\n      this.width = width;\n      this.height = height;\n    }\n    Bounds.prototype.add = function (x, y, w, h) {\n      return new Bounds(\n        this.left + x,\n        this.top + y,\n        this.width + w,\n        this.height + h,\n      );\n    };\n    Bounds.fromClientRect = function (context, clientRect) {\n      return new Bounds(\n        clientRect.left + context.windowBounds.left,\n        clientRect.top + context.windowBounds.top,\n        clientRect.width,\n        clientRect.height,\n      );\n    };\n    Bounds.fromDOMRectList = function (context, domRectList) {\n      var domRect = Array.from(domRectList).find(function (rect) {\n        return rect.width !== 0;\n      });\n      return domRect\n        ? new Bounds(\n            domRect.left + context.windowBounds.left,\n            domRect.top + context.windowBounds.top,\n            domRect.width,\n            domRect.height,\n          )\n        : Bounds.EMPTY;\n    };\n    Bounds.EMPTY = new Bounds(0, 0, 0, 0);\n    return Bounds;\n  })();\n  var parseBounds = function (context, node) {\n    return Bounds.fromClientRect(context, node.getBoundingClientRect());\n  };\n  var parseDocumentSize = function (document) {\n    var body = document.body;\n    var documentElement = document.documentElement;\n    if (!body || !documentElement) {\n      throw new Error(\"Unable to get document size\");\n    }\n    var width = Math.max(\n      Math.max(body.scrollWidth, documentElement.scrollWidth),\n      Math.max(body.offsetWidth, documentElement.offsetWidth),\n      Math.max(body.clientWidth, documentElement.clientWidth),\n    );\n    var height = Math.max(\n      Math.max(body.scrollHeight, documentElement.scrollHeight),\n      Math.max(body.offsetHeight, documentElement.offsetHeight),\n      Math.max(body.clientHeight, documentElement.clientHeight),\n    );\n    return new Bounds(0, 0, width, height);\n  };\n\n  /*\n   * css-line-break 2.1.0 <https://github.com/niklasvh/css-line-break#readme>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var toCodePoints$1 = function (str) {\n    var codePoints = [];\n    var i = 0;\n    var length = str.length;\n    while (i < length) {\n      var value = str.charCodeAt(i++);\n      if (value >= 0xd800 && value <= 0xdbff && i < length) {\n        var extra = str.charCodeAt(i++);\n        if ((extra & 0xfc00) === 0xdc00) {\n          codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n        } else {\n          codePoints.push(value);\n          i--;\n        }\n      } else {\n        codePoints.push(value);\n      }\n    }\n    return codePoints;\n  };\n  var fromCodePoint$1 = function () {\n    var codePoints = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      codePoints[_i] = arguments[_i];\n    }\n    if (String.fromCodePoint) {\n      return String.fromCodePoint.apply(String, codePoints);\n    }\n    var length = codePoints.length;\n    if (!length) {\n      return \"\";\n    }\n    var codeUnits = [];\n    var index = -1;\n    var result = \"\";\n    while (++index < length) {\n      var codePoint = codePoints[index];\n      if (codePoint <= 0xffff) {\n        codeUnits.push(codePoint);\n      } else {\n        codePoint -= 0x10000;\n        codeUnits.push(\n          (codePoint >> 10) + 0xd800,\n          (codePoint % 0x400) + 0xdc00,\n        );\n      }\n      if (index + 1 === length || codeUnits.length > 0x4000) {\n        result += String.fromCharCode.apply(String, codeUnits);\n        codeUnits.length = 0;\n      }\n    }\n    return result;\n  };\n  var chars$2 =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  // Use a lookup table to find the index.\n  var lookup$2 = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n  for (var i$2 = 0; i$2 < chars$2.length; i$2++) {\n    lookup$2[chars$2.charCodeAt(i$2)] = i$2;\n  }\n\n  /*\n   * utrie 1.0.2 <https://github.com/niklasvh/utrie>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var chars$1$1 =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  // Use a lookup table to find the index.\n  var lookup$1$1 = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n  for (var i$1$1 = 0; i$1$1 < chars$1$1.length; i$1$1++) {\n    lookup$1$1[chars$1$1.charCodeAt(i$1$1)] = i$1$1;\n  }\n  var decode$1 = function (base64) {\n    var bufferLength = base64.length * 0.75,\n      len = base64.length,\n      i,\n      p = 0,\n      encoded1,\n      encoded2,\n      encoded3,\n      encoded4;\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n    var buffer =\n      typeof ArrayBuffer !== \"undefined\" &&\n      typeof Uint8Array !== \"undefined\" &&\n      typeof Uint8Array.prototype.slice !== \"undefined\"\n        ? new ArrayBuffer(bufferLength)\n        : new Array(bufferLength);\n    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n    for (i = 0; i < len; i += 4) {\n      encoded1 = lookup$1$1[base64.charCodeAt(i)];\n      encoded2 = lookup$1$1[base64.charCodeAt(i + 1)];\n      encoded3 = lookup$1$1[base64.charCodeAt(i + 2)];\n      encoded4 = lookup$1$1[base64.charCodeAt(i + 3)];\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return buffer;\n  };\n  var polyUint16Array$1 = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 2) {\n      bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n  };\n  var polyUint32Array$1 = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 4) {\n      bytes.push(\n        (buffer[i + 3] << 24) |\n          (buffer[i + 2] << 16) |\n          (buffer[i + 1] << 8) |\n          buffer[i],\n      );\n    }\n    return bytes;\n  };\n\n  /** Shift size for getting the index-2 table offset. */\n  var UTRIE2_SHIFT_2$1 = 5;\n  /** Shift size for getting the index-1 table offset. */\n  var UTRIE2_SHIFT_1$1 = 6 + 5;\n  /**\n   * Shift size for shifting left the index array values.\n   * Increases possible data size with 16-bit index values at the cost\n   * of compactability.\n   * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n   */\n  var UTRIE2_INDEX_SHIFT$1 = 2;\n  /**\n   * Difference between the two shift sizes,\n   * for getting an index-1 offset from an index-2 offset. 6=11-5\n   */\n  var UTRIE2_SHIFT_1_2$1 = UTRIE2_SHIFT_1$1 - UTRIE2_SHIFT_2$1;\n  /**\n   * The part of the index-2 table for U+D800..U+DBFF stores values for\n   * lead surrogate code _units_ not code _points_.\n   * Values for lead surrogate code _points_ are indexed with this portion of the table.\n   * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n   */\n  var UTRIE2_LSCP_INDEX_2_OFFSET$1 = 0x10000 >> UTRIE2_SHIFT_2$1;\n  /** Number of entries in a data block. 32=0x20 */\n  var UTRIE2_DATA_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_2$1;\n  /** Mask for getting the lower bits for the in-data-block offset. */\n  var UTRIE2_DATA_MASK$1 = UTRIE2_DATA_BLOCK_LENGTH$1 - 1;\n  var UTRIE2_LSCP_INDEX_2_LENGTH$1 = 0x400 >> UTRIE2_SHIFT_2$1;\n  /** Count the lengths of both BMP pieces. 2080=0x820 */\n  var UTRIE2_INDEX_2_BMP_LENGTH$1 =\n    UTRIE2_LSCP_INDEX_2_OFFSET$1 + UTRIE2_LSCP_INDEX_2_LENGTH$1;\n  /**\n   * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n   * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n   */\n  var UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 = UTRIE2_INDEX_2_BMP_LENGTH$1;\n  var UTRIE2_UTF8_2B_INDEX_2_LENGTH$1 =\n    0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n  /**\n   * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n   * Variable length, for code points up to highStart, where the last single-value range starts.\n   * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n   * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n   *\n   * The part of the index-2 table for supplementary code points starts\n   * after this index-1 table.\n   *\n   * Both the index-1 table and the following part of the index-2 table\n   * are omitted completely if there is only BMP data.\n   */\n  var UTRIE2_INDEX_1_OFFSET$1 =\n    UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 + UTRIE2_UTF8_2B_INDEX_2_LENGTH$1;\n  /**\n   * Number of index-1 entries for the BMP. 32=0x20\n   * This part of the index-1 table is omitted from the serialized form.\n   */\n  var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 = 0x10000 >> UTRIE2_SHIFT_1$1;\n  /** Number of entries in an index-2 block. 64=0x40 */\n  var UTRIE2_INDEX_2_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_1_2$1;\n  /** Mask for getting the lower bits for the in-index-2-block offset. */\n  var UTRIE2_INDEX_2_MASK$1 = UTRIE2_INDEX_2_BLOCK_LENGTH$1 - 1;\n  var slice16$1 = function (view, start, end) {\n    if (view.slice) {\n      return view.slice(start, end);\n    }\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n  };\n  var slice32$1 = function (view, start, end) {\n    if (view.slice) {\n      return view.slice(start, end);\n    }\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n  };\n  var createTrieFromBase64$1 = function (base64, _byteLength) {\n    var buffer = decode$1(base64);\n    var view32 = Array.isArray(buffer)\n      ? polyUint32Array$1(buffer)\n      : new Uint32Array(buffer);\n    var view16 = Array.isArray(buffer)\n      ? polyUint16Array$1(buffer)\n      : new Uint16Array(buffer);\n    var headerLength = 24;\n    var index = slice16$1(view16, headerLength / 2, view32[4] / 2);\n    var data =\n      view32[5] === 2\n        ? slice16$1(view16, (headerLength + view32[4]) / 2)\n        : slice32$1(view32, Math.ceil((headerLength + view32[4]) / 4));\n    return new Trie$1(view32[0], view32[1], view32[2], view32[3], index, data);\n  };\n  var Trie$1 = /** @class */ (function () {\n    function Trie(\n      initialValue,\n      errorValue,\n      highStart,\n      highValueIndex,\n      index,\n      data,\n    ) {\n      this.initialValue = initialValue;\n      this.errorValue = errorValue;\n      this.highStart = highStart;\n      this.highValueIndex = highValueIndex;\n      this.index = index;\n      this.data = data;\n    }\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    Trie.prototype.get = function (codePoint) {\n      var ix;\n      if (codePoint >= 0) {\n        if (\n          codePoint < 0x0d800 ||\n          (codePoint > 0x0dbff && codePoint <= 0x0ffff)\n        ) {\n          // Ordinary BMP code point, excluding leading surrogates.\n          // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n          // 16 bit data is stored in the index array itself.\n          ix = this.index[codePoint >> UTRIE2_SHIFT_2$1];\n          ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n          return this.data[ix];\n        }\n        if (codePoint <= 0xffff) {\n          // Lead Surrogate Code Point.  A Separate index section is stored for\n          // lead surrogate code units and code points.\n          //   The main index has the code unit data.\n          //   For this function, we need the code point data.\n          // Note: this expression could be refactored for slightly improved efficiency, but\n          //       surrogate code points will be so rare in practice that it's not worth it.\n          ix =\n            this.index[\n              UTRIE2_LSCP_INDEX_2_OFFSET$1 +\n                ((codePoint - 0xd800) >> UTRIE2_SHIFT_2$1)\n            ];\n          ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n          return this.data[ix];\n        }\n        if (codePoint < this.highStart) {\n          // Supplemental code point, use two-level lookup.\n          ix =\n            UTRIE2_INDEX_1_OFFSET$1 -\n            UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 +\n            (codePoint >> UTRIE2_SHIFT_1$1);\n          ix = this.index[ix];\n          ix += (codePoint >> UTRIE2_SHIFT_2$1) & UTRIE2_INDEX_2_MASK$1;\n          ix = this.index[ix];\n          ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n          return this.data[ix];\n        }\n        if (codePoint <= 0x10ffff) {\n          return this.data[this.highValueIndex];\n        }\n      }\n      // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n      return this.errorValue;\n    };\n    return Trie;\n  })();\n\n  /*\n   * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var chars$3 =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  // Use a lookup table to find the index.\n  var lookup$3 = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n  for (var i$3 = 0; i$3 < chars$3.length; i$3++) {\n    lookup$3[chars$3.charCodeAt(i$3)] = i$3;\n  }\n\n  var base64$1 =\n    \"KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==\";\n\n  var LETTER_NUMBER_MODIFIER = 50;\n  // Non-tailorable Line Breaking Classes\n  var BK = 1; //  Cause a line break (after)\n  var CR$1 = 2; //  Cause a line break (after), except between CR and LF\n  var LF$1 = 3; //  Cause a line break (after)\n  var CM = 4; //  Prohibit a line break between the character and the preceding character\n  var NL = 5; //  Cause a line break (after)\n  var WJ = 7; //  Prohibit line breaks before and after\n  var ZW = 8; //  Provide a break opportunity\n  var GL = 9; //  Prohibit line breaks before and after\n  var SP = 10; // Enable indirect line breaks\n  var ZWJ$1 = 11; // Prohibit line breaks within joiner sequences\n  // Break Opportunities\n  var B2 = 12; //  Provide a line break opportunity before and after the character\n  var BA = 13; //  Generally provide a line break opportunity after the character\n  var BB = 14; //  Generally provide a line break opportunity before the character\n  var HY = 15; //  Provide a line break opportunity after the character, except in numeric context\n  var CB = 16; //   Provide a line break opportunity contingent on additional information\n  // Characters Prohibiting Certain Breaks\n  var CL = 17; //  Prohibit line breaks before\n  var CP = 18; //  Prohibit line breaks before\n  var EX = 19; //  Prohibit line breaks before\n  var IN = 20; //  Allow only indirect line breaks between pairs\n  var NS = 21; //  Allow only indirect line breaks before\n  var OP = 22; //  Prohibit line breaks after\n  var QU = 23; //  Act like they are both opening and closing\n  // Numeric Context\n  var IS = 24; //  Prevent breaks after any and before numeric\n  var NU = 25; //  Form numeric expressions for line breaking purposes\n  var PO = 26; //  Do not break following a numeric expression\n  var PR = 27; //  Do not break in front of a numeric expression\n  var SY = 28; //  Prevent a break before; and allow a break after\n  // Other Characters\n  var AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID\n  var AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters\n  var CJ = 31; //  Treat as NS or ID for strict or normal breaking.\n  var EB = 32; //  Do not break from following Emoji Modifier\n  var EM = 33; //  Do not break from preceding Emoji Base\n  var H2 = 34; //  Form Korean syllable blocks\n  var H3 = 35; //  Form Korean syllable blocks\n  var HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic\n  var ID = 37; //  Break before or after; except in some numeric context\n  var JL = 38; //  Form Korean syllable blocks\n  var JV = 39; //  Form Korean syllable blocks\n  var JT = 40; //  Form Korean syllable blocks\n  var RI$1 = 41; //  Keep pairs together. For pairs; break before and after other classes\n  var SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis\n  var XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions\n  var ea_OP = [0x2329, 0xff08];\n  var BREAK_MANDATORY = \"!\";\n  var BREAK_NOT_ALLOWED$1 = \"\";\n  var BREAK_ALLOWED$1 = \"\";\n  var UnicodeTrie$1 = createTrieFromBase64$1(base64$1);\n  var ALPHABETICS = [AL, HL];\n  var HARD_LINE_BREAKS = [BK, CR$1, LF$1, NL];\n  var SPACE$1 = [SP, ZW];\n  var PREFIX_POSTFIX = [PR, PO];\n  var LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE$1);\n  var KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];\n  var HYPHEN = [HY, BA];\n  var codePointsToCharacterClasses = function (codePoints, lineBreak) {\n    if (lineBreak === void 0) {\n      lineBreak = \"strict\";\n    }\n    var types = [];\n    var indices = [];\n    var categories = [];\n    codePoints.forEach(function (codePoint, index) {\n      var classType = UnicodeTrie$1.get(codePoint);\n      if (classType > LETTER_NUMBER_MODIFIER) {\n        categories.push(true);\n        classType -= LETTER_NUMBER_MODIFIER;\n      } else {\n        categories.push(false);\n      }\n      if ([\"normal\", \"auto\", \"loose\"].indexOf(lineBreak) !== -1) {\n        // U+2010,  U+2013,  U+301C,  U+30A0\n        if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {\n          indices.push(index);\n          return types.push(CB);\n        }\n      }\n      if (classType === CM || classType === ZWJ$1) {\n        // LB10 Treat any remaining combining mark or ZWJ as AL.\n        if (index === 0) {\n          indices.push(index);\n          return types.push(AL);\n        }\n        // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of\n        // the base character in all of the following rules. Treat ZWJ as if it were CM.\n        var prev = types[index - 1];\n        if (LINE_BREAKS.indexOf(prev) === -1) {\n          indices.push(indices[index - 1]);\n          return types.push(prev);\n        }\n        indices.push(index);\n        return types.push(AL);\n      }\n      indices.push(index);\n      if (classType === CJ) {\n        return types.push(lineBreak === \"strict\" ? NS : ID);\n      }\n      if (classType === SA) {\n        return types.push(AL);\n      }\n      if (classType === AI) {\n        return types.push(AL);\n      }\n      // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL\n      // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised\n      // to take into account the actual line breaking properties for these characters.\n      if (classType === XX) {\n        if (\n          (codePoint >= 0x20000 && codePoint <= 0x2fffd) ||\n          (codePoint >= 0x30000 && codePoint <= 0x3fffd)\n        ) {\n          return types.push(ID);\n        } else {\n          return types.push(AL);\n        }\n      }\n      types.push(classType);\n    });\n    return [indices, types, categories];\n  };\n  var isAdjacentWithSpaceIgnored = function (a, b, currentIndex, classTypes) {\n    var current = classTypes[currentIndex];\n    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {\n      var i = currentIndex;\n      while (i <= classTypes.length) {\n        i++;\n        var next = classTypes[i];\n        if (next === b) {\n          return true;\n        }\n        if (next !== SP) {\n          break;\n        }\n      }\n    }\n    if (current === SP) {\n      var i = currentIndex;\n      while (i > 0) {\n        i--;\n        var prev = classTypes[i];\n        if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {\n          var n = currentIndex;\n          while (n <= classTypes.length) {\n            n++;\n            var next = classTypes[n];\n            if (next === b) {\n              return true;\n            }\n            if (next !== SP) {\n              break;\n            }\n          }\n        }\n        if (prev !== SP) {\n          break;\n        }\n      }\n    }\n    return false;\n  };\n  var previousNonSpaceClassType = function (currentIndex, classTypes) {\n    var i = currentIndex;\n    while (i >= 0) {\n      var type = classTypes[i];\n      if (type === SP) {\n        i--;\n      } else {\n        return type;\n      }\n    }\n    return 0;\n  };\n  var _lineBreakAtIndex = function (\n    codePoints,\n    classTypes,\n    indicies,\n    index,\n    forbiddenBreaks,\n  ) {\n    if (indicies[index] === 0) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    var currentIndex = index - 1;\n    if (\n      Array.isArray(forbiddenBreaks) &&\n      forbiddenBreaks[currentIndex] === true\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    var beforeIndex = currentIndex - 1;\n    var afterIndex = currentIndex + 1;\n    var current = classTypes[currentIndex];\n    // LB4 Always break after hard line breaks.\n    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.\n    var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;\n    var next = classTypes[afterIndex];\n    if (current === CR$1 && next === LF$1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {\n      return BREAK_MANDATORY;\n    }\n    // LB6 Do not break before hard line breaks.\n    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB7 Do not break before spaces or zero width space.\n    if (SPACE$1.indexOf(next) !== -1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {\n      return BREAK_ALLOWED$1;\n    }\n    // LB8a Do not break after a zero width joiner.\n    if (UnicodeTrie$1.get(codePoints[currentIndex]) === ZWJ$1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // zwj emojis\n    if (\n      (current === EB || current === EM) &&\n      UnicodeTrie$1.get(codePoints[afterIndex]) === ZWJ$1\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB11 Do not break before or after Word joiner and related characters.\n    if (current === WJ || next === WJ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB12 Do not break after NBSP and related characters.\n    if (current === GL) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.\n    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB13 Do not break before ] or ! or ; or /, even after spaces.\n    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB14 Do not break after [, even after spaces.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB15 Do not break within [, even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB17 Do not break within , even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB18 Break after spaces.\n    if (current === SP) {\n      return BREAK_ALLOWED$1;\n    }\n    // LB19 Do not break before or after quotation marks, such as   .\n    if (current === QU || next === QU) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB20 Break before and after unresolved CB.\n    if (next === CB || current === CB) {\n      return BREAK_ALLOWED$1;\n    }\n    // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.\n    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB21a Don't break after Hebrew + Hyphen.\n    if (before === HL && HYPHEN.indexOf(current) !== -1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB21b Dont break between Solidus and Hebrew letters.\n    if (current === SY && next === HL) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB22 Do not break before ellipsis.\n    if (next === IN) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB23 Do not break between digits and letters.\n    if (\n      (ALPHABETICS.indexOf(next) !== -1 && current === NU) ||\n      (ALPHABETICS.indexOf(current) !== -1 && next === NU)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.\n    if (\n      (current === PR && [ID, EB, EM].indexOf(next) !== -1) ||\n      ([ID, EB, EM].indexOf(current) !== -1 && next === PO)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.\n    if (\n      (ALPHABETICS.indexOf(current) !== -1 &&\n        PREFIX_POSTFIX.indexOf(next) !== -1) ||\n      (PREFIX_POSTFIX.indexOf(current) !== -1 &&\n        ALPHABETICS.indexOf(next) !== -1)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB25 Do not break between the following pairs of classes relevant to numbers:\n    if (\n      // (PR | PO)  ( OP | HY )? NU\n      ([PR, PO].indexOf(current) !== -1 &&\n        (next === NU ||\n          ([OP, HY].indexOf(next) !== -1 &&\n            classTypes[afterIndex + 1] === NU))) ||\n      // ( OP | HY )  NU\n      ([OP, HY].indexOf(current) !== -1 && next === NU) ||\n      // NU \t(NU | SY | IS)\n      (current === NU && [NU, SY, IS].indexOf(next) !== -1)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // NU (NU | SY | IS)*  (NU | SY | IS | CL | CP)\n    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {\n      var prevIndex = currentIndex;\n      while (prevIndex >= 0) {\n        var type = classTypes[prevIndex];\n        if (type === NU) {\n          return BREAK_NOT_ALLOWED$1;\n        } else if ([SY, IS].indexOf(type) !== -1) {\n          prevIndex--;\n        } else {\n          break;\n        }\n      }\n    }\n    // NU (NU | SY | IS)* (CL | CP)?  (PO | PR))\n    if ([PR, PO].indexOf(next) !== -1) {\n      var prevIndex =\n        [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;\n      while (prevIndex >= 0) {\n        var type = classTypes[prevIndex];\n        if (type === NU) {\n          return BREAK_NOT_ALLOWED$1;\n        } else if ([SY, IS].indexOf(type) !== -1) {\n          prevIndex--;\n        } else {\n          break;\n        }\n      }\n    }\n    // LB26 Do not break a Korean syllable.\n    if (\n      (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1) ||\n      ([JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1) ||\n      ([JT, H3].indexOf(current) !== -1 && next === JT)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB27 Treat a Korean Syllable Block the same as ID.\n    if (\n      (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 &&\n        [IN, PO].indexOf(next) !== -1) ||\n      (KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB28 Do not break between alphabetics (at).\n    if (\n      ALPHABETICS.indexOf(current) !== -1 &&\n      ALPHABETICS.indexOf(next) !== -1\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB29 Do not break between numeric punctuation and alphabetics (e.g.).\n    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.\n    if (\n      (ALPHABETICS.concat(NU).indexOf(current) !== -1 &&\n        next === OP &&\n        ea_OP.indexOf(codePoints[afterIndex]) === -1) ||\n      (ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP)\n    ) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    // LB30a Break between two regional indicator symbols if and only if there are an even number of regional\n    // indicators preceding the position of the break.\n    if (current === RI$1 && next === RI$1) {\n      var i = indicies[currentIndex];\n      var count = 1;\n      while (i > 0) {\n        i--;\n        if (classTypes[i] === RI$1) {\n          count++;\n        } else {\n          break;\n        }\n      }\n      if (count % 2 !== 0) {\n        return BREAK_NOT_ALLOWED$1;\n      }\n    }\n    // LB30b Do not break between an emoji base and an emoji modifier.\n    if (current === EB && next === EM) {\n      return BREAK_NOT_ALLOWED$1;\n    }\n    return BREAK_ALLOWED$1;\n  };\n  var cssFormattedClasses = function (codePoints, options) {\n    if (!options) {\n      options = { lineBreak: \"normal\", wordBreak: \"normal\" };\n    }\n    var _a = codePointsToCharacterClasses(codePoints, options.lineBreak),\n      indicies = _a[0],\n      classTypes = _a[1],\n      isLetterNumber = _a[2];\n    if (\n      options.wordBreak === \"break-all\" ||\n      options.wordBreak === \"break-word\"\n    ) {\n      classTypes = classTypes.map(function (type) {\n        return [NU, AL, SA].indexOf(type) !== -1 ? ID : type;\n      });\n    }\n    var forbiddenBreakpoints =\n      options.wordBreak === \"keep-all\"\n        ? isLetterNumber.map(function (letterNumber, i) {\n            return (\n              letterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff\n            );\n          })\n        : undefined;\n    return [indicies, classTypes, forbiddenBreakpoints];\n  };\n  var Break = /** @class */ (function () {\n    function Break(codePoints, lineBreak, start, end) {\n      this.codePoints = codePoints;\n      this.required = lineBreak === BREAK_MANDATORY;\n      this.start = start;\n      this.end = end;\n    }\n    Break.prototype.slice = function () {\n      return fromCodePoint$1.apply(\n        void 0,\n        this.codePoints.slice(this.start, this.end),\n      );\n    };\n    return Break;\n  })();\n  var LineBreaker = function (str, options) {\n    var codePoints = toCodePoints$1(str);\n    var _a = cssFormattedClasses(codePoints, options),\n      indicies = _a[0],\n      classTypes = _a[1],\n      forbiddenBreakpoints = _a[2];\n    var length = codePoints.length;\n    var lastEnd = 0;\n    var nextIndex = 0;\n    return {\n      next: function () {\n        if (nextIndex >= length) {\n          return { done: true, value: null };\n        }\n        var lineBreak = BREAK_NOT_ALLOWED$1;\n        while (\n          nextIndex < length &&\n          (lineBreak = _lineBreakAtIndex(\n            codePoints,\n            classTypes,\n            indicies,\n            ++nextIndex,\n            forbiddenBreakpoints,\n          )) === BREAK_NOT_ALLOWED$1\n        ) {}\n        if (lineBreak !== BREAK_NOT_ALLOWED$1 || nextIndex === length) {\n          var value = new Break(codePoints, lineBreak, lastEnd, nextIndex);\n          lastEnd = nextIndex;\n          return { value: value, done: false };\n        }\n        return { done: true, value: null };\n      },\n    };\n  };\n\n  // https://www.w3.org/TR/css-syntax-3\n  var FLAG_UNRESTRICTED = 1 << 0;\n  var FLAG_ID = 1 << 1;\n  var FLAG_INTEGER = 1 << 2;\n  var FLAG_NUMBER = 1 << 3;\n  var LINE_FEED = 0x000a;\n  var SOLIDUS = 0x002f;\n  var REVERSE_SOLIDUS = 0x005c;\n  var CHARACTER_TABULATION = 0x0009;\n  var SPACE = 0x0020;\n  var QUOTATION_MARK = 0x0022;\n  var EQUALS_SIGN = 0x003d;\n  var NUMBER_SIGN = 0x0023;\n  var DOLLAR_SIGN = 0x0024;\n  var PERCENTAGE_SIGN = 0x0025;\n  var APOSTROPHE = 0x0027;\n  var LEFT_PARENTHESIS = 0x0028;\n  var RIGHT_PARENTHESIS = 0x0029;\n  var LOW_LINE = 0x005f;\n  var HYPHEN_MINUS = 0x002d;\n  var EXCLAMATION_MARK = 0x0021;\n  var LESS_THAN_SIGN = 0x003c;\n  var GREATER_THAN_SIGN = 0x003e;\n  var COMMERCIAL_AT = 0x0040;\n  var LEFT_SQUARE_BRACKET = 0x005b;\n  var RIGHT_SQUARE_BRACKET = 0x005d;\n  var CIRCUMFLEX_ACCENT = 0x003d;\n  var LEFT_CURLY_BRACKET = 0x007b;\n  var QUESTION_MARK = 0x003f;\n  var RIGHT_CURLY_BRACKET = 0x007d;\n  var VERTICAL_LINE = 0x007c;\n  var TILDE = 0x007e;\n  var CONTROL = 0x0080;\n  var REPLACEMENT_CHARACTER = 0xfffd;\n  var ASTERISK = 0x002a;\n  var PLUS_SIGN = 0x002b;\n  var COMMA = 0x002c;\n  var COLON = 0x003a;\n  var SEMICOLON = 0x003b;\n  var FULL_STOP = 0x002e;\n  var NULL = 0x0000;\n  var BACKSPACE = 0x0008;\n  var LINE_TABULATION = 0x000b;\n  var SHIFT_OUT = 0x000e;\n  var INFORMATION_SEPARATOR_ONE = 0x001f;\n  var DELETE = 0x007f;\n  var EOF = -1;\n  var ZERO = 0x0030;\n  var a = 0x0061;\n  var e = 0x0065;\n  var f = 0x0066;\n  var u = 0x0075;\n  var z = 0x007a;\n  var A = 0x0041;\n  var E = 0x0045;\n  var F = 0x0046;\n  var U = 0x0055;\n  var Z = 0x005a;\n  var isDigit = function (codePoint) {\n    return codePoint >= ZERO && codePoint <= 0x0039;\n  };\n  var isSurrogateCodePoint = function (codePoint) {\n    return codePoint >= 0xd800 && codePoint <= 0xdfff;\n  };\n  var isHex = function (codePoint) {\n    return (\n      isDigit(codePoint) ||\n      (codePoint >= A && codePoint <= F) ||\n      (codePoint >= a && codePoint <= f)\n    );\n  };\n  var isLowerCaseLetter = function (codePoint) {\n    return codePoint >= a && codePoint <= z;\n  };\n  var isUpperCaseLetter = function (codePoint) {\n    return codePoint >= A && codePoint <= Z;\n  };\n  var isLetter = function (codePoint) {\n    return isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);\n  };\n  var isNonASCIICodePoint = function (codePoint) {\n    return codePoint >= CONTROL;\n  };\n  var isWhiteSpace = function (codePoint) {\n    return (\n      codePoint === LINE_FEED ||\n      codePoint === CHARACTER_TABULATION ||\n      codePoint === SPACE\n    );\n  };\n  var isNameStartCodePoint = function (codePoint) {\n    return (\n      isLetter(codePoint) ||\n      isNonASCIICodePoint(codePoint) ||\n      codePoint === LOW_LINE\n    );\n  };\n  var isNameCodePoint = function (codePoint) {\n    return (\n      isNameStartCodePoint(codePoint) ||\n      isDigit(codePoint) ||\n      codePoint === HYPHEN_MINUS\n    );\n  };\n  var isNonPrintableCodePoint = function (codePoint) {\n    return (\n      (codePoint >= NULL && codePoint <= BACKSPACE) ||\n      codePoint === LINE_TABULATION ||\n      (codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE) ||\n      codePoint === DELETE\n    );\n  };\n  var isValidEscape = function (c1, c2) {\n    if (c1 !== REVERSE_SOLIDUS) {\n      return false;\n    }\n    return c2 !== LINE_FEED;\n  };\n  var isIdentifierStart = function (c1, c2, c3) {\n    if (c1 === HYPHEN_MINUS) {\n      return isNameStartCodePoint(c2) || isValidEscape(c2, c3);\n    } else if (isNameStartCodePoint(c1)) {\n      return true;\n    } else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {\n      return true;\n    }\n    return false;\n  };\n  var isNumberStart = function (c1, c2, c3) {\n    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n      if (isDigit(c2)) {\n        return true;\n      }\n      return c2 === FULL_STOP && isDigit(c3);\n    }\n    if (c1 === FULL_STOP) {\n      return isDigit(c2);\n    }\n    return isDigit(c1);\n  };\n  var stringToNumber = function (codePoints) {\n    var c = 0;\n    var sign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n      if (codePoints[c] === HYPHEN_MINUS) {\n        sign = -1;\n      }\n      c++;\n    }\n    var integers = [];\n    while (isDigit(codePoints[c])) {\n      integers.push(codePoints[c++]);\n    }\n    var int = integers.length\n      ? parseInt(fromCodePoint$1.apply(void 0, integers), 10)\n      : 0;\n    if (codePoints[c] === FULL_STOP) {\n      c++;\n    }\n    var fraction = [];\n    while (isDigit(codePoints[c])) {\n      fraction.push(codePoints[c++]);\n    }\n    var fracd = fraction.length;\n    var frac = fracd\n      ? parseInt(fromCodePoint$1.apply(void 0, fraction), 10)\n      : 0;\n    if (codePoints[c] === E || codePoints[c] === e) {\n      c++;\n    }\n    var expsign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n      if (codePoints[c] === HYPHEN_MINUS) {\n        expsign = -1;\n      }\n      c++;\n    }\n    var exponent = [];\n    while (isDigit(codePoints[c])) {\n      exponent.push(codePoints[c++]);\n    }\n    var exp = exponent.length\n      ? parseInt(fromCodePoint$1.apply(void 0, exponent), 10)\n      : 0;\n    return (\n      sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp)\n    );\n  };\n  var LEFT_PARENTHESIS_TOKEN = {\n    type: 2 /* LEFT_PARENTHESIS_TOKEN */,\n  };\n  var RIGHT_PARENTHESIS_TOKEN = {\n    type: 3 /* RIGHT_PARENTHESIS_TOKEN */,\n  };\n  var COMMA_TOKEN = { type: 4 /* COMMA_TOKEN */ };\n  var SUFFIX_MATCH_TOKEN = { type: 13 /* SUFFIX_MATCH_TOKEN */ };\n  var PREFIX_MATCH_TOKEN = { type: 8 /* PREFIX_MATCH_TOKEN */ };\n  var COLUMN_TOKEN = { type: 21 /* COLUMN_TOKEN */ };\n  var DASH_MATCH_TOKEN = { type: 9 /* DASH_MATCH_TOKEN */ };\n  var INCLUDE_MATCH_TOKEN = { type: 10 /* INCLUDE_MATCH_TOKEN */ };\n  var LEFT_CURLY_BRACKET_TOKEN = {\n    type: 11 /* LEFT_CURLY_BRACKET_TOKEN */,\n  };\n  var RIGHT_CURLY_BRACKET_TOKEN = {\n    type: 12 /* RIGHT_CURLY_BRACKET_TOKEN */,\n  };\n  var SUBSTRING_MATCH_TOKEN = { type: 14 /* SUBSTRING_MATCH_TOKEN */ };\n  var BAD_URL_TOKEN = { type: 23 /* BAD_URL_TOKEN */ };\n  var BAD_STRING_TOKEN = { type: 1 /* BAD_STRING_TOKEN */ };\n  var CDO_TOKEN = { type: 25 /* CDO_TOKEN */ };\n  var CDC_TOKEN = { type: 24 /* CDC_TOKEN */ };\n  var COLON_TOKEN = { type: 26 /* COLON_TOKEN */ };\n  var SEMICOLON_TOKEN = { type: 27 /* SEMICOLON_TOKEN */ };\n  var LEFT_SQUARE_BRACKET_TOKEN = {\n    type: 28 /* LEFT_SQUARE_BRACKET_TOKEN */,\n  };\n  var RIGHT_SQUARE_BRACKET_TOKEN = {\n    type: 29 /* RIGHT_SQUARE_BRACKET_TOKEN */,\n  };\n  var WHITESPACE_TOKEN = { type: 31 /* WHITESPACE_TOKEN */ };\n  var EOF_TOKEN = { type: 32 /* EOF_TOKEN */ };\n  var Tokenizer = /** @class */ (function () {\n    function Tokenizer() {\n      this._value = [];\n    }\n    Tokenizer.prototype.write = function (chunk) {\n      this._value = this._value.concat(toCodePoints$1(chunk));\n    };\n    Tokenizer.prototype.read = function () {\n      var tokens = [];\n      var token = this.consumeToken();\n      while (token !== EOF_TOKEN) {\n        tokens.push(token);\n        token = this.consumeToken();\n      }\n      return tokens;\n    };\n    Tokenizer.prototype.consumeToken = function () {\n      var codePoint = this.consumeCodePoint();\n      switch (codePoint) {\n        case QUOTATION_MARK:\n          return this.consumeStringToken(QUOTATION_MARK);\n        case NUMBER_SIGN:\n          var c1 = this.peekCodePoint(0);\n          var c2 = this.peekCodePoint(1);\n          var c3 = this.peekCodePoint(2);\n          if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {\n            var flags = isIdentifierStart(c1, c2, c3)\n              ? FLAG_ID\n              : FLAG_UNRESTRICTED;\n            var value = this.consumeName();\n            return { type: 5 /* HASH_TOKEN */, value: value, flags: flags };\n          }\n          break;\n        case DOLLAR_SIGN:\n          if (this.peekCodePoint(0) === EQUALS_SIGN) {\n            this.consumeCodePoint();\n            return SUFFIX_MATCH_TOKEN;\n          }\n          break;\n        case APOSTROPHE:\n          return this.consumeStringToken(APOSTROPHE);\n        case LEFT_PARENTHESIS:\n          return LEFT_PARENTHESIS_TOKEN;\n        case RIGHT_PARENTHESIS:\n          return RIGHT_PARENTHESIS_TOKEN;\n        case ASTERISK:\n          if (this.peekCodePoint(0) === EQUALS_SIGN) {\n            this.consumeCodePoint();\n            return SUBSTRING_MATCH_TOKEN;\n          }\n          break;\n        case PLUS_SIGN:\n          if (\n            isNumberStart(\n              codePoint,\n              this.peekCodePoint(0),\n              this.peekCodePoint(1),\n            )\n          ) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n          }\n          break;\n        case COMMA:\n          return COMMA_TOKEN;\n        case HYPHEN_MINUS:\n          var e1 = codePoint;\n          var e2 = this.peekCodePoint(0);\n          var e3 = this.peekCodePoint(1);\n          if (isNumberStart(e1, e2, e3)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n          }\n          if (isIdentifierStart(e1, e2, e3)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n          }\n          if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {\n            this.consumeCodePoint();\n            this.consumeCodePoint();\n            return CDC_TOKEN;\n          }\n          break;\n        case FULL_STOP:\n          if (\n            isNumberStart(\n              codePoint,\n              this.peekCodePoint(0),\n              this.peekCodePoint(1),\n            )\n          ) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n          }\n          break;\n        case SOLIDUS:\n          if (this.peekCodePoint(0) === ASTERISK) {\n            this.consumeCodePoint();\n            while (true) {\n              var c = this.consumeCodePoint();\n              if (c === ASTERISK) {\n                c = this.consumeCodePoint();\n                if (c === SOLIDUS) {\n                  return this.consumeToken();\n                }\n              }\n              if (c === EOF) {\n                return this.consumeToken();\n              }\n            }\n          }\n          break;\n        case COLON:\n          return COLON_TOKEN;\n        case SEMICOLON:\n          return SEMICOLON_TOKEN;\n        case LESS_THAN_SIGN:\n          if (\n            this.peekCodePoint(0) === EXCLAMATION_MARK &&\n            this.peekCodePoint(1) === HYPHEN_MINUS &&\n            this.peekCodePoint(2) === HYPHEN_MINUS\n          ) {\n            this.consumeCodePoint();\n            this.consumeCodePoint();\n            return CDO_TOKEN;\n          }\n          break;\n        case COMMERCIAL_AT:\n          var a1 = this.peekCodePoint(0);\n          var a2 = this.peekCodePoint(1);\n          var a3 = this.peekCodePoint(2);\n          if (isIdentifierStart(a1, a2, a3)) {\n            var value = this.consumeName();\n            return { type: 7 /* AT_KEYWORD_TOKEN */, value: value };\n          }\n          break;\n        case LEFT_SQUARE_BRACKET:\n          return LEFT_SQUARE_BRACKET_TOKEN;\n        case REVERSE_SOLIDUS:\n          if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n          }\n          break;\n        case RIGHT_SQUARE_BRACKET:\n          return RIGHT_SQUARE_BRACKET_TOKEN;\n        case CIRCUMFLEX_ACCENT:\n          if (this.peekCodePoint(0) === EQUALS_SIGN) {\n            this.consumeCodePoint();\n            return PREFIX_MATCH_TOKEN;\n          }\n          break;\n        case LEFT_CURLY_BRACKET:\n          return LEFT_CURLY_BRACKET_TOKEN;\n        case RIGHT_CURLY_BRACKET:\n          return RIGHT_CURLY_BRACKET_TOKEN;\n        case u:\n        case U:\n          var u1 = this.peekCodePoint(0);\n          var u2 = this.peekCodePoint(1);\n          if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {\n            this.consumeCodePoint();\n            this.consumeUnicodeRangeToken();\n          }\n          this.reconsumeCodePoint(codePoint);\n          return this.consumeIdentLikeToken();\n        case VERTICAL_LINE:\n          if (this.peekCodePoint(0) === EQUALS_SIGN) {\n            this.consumeCodePoint();\n            return DASH_MATCH_TOKEN;\n          }\n          if (this.peekCodePoint(0) === VERTICAL_LINE) {\n            this.consumeCodePoint();\n            return COLUMN_TOKEN;\n          }\n          break;\n        case TILDE:\n          if (this.peekCodePoint(0) === EQUALS_SIGN) {\n            this.consumeCodePoint();\n            return INCLUDE_MATCH_TOKEN;\n          }\n          break;\n        case EOF:\n          return EOF_TOKEN;\n      }\n      if (isWhiteSpace(codePoint)) {\n        this.consumeWhiteSpace();\n        return WHITESPACE_TOKEN;\n      }\n      if (isDigit(codePoint)) {\n        this.reconsumeCodePoint(codePoint);\n        return this.consumeNumericToken();\n      }\n      if (isNameStartCodePoint(codePoint)) {\n        this.reconsumeCodePoint(codePoint);\n        return this.consumeIdentLikeToken();\n      }\n      return { type: 6 /* DELIM_TOKEN */, value: fromCodePoint$1(codePoint) };\n    };\n    Tokenizer.prototype.consumeCodePoint = function () {\n      var value = this._value.shift();\n      return typeof value === \"undefined\" ? -1 : value;\n    };\n    Tokenizer.prototype.reconsumeCodePoint = function (codePoint) {\n      this._value.unshift(codePoint);\n    };\n    Tokenizer.prototype.peekCodePoint = function (delta) {\n      if (delta >= this._value.length) {\n        return -1;\n      }\n      return this._value[delta];\n    };\n    Tokenizer.prototype.consumeUnicodeRangeToken = function () {\n      var digits = [];\n      var codePoint = this.consumeCodePoint();\n      while (isHex(codePoint) && digits.length < 6) {\n        digits.push(codePoint);\n        codePoint = this.consumeCodePoint();\n      }\n      var questionMarks = false;\n      while (codePoint === QUESTION_MARK && digits.length < 6) {\n        digits.push(codePoint);\n        codePoint = this.consumeCodePoint();\n        questionMarks = true;\n      }\n      if (questionMarks) {\n        var start_1 = parseInt(\n          fromCodePoint$1.apply(\n            void 0,\n            digits.map(function (digit) {\n              return digit === QUESTION_MARK ? ZERO : digit;\n            }),\n          ),\n          16,\n        );\n        var end = parseInt(\n          fromCodePoint$1.apply(\n            void 0,\n            digits.map(function (digit) {\n              return digit === QUESTION_MARK ? F : digit;\n            }),\n          ),\n          16,\n        );\n        return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start_1, end: end };\n      }\n      var start = parseInt(fromCodePoint$1.apply(void 0, digits), 16);\n      if (\n        this.peekCodePoint(0) === HYPHEN_MINUS &&\n        isHex(this.peekCodePoint(1))\n      ) {\n        this.consumeCodePoint();\n        codePoint = this.consumeCodePoint();\n        var endDigits = [];\n        while (isHex(codePoint) && endDigits.length < 6) {\n          endDigits.push(codePoint);\n          codePoint = this.consumeCodePoint();\n        }\n        var end = parseInt(fromCodePoint$1.apply(void 0, endDigits), 16);\n        return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start, end: end };\n      } else {\n        return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start, end: start };\n      }\n    };\n    Tokenizer.prototype.consumeIdentLikeToken = function () {\n      var value = this.consumeName();\n      if (\n        value.toLowerCase() === \"url\" &&\n        this.peekCodePoint(0) === LEFT_PARENTHESIS\n      ) {\n        this.consumeCodePoint();\n        return this.consumeUrlToken();\n      } else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n        this.consumeCodePoint();\n        return { type: 19 /* FUNCTION_TOKEN */, value: value };\n      }\n      return { type: 20 /* IDENT_TOKEN */, value: value };\n    };\n    Tokenizer.prototype.consumeUrlToken = function () {\n      var value = [];\n      this.consumeWhiteSpace();\n      if (this.peekCodePoint(0) === EOF) {\n        return { type: 22 /* URL_TOKEN */, value: \"\" };\n      }\n      var next = this.peekCodePoint(0);\n      if (next === APOSTROPHE || next === QUOTATION_MARK) {\n        var stringToken = this.consumeStringToken(this.consumeCodePoint());\n        if (stringToken.type === 0 /* STRING_TOKEN */) {\n          this.consumeWhiteSpace();\n          if (\n            this.peekCodePoint(0) === EOF ||\n            this.peekCodePoint(0) === RIGHT_PARENTHESIS\n          ) {\n            this.consumeCodePoint();\n            return { type: 22 /* URL_TOKEN */, value: stringToken.value };\n          }\n        }\n        this.consumeBadUrlRemnants();\n        return BAD_URL_TOKEN;\n      }\n      while (true) {\n        var codePoint = this.consumeCodePoint();\n        if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {\n          return {\n            type: 22 /* URL_TOKEN */,\n            value: fromCodePoint$1.apply(void 0, value),\n          };\n        } else if (isWhiteSpace(codePoint)) {\n          this.consumeWhiteSpace();\n          if (\n            this.peekCodePoint(0) === EOF ||\n            this.peekCodePoint(0) === RIGHT_PARENTHESIS\n          ) {\n            this.consumeCodePoint();\n            return {\n              type: 22 /* URL_TOKEN */,\n              value: fromCodePoint$1.apply(void 0, value),\n            };\n          }\n          this.consumeBadUrlRemnants();\n          return BAD_URL_TOKEN;\n        } else if (\n          codePoint === QUOTATION_MARK ||\n          codePoint === APOSTROPHE ||\n          codePoint === LEFT_PARENTHESIS ||\n          isNonPrintableCodePoint(codePoint)\n        ) {\n          this.consumeBadUrlRemnants();\n          return BAD_URL_TOKEN;\n        } else if (codePoint === REVERSE_SOLIDUS) {\n          if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n            value.push(this.consumeEscapedCodePoint());\n          } else {\n            this.consumeBadUrlRemnants();\n            return BAD_URL_TOKEN;\n          }\n        } else {\n          value.push(codePoint);\n        }\n      }\n    };\n    Tokenizer.prototype.consumeWhiteSpace = function () {\n      while (isWhiteSpace(this.peekCodePoint(0))) {\n        this.consumeCodePoint();\n      }\n    };\n    Tokenizer.prototype.consumeBadUrlRemnants = function () {\n      while (true) {\n        var codePoint = this.consumeCodePoint();\n        if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {\n          return;\n        }\n        if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n          this.consumeEscapedCodePoint();\n        }\n      }\n    };\n    Tokenizer.prototype.consumeStringSlice = function (count) {\n      var SLICE_STACK_SIZE = 50000;\n      var value = \"\";\n      while (count > 0) {\n        var amount = Math.min(SLICE_STACK_SIZE, count);\n        value += fromCodePoint$1.apply(void 0, this._value.splice(0, amount));\n        count -= amount;\n      }\n      this._value.shift();\n      return value;\n    };\n    Tokenizer.prototype.consumeStringToken = function (endingCodePoint) {\n      var value = \"\";\n      var i = 0;\n      do {\n        var codePoint = this._value[i];\n        if (\n          codePoint === EOF ||\n          codePoint === undefined ||\n          codePoint === endingCodePoint\n        ) {\n          value += this.consumeStringSlice(i);\n          return { type: 0 /* STRING_TOKEN */, value: value };\n        }\n        if (codePoint === LINE_FEED) {\n          this._value.splice(0, i);\n          return BAD_STRING_TOKEN;\n        }\n        if (codePoint === REVERSE_SOLIDUS) {\n          var next = this._value[i + 1];\n          if (next !== EOF && next !== undefined) {\n            if (next === LINE_FEED) {\n              value += this.consumeStringSlice(i);\n              i = -1;\n              this._value.shift();\n            } else if (isValidEscape(codePoint, next)) {\n              value += this.consumeStringSlice(i);\n              value += fromCodePoint$1(this.consumeEscapedCodePoint());\n              i = -1;\n            }\n          }\n        }\n        i++;\n      } while (true);\n    };\n    Tokenizer.prototype.consumeNumber = function () {\n      var repr = [];\n      var type = FLAG_INTEGER;\n      var c1 = this.peekCodePoint(0);\n      if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n        repr.push(this.consumeCodePoint());\n      }\n      while (isDigit(this.peekCodePoint(0))) {\n        repr.push(this.consumeCodePoint());\n      }\n      c1 = this.peekCodePoint(0);\n      var c2 = this.peekCodePoint(1);\n      if (c1 === FULL_STOP && isDigit(c2)) {\n        repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n        type = FLAG_NUMBER;\n        while (isDigit(this.peekCodePoint(0))) {\n          repr.push(this.consumeCodePoint());\n        }\n      }\n      c1 = this.peekCodePoint(0);\n      c2 = this.peekCodePoint(1);\n      var c3 = this.peekCodePoint(2);\n      if (\n        (c1 === E || c1 === e) &&\n        (((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3)) ||\n          isDigit(c2))\n      ) {\n        repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n        type = FLAG_NUMBER;\n        while (isDigit(this.peekCodePoint(0))) {\n          repr.push(this.consumeCodePoint());\n        }\n      }\n      return [stringToNumber(repr), type];\n    };\n    Tokenizer.prototype.consumeNumericToken = function () {\n      var _a = this.consumeNumber(),\n        number = _a[0],\n        flags = _a[1];\n      var c1 = this.peekCodePoint(0);\n      var c2 = this.peekCodePoint(1);\n      var c3 = this.peekCodePoint(2);\n      if (isIdentifierStart(c1, c2, c3)) {\n        var unit = this.consumeName();\n        return {\n          type: 15 /* DIMENSION_TOKEN */,\n          number: number,\n          flags: flags,\n          unit: unit,\n        };\n      }\n      if (c1 === PERCENTAGE_SIGN) {\n        this.consumeCodePoint();\n        return {\n          type: 16 /* PERCENTAGE_TOKEN */,\n          number: number,\n          flags: flags,\n        };\n      }\n      return { type: 17 /* NUMBER_TOKEN */, number: number, flags: flags };\n    };\n    Tokenizer.prototype.consumeEscapedCodePoint = function () {\n      var codePoint = this.consumeCodePoint();\n      if (isHex(codePoint)) {\n        var hex = fromCodePoint$1(codePoint);\n        while (isHex(this.peekCodePoint(0)) && hex.length < 6) {\n          hex += fromCodePoint$1(this.consumeCodePoint());\n        }\n        if (isWhiteSpace(this.peekCodePoint(0))) {\n          this.consumeCodePoint();\n        }\n        var hexCodePoint = parseInt(hex, 16);\n        if (\n          hexCodePoint === 0 ||\n          isSurrogateCodePoint(hexCodePoint) ||\n          hexCodePoint > 0x10ffff\n        ) {\n          return REPLACEMENT_CHARACTER;\n        }\n        return hexCodePoint;\n      }\n      if (codePoint === EOF) {\n        return REPLACEMENT_CHARACTER;\n      }\n      return codePoint;\n    };\n    Tokenizer.prototype.consumeName = function () {\n      var result = \"\";\n      while (true) {\n        var codePoint = this.consumeCodePoint();\n        if (isNameCodePoint(codePoint)) {\n          result += fromCodePoint$1(codePoint);\n        } else if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n          result += fromCodePoint$1(this.consumeEscapedCodePoint());\n        } else {\n          this.reconsumeCodePoint(codePoint);\n          return result;\n        }\n      }\n    };\n    return Tokenizer;\n  })();\n\n  var Parser = /** @class */ (function () {\n    function Parser(tokens) {\n      this._tokens = tokens;\n    }\n    Parser.create = function (value) {\n      var tokenizer = new Tokenizer();\n      tokenizer.write(value);\n      return new Parser(tokenizer.read());\n    };\n    Parser.parseValue = function (value) {\n      return Parser.create(value).parseComponentValue();\n    };\n    Parser.parseValues = function (value) {\n      return Parser.create(value).parseComponentValues();\n    };\n    Parser.prototype.parseComponentValue = function () {\n      var token = this.consumeToken();\n      while (token.type === 31 /* WHITESPACE_TOKEN */) {\n        token = this.consumeToken();\n      }\n      if (token.type === 32 /* EOF_TOKEN */) {\n        throw new SyntaxError(\n          \"Error parsing CSS component value, unexpected EOF\",\n        );\n      }\n      this.reconsumeToken(token);\n      var value = this.consumeComponentValue();\n      do {\n        token = this.consumeToken();\n      } while (token.type === 31 /* WHITESPACE_TOKEN */);\n      if (token.type === 32 /* EOF_TOKEN */) {\n        return value;\n      }\n      throw new SyntaxError(\n        \"Error parsing CSS component value, multiple values found when expecting only one\",\n      );\n    };\n    Parser.prototype.parseComponentValues = function () {\n      var values = [];\n      while (true) {\n        var value = this.consumeComponentValue();\n        if (value.type === 32 /* EOF_TOKEN */) {\n          return values;\n        }\n        values.push(value);\n        values.push();\n      }\n    };\n    Parser.prototype.consumeComponentValue = function () {\n      var token = this.consumeToken();\n      switch (token.type) {\n        case 11 /* LEFT_CURLY_BRACKET_TOKEN */:\n        case 28 /* LEFT_SQUARE_BRACKET_TOKEN */:\n        case 2 /* LEFT_PARENTHESIS_TOKEN */:\n          return this.consumeSimpleBlock(token.type);\n        case 19 /* FUNCTION_TOKEN */:\n          return this.consumeFunction(token);\n      }\n      return token;\n    };\n    Parser.prototype.consumeSimpleBlock = function (type) {\n      var block = { type: type, values: [] };\n      var token = this.consumeToken();\n      while (true) {\n        if (\n          token.type === 32 /* EOF_TOKEN */ ||\n          isEndingTokenFor(token, type)\n        ) {\n          return block;\n        }\n        this.reconsumeToken(token);\n        block.values.push(this.consumeComponentValue());\n        token = this.consumeToken();\n      }\n    };\n    Parser.prototype.consumeFunction = function (functionToken) {\n      var cssFunction = {\n        name: functionToken.value,\n        values: [],\n        type: 18 /* FUNCTION */,\n      };\n      while (true) {\n        var token = this.consumeToken();\n        if (\n          token.type === 32 /* EOF_TOKEN */ ||\n          token.type === 3 /* RIGHT_PARENTHESIS_TOKEN */\n        ) {\n          return cssFunction;\n        }\n        this.reconsumeToken(token);\n        cssFunction.values.push(this.consumeComponentValue());\n      }\n    };\n    Parser.prototype.consumeToken = function () {\n      var token = this._tokens.shift();\n      return typeof token === \"undefined\" ? EOF_TOKEN : token;\n    };\n    Parser.prototype.reconsumeToken = function (token) {\n      this._tokens.unshift(token);\n    };\n    return Parser;\n  })();\n  var isDimensionToken = function (token) {\n    return token.type === 15 /* DIMENSION_TOKEN */;\n  };\n  var isNumberToken = function (token) {\n    return token.type === 17 /* NUMBER_TOKEN */;\n  };\n  var isIdentToken = function (token) {\n    return token.type === 20 /* IDENT_TOKEN */;\n  };\n  var isStringToken = function (token) {\n    return token.type === 0 /* STRING_TOKEN */;\n  };\n  var isIdentWithValue = function (token, value) {\n    return isIdentToken(token) && token.value === value;\n  };\n  var nonWhiteSpace = function (token) {\n    return token.type !== 31 /* WHITESPACE_TOKEN */;\n  };\n  var nonFunctionArgSeparator = function (token) {\n    return (\n      token.type !== 31 /* WHITESPACE_TOKEN */ &&\n      token.type !== 4 /* COMMA_TOKEN */\n    );\n  };\n  var parseFunctionArgs = function (tokens) {\n    var args = [];\n    var arg = [];\n    tokens.forEach(function (token) {\n      if (token.type === 4 /* COMMA_TOKEN */) {\n        if (arg.length === 0) {\n          throw new Error(\"Error parsing function args, zero tokens for arg\");\n        }\n        args.push(arg);\n        arg = [];\n        return;\n      }\n      if (token.type !== 31 /* WHITESPACE_TOKEN */) {\n        arg.push(token);\n      }\n    });\n    if (arg.length) {\n      args.push(arg);\n    }\n    return args;\n  };\n  var isEndingTokenFor = function (token, type) {\n    if (\n      type === 11 /* LEFT_CURLY_BRACKET_TOKEN */ &&\n      token.type === 12 /* RIGHT_CURLY_BRACKET_TOKEN */\n    ) {\n      return true;\n    }\n    if (\n      type === 28 /* LEFT_SQUARE_BRACKET_TOKEN */ &&\n      token.type === 29 /* RIGHT_SQUARE_BRACKET_TOKEN */\n    ) {\n      return true;\n    }\n    return (\n      type === 2 /* LEFT_PARENTHESIS_TOKEN */ &&\n      token.type === 3 /* RIGHT_PARENTHESIS_TOKEN */\n    );\n  };\n\n  var isLength = function (token) {\n    return (\n      token.type === 17 /* NUMBER_TOKEN */ ||\n      token.type === 15 /* DIMENSION_TOKEN */\n    );\n  };\n\n  var isLengthPercentage = function (token) {\n    return token.type === 16 /* PERCENTAGE_TOKEN */ || isLength(token);\n  };\n  var parseLengthPercentageTuple = function (tokens) {\n    return tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];\n  };\n  var ZERO_LENGTH = {\n    type: 17 /* NUMBER_TOKEN */,\n    number: 0,\n    flags: FLAG_INTEGER,\n  };\n  var FIFTY_PERCENT = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 50,\n    flags: FLAG_INTEGER,\n  };\n  var HUNDRED_PERCENT = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 100,\n    flags: FLAG_INTEGER,\n  };\n  var getAbsoluteValueForTuple = function (tuple, width, height) {\n    var x = tuple[0],\n      y = tuple[1];\n    return [\n      getAbsoluteValue(x, width),\n      getAbsoluteValue(typeof y !== \"undefined\" ? y : x, height),\n    ];\n  };\n  var getAbsoluteValue = function (token, parent) {\n    if (token.type === 16 /* PERCENTAGE_TOKEN */) {\n      return (token.number / 100) * parent;\n    }\n    if (isDimensionToken(token)) {\n      switch (token.unit) {\n        case \"rem\":\n        case \"em\":\n          return 16 * token.number; // TODO use correct font-size\n        case \"px\":\n        default:\n          return token.number;\n      }\n    }\n    return token.number;\n  };\n\n  var DEG = \"deg\";\n  var GRAD = \"grad\";\n  var RAD = \"rad\";\n  var TURN = \"turn\";\n  var angle = {\n    name: \"angle\",\n    parse: function (_context, value) {\n      if (value.type === 15 /* DIMENSION_TOKEN */) {\n        switch (value.unit) {\n          case DEG:\n            return (Math.PI * value.number) / 180;\n          case GRAD:\n            return (Math.PI / 200) * value.number;\n          case RAD:\n            return value.number;\n          case TURN:\n            return Math.PI * 2 * value.number;\n        }\n      }\n      throw new Error(\"Unsupported angle type\");\n    },\n  };\n  var isAngle = function (value) {\n    if (value.type === 15 /* DIMENSION_TOKEN */) {\n      if (\n        value.unit === DEG ||\n        value.unit === GRAD ||\n        value.unit === RAD ||\n        value.unit === TURN\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n  var parseNamedSide = function (tokens) {\n    var sideOrCorner = tokens\n      .filter(isIdentToken)\n      .map(function (ident) {\n        return ident.value;\n      })\n      .join(\" \");\n    switch (sideOrCorner) {\n      case \"to bottom right\":\n      case \"to right bottom\":\n      case \"left top\":\n      case \"top left\":\n        return [ZERO_LENGTH, ZERO_LENGTH];\n      case \"to top\":\n      case \"bottom\":\n        return deg(0);\n      case \"to bottom left\":\n      case \"to left bottom\":\n      case \"right top\":\n      case \"top right\":\n        return [ZERO_LENGTH, HUNDRED_PERCENT];\n      case \"to right\":\n      case \"left\":\n        return deg(90);\n      case \"to top left\":\n      case \"to left top\":\n      case \"right bottom\":\n      case \"bottom right\":\n        return [HUNDRED_PERCENT, HUNDRED_PERCENT];\n      case \"to bottom\":\n      case \"top\":\n        return deg(180);\n      case \"to top right\":\n      case \"to right top\":\n      case \"left bottom\":\n      case \"bottom left\":\n        return [HUNDRED_PERCENT, ZERO_LENGTH];\n      case \"to left\":\n      case \"right\":\n        return deg(270);\n    }\n    return 0;\n  };\n  var deg = function (deg) {\n    return (Math.PI * deg) / 180;\n  };\n\n  var color$1 = {\n    name: \"color\",\n    parse: function (context, value) {\n      if (value.type === 18 /* FUNCTION */) {\n        var colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];\n        if (typeof colorFunction === \"undefined\") {\n          throw new Error(\n            'Attempting to parse an unsupported color function \"' +\n              value.name +\n              '\"',\n          );\n        }\n        return colorFunction(context, value.values);\n      }\n      if (value.type === 5 /* HASH_TOKEN */) {\n        if (value.value.length === 3) {\n          var r = value.value.substring(0, 1);\n          var g = value.value.substring(1, 2);\n          var b = value.value.substring(2, 3);\n          return pack(\n            parseInt(r + r, 16),\n            parseInt(g + g, 16),\n            parseInt(b + b, 16),\n            1,\n          );\n        }\n        if (value.value.length === 4) {\n          var r = value.value.substring(0, 1);\n          var g = value.value.substring(1, 2);\n          var b = value.value.substring(2, 3);\n          var a = value.value.substring(3, 4);\n          return pack(\n            parseInt(r + r, 16),\n            parseInt(g + g, 16),\n            parseInt(b + b, 16),\n            parseInt(a + a, 16) / 255,\n          );\n        }\n        if (value.value.length === 6) {\n          var r = value.value.substring(0, 2);\n          var g = value.value.substring(2, 4);\n          var b = value.value.substring(4, 6);\n          return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);\n        }\n        if (value.value.length === 8) {\n          var r = value.value.substring(0, 2);\n          var g = value.value.substring(2, 4);\n          var b = value.value.substring(4, 6);\n          var a = value.value.substring(6, 8);\n          return pack(\n            parseInt(r, 16),\n            parseInt(g, 16),\n            parseInt(b, 16),\n            parseInt(a, 16) / 255,\n          );\n        }\n      }\n      if (value.type === 20 /* IDENT_TOKEN */) {\n        var namedColor = COLORS[value.value.toUpperCase()];\n        if (typeof namedColor !== \"undefined\") {\n          return namedColor;\n        }\n      }\n      return COLORS.TRANSPARENT;\n    },\n  };\n  var isTransparent = function (color) {\n    return (0xff & color) === 0;\n  };\n  var asString = function (color) {\n    var alpha = 0xff & color;\n    var blue = 0xff & (color >> 8);\n    var green = 0xff & (color >> 16);\n    var red = 0xff & (color >> 24);\n    return alpha < 255\n      ? \"rgba(\" + red + \",\" + green + \",\" + blue + \",\" + alpha / 255 + \")\"\n      : \"rgb(\" + red + \",\" + green + \",\" + blue + \")\";\n  };\n  var pack = function (r, g, b, a) {\n    return (\n      ((r << 24) | (g << 16) | (b << 8) | (Math.round(a * 255) << 0)) >>> 0\n    );\n  };\n  var getTokenColorValue = function (token, i) {\n    if (token.type === 17 /* NUMBER_TOKEN */) {\n      return token.number;\n    }\n    if (token.type === 16 /* PERCENTAGE_TOKEN */) {\n      var max = i === 3 ? 1 : 255;\n      return i === 3\n        ? (token.number / 100) * max\n        : Math.round((token.number / 100) * max);\n    }\n    return 0;\n  };\n  var rgb = function (_context, args) {\n    var tokens = args.filter(nonFunctionArgSeparator);\n    if (tokens.length === 3) {\n      var _a = tokens.map(getTokenColorValue),\n        r = _a[0],\n        g = _a[1],\n        b = _a[2];\n      return pack(r, g, b, 1);\n    }\n    if (tokens.length === 4) {\n      var _b = tokens.map(getTokenColorValue),\n        r = _b[0],\n        g = _b[1],\n        b = _b[2],\n        a = _b[3];\n      return pack(r, g, b, a);\n    }\n    return 0;\n  };\n  function hue2rgb(t1, t2, hue) {\n    if (hue < 0) {\n      hue += 1;\n    }\n    if (hue >= 1) {\n      hue -= 1;\n    }\n    if (hue < 1 / 6) {\n      return (t2 - t1) * hue * 6 + t1;\n    } else if (hue < 1 / 2) {\n      return t2;\n    } else if (hue < 2 / 3) {\n      return (t2 - t1) * 6 * (2 / 3 - hue) + t1;\n    } else {\n      return t1;\n    }\n  }\n  var hsl = function (context, args) {\n    var tokens = args.filter(nonFunctionArgSeparator);\n    var hue = tokens[0],\n      saturation = tokens[1],\n      lightness = tokens[2],\n      alpha = tokens[3];\n    var h =\n      (hue.type === 17 /* NUMBER_TOKEN */\n        ? deg(hue.number)\n        : angle.parse(context, hue)) /\n      (Math.PI * 2);\n    var s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;\n    var l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;\n    var a =\n      typeof alpha !== \"undefined\" && isLengthPercentage(alpha)\n        ? getAbsoluteValue(alpha, 1)\n        : 1;\n    if (s === 0) {\n      return pack(l * 255, l * 255, l * 255, 1);\n    }\n    var t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var t1 = l * 2 - t2;\n    var r = hue2rgb(t1, t2, h + 1 / 3);\n    var g = hue2rgb(t1, t2, h);\n    var b = hue2rgb(t1, t2, h - 1 / 3);\n    return pack(r * 255, g * 255, b * 255, a);\n  };\n  var SUPPORTED_COLOR_FUNCTIONS = {\n    hsl: hsl,\n    hsla: hsl,\n    rgb: rgb,\n    rgba: rgb,\n  };\n  var parseColor = function (context, value) {\n    return color$1.parse(context, Parser.create(value).parseComponentValue());\n  };\n  var COLORS = {\n    ALICEBLUE: 0xf0f8ffff,\n    ANTIQUEWHITE: 0xfaebd7ff,\n    AQUA: 0x00ffffff,\n    AQUAMARINE: 0x7fffd4ff,\n    AZURE: 0xf0ffffff,\n    BEIGE: 0xf5f5dcff,\n    BISQUE: 0xffe4c4ff,\n    BLACK: 0x000000ff,\n    BLANCHEDALMOND: 0xffebcdff,\n    BLUE: 0x0000ffff,\n    BLUEVIOLET: 0x8a2be2ff,\n    BROWN: 0xa52a2aff,\n    BURLYWOOD: 0xdeb887ff,\n    CADETBLUE: 0x5f9ea0ff,\n    CHARTREUSE: 0x7fff00ff,\n    CHOCOLATE: 0xd2691eff,\n    CORAL: 0xff7f50ff,\n    CORNFLOWERBLUE: 0x6495edff,\n    CORNSILK: 0xfff8dcff,\n    CRIMSON: 0xdc143cff,\n    CYAN: 0x00ffffff,\n    DARKBLUE: 0x00008bff,\n    DARKCYAN: 0x008b8bff,\n    DARKGOLDENROD: 0xb886bbff,\n    DARKGRAY: 0xa9a9a9ff,\n    DARKGREEN: 0x006400ff,\n    DARKGREY: 0xa9a9a9ff,\n    DARKKHAKI: 0xbdb76bff,\n    DARKMAGENTA: 0x8b008bff,\n    DARKOLIVEGREEN: 0x556b2fff,\n    DARKORANGE: 0xff8c00ff,\n    DARKORCHID: 0x9932ccff,\n    DARKRED: 0x8b0000ff,\n    DARKSALMON: 0xe9967aff,\n    DARKSEAGREEN: 0x8fbc8fff,\n    DARKSLATEBLUE: 0x483d8bff,\n    DARKSLATEGRAY: 0x2f4f4fff,\n    DARKSLATEGREY: 0x2f4f4fff,\n    DARKTURQUOISE: 0x00ced1ff,\n    DARKVIOLET: 0x9400d3ff,\n    DEEPPINK: 0xff1493ff,\n    DEEPSKYBLUE: 0x00bfffff,\n    DIMGRAY: 0x696969ff,\n    DIMGREY: 0x696969ff,\n    DODGERBLUE: 0x1e90ffff,\n    FIREBRICK: 0xb22222ff,\n    FLORALWHITE: 0xfffaf0ff,\n    FORESTGREEN: 0x228b22ff,\n    FUCHSIA: 0xff00ffff,\n    GAINSBORO: 0xdcdcdcff,\n    GHOSTWHITE: 0xf8f8ffff,\n    GOLD: 0xffd700ff,\n    GOLDENROD: 0xdaa520ff,\n    GRAY: 0x808080ff,\n    GREEN: 0x008000ff,\n    GREENYELLOW: 0xadff2fff,\n    GREY: 0x808080ff,\n    HONEYDEW: 0xf0fff0ff,\n    HOTPINK: 0xff69b4ff,\n    INDIANRED: 0xcd5c5cff,\n    INDIGO: 0x4b0082ff,\n    IVORY: 0xfffff0ff,\n    KHAKI: 0xf0e68cff,\n    LAVENDER: 0xe6e6faff,\n    LAVENDERBLUSH: 0xfff0f5ff,\n    LAWNGREEN: 0x7cfc00ff,\n    LEMONCHIFFON: 0xfffacdff,\n    LIGHTBLUE: 0xadd8e6ff,\n    LIGHTCORAL: 0xf08080ff,\n    LIGHTCYAN: 0xe0ffffff,\n    LIGHTGOLDENRODYELLOW: 0xfafad2ff,\n    LIGHTGRAY: 0xd3d3d3ff,\n    LIGHTGREEN: 0x90ee90ff,\n    LIGHTGREY: 0xd3d3d3ff,\n    LIGHTPINK: 0xffb6c1ff,\n    LIGHTSALMON: 0xffa07aff,\n    LIGHTSEAGREEN: 0x20b2aaff,\n    LIGHTSKYBLUE: 0x87cefaff,\n    LIGHTSLATEGRAY: 0x778899ff,\n    LIGHTSLATEGREY: 0x778899ff,\n    LIGHTSTEELBLUE: 0xb0c4deff,\n    LIGHTYELLOW: 0xffffe0ff,\n    LIME: 0x00ff00ff,\n    LIMEGREEN: 0x32cd32ff,\n    LINEN: 0xfaf0e6ff,\n    MAGENTA: 0xff00ffff,\n    MAROON: 0x800000ff,\n    MEDIUMAQUAMARINE: 0x66cdaaff,\n    MEDIUMBLUE: 0x0000cdff,\n    MEDIUMORCHID: 0xba55d3ff,\n    MEDIUMPURPLE: 0x9370dbff,\n    MEDIUMSEAGREEN: 0x3cb371ff,\n    MEDIUMSLATEBLUE: 0x7b68eeff,\n    MEDIUMSPRINGGREEN: 0x00fa9aff,\n    MEDIUMTURQUOISE: 0x48d1ccff,\n    MEDIUMVIOLETRED: 0xc71585ff,\n    MIDNIGHTBLUE: 0x191970ff,\n    MINTCREAM: 0xf5fffaff,\n    MISTYROSE: 0xffe4e1ff,\n    MOCCASIN: 0xffe4b5ff,\n    NAVAJOWHITE: 0xffdeadff,\n    NAVY: 0x000080ff,\n    OLDLACE: 0xfdf5e6ff,\n    OLIVE: 0x808000ff,\n    OLIVEDRAB: 0x6b8e23ff,\n    ORANGE: 0xffa500ff,\n    ORANGERED: 0xff4500ff,\n    ORCHID: 0xda70d6ff,\n    PALEGOLDENROD: 0xeee8aaff,\n    PALEGREEN: 0x98fb98ff,\n    PALETURQUOISE: 0xafeeeeff,\n    PALEVIOLETRED: 0xdb7093ff,\n    PAPAYAWHIP: 0xffefd5ff,\n    PEACHPUFF: 0xffdab9ff,\n    PERU: 0xcd853fff,\n    PINK: 0xffc0cbff,\n    PLUM: 0xdda0ddff,\n    POWDERBLUE: 0xb0e0e6ff,\n    PURPLE: 0x800080ff,\n    REBECCAPURPLE: 0x663399ff,\n    RED: 0xff0000ff,\n    ROSYBROWN: 0xbc8f8fff,\n    ROYALBLUE: 0x4169e1ff,\n    SADDLEBROWN: 0x8b4513ff,\n    SALMON: 0xfa8072ff,\n    SANDYBROWN: 0xf4a460ff,\n    SEAGREEN: 0x2e8b57ff,\n    SEASHELL: 0xfff5eeff,\n    SIENNA: 0xa0522dff,\n    SILVER: 0xc0c0c0ff,\n    SKYBLUE: 0x87ceebff,\n    SLATEBLUE: 0x6a5acdff,\n    SLATEGRAY: 0x708090ff,\n    SLATEGREY: 0x708090ff,\n    SNOW: 0xfffafaff,\n    SPRINGGREEN: 0x00ff7fff,\n    STEELBLUE: 0x4682b4ff,\n    TAN: 0xd2b48cff,\n    TEAL: 0x008080ff,\n    THISTLE: 0xd8bfd8ff,\n    TOMATO: 0xff6347ff,\n    TRANSPARENT: 0x00000000,\n    TURQUOISE: 0x40e0d0ff,\n    VIOLET: 0xee82eeff,\n    WHEAT: 0xf5deb3ff,\n    WHITE: 0xffffffff,\n    WHITESMOKE: 0xf5f5f5ff,\n    YELLOW: 0xffff00ff,\n    YELLOWGREEN: 0x9acd32ff,\n  };\n\n  var backgroundClip = {\n    name: \"background-clip\",\n    initialValue: \"border-box\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return tokens.map(function (token) {\n        if (isIdentToken(token)) {\n          switch (token.value) {\n            case \"padding-box\":\n              return 1 /* PADDING_BOX */;\n            case \"content-box\":\n              return 2 /* CONTENT_BOX */;\n          }\n        }\n        return 0 /* BORDER_BOX */;\n      });\n    },\n  };\n\n  var backgroundColor = {\n    name: \"background-color\",\n    initialValue: \"transparent\",\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: \"color\",\n  };\n\n  var parseColorStop = function (context, args) {\n    var color = color$1.parse(context, args[0]);\n    var stop = args[1];\n    return stop && isLengthPercentage(stop)\n      ? { color: color, stop: stop }\n      : { color: color, stop: null };\n  };\n  var processColorStops = function (stops, lineLength) {\n    var first = stops[0];\n    var last = stops[stops.length - 1];\n    if (first.stop === null) {\n      first.stop = ZERO_LENGTH;\n    }\n    if (last.stop === null) {\n      last.stop = HUNDRED_PERCENT;\n    }\n    var processStops = [];\n    var previous = 0;\n    for (var i = 0; i < stops.length; i++) {\n      var stop_1 = stops[i].stop;\n      if (stop_1 !== null) {\n        var absoluteValue = getAbsoluteValue(stop_1, lineLength);\n        if (absoluteValue > previous) {\n          processStops.push(absoluteValue);\n        } else {\n          processStops.push(previous);\n        }\n        previous = absoluteValue;\n      } else {\n        processStops.push(null);\n      }\n    }\n    var gapBegin = null;\n    for (var i = 0; i < processStops.length; i++) {\n      var stop_2 = processStops[i];\n      if (stop_2 === null) {\n        if (gapBegin === null) {\n          gapBegin = i;\n        }\n      } else if (gapBegin !== null) {\n        var gapLength = i - gapBegin;\n        var beforeGap = processStops[gapBegin - 1];\n        var gapValue = (stop_2 - beforeGap) / (gapLength + 1);\n        for (var g = 1; g <= gapLength; g++) {\n          processStops[gapBegin + g - 1] = gapValue * g;\n        }\n        gapBegin = null;\n      }\n    }\n    return stops.map(function (_a, i) {\n      var color = _a.color;\n      return {\n        color: color,\n        stop: Math.max(Math.min(1, processStops[i] / lineLength), 0),\n      };\n    });\n  };\n  var getAngleFromCorner = function (corner, width, height) {\n    var centerX = width / 2;\n    var centerY = height / 2;\n    var x = getAbsoluteValue(corner[0], width) - centerX;\n    var y = centerY - getAbsoluteValue(corner[1], height);\n    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);\n  };\n  var calculateGradientDirection = function (angle, width, height) {\n    var radian =\n      typeof angle === \"number\"\n        ? angle\n        : getAngleFromCorner(angle, width, height);\n    var lineLength =\n      Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfLineLength = lineLength / 2;\n    var yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;\n    var xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;\n    return [\n      lineLength,\n      halfWidth - xDiff,\n      halfWidth + xDiff,\n      halfHeight - yDiff,\n      halfHeight + yDiff,\n    ];\n  };\n  var distance = function (a, b) {\n    return Math.sqrt(a * a + b * b);\n  };\n  var findCorner = function (width, height, x, y, closest) {\n    var corners = [\n      [0, 0],\n      [0, height],\n      [width, 0],\n      [width, height],\n    ];\n    return corners.reduce(\n      function (stat, corner) {\n        var cx = corner[0],\n          cy = corner[1];\n        var d = distance(x - cx, y - cy);\n        if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {\n          return {\n            optimumCorner: corner,\n            optimumDistance: d,\n          };\n        }\n        return stat;\n      },\n      {\n        optimumDistance: closest ? Infinity : -Infinity,\n        optimumCorner: null,\n      },\n    ).optimumCorner;\n  };\n  var calculateRadius = function (gradient, x, y, width, height) {\n    var rx = 0;\n    var ry = 0;\n    switch (gradient.size) {\n      case 0 /* CLOSEST_SIDE */:\n        // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradients center.\n        // If the shape is an ellipse, it exactly meets the closest side in each dimension.\n        if (gradient.shape === 0 /* CIRCLE */) {\n          rx = ry = Math.min(\n            Math.abs(x),\n            Math.abs(x - width),\n            Math.abs(y),\n            Math.abs(y - height),\n          );\n        } else if (gradient.shape === 1 /* ELLIPSE */) {\n          rx = Math.min(Math.abs(x), Math.abs(x - width));\n          ry = Math.min(Math.abs(y), Math.abs(y - height));\n        }\n        break;\n      case 2 /* CLOSEST_CORNER */:\n        // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradients center.\n        // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.\n        if (gradient.shape === 0 /* CIRCLE */) {\n          rx = ry = Math.min(\n            distance(x, y),\n            distance(x, y - height),\n            distance(x - width, y),\n            distance(x - width, y - height),\n          );\n        } else if (gradient.shape === 1 /* ELLIPSE */) {\n          // Compute the ratio ry/rx (which is to be the same as for \"closest-side\")\n          var c =\n            Math.min(Math.abs(y), Math.abs(y - height)) /\n            Math.min(Math.abs(x), Math.abs(x - width));\n          var _a = findCorner(width, height, x, y, true),\n            cx = _a[0],\n            cy = _a[1];\n          rx = distance(cx - x, (cy - y) / c);\n          ry = c * rx;\n        }\n        break;\n      case 1 /* FARTHEST_SIDE */:\n        // Same as closest-side, except the ending shape is sized based on the farthest side(s)\n        if (gradient.shape === 0 /* CIRCLE */) {\n          rx = ry = Math.max(\n            Math.abs(x),\n            Math.abs(x - width),\n            Math.abs(y),\n            Math.abs(y - height),\n          );\n        } else if (gradient.shape === 1 /* ELLIPSE */) {\n          rx = Math.max(Math.abs(x), Math.abs(x - width));\n          ry = Math.max(Math.abs(y), Math.abs(y - height));\n        }\n        break;\n      case 3 /* FARTHEST_CORNER */:\n        // Same as closest-corner, except the ending shape is sized based on the farthest corner.\n        // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.\n        if (gradient.shape === 0 /* CIRCLE */) {\n          rx = ry = Math.max(\n            distance(x, y),\n            distance(x, y - height),\n            distance(x - width, y),\n            distance(x - width, y - height),\n          );\n        } else if (gradient.shape === 1 /* ELLIPSE */) {\n          // Compute the ratio ry/rx (which is to be the same as for \"farthest-side\")\n          var c =\n            Math.max(Math.abs(y), Math.abs(y - height)) /\n            Math.max(Math.abs(x), Math.abs(x - width));\n          var _b = findCorner(width, height, x, y, false),\n            cx = _b[0],\n            cy = _b[1];\n          rx = distance(cx - x, (cy - y) / c);\n          ry = c * rx;\n        }\n        break;\n    }\n    if (Array.isArray(gradient.size)) {\n      rx = getAbsoluteValue(gradient.size[0], width);\n      ry =\n        gradient.size.length === 2\n          ? getAbsoluteValue(gradient.size[1], height)\n          : rx;\n    }\n    return [rx, ry];\n  };\n\n  var linearGradient = function (context, tokens) {\n    var angle$1 = deg(180);\n    var stops = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n      if (i === 0) {\n        var firstToken = arg[0];\n        if (\n          firstToken.type === 20 /* IDENT_TOKEN */ &&\n          firstToken.value === \"to\"\n        ) {\n          angle$1 = parseNamedSide(arg);\n          return;\n        } else if (isAngle(firstToken)) {\n          angle$1 = angle.parse(context, firstToken);\n          return;\n        }\n      }\n      var colorStop = parseColorStop(context, arg);\n      stops.push(colorStop);\n    });\n    return { angle: angle$1, stops: stops, type: 1 /* LINEAR_GRADIENT */ };\n  };\n\n  var prefixLinearGradient = function (context, tokens) {\n    var angle$1 = deg(180);\n    var stops = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n      if (i === 0) {\n        var firstToken = arg[0];\n        if (\n          firstToken.type === 20 /* IDENT_TOKEN */ &&\n          [\"top\", \"left\", \"right\", \"bottom\"].indexOf(firstToken.value) !== -1\n        ) {\n          angle$1 = parseNamedSide(arg);\n          return;\n        } else if (isAngle(firstToken)) {\n          angle$1 = (angle.parse(context, firstToken) + deg(270)) % deg(360);\n          return;\n        }\n      }\n      var colorStop = parseColorStop(context, arg);\n      stops.push(colorStop);\n    });\n    return {\n      angle: angle$1,\n      stops: stops,\n      type: 1 /* LINEAR_GRADIENT */,\n    };\n  };\n\n  var webkitGradient = function (context, tokens) {\n    var angle = deg(180);\n    var stops = [];\n    var type = 1; /* LINEAR_GRADIENT */\n    var shape = 0; /* CIRCLE */\n    var size = 3; /* FARTHEST_CORNER */\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n      var firstToken = arg[0];\n      if (i === 0) {\n        if (isIdentToken(firstToken) && firstToken.value === \"linear\") {\n          type = 1 /* LINEAR_GRADIENT */;\n          return;\n        } else if (isIdentToken(firstToken) && firstToken.value === \"radial\") {\n          type = 2 /* RADIAL_GRADIENT */;\n          return;\n        }\n      }\n      if (firstToken.type === 18 /* FUNCTION */) {\n        if (firstToken.name === \"from\") {\n          var color = color$1.parse(context, firstToken.values[0]);\n          stops.push({ stop: ZERO_LENGTH, color: color });\n        } else if (firstToken.name === \"to\") {\n          var color = color$1.parse(context, firstToken.values[0]);\n          stops.push({ stop: HUNDRED_PERCENT, color: color });\n        } else if (firstToken.name === \"color-stop\") {\n          var values = firstToken.values.filter(nonFunctionArgSeparator);\n          if (values.length === 2) {\n            var color = color$1.parse(context, values[1]);\n            var stop_1 = values[0];\n            if (isNumberToken(stop_1)) {\n              stops.push({\n                stop: {\n                  type: 16 /* PERCENTAGE_TOKEN */,\n                  number: stop_1.number * 100,\n                  flags: stop_1.flags,\n                },\n                color: color,\n              });\n            }\n          }\n        }\n      }\n    });\n    return type === 1 /* LINEAR_GRADIENT */\n      ? {\n          angle: (angle + deg(180)) % deg(360),\n          stops: stops,\n          type: type,\n        }\n      : {\n          size: size,\n          shape: shape,\n          stops: stops,\n          position: position,\n          type: type,\n        };\n  };\n\n  var CLOSEST_SIDE = \"closest-side\";\n  var FARTHEST_SIDE = \"farthest-side\";\n  var CLOSEST_CORNER = \"closest-corner\";\n  var FARTHEST_CORNER = \"farthest-corner\";\n  var CIRCLE = \"circle\";\n  var ELLIPSE = \"ellipse\";\n  var COVER = \"cover\";\n  var CONTAIN = \"contain\";\n  var radialGradient = function (context, tokens) {\n    var shape = 0; /* CIRCLE */\n    var size = 3; /* FARTHEST_CORNER */\n    var stops = [];\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n      var isColorStop = true;\n      if (i === 0) {\n        var isAtPosition_1 = false;\n        isColorStop = arg.reduce(function (acc, token) {\n          if (isAtPosition_1) {\n            if (isIdentToken(token)) {\n              switch (token.value) {\n                case \"center\":\n                  position.push(FIFTY_PERCENT);\n                  return acc;\n                case \"top\":\n                case \"left\":\n                  position.push(ZERO_LENGTH);\n                  return acc;\n                case \"right\":\n                case \"bottom\":\n                  position.push(HUNDRED_PERCENT);\n                  return acc;\n              }\n            } else if (isLengthPercentage(token) || isLength(token)) {\n              position.push(token);\n            }\n          } else if (isIdentToken(token)) {\n            switch (token.value) {\n              case CIRCLE:\n                shape = 0 /* CIRCLE */;\n                return false;\n              case ELLIPSE:\n                shape = 1 /* ELLIPSE */;\n                return false;\n              case \"at\":\n                isAtPosition_1 = true;\n                return false;\n              case CLOSEST_SIDE:\n                size = 0 /* CLOSEST_SIDE */;\n                return false;\n              case COVER:\n              case FARTHEST_SIDE:\n                size = 1 /* FARTHEST_SIDE */;\n                return false;\n              case CONTAIN:\n              case CLOSEST_CORNER:\n                size = 2 /* CLOSEST_CORNER */;\n                return false;\n              case FARTHEST_CORNER:\n                size = 3 /* FARTHEST_CORNER */;\n                return false;\n            }\n          } else if (isLength(token) || isLengthPercentage(token)) {\n            if (!Array.isArray(size)) {\n              size = [];\n            }\n            size.push(token);\n            return false;\n          }\n          return acc;\n        }, isColorStop);\n      }\n      if (isColorStop) {\n        var colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n      }\n    });\n    return {\n      size: size,\n      shape: shape,\n      stops: stops,\n      position: position,\n      type: 2 /* RADIAL_GRADIENT */,\n    };\n  };\n\n  var prefixRadialGradient = function (context, tokens) {\n    var shape = 0; /* CIRCLE */\n    var size = 3; /* FARTHEST_CORNER */\n    var stops = [];\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n      var isColorStop = true;\n      if (i === 0) {\n        isColorStop = arg.reduce(function (acc, token) {\n          if (isIdentToken(token)) {\n            switch (token.value) {\n              case \"center\":\n                position.push(FIFTY_PERCENT);\n                return false;\n              case \"top\":\n              case \"left\":\n                position.push(ZERO_LENGTH);\n                return false;\n              case \"right\":\n              case \"bottom\":\n                position.push(HUNDRED_PERCENT);\n                return false;\n            }\n          } else if (isLengthPercentage(token) || isLength(token)) {\n            position.push(token);\n            return false;\n          }\n          return acc;\n        }, isColorStop);\n      } else if (i === 1) {\n        isColorStop = arg.reduce(function (acc, token) {\n          if (isIdentToken(token)) {\n            switch (token.value) {\n              case CIRCLE:\n                shape = 0 /* CIRCLE */;\n                return false;\n              case ELLIPSE:\n                shape = 1 /* ELLIPSE */;\n                return false;\n              case CONTAIN:\n              case CLOSEST_SIDE:\n                size = 0 /* CLOSEST_SIDE */;\n                return false;\n              case FARTHEST_SIDE:\n                size = 1 /* FARTHEST_SIDE */;\n                return false;\n              case CLOSEST_CORNER:\n                size = 2 /* CLOSEST_CORNER */;\n                return false;\n              case COVER:\n              case FARTHEST_CORNER:\n                size = 3 /* FARTHEST_CORNER */;\n                return false;\n            }\n          } else if (isLength(token) || isLengthPercentage(token)) {\n            if (!Array.isArray(size)) {\n              size = [];\n            }\n            size.push(token);\n            return false;\n          }\n          return acc;\n        }, isColorStop);\n      }\n      if (isColorStop) {\n        var colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n      }\n    });\n    return {\n      size: size,\n      shape: shape,\n      stops: stops,\n      position: position,\n      type: 2 /* RADIAL_GRADIENT */,\n    };\n  };\n\n  var isLinearGradient = function (background) {\n    return background.type === 1 /* LINEAR_GRADIENT */;\n  };\n  var isRadialGradient = function (background) {\n    return background.type === 2 /* RADIAL_GRADIENT */;\n  };\n  var image = {\n    name: \"image\",\n    parse: function (context, value) {\n      if (value.type === 22 /* URL_TOKEN */) {\n        var image_1 = { url: value.value, type: 0 /* URL */ };\n        context.cache.addImage(value.value);\n        return image_1;\n      }\n      if (value.type === 18 /* FUNCTION */) {\n        var imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];\n        if (typeof imageFunction === \"undefined\") {\n          throw new Error(\n            'Attempting to parse an unsupported image function \"' +\n              value.name +\n              '\"',\n          );\n        }\n        return imageFunction(context, value.values);\n      }\n      throw new Error(\"Unsupported image type \" + value.type);\n    },\n  };\n  function isSupportedImage(value) {\n    return (\n      !(value.type === 20 /* IDENT_TOKEN */ && value.value === \"none\") &&\n      (value.type !== 18 /* FUNCTION */ ||\n        !!SUPPORTED_IMAGE_FUNCTIONS[value.name])\n    );\n  }\n  var SUPPORTED_IMAGE_FUNCTIONS = {\n    \"linear-gradient\": linearGradient,\n    \"-moz-linear-gradient\": prefixLinearGradient,\n    \"-ms-linear-gradient\": prefixLinearGradient,\n    \"-o-linear-gradient\": prefixLinearGradient,\n    \"-webkit-linear-gradient\": prefixLinearGradient,\n    \"radial-gradient\": radialGradient,\n    \"-moz-radial-gradient\": prefixRadialGradient,\n    \"-ms-radial-gradient\": prefixRadialGradient,\n    \"-o-radial-gradient\": prefixRadialGradient,\n    \"-webkit-radial-gradient\": prefixRadialGradient,\n    \"-webkit-gradient\": webkitGradient,\n  };\n\n  var backgroundImage = {\n    name: \"background-image\",\n    initialValue: \"none\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n      if (tokens.length === 0) {\n        return [];\n      }\n      var first = tokens[0];\n      if (first.type === 20 /* IDENT_TOKEN */ && first.value === \"none\") {\n        return [];\n      }\n      return tokens\n        .filter(function (value) {\n          return nonFunctionArgSeparator(value) && isSupportedImage(value);\n        })\n        .map(function (value) {\n          return image.parse(context, value);\n        });\n    },\n  };\n\n  var backgroundOrigin = {\n    name: \"background-origin\",\n    initialValue: \"border-box\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return tokens.map(function (token) {\n        if (isIdentToken(token)) {\n          switch (token.value) {\n            case \"padding-box\":\n              return 1 /* PADDING_BOX */;\n            case \"content-box\":\n              return 2 /* CONTENT_BOX */;\n          }\n        }\n        return 0 /* BORDER_BOX */;\n      });\n    },\n  };\n\n  var backgroundPosition = {\n    name: \"background-position\",\n    initialValue: \"0% 0%\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n      return parseFunctionArgs(tokens)\n        .map(function (values) {\n          return values.filter(isLengthPercentage);\n        })\n        .map(parseLengthPercentageTuple);\n    },\n  };\n\n  var backgroundRepeat = {\n    name: \"background-repeat\",\n    initialValue: \"repeat\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return parseFunctionArgs(tokens)\n        .map(function (values) {\n          return values\n            .filter(isIdentToken)\n            .map(function (token) {\n              return token.value;\n            })\n            .join(\" \");\n        })\n        .map(parseBackgroundRepeat);\n    },\n  };\n  var parseBackgroundRepeat = function (value) {\n    switch (value) {\n      case \"no-repeat\":\n        return 1 /* NO_REPEAT */;\n      case \"repeat-x\":\n      case \"repeat no-repeat\":\n        return 2 /* REPEAT_X */;\n      case \"repeat-y\":\n      case \"no-repeat repeat\":\n        return 3 /* REPEAT_Y */;\n      case \"repeat\":\n      default:\n        return 0 /* REPEAT */;\n    }\n  };\n\n  var BACKGROUND_SIZE;\n  (function (BACKGROUND_SIZE) {\n    BACKGROUND_SIZE[\"AUTO\"] = \"auto\";\n    BACKGROUND_SIZE[\"CONTAIN\"] = \"contain\";\n    BACKGROUND_SIZE[\"COVER\"] = \"cover\";\n  })(BACKGROUND_SIZE || (BACKGROUND_SIZE = {}));\n  var backgroundSize = {\n    name: \"background-size\",\n    initialValue: \"0\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return parseFunctionArgs(tokens).map(function (values) {\n        return values.filter(isBackgroundSizeInfoToken);\n      });\n    },\n  };\n  var isBackgroundSizeInfoToken = function (value) {\n    return isIdentToken(value) || isLengthPercentage(value);\n  };\n\n  var borderColorForSide = function (side) {\n    return {\n      name: \"border-\" + side + \"-color\",\n      initialValue: \"transparent\",\n      prefix: false,\n      type: 3 /* TYPE_VALUE */,\n      format: \"color\",\n    };\n  };\n  var borderTopColor = borderColorForSide(\"top\");\n  var borderRightColor = borderColorForSide(\"right\");\n  var borderBottomColor = borderColorForSide(\"bottom\");\n  var borderLeftColor = borderColorForSide(\"left\");\n\n  var borderRadiusForSide = function (side) {\n    return {\n      name: \"border-radius-\" + side,\n      initialValue: \"0 0\",\n      prefix: false,\n      type: 1 /* LIST */,\n      parse: function (_context, tokens) {\n        return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));\n      },\n    };\n  };\n  var borderTopLeftRadius = borderRadiusForSide(\"top-left\");\n  var borderTopRightRadius = borderRadiusForSide(\"top-right\");\n  var borderBottomRightRadius = borderRadiusForSide(\"bottom-right\");\n  var borderBottomLeftRadius = borderRadiusForSide(\"bottom-left\");\n\n  var borderStyleForSide = function (side) {\n    return {\n      name: \"border-\" + side + \"-style\",\n      initialValue: \"solid\",\n      prefix: false,\n      type: 2 /* IDENT_VALUE */,\n      parse: function (_context, style) {\n        switch (style) {\n          case \"none\":\n            return 0 /* NONE */;\n          case \"dashed\":\n            return 2 /* DASHED */;\n          case \"dotted\":\n            return 3 /* DOTTED */;\n          case \"double\":\n            return 4 /* DOUBLE */;\n        }\n        return 1 /* SOLID */;\n      },\n    };\n  };\n  var borderTopStyle = borderStyleForSide(\"top\");\n  var borderRightStyle = borderStyleForSide(\"right\");\n  var borderBottomStyle = borderStyleForSide(\"bottom\");\n  var borderLeftStyle = borderStyleForSide(\"left\");\n\n  var borderWidthForSide = function (side) {\n    return {\n      name: \"border-\" + side + \"-width\",\n      initialValue: \"0\",\n      type: 0 /* VALUE */,\n      prefix: false,\n      parse: function (_context, token) {\n        if (isDimensionToken(token)) {\n          return token.number;\n        }\n        return 0;\n      },\n    };\n  };\n  var borderTopWidth = borderWidthForSide(\"top\");\n  var borderRightWidth = borderWidthForSide(\"right\");\n  var borderBottomWidth = borderWidthForSide(\"bottom\");\n  var borderLeftWidth = borderWidthForSide(\"left\");\n\n  var color = {\n    name: \"color\",\n    initialValue: \"transparent\",\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: \"color\",\n  };\n\n  var direction = {\n    name: \"direction\",\n    initialValue: \"ltr\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, direction) {\n      switch (direction) {\n        case \"rtl\":\n          return 1 /* RTL */;\n        case \"ltr\":\n        default:\n          return 0 /* LTR */;\n      }\n    },\n  };\n\n  var display = {\n    name: \"display\",\n    initialValue: \"inline-block\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return tokens.filter(isIdentToken).reduce(function (bit, token) {\n        return bit | parseDisplayValue(token.value);\n      }, 0 /* NONE */);\n    },\n  };\n  var parseDisplayValue = function (display) {\n    switch (display) {\n      case \"block\":\n      case \"-webkit-box\":\n        return 2 /* BLOCK */;\n      case \"inline\":\n        return 4 /* INLINE */;\n      case \"run-in\":\n        return 8 /* RUN_IN */;\n      case \"flow\":\n        return 16 /* FLOW */;\n      case \"flow-root\":\n        return 32 /* FLOW_ROOT */;\n      case \"table\":\n        return 64 /* TABLE */;\n      case \"flex\":\n      case \"-webkit-flex\":\n        return 128 /* FLEX */;\n      case \"grid\":\n      case \"-ms-grid\":\n        return 256 /* GRID */;\n      case \"ruby\":\n        return 512 /* RUBY */;\n      case \"subgrid\":\n        return 1024 /* SUBGRID */;\n      case \"list-item\":\n        return 2048 /* LIST_ITEM */;\n      case \"table-row-group\":\n        return 4096 /* TABLE_ROW_GROUP */;\n      case \"table-header-group\":\n        return 8192 /* TABLE_HEADER_GROUP */;\n      case \"table-footer-group\":\n        return 16384 /* TABLE_FOOTER_GROUP */;\n      case \"table-row\":\n        return 32768 /* TABLE_ROW */;\n      case \"table-cell\":\n        return 65536 /* TABLE_CELL */;\n      case \"table-column-group\":\n        return 131072 /* TABLE_COLUMN_GROUP */;\n      case \"table-column\":\n        return 262144 /* TABLE_COLUMN */;\n      case \"table-caption\":\n        return 524288 /* TABLE_CAPTION */;\n      case \"ruby-base\":\n        return 1048576 /* RUBY_BASE */;\n      case \"ruby-text\":\n        return 2097152 /* RUBY_TEXT */;\n      case \"ruby-base-container\":\n        return 4194304 /* RUBY_BASE_CONTAINER */;\n      case \"ruby-text-container\":\n        return 8388608 /* RUBY_TEXT_CONTAINER */;\n      case \"contents\":\n        return 16777216 /* CONTENTS */;\n      case \"inline-block\":\n        return 33554432 /* INLINE_BLOCK */;\n      case \"inline-list-item\":\n        return 67108864 /* INLINE_LIST_ITEM */;\n      case \"inline-table\":\n        return 134217728 /* INLINE_TABLE */;\n      case \"inline-flex\":\n        return 268435456 /* INLINE_FLEX */;\n      case \"inline-grid\":\n        return 536870912 /* INLINE_GRID */;\n    }\n    return 0 /* NONE */;\n  };\n\n  var float = {\n    name: \"float\",\n    initialValue: \"none\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, float) {\n      switch (float) {\n        case \"left\":\n          return 1 /* LEFT */;\n        case \"right\":\n          return 2 /* RIGHT */;\n        case \"inline-start\":\n          return 3 /* INLINE_START */;\n        case \"inline-end\":\n          return 4 /* INLINE_END */;\n      }\n      return 0 /* NONE */;\n    },\n  };\n\n  var letterSpacing = {\n    name: \"letter-spacing\",\n    initialValue: \"0\",\n    prefix: false,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n      if (token.type === 20 /* IDENT_TOKEN */ && token.value === \"normal\") {\n        return 0;\n      }\n      if (token.type === 17 /* NUMBER_TOKEN */) {\n        return token.number;\n      }\n      if (token.type === 15 /* DIMENSION_TOKEN */) {\n        return token.number;\n      }\n      return 0;\n    },\n  };\n\n  var LINE_BREAK;\n  (function (LINE_BREAK) {\n    LINE_BREAK[\"NORMAL\"] = \"normal\";\n    LINE_BREAK[\"STRICT\"] = \"strict\";\n  })(LINE_BREAK || (LINE_BREAK = {}));\n  var lineBreak = {\n    name: \"line-break\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, lineBreak) {\n      switch (lineBreak) {\n        case \"strict\":\n          return LINE_BREAK.STRICT;\n        case \"normal\":\n        default:\n          return LINE_BREAK.NORMAL;\n      }\n    },\n  };\n\n  var lineHeight = {\n    name: \"line-height\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 4 /* TOKEN_VALUE */,\n  };\n  var computeLineHeight = function (token, fontSize) {\n    if (isIdentToken(token) && token.value === \"normal\") {\n      return 1.2 * fontSize;\n    } else if (token.type === 17 /* NUMBER_TOKEN */) {\n      return fontSize * token.number;\n    } else if (isLengthPercentage(token)) {\n      return getAbsoluteValue(token, fontSize);\n    }\n    return fontSize;\n  };\n\n  var listStyleImage = {\n    name: \"list-style-image\",\n    initialValue: \"none\",\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (context, token) {\n      if (token.type === 20 /* IDENT_TOKEN */ && token.value === \"none\") {\n        return null;\n      }\n      return image.parse(context, token);\n    },\n  };\n\n  var listStylePosition = {\n    name: \"list-style-position\",\n    initialValue: \"outside\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, position) {\n      switch (position) {\n        case \"inside\":\n          return 0 /* INSIDE */;\n        case \"outside\":\n        default:\n          return 1 /* OUTSIDE */;\n      }\n    },\n  };\n\n  var listStyleType = {\n    name: \"list-style-type\",\n    initialValue: \"none\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, type) {\n      switch (type) {\n        case \"disc\":\n          return 0 /* DISC */;\n        case \"circle\":\n          return 1 /* CIRCLE */;\n        case \"square\":\n          return 2 /* SQUARE */;\n        case \"decimal\":\n          return 3 /* DECIMAL */;\n        case \"cjk-decimal\":\n          return 4 /* CJK_DECIMAL */;\n        case \"decimal-leading-zero\":\n          return 5 /* DECIMAL_LEADING_ZERO */;\n        case \"lower-roman\":\n          return 6 /* LOWER_ROMAN */;\n        case \"upper-roman\":\n          return 7 /* UPPER_ROMAN */;\n        case \"lower-greek\":\n          return 8 /* LOWER_GREEK */;\n        case \"lower-alpha\":\n          return 9 /* LOWER_ALPHA */;\n        case \"upper-alpha\":\n          return 10 /* UPPER_ALPHA */;\n        case \"arabic-indic\":\n          return 11 /* ARABIC_INDIC */;\n        case \"armenian\":\n          return 12 /* ARMENIAN */;\n        case \"bengali\":\n          return 13 /* BENGALI */;\n        case \"cambodian\":\n          return 14 /* CAMBODIAN */;\n        case \"cjk-earthly-branch\":\n          return 15 /* CJK_EARTHLY_BRANCH */;\n        case \"cjk-heavenly-stem\":\n          return 16 /* CJK_HEAVENLY_STEM */;\n        case \"cjk-ideographic\":\n          return 17 /* CJK_IDEOGRAPHIC */;\n        case \"devanagari\":\n          return 18 /* DEVANAGARI */;\n        case \"ethiopic-numeric\":\n          return 19 /* ETHIOPIC_NUMERIC */;\n        case \"georgian\":\n          return 20 /* GEORGIAN */;\n        case \"gujarati\":\n          return 21 /* GUJARATI */;\n        case \"gurmukhi\":\n          return 22 /* GURMUKHI */;\n        case \"hebrew\":\n          return 22 /* HEBREW */;\n        case \"hiragana\":\n          return 23 /* HIRAGANA */;\n        case \"hiragana-iroha\":\n          return 24 /* HIRAGANA_IROHA */;\n        case \"japanese-formal\":\n          return 25 /* JAPANESE_FORMAL */;\n        case \"japanese-informal\":\n          return 26 /* JAPANESE_INFORMAL */;\n        case \"kannada\":\n          return 27 /* KANNADA */;\n        case \"katakana\":\n          return 28 /* KATAKANA */;\n        case \"katakana-iroha\":\n          return 29 /* KATAKANA_IROHA */;\n        case \"khmer\":\n          return 30 /* KHMER */;\n        case \"korean-hangul-formal\":\n          return 31 /* KOREAN_HANGUL_FORMAL */;\n        case \"korean-hanja-formal\":\n          return 32 /* KOREAN_HANJA_FORMAL */;\n        case \"korean-hanja-informal\":\n          return 33 /* KOREAN_HANJA_INFORMAL */;\n        case \"lao\":\n          return 34 /* LAO */;\n        case \"lower-armenian\":\n          return 35 /* LOWER_ARMENIAN */;\n        case \"malayalam\":\n          return 36 /* MALAYALAM */;\n        case \"mongolian\":\n          return 37 /* MONGOLIAN */;\n        case \"myanmar\":\n          return 38 /* MYANMAR */;\n        case \"oriya\":\n          return 39 /* ORIYA */;\n        case \"persian\":\n          return 40 /* PERSIAN */;\n        case \"simp-chinese-formal\":\n          return 41 /* SIMP_CHINESE_FORMAL */;\n        case \"simp-chinese-informal\":\n          return 42 /* SIMP_CHINESE_INFORMAL */;\n        case \"tamil\":\n          return 43 /* TAMIL */;\n        case \"telugu\":\n          return 44 /* TELUGU */;\n        case \"thai\":\n          return 45 /* THAI */;\n        case \"tibetan\":\n          return 46 /* TIBETAN */;\n        case \"trad-chinese-formal\":\n          return 47 /* TRAD_CHINESE_FORMAL */;\n        case \"trad-chinese-informal\":\n          return 48 /* TRAD_CHINESE_INFORMAL */;\n        case \"upper-armenian\":\n          return 49 /* UPPER_ARMENIAN */;\n        case \"disclosure-open\":\n          return 50 /* DISCLOSURE_OPEN */;\n        case \"disclosure-closed\":\n          return 51 /* DISCLOSURE_CLOSED */;\n        case \"none\":\n        default:\n          return -1 /* NONE */;\n      }\n    },\n  };\n\n  var marginForSide = function (side) {\n    return {\n      name: \"margin-\" + side,\n      initialValue: \"0\",\n      prefix: false,\n      type: 4 /* TOKEN_VALUE */,\n    };\n  };\n  var marginTop = marginForSide(\"top\");\n  var marginRight = marginForSide(\"right\");\n  var marginBottom = marginForSide(\"bottom\");\n  var marginLeft = marginForSide(\"left\");\n\n  var overflow = {\n    name: \"overflow\",\n    initialValue: \"visible\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return tokens.filter(isIdentToken).map(function (overflow) {\n        switch (overflow.value) {\n          case \"hidden\":\n            return 1 /* HIDDEN */;\n          case \"scroll\":\n            return 2 /* SCROLL */;\n          case \"clip\":\n            return 3 /* CLIP */;\n          case \"auto\":\n            return 4 /* AUTO */;\n          case \"visible\":\n          default:\n            return 0 /* VISIBLE */;\n        }\n      });\n    },\n  };\n\n  var overflowWrap = {\n    name: \"overflow-wrap\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, overflow) {\n      switch (overflow) {\n        case \"break-word\":\n          return \"break-word\" /* BREAK_WORD */;\n        case \"normal\":\n        default:\n          return \"normal\" /* NORMAL */;\n      }\n    },\n  };\n\n  var paddingForSide = function (side) {\n    return {\n      name: \"padding-\" + side,\n      initialValue: \"0\",\n      prefix: false,\n      type: 3 /* TYPE_VALUE */,\n      format: \"length-percentage\",\n    };\n  };\n  var paddingTop = paddingForSide(\"top\");\n  var paddingRight = paddingForSide(\"right\");\n  var paddingBottom = paddingForSide(\"bottom\");\n  var paddingLeft = paddingForSide(\"left\");\n\n  var textAlign = {\n    name: \"text-align\",\n    initialValue: \"left\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, textAlign) {\n      switch (textAlign) {\n        case \"right\":\n          return 2 /* RIGHT */;\n        case \"center\":\n        case \"justify\":\n          return 1 /* CENTER */;\n        case \"left\":\n        default:\n          return 0 /* LEFT */;\n      }\n    },\n  };\n\n  var position = {\n    name: \"position\",\n    initialValue: \"static\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, position) {\n      switch (position) {\n        case \"relative\":\n          return 1 /* RELATIVE */;\n        case \"absolute\":\n          return 2 /* ABSOLUTE */;\n        case \"fixed\":\n          return 3 /* FIXED */;\n        case \"sticky\":\n          return 4 /* STICKY */;\n      }\n      return 0 /* STATIC */;\n    },\n  };\n\n  var textShadow = {\n    name: \"text-shadow\",\n    initialValue: \"none\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n      if (tokens.length === 1 && isIdentWithValue(tokens[0], \"none\")) {\n        return [];\n      }\n      return parseFunctionArgs(tokens).map(function (values) {\n        var shadow = {\n          color: COLORS.TRANSPARENT,\n          offsetX: ZERO_LENGTH,\n          offsetY: ZERO_LENGTH,\n          blur: ZERO_LENGTH,\n        };\n        var c = 0;\n        for (var i = 0; i < values.length; i++) {\n          var token = values[i];\n          if (isLength(token)) {\n            if (c === 0) {\n              shadow.offsetX = token;\n            } else if (c === 1) {\n              shadow.offsetY = token;\n            } else {\n              shadow.blur = token;\n            }\n            c++;\n          } else {\n            shadow.color = color$1.parse(context, token);\n          }\n        }\n        return shadow;\n      });\n    },\n  };\n\n  var textTransform = {\n    name: \"text-transform\",\n    initialValue: \"none\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, textTransform) {\n      switch (textTransform) {\n        case \"uppercase\":\n          return 2 /* UPPERCASE */;\n        case \"lowercase\":\n          return 1 /* LOWERCASE */;\n        case \"capitalize\":\n          return 3 /* CAPITALIZE */;\n      }\n      return 0 /* NONE */;\n    },\n  };\n\n  var transform$1 = {\n    name: \"transform\",\n    initialValue: \"none\",\n    prefix: true,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n      if (token.type === 20 /* IDENT_TOKEN */ && token.value === \"none\") {\n        return null;\n      }\n      if (token.type === 18 /* FUNCTION */) {\n        var transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];\n        if (typeof transformFunction === \"undefined\") {\n          throw new Error(\n            'Attempting to parse an unsupported transform function \"' +\n              token.name +\n              '\"',\n          );\n        }\n        return transformFunction(token.values);\n      }\n      return null;\n    },\n  };\n  var matrix = function (args) {\n    var values = args\n      .filter(function (arg) {\n        return arg.type === 17 /* NUMBER_TOKEN */;\n      })\n      .map(function (arg) {\n        return arg.number;\n      });\n    return values.length === 6 ? values : null;\n  };\n  // doesn't support 3D transforms at the moment\n  var matrix3d = function (args) {\n    var values = args\n      .filter(function (arg) {\n        return arg.type === 17 /* NUMBER_TOKEN */;\n      })\n      .map(function (arg) {\n        return arg.number;\n      });\n    var a1 = values[0],\n      b1 = values[1];\n    values[2];\n    values[3];\n    var a2 = values[4],\n      b2 = values[5];\n    values[6];\n    values[7];\n    values[8];\n    values[9];\n    values[10];\n    values[11];\n    var a4 = values[12],\n      b4 = values[13];\n    values[14];\n    values[15];\n    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;\n  };\n  var SUPPORTED_TRANSFORM_FUNCTIONS = {\n    matrix: matrix,\n    matrix3d: matrix3d,\n  };\n\n  var DEFAULT_VALUE = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 50,\n    flags: FLAG_INTEGER,\n  };\n  var DEFAULT = [DEFAULT_VALUE, DEFAULT_VALUE];\n  var transformOrigin = {\n    name: \"transform-origin\",\n    initialValue: \"50% 50%\",\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      var origins = tokens.filter(isLengthPercentage);\n      if (origins.length !== 2) {\n        return DEFAULT;\n      }\n      return [origins[0], origins[1]];\n    },\n  };\n\n  var visibility = {\n    name: \"visible\",\n    initialValue: \"none\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, visibility) {\n      switch (visibility) {\n        case \"hidden\":\n          return 1 /* HIDDEN */;\n        case \"collapse\":\n          return 2 /* COLLAPSE */;\n        case \"visible\":\n        default:\n          return 0 /* VISIBLE */;\n      }\n    },\n  };\n\n  var WORD_BREAK;\n  (function (WORD_BREAK) {\n    WORD_BREAK[\"NORMAL\"] = \"normal\";\n    WORD_BREAK[\"BREAK_ALL\"] = \"break-all\";\n    WORD_BREAK[\"KEEP_ALL\"] = \"keep-all\";\n  })(WORD_BREAK || (WORD_BREAK = {}));\n  var wordBreak = {\n    name: \"word-break\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, wordBreak) {\n      switch (wordBreak) {\n        case \"break-all\":\n          return WORD_BREAK.BREAK_ALL;\n        case \"keep-all\":\n          return WORD_BREAK.KEEP_ALL;\n        case \"normal\":\n        default:\n          return WORD_BREAK.NORMAL;\n      }\n    },\n  };\n\n  var zIndex = {\n    name: \"z-index\",\n    initialValue: \"auto\",\n    prefix: false,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n      if (token.type === 20 /* IDENT_TOKEN */) {\n        return { auto: true, order: 0 };\n      }\n      if (isNumberToken(token)) {\n        return { auto: false, order: token.number };\n      }\n      throw new Error(\"Invalid z-index number parsed\");\n    },\n  };\n\n  var time = {\n    name: \"time\",\n    parse: function (_context, value) {\n      if (value.type === 15 /* DIMENSION_TOKEN */) {\n        switch (value.unit.toLowerCase()) {\n          case \"s\":\n            return 1000 * value.number;\n          case \"ms\":\n            return value.number;\n        }\n      }\n      throw new Error(\"Unsupported time type\");\n    },\n  };\n\n  var opacity = {\n    name: \"opacity\",\n    initialValue: \"1\",\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n      if (isNumberToken(token)) {\n        return token.number;\n      }\n      return 1;\n    },\n  };\n\n  var textDecorationColor = {\n    name: \"text-decoration-color\",\n    initialValue: \"transparent\",\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: \"color\",\n  };\n\n  var textDecorationLine = {\n    name: \"text-decoration-line\",\n    initialValue: \"none\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      return tokens\n        .filter(isIdentToken)\n        .map(function (token) {\n          switch (token.value) {\n            case \"underline\":\n              return 1 /* UNDERLINE */;\n            case \"overline\":\n              return 2 /* OVERLINE */;\n            case \"line-through\":\n              return 3 /* LINE_THROUGH */;\n            case \"none\":\n              return 4 /* BLINK */;\n          }\n          return 0 /* NONE */;\n        })\n        .filter(function (line) {\n          return line !== 0 /* NONE */;\n        });\n    },\n  };\n\n  var fontFamily = {\n    name: \"font-family\",\n    initialValue: \"\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      var accumulator = [];\n      var results = [];\n      tokens.forEach(function (token) {\n        switch (token.type) {\n          case 20 /* IDENT_TOKEN */:\n          case 0 /* STRING_TOKEN */:\n            accumulator.push(token.value);\n            break;\n          case 17 /* NUMBER_TOKEN */:\n            accumulator.push(token.number.toString());\n            break;\n          case 4 /* COMMA_TOKEN */:\n            results.push(accumulator.join(\" \"));\n            accumulator.length = 0;\n            break;\n        }\n      });\n      if (accumulator.length) {\n        results.push(accumulator.join(\" \"));\n      }\n      return results.map(function (result) {\n        return result.indexOf(\" \") === -1 ? result : \"'\" + result + \"'\";\n      });\n    },\n  };\n\n  var fontSize = {\n    name: \"font-size\",\n    initialValue: \"0\",\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: \"length\",\n  };\n\n  var fontWeight = {\n    name: \"font-weight\",\n    initialValue: \"normal\",\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n      if (isNumberToken(token)) {\n        return token.number;\n      }\n      if (isIdentToken(token)) {\n        switch (token.value) {\n          case \"bold\":\n            return 700;\n          case \"normal\":\n          default:\n            return 400;\n        }\n      }\n      return 400;\n    },\n  };\n\n  var fontVariant = {\n    name: \"font-variant\",\n    initialValue: \"none\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n      return tokens.filter(isIdentToken).map(function (token) {\n        return token.value;\n      });\n    },\n  };\n\n  var fontStyle = {\n    name: \"font-style\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, overflow) {\n      switch (overflow) {\n        case \"oblique\":\n          return \"oblique\" /* OBLIQUE */;\n        case \"italic\":\n          return \"italic\" /* ITALIC */;\n        case \"normal\":\n        default:\n          return \"normal\" /* NORMAL */;\n      }\n    },\n  };\n\n  var contains = function (bit, value) {\n    return (bit & value) !== 0;\n  };\n\n  var content = {\n    name: \"content\",\n    initialValue: \"none\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n      if (tokens.length === 0) {\n        return [];\n      }\n      var first = tokens[0];\n      if (first.type === 20 /* IDENT_TOKEN */ && first.value === \"none\") {\n        return [];\n      }\n      return tokens;\n    },\n  };\n\n  var counterIncrement = {\n    name: \"counter-increment\",\n    initialValue: \"none\",\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      if (tokens.length === 0) {\n        return null;\n      }\n      var first = tokens[0];\n      if (first.type === 20 /* IDENT_TOKEN */ && first.value === \"none\") {\n        return null;\n      }\n      var increments = [];\n      var filtered = tokens.filter(nonWhiteSpace);\n      for (var i = 0; i < filtered.length; i++) {\n        var counter = filtered[i];\n        var next = filtered[i + 1];\n        if (counter.type === 20 /* IDENT_TOKEN */) {\n          var increment = next && isNumberToken(next) ? next.number : 1;\n          increments.push({ counter: counter.value, increment: increment });\n        }\n      }\n      return increments;\n    },\n  };\n\n  var counterReset = {\n    name: \"counter-reset\",\n    initialValue: \"none\",\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      if (tokens.length === 0) {\n        return [];\n      }\n      var resets = [];\n      var filtered = tokens.filter(nonWhiteSpace);\n      for (var i = 0; i < filtered.length; i++) {\n        var counter = filtered[i];\n        var next = filtered[i + 1];\n        if (isIdentToken(counter) && counter.value !== \"none\") {\n          var reset = next && isNumberToken(next) ? next.number : 0;\n          resets.push({ counter: counter.value, reset: reset });\n        }\n      }\n      return resets;\n    },\n  };\n\n  var duration = {\n    name: \"duration\",\n    initialValue: \"0s\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (context, tokens) {\n      return tokens.filter(isDimensionToken).map(function (token) {\n        return time.parse(context, token);\n      });\n    },\n  };\n\n  var quotes = {\n    name: \"quotes\",\n    initialValue: \"none\",\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      if (tokens.length === 0) {\n        return null;\n      }\n      var first = tokens[0];\n      if (first.type === 20 /* IDENT_TOKEN */ && first.value === \"none\") {\n        return null;\n      }\n      var quotes = [];\n      var filtered = tokens.filter(isStringToken);\n      if (filtered.length % 2 !== 0) {\n        return null;\n      }\n      for (var i = 0; i < filtered.length; i += 2) {\n        var open_1 = filtered[i].value;\n        var close_1 = filtered[i + 1].value;\n        quotes.push({ open: open_1, close: close_1 });\n      }\n      return quotes;\n    },\n  };\n  var getQuote = function (quotes, depth, open) {\n    if (!quotes) {\n      return \"\";\n    }\n    var quote = quotes[Math.min(depth, quotes.length - 1)];\n    if (!quote) {\n      return \"\";\n    }\n    return open ? quote.open : quote.close;\n  };\n\n  var boxShadow = {\n    name: \"box-shadow\",\n    initialValue: \"none\",\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n      if (tokens.length === 1 && isIdentWithValue(tokens[0], \"none\")) {\n        return [];\n      }\n      return parseFunctionArgs(tokens).map(function (values) {\n        var shadow = {\n          color: 0x000000ff,\n          offsetX: ZERO_LENGTH,\n          offsetY: ZERO_LENGTH,\n          blur: ZERO_LENGTH,\n          spread: ZERO_LENGTH,\n          inset: false,\n        };\n        var c = 0;\n        for (var i = 0; i < values.length; i++) {\n          var token = values[i];\n          if (isIdentWithValue(token, \"inset\")) {\n            shadow.inset = true;\n          } else if (isLength(token)) {\n            if (c === 0) {\n              shadow.offsetX = token;\n            } else if (c === 1) {\n              shadow.offsetY = token;\n            } else if (c === 2) {\n              shadow.blur = token;\n            } else {\n              shadow.spread = token;\n            }\n            c++;\n          } else {\n            shadow.color = color$1.parse(context, token);\n          }\n        }\n        return shadow;\n      });\n    },\n  };\n\n  var paintOrder = {\n    name: \"paint-order\",\n    initialValue: \"normal\",\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n      var DEFAULT_VALUE = [0 /* FILL */, 1 /* STROKE */, 2 /* MARKERS */];\n      var layers = [];\n      tokens.filter(isIdentToken).forEach(function (token) {\n        switch (token.value) {\n          case \"stroke\":\n            layers.push(1 /* STROKE */);\n            break;\n          case \"fill\":\n            layers.push(0 /* FILL */);\n            break;\n          case \"markers\":\n            layers.push(2 /* MARKERS */);\n            break;\n        }\n      });\n      DEFAULT_VALUE.forEach(function (value) {\n        if (layers.indexOf(value) === -1) {\n          layers.push(value);\n        }\n      });\n      return layers;\n    },\n  };\n\n  var webkitTextStrokeColor = {\n    name: \"-webkit-text-stroke-color\",\n    initialValue: \"currentcolor\",\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: \"color\",\n  };\n\n  var webkitTextStrokeWidth = {\n    name: \"-webkit-text-stroke-width\",\n    initialValue: \"0\",\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n      if (isDimensionToken(token)) {\n        return token.number;\n      }\n      return 0;\n    },\n  };\n\n  var CSSParsedDeclaration = /** @class */ (function () {\n    function CSSParsedDeclaration(context, declaration) {\n      var _a, _b;\n      this.animationDuration = parse(\n        context,\n        duration,\n        declaration.animationDuration,\n      );\n      this.backgroundClip = parse(\n        context,\n        backgroundClip,\n        declaration.backgroundClip,\n      );\n      this.backgroundColor = parse(\n        context,\n        backgroundColor,\n        declaration.backgroundColor,\n      );\n      this.backgroundImage = parse(\n        context,\n        backgroundImage,\n        declaration.backgroundImage,\n      );\n      this.backgroundOrigin = parse(\n        context,\n        backgroundOrigin,\n        declaration.backgroundOrigin,\n      );\n      this.backgroundPosition = parse(\n        context,\n        backgroundPosition,\n        declaration.backgroundPosition,\n      );\n      this.backgroundRepeat = parse(\n        context,\n        backgroundRepeat,\n        declaration.backgroundRepeat,\n      );\n      this.backgroundSize = parse(\n        context,\n        backgroundSize,\n        declaration.backgroundSize,\n      );\n      this.borderTopColor = parse(\n        context,\n        borderTopColor,\n        declaration.borderTopColor,\n      );\n      this.borderRightColor = parse(\n        context,\n        borderRightColor,\n        declaration.borderRightColor,\n      );\n      this.borderBottomColor = parse(\n        context,\n        borderBottomColor,\n        declaration.borderBottomColor,\n      );\n      this.borderLeftColor = parse(\n        context,\n        borderLeftColor,\n        declaration.borderLeftColor,\n      );\n      this.borderTopLeftRadius = parse(\n        context,\n        borderTopLeftRadius,\n        declaration.borderTopLeftRadius,\n      );\n      this.borderTopRightRadius = parse(\n        context,\n        borderTopRightRadius,\n        declaration.borderTopRightRadius,\n      );\n      this.borderBottomRightRadius = parse(\n        context,\n        borderBottomRightRadius,\n        declaration.borderBottomRightRadius,\n      );\n      this.borderBottomLeftRadius = parse(\n        context,\n        borderBottomLeftRadius,\n        declaration.borderBottomLeftRadius,\n      );\n      this.borderTopStyle = parse(\n        context,\n        borderTopStyle,\n        declaration.borderTopStyle,\n      );\n      this.borderRightStyle = parse(\n        context,\n        borderRightStyle,\n        declaration.borderRightStyle,\n      );\n      this.borderBottomStyle = parse(\n        context,\n        borderBottomStyle,\n        declaration.borderBottomStyle,\n      );\n      this.borderLeftStyle = parse(\n        context,\n        borderLeftStyle,\n        declaration.borderLeftStyle,\n      );\n      this.borderTopWidth = parse(\n        context,\n        borderTopWidth,\n        declaration.borderTopWidth,\n      );\n      this.borderRightWidth = parse(\n        context,\n        borderRightWidth,\n        declaration.borderRightWidth,\n      );\n      this.borderBottomWidth = parse(\n        context,\n        borderBottomWidth,\n        declaration.borderBottomWidth,\n      );\n      this.borderLeftWidth = parse(\n        context,\n        borderLeftWidth,\n        declaration.borderLeftWidth,\n      );\n      this.boxShadow = parse(context, boxShadow, declaration.boxShadow);\n      this.color = parse(context, color, declaration.color);\n      this.direction = parse(context, direction, declaration.direction);\n      this.display = parse(context, display, declaration.display);\n      this.float = parse(context, float, declaration.cssFloat);\n      this.fontFamily = parse(context, fontFamily, declaration.fontFamily);\n      this.fontSize = parse(context, fontSize, declaration.fontSize);\n      this.fontStyle = parse(context, fontStyle, declaration.fontStyle);\n      this.fontVariant = parse(context, fontVariant, declaration.fontVariant);\n      this.fontWeight = parse(context, fontWeight, declaration.fontWeight);\n      this.letterSpacing = parse(\n        context,\n        letterSpacing,\n        declaration.letterSpacing,\n      );\n      this.lineBreak = parse(context, lineBreak, declaration.lineBreak);\n      this.lineHeight = parse(context, lineHeight, declaration.lineHeight);\n      this.listStyleImage = parse(\n        context,\n        listStyleImage,\n        declaration.listStyleImage,\n      );\n      this.listStylePosition = parse(\n        context,\n        listStylePosition,\n        declaration.listStylePosition,\n      );\n      this.listStyleType = parse(\n        context,\n        listStyleType,\n        declaration.listStyleType,\n      );\n      this.marginTop = parse(context, marginTop, declaration.marginTop);\n      this.marginRight = parse(context, marginRight, declaration.marginRight);\n      this.marginBottom = parse(\n        context,\n        marginBottom,\n        declaration.marginBottom,\n      );\n      this.marginLeft = parse(context, marginLeft, declaration.marginLeft);\n      this.opacity = parse(context, opacity, declaration.opacity);\n      var overflowTuple = parse(context, overflow, declaration.overflow);\n      this.overflowX = overflowTuple[0];\n      this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];\n      this.overflowWrap = parse(\n        context,\n        overflowWrap,\n        declaration.overflowWrap,\n      );\n      this.paddingTop = parse(context, paddingTop, declaration.paddingTop);\n      this.paddingRight = parse(\n        context,\n        paddingRight,\n        declaration.paddingRight,\n      );\n      this.paddingBottom = parse(\n        context,\n        paddingBottom,\n        declaration.paddingBottom,\n      );\n      this.paddingLeft = parse(context, paddingLeft, declaration.paddingLeft);\n      this.paintOrder = parse(context, paintOrder, declaration.paintOrder);\n      this.position = parse(context, position, declaration.position);\n      this.textAlign = parse(context, textAlign, declaration.textAlign);\n      this.textDecorationColor = parse(\n        context,\n        textDecorationColor,\n        (_a = declaration.textDecorationColor) !== null && _a !== void 0\n          ? _a\n          : declaration.color,\n      );\n      this.textDecorationLine = parse(\n        context,\n        textDecorationLine,\n        (_b = declaration.textDecorationLine) !== null && _b !== void 0\n          ? _b\n          : declaration.textDecoration,\n      );\n      this.textShadow = parse(context, textShadow, declaration.textShadow);\n      this.textTransform = parse(\n        context,\n        textTransform,\n        declaration.textTransform,\n      );\n      this.transform = parse(context, transform$1, declaration.transform);\n      this.transformOrigin = parse(\n        context,\n        transformOrigin,\n        declaration.transformOrigin,\n      );\n      this.visibility = parse(context, visibility, declaration.visibility);\n      this.webkitTextStrokeColor = parse(\n        context,\n        webkitTextStrokeColor,\n        declaration.webkitTextStrokeColor,\n      );\n      this.webkitTextStrokeWidth = parse(\n        context,\n        webkitTextStrokeWidth,\n        declaration.webkitTextStrokeWidth,\n      );\n      this.wordBreak = parse(context, wordBreak, declaration.wordBreak);\n      this.zIndex = parse(context, zIndex, declaration.zIndex);\n    }\n    CSSParsedDeclaration.prototype.isVisible = function () {\n      return (\n        this.display > 0 &&\n        this.opacity > 0 &&\n        this.visibility === 0 /* VISIBLE */\n      );\n    };\n    CSSParsedDeclaration.prototype.isTransparent = function () {\n      return isTransparent(this.backgroundColor);\n    };\n    CSSParsedDeclaration.prototype.isTransformed = function () {\n      return this.transform !== null;\n    };\n    CSSParsedDeclaration.prototype.isPositioned = function () {\n      return this.position !== 0 /* STATIC */;\n    };\n    CSSParsedDeclaration.prototype.isPositionedWithZIndex = function () {\n      return this.isPositioned() && !this.zIndex.auto;\n    };\n    CSSParsedDeclaration.prototype.isFloating = function () {\n      return this.float !== 0 /* NONE */;\n    };\n    CSSParsedDeclaration.prototype.isInlineLevel = function () {\n      return (\n        contains(this.display, 4 /* INLINE */) ||\n        contains(this.display, 33554432 /* INLINE_BLOCK */) ||\n        contains(this.display, 268435456 /* INLINE_FLEX */) ||\n        contains(this.display, 536870912 /* INLINE_GRID */) ||\n        contains(this.display, 67108864 /* INLINE_LIST_ITEM */) ||\n        contains(this.display, 134217728 /* INLINE_TABLE */)\n      );\n    };\n    return CSSParsedDeclaration;\n  })();\n  var CSSParsedPseudoDeclaration = /** @class */ (function () {\n    function CSSParsedPseudoDeclaration(context, declaration) {\n      this.content = parse(context, content, declaration.content);\n      this.quotes = parse(context, quotes, declaration.quotes);\n    }\n    return CSSParsedPseudoDeclaration;\n  })();\n  var CSSParsedCounterDeclaration = /** @class */ (function () {\n    function CSSParsedCounterDeclaration(context, declaration) {\n      this.counterIncrement = parse(\n        context,\n        counterIncrement,\n        declaration.counterIncrement,\n      );\n      this.counterReset = parse(\n        context,\n        counterReset,\n        declaration.counterReset,\n      );\n    }\n    return CSSParsedCounterDeclaration;\n  })();\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  var parse = function (context, descriptor, style) {\n    var tokenizer = new Tokenizer();\n    var value =\n      style !== null && typeof style !== \"undefined\"\n        ? style.toString()\n        : descriptor.initialValue;\n    tokenizer.write(value);\n    var parser = new Parser(tokenizer.read());\n    switch (descriptor.type) {\n      case 2 /* IDENT_VALUE */:\n        var token = parser.parseComponentValue();\n        return descriptor.parse(\n          context,\n          isIdentToken(token) ? token.value : descriptor.initialValue,\n        );\n      case 0 /* VALUE */:\n        return descriptor.parse(context, parser.parseComponentValue());\n      case 1 /* LIST */:\n        return descriptor.parse(context, parser.parseComponentValues());\n      case 4 /* TOKEN_VALUE */:\n        return parser.parseComponentValue();\n      case 3 /* TYPE_VALUE */:\n        switch (descriptor.format) {\n          case \"angle\":\n            return angle.parse(context, parser.parseComponentValue());\n          case \"color\":\n            return color$1.parse(context, parser.parseComponentValue());\n          case \"image\":\n            return image.parse(context, parser.parseComponentValue());\n          case \"length\":\n            var length_1 = parser.parseComponentValue();\n            return isLength(length_1) ? length_1 : ZERO_LENGTH;\n          case \"length-percentage\":\n            var value_1 = parser.parseComponentValue();\n            return isLengthPercentage(value_1) ? value_1 : ZERO_LENGTH;\n          case \"time\":\n            return time.parse(context, parser.parseComponentValue());\n        }\n        break;\n    }\n  };\n\n  var elementDebuggerAttribute = \"data-htmlVisualizer-debug\";\n  var getElementDebugType = function (element) {\n    var attribute = element.getAttribute(elementDebuggerAttribute);\n    switch (attribute) {\n      case \"all\":\n        return 1 /* ALL */;\n      case \"clone\":\n        return 2 /* CLONE */;\n      case \"parse\":\n        return 3 /* PARSE */;\n      case \"render\":\n        return 4 /* RENDER */;\n      default:\n        return 0 /* NONE */;\n    }\n  };\n  var isDebugging = function (element, type) {\n    var elementType = getElementDebugType(element);\n    return elementType === 1 /* ALL */ || type === elementType;\n  };\n\n  var ElementContainer = /** @class */ (function () {\n    function ElementContainer(context, element) {\n      this.context = context;\n      this.textNodes = [];\n      this.elements = [];\n      this.flags = 0;\n      if (isDebugging(element, 3 /* PARSE */)) {\n        debugger;\n      }\n      this.styles = new CSSParsedDeclaration(\n        context,\n        window.getComputedStyle(element, null),\n      );\n      if (isHTMLElementNode(element)) {\n        if (\n          this.styles.animationDuration.some(function (duration) {\n            return duration > 0;\n          })\n        ) {\n          element.style.animationDuration = \"0s\";\n        }\n        if (this.styles.transform !== null) {\n          // getBoundingClientRect takes transforms into account\n          element.style.transform = \"none\";\n        }\n      }\n      this.bounds = parseBounds(this.context, element);\n      if (isDebugging(element, 4 /* RENDER */)) {\n        this.flags |= 16 /* DEBUG_RENDER */;\n      }\n    }\n    return ElementContainer;\n  })();\n\n  /*\n   * text-segmentation 1.0.3 <https://github.com/niklasvh/text-segmentation>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var base64 =\n    \"AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=\";\n\n  /*\n   * utrie 1.0.2 <https://github.com/niklasvh/utrie>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var chars$1 =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  // Use a lookup table to find the index.\n  var lookup$1 = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n  for (var i$1 = 0; i$1 < chars$1.length; i$1++) {\n    lookup$1[chars$1.charCodeAt(i$1)] = i$1;\n  }\n  var decode = function (base64) {\n    var bufferLength = base64.length * 0.75,\n      len = base64.length,\n      i,\n      p = 0,\n      encoded1,\n      encoded2,\n      encoded3,\n      encoded4;\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n    var buffer =\n      typeof ArrayBuffer !== \"undefined\" &&\n      typeof Uint8Array !== \"undefined\" &&\n      typeof Uint8Array.prototype.slice !== \"undefined\"\n        ? new ArrayBuffer(bufferLength)\n        : new Array(bufferLength);\n    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n    for (i = 0; i < len; i += 4) {\n      encoded1 = lookup$1[base64.charCodeAt(i)];\n      encoded2 = lookup$1[base64.charCodeAt(i + 1)];\n      encoded3 = lookup$1[base64.charCodeAt(i + 2)];\n      encoded4 = lookup$1[base64.charCodeAt(i + 3)];\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return buffer;\n  };\n  var polyUint16Array = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 2) {\n      bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n  };\n  var polyUint32Array = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 4) {\n      bytes.push(\n        (buffer[i + 3] << 24) |\n          (buffer[i + 2] << 16) |\n          (buffer[i + 1] << 8) |\n          buffer[i],\n      );\n    }\n    return bytes;\n  };\n\n  /** Shift size for getting the index-2 table offset. */\n  var UTRIE2_SHIFT_2 = 5;\n  /** Shift size for getting the index-1 table offset. */\n  var UTRIE2_SHIFT_1 = 6 + 5;\n  /**\n   * Shift size for shifting left the index array values.\n   * Increases possible data size with 16-bit index values at the cost\n   * of compactability.\n   * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n   */\n  var UTRIE2_INDEX_SHIFT = 2;\n  /**\n   * Difference between the two shift sizes,\n   * for getting an index-1 offset from an index-2 offset. 6=11-5\n   */\n  var UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n  /**\n   * The part of the index-2 table for U+D800..U+DBFF stores values for\n   * lead surrogate code _units_ not code _points_.\n   * Values for lead surrogate code _points_ are indexed with this portion of the table.\n   * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n   */\n  var UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n  /** Number of entries in a data block. 32=0x20 */\n  var UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n  /** Mask for getting the lower bits for the in-data-block offset. */\n  var UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\n  var UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n  /** Count the lengths of both BMP pieces. 2080=0x820 */\n  var UTRIE2_INDEX_2_BMP_LENGTH =\n    UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n  /**\n   * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n   * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n   */\n  var UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\n  var UTRIE2_UTF8_2B_INDEX_2_LENGTH =\n    0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n  /**\n   * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n   * Variable length, for code points up to highStart, where the last single-value range starts.\n   * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n   * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n   *\n   * The part of the index-2 table for supplementary code points starts\n   * after this index-1 table.\n   *\n   * Both the index-1 table and the following part of the index-2 table\n   * are omitted completely if there is only BMP data.\n   */\n  var UTRIE2_INDEX_1_OFFSET =\n    UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n  /**\n   * Number of index-1 entries for the BMP. 32=0x20\n   * This part of the index-1 table is omitted from the serialized form.\n   */\n  var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n  /** Number of entries in an index-2 block. 64=0x40 */\n  var UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n  /** Mask for getting the lower bits for the in-index-2-block offset. */\n  var UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\n  var slice16 = function (view, start, end) {\n    if (view.slice) {\n      return view.slice(start, end);\n    }\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n  };\n  var slice32 = function (view, start, end) {\n    if (view.slice) {\n      return view.slice(start, end);\n    }\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n  };\n  var createTrieFromBase64 = function (base64, _byteLength) {\n    var buffer = decode(base64);\n    var view32 = Array.isArray(buffer)\n      ? polyUint32Array(buffer)\n      : new Uint32Array(buffer);\n    var view16 = Array.isArray(buffer)\n      ? polyUint16Array(buffer)\n      : new Uint16Array(buffer);\n    var headerLength = 24;\n    var index = slice16(view16, headerLength / 2, view32[4] / 2);\n    var data =\n      view32[5] === 2\n        ? slice16(view16, (headerLength + view32[4]) / 2)\n        : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n  };\n  var Trie = /** @class */ (function () {\n    function Trie(\n      initialValue,\n      errorValue,\n      highStart,\n      highValueIndex,\n      index,\n      data,\n    ) {\n      this.initialValue = initialValue;\n      this.errorValue = errorValue;\n      this.highStart = highStart;\n      this.highValueIndex = highValueIndex;\n      this.index = index;\n      this.data = data;\n    }\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    Trie.prototype.get = function (codePoint) {\n      var ix;\n      if (codePoint >= 0) {\n        if (\n          codePoint < 0x0d800 ||\n          (codePoint > 0x0dbff && codePoint <= 0x0ffff)\n        ) {\n          // Ordinary BMP code point, excluding leading surrogates.\n          // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n          // 16 bit data is stored in the index array itself.\n          ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n          return this.data[ix];\n        }\n        if (codePoint <= 0xffff) {\n          // Lead Surrogate Code Point.  A Separate index section is stored for\n          // lead surrogate code units and code points.\n          //   The main index has the code unit data.\n          //   For this function, we need the code point data.\n          // Note: this expression could be refactored for slightly improved efficiency, but\n          //       surrogate code points will be so rare in practice that it's not worth it.\n          ix =\n            this.index[\n              UTRIE2_LSCP_INDEX_2_OFFSET +\n                ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)\n            ];\n          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n          return this.data[ix];\n        }\n        if (codePoint < this.highStart) {\n          // Supplemental code point, use two-level lookup.\n          ix =\n            UTRIE2_INDEX_1_OFFSET -\n            UTRIE2_OMITTED_BMP_INDEX_1_LENGTH +\n            (codePoint >> UTRIE2_SHIFT_1);\n          ix = this.index[ix];\n          ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n          ix = this.index[ix];\n          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n          return this.data[ix];\n        }\n        if (codePoint <= 0x10ffff) {\n          return this.data[this.highValueIndex];\n        }\n      }\n      // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n      return this.errorValue;\n    };\n    return Trie;\n  })();\n\n  /*\n   * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>\n   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n   * Released under MIT License\n   */\n  var chars =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  // Use a lookup table to find the index.\n  var lookup = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  var Prepend = 1;\n  var CR = 2;\n  var LF = 3;\n  var Control = 4;\n  var Extend = 5;\n  var SpacingMark = 7;\n  var L = 8;\n  var V = 9;\n  var T = 10;\n  var LV = 11;\n  var LVT = 12;\n  var ZWJ = 13;\n  var Extended_Pictographic = 14;\n  var RI = 15;\n  var toCodePoints = function (str) {\n    var codePoints = [];\n    var i = 0;\n    var length = str.length;\n    while (i < length) {\n      var value = str.charCodeAt(i++);\n      if (value >= 0xd800 && value <= 0xdbff && i < length) {\n        var extra = str.charCodeAt(i++);\n        if ((extra & 0xfc00) === 0xdc00) {\n          codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n        } else {\n          codePoints.push(value);\n          i--;\n        }\n      } else {\n        codePoints.push(value);\n      }\n    }\n    return codePoints;\n  };\n  var fromCodePoint = function () {\n    var codePoints = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      codePoints[_i] = arguments[_i];\n    }\n    if (String.fromCodePoint) {\n      return String.fromCodePoint.apply(String, codePoints);\n    }\n    var length = codePoints.length;\n    if (!length) {\n      return \"\";\n    }\n    var codeUnits = [];\n    var index = -1;\n    var result = \"\";\n    while (++index < length) {\n      var codePoint = codePoints[index];\n      if (codePoint <= 0xffff) {\n        codeUnits.push(codePoint);\n      } else {\n        codePoint -= 0x10000;\n        codeUnits.push(\n          (codePoint >> 10) + 0xd800,\n          (codePoint % 0x400) + 0xdc00,\n        );\n      }\n      if (index + 1 === length || codeUnits.length > 0x4000) {\n        result += String.fromCharCode.apply(String, codeUnits);\n        codeUnits.length = 0;\n      }\n    }\n    return result;\n  };\n  var UnicodeTrie = createTrieFromBase64(base64);\n  var BREAK_NOT_ALLOWED = \"\";\n  var BREAK_ALLOWED = \"\";\n  var codePointToClass = function (codePoint) {\n    return UnicodeTrie.get(codePoint);\n  };\n  var _graphemeBreakAtIndex = function (_codePoints, classTypes, index) {\n    var prevIndex = index - 2;\n    var prev = classTypes[prevIndex];\n    var current = classTypes[index - 1];\n    var next = classTypes[index];\n    // GB3 Do not break between a CR and LF\n    if (current === CR && next === LF) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB4 Otherwise, break before and after controls.\n    if (current === CR || current === LF || current === Control) {\n      return BREAK_ALLOWED;\n    }\n    // GB5\n    if (next === CR || next === LF || next === Control) {\n      return BREAK_ALLOWED;\n    }\n    // Do not break Hangul syllable sequences.\n    // GB6\n    if (current === L && [L, V, LV, LVT].indexOf(next) !== -1) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB7\n    if ((current === LV || current === V) && (next === V || next === T)) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB8\n    if ((current === LVT || current === T) && next === T) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB9 Do not break before extending characters or ZWJ.\n    if (next === ZWJ || next === Extend) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // Do not break before SpacingMarks, or after Prepend characters.\n    // GB9a\n    if (next === SpacingMark) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB9a\n    if (current === Prepend) {\n      return BREAK_NOT_ALLOWED;\n    }\n    // GB11 Do not break within emoji modifier sequences or emoji zwj sequences.\n    if (current === ZWJ && next === Extended_Pictographic) {\n      while (prev === Extend) {\n        prev = classTypes[--prevIndex];\n      }\n      if (prev === Extended_Pictographic) {\n        return BREAK_NOT_ALLOWED;\n      }\n    }\n    // GB12 Do not break within emoji flag sequences.\n    // That is, do not break between regional indicator (RI) symbols\n    // if there is an odd number of RI characters before the break point.\n    if (current === RI && next === RI) {\n      var countRI = 0;\n      while (prev === RI) {\n        countRI++;\n        prev = classTypes[--prevIndex];\n      }\n      if (countRI % 2 === 0) {\n        return BREAK_NOT_ALLOWED;\n      }\n    }\n    return BREAK_ALLOWED;\n  };\n  var GraphemeBreaker = function (str) {\n    var codePoints = toCodePoints(str);\n    var length = codePoints.length;\n    var index = 0;\n    var lastEnd = 0;\n    var classTypes = codePoints.map(codePointToClass);\n    return {\n      next: function () {\n        if (index >= length) {\n          return { done: true, value: null };\n        }\n        var graphemeBreak = BREAK_NOT_ALLOWED;\n        while (\n          index < length &&\n          (graphemeBreak = _graphemeBreakAtIndex(\n            codePoints,\n            classTypes,\n            ++index,\n          )) === BREAK_NOT_ALLOWED\n        ) {}\n        if (graphemeBreak !== BREAK_NOT_ALLOWED || index === length) {\n          var value = fromCodePoint.apply(\n            null,\n            codePoints.slice(lastEnd, index),\n          );\n          lastEnd = index;\n          return { value: value, done: false };\n        }\n        return { done: true, value: null };\n      },\n    };\n  };\n  var splitGraphemes = function (str) {\n    var breaker = GraphemeBreaker(str);\n    var graphemes = [];\n    var bk;\n    while (!(bk = breaker.next()).done) {\n      if (bk.value) {\n        graphemes.push(bk.value.slice());\n      }\n    }\n    return graphemes;\n  };\n\n  var testRangeBounds = function (document) {\n    var TEST_HEIGHT = 123;\n    if (document.createRange) {\n      var range = document.createRange();\n      if (range.getBoundingClientRect) {\n        var testElement = document.createElement(\"boundtest\");\n        testElement.style.height = TEST_HEIGHT + \"px\";\n        testElement.style.display = \"block\";\n        document.body.appendChild(testElement);\n        range.selectNode(testElement);\n        var rangeBounds = range.getBoundingClientRect();\n        var rangeHeight = Math.round(rangeBounds.height);\n        document.body.removeChild(testElement);\n        if (rangeHeight === TEST_HEIGHT) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  var testIOSLineBreak = function (document) {\n    var testElement = document.createElement(\"boundtest\");\n    testElement.style.width = \"50px\";\n    testElement.style.display = \"block\";\n    testElement.style.fontSize = \"12px\";\n    testElement.style.letterSpacing = \"0px\";\n    testElement.style.wordSpacing = \"0px\";\n    document.body.appendChild(testElement);\n    var range = document.createRange();\n    testElement.innerHTML =\n      typeof \"\".repeat === \"function\" ? \"&#128104;\".repeat(10) : \"\";\n    var node = testElement.firstChild;\n    var textList = toCodePoints$1(node.data).map(function (i) {\n      return fromCodePoint$1(i);\n    });\n    var offset = 0;\n    var prev = {};\n    // ios 13 does not handle range getBoundingClientRect line changes correctly #2177\n    var supports = textList.every(function (text, i) {\n      range.setStart(node, offset);\n      range.setEnd(node, offset + text.length);\n      var rect = range.getBoundingClientRect();\n      offset += text.length;\n      var boundAhead = rect.x > prev.x || rect.y > prev.y;\n      prev = rect;\n      if (i === 0) {\n        return true;\n      }\n      return boundAhead;\n    });\n    document.body.removeChild(testElement);\n    return supports;\n  };\n  var testCORS = function () {\n    return typeof new Image().crossOrigin !== \"undefined\";\n  };\n  var testResponseType = function () {\n    return typeof new XMLHttpRequest().responseType === \"string\";\n  };\n  var testSVG = function (document) {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    if (!ctx) {\n      return false;\n    }\n    img.src =\n      \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n    try {\n      ctx.drawImage(img, 0, 0);\n      canvas.toDataURL();\n    } catch (e) {\n      return false;\n    }\n    return true;\n  };\n  var isGreenPixel = function (data) {\n    return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;\n  };\n  var testForeignObject = function (document) {\n    var canvas = document.createElement(\"canvas\");\n    var size = 100;\n    canvas.width = size;\n    canvas.height = size;\n    var ctx = canvas.getContext(\"2d\");\n    if (!ctx) {\n      return Promise.reject(false);\n    }\n    ctx.fillStyle = \"rgb(0, 255, 0)\";\n    ctx.fillRect(0, 0, size, size);\n    var img = new Image();\n    var greenImageSrc = canvas.toDataURL();\n    img.src = greenImageSrc;\n    var svg = createForeignObjectSVG(size, size, 0, 0, img);\n    ctx.fillStyle = \"red\";\n    ctx.fillRect(0, 0, size, size);\n    return loadSerializedSVG$1(svg)\n      .then(function (img) {\n        ctx.drawImage(img, 0, 0);\n        var data = ctx.getImageData(0, 0, size, size).data;\n        ctx.fillStyle = \"red\";\n        ctx.fillRect(0, 0, size, size);\n        var node = document.createElement(\"div\");\n        node.style.backgroundImage = \"url(\" + greenImageSrc + \")\";\n        node.style.height = size + \"px\";\n        // Firefox 55 does not render inline <img /> tags\n        return isGreenPixel(data)\n          ? loadSerializedSVG$1(createForeignObjectSVG(size, size, 0, 0, node))\n          : Promise.reject(false);\n      })\n      .then(function (img) {\n        ctx.drawImage(img, 0, 0);\n        // Edge does not render background-images\n        return isGreenPixel(ctx.getImageData(0, 0, size, size).data);\n      })\n      .catch(function () {\n        return false;\n      });\n  };\n  var createForeignObjectSVG = function (width, height, x, y, node) {\n    var xmlns = \"http://www.w3.org/2000/svg\";\n    var svg = document.createElementNS(xmlns, \"svg\");\n    var foreignObject = document.createElementNS(xmlns, \"foreignObject\");\n    svg.setAttributeNS(null, \"width\", width.toString());\n    svg.setAttributeNS(null, \"height\", height.toString());\n    foreignObject.setAttributeNS(null, \"width\", \"100%\");\n    foreignObject.setAttributeNS(null, \"height\", \"100%\");\n    foreignObject.setAttributeNS(null, \"x\", x.toString());\n    foreignObject.setAttributeNS(null, \"y\", y.toString());\n    foreignObject.setAttributeNS(null, \"externalResourcesRequired\", \"true\");\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svg;\n  };\n  var loadSerializedSVG$1 = function (svg) {\n    return new Promise(function (resolve, reject) {\n      var img = new Image();\n      img.onload = function () {\n        return resolve(img);\n      };\n      img.onerror = reject;\n      img.src =\n        \"data:image/svg+xml;charset=utf-8,\" +\n        encodeURIComponent(new XMLSerializer().serializeToString(svg));\n    });\n  };\n  var FEATURES = {\n    get SUPPORT_RANGE_BOUNDS() {\n      var value = testRangeBounds(document);\n      Object.defineProperty(FEATURES, \"SUPPORT_RANGE_BOUNDS\", { value: value });\n      return value;\n    },\n    get SUPPORT_WORD_BREAKING() {\n      var value = FEATURES.SUPPORT_RANGE_BOUNDS && testIOSLineBreak(document);\n      Object.defineProperty(FEATURES, \"SUPPORT_WORD_BREAKING\", {\n        value: value,\n      });\n      return value;\n    },\n    get SUPPORT_SVG_DRAWING() {\n      var value = testSVG(document);\n      Object.defineProperty(FEATURES, \"SUPPORT_SVG_DRAWING\", { value: value });\n      return value;\n    },\n    get SUPPORT_FOREIGNOBJECT_DRAWING() {\n      var value =\n        typeof Array.from === \"function\" && typeof window.fetch === \"function\"\n          ? testForeignObject(document)\n          : Promise.resolve(false);\n      Object.defineProperty(FEATURES, \"SUPPORT_FOREIGNOBJECT_DRAWING\", {\n        value: value,\n      });\n      return value;\n    },\n    get SUPPORT_CORS_IMAGES() {\n      var value = testCORS();\n      Object.defineProperty(FEATURES, \"SUPPORT_CORS_IMAGES\", { value: value });\n      return value;\n    },\n    get SUPPORT_RESPONSE_TYPE() {\n      var value = testResponseType();\n      Object.defineProperty(FEATURES, \"SUPPORT_RESPONSE_TYPE\", {\n        value: value,\n      });\n      return value;\n    },\n    get SUPPORT_CORS_XHR() {\n      var value = \"withCredentials\" in new XMLHttpRequest();\n      Object.defineProperty(FEATURES, \"SUPPORT_CORS_XHR\", { value: value });\n      return value;\n    },\n    get SUPPORT_NATIVE_TEXT_SEGMENTATION() {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var value = !!(typeof Intl !== \"undefined\" && Intl.Segmenter);\n      Object.defineProperty(FEATURES, \"SUPPORT_NATIVE_TEXT_SEGMENTATION\", {\n        value: value,\n      });\n      return value;\n    },\n  };\n\n  var TextBounds = /** @class */ (function () {\n    function TextBounds(text, bounds) {\n      this.text = text;\n      this.bounds = bounds;\n    }\n    return TextBounds;\n  })();\n  var parseTextBounds = function (context, value, styles, node) {\n    var textList = breakText(value, styles);\n    var textBounds = [];\n    var offset = 0;\n    textList.forEach(function (text) {\n      if (styles.textDecorationLine.length || text.trim().length > 0) {\n        if (FEATURES.SUPPORT_RANGE_BOUNDS) {\n          var clientRects = createRange(\n            node,\n            offset,\n            text.length,\n          ).getClientRects();\n          if (clientRects.length > 1) {\n            var subSegments = segmentGraphemes(text);\n            var subOffset_1 = 0;\n            subSegments.forEach(function (subSegment) {\n              textBounds.push(\n                new TextBounds(\n                  subSegment,\n                  Bounds.fromDOMRectList(\n                    context,\n                    createRange(\n                      node,\n                      subOffset_1 + offset,\n                      subSegment.length,\n                    ).getClientRects(),\n                  ),\n                ),\n              );\n              subOffset_1 += subSegment.length;\n            });\n          } else {\n            textBounds.push(\n              new TextBounds(\n                text,\n                Bounds.fromDOMRectList(context, clientRects),\n              ),\n            );\n          }\n        } else {\n          var replacementNode = node.splitText(text.length);\n          textBounds.push(\n            new TextBounds(text, getWrapperBounds(context, node)),\n          );\n          node = replacementNode;\n        }\n      } else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {\n        node = node.splitText(text.length);\n      }\n      offset += text.length;\n    });\n    return textBounds;\n  };\n  var getWrapperBounds = function (context, node) {\n    var ownerDocument = node.ownerDocument;\n    if (ownerDocument) {\n      var wrapper = ownerDocument.createElement(\"htmlVisualizerwrapper\");\n      wrapper.appendChild(node.cloneNode(true));\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.replaceChild(wrapper, node);\n        var bounds = parseBounds(context, wrapper);\n        if (wrapper.firstChild) {\n          parentNode.replaceChild(wrapper.firstChild, wrapper);\n        }\n        return bounds;\n      }\n    }\n    return Bounds.EMPTY;\n  };\n  var createRange = function (node, offset, length) {\n    var ownerDocument = node.ownerDocument;\n    if (!ownerDocument) {\n      throw new Error(\"Node has no owner document\");\n    }\n    var range = ownerDocument.createRange();\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range;\n  };\n  var segmentGraphemes = function (value) {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var segmenter = new Intl.Segmenter(void 0, { granularity: \"grapheme\" });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return Array.from(segmenter.segment(value)).map(function (segment) {\n        return segment.segment;\n      });\n    }\n    return splitGraphemes(value);\n  };\n  var segmentWords = function (value, styles) {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var segmenter = new Intl.Segmenter(void 0, {\n        granularity: \"word\",\n      });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return Array.from(segmenter.segment(value)).map(function (segment) {\n        return segment.segment;\n      });\n    }\n    return breakWords(value, styles);\n  };\n  var breakText = function (value, styles) {\n    return styles.letterSpacing !== 0\n      ? segmentGraphemes(value)\n      : segmentWords(value, styles);\n  };\n  // https://drafts.csswg.org/css-text/#word-separator\n  var wordSeparators = [\n    0x0020, 0x00a0, 0x1361, 0x10100, 0x10101, 0x1039, 0x1091,\n  ];\n  var breakWords = function (str, styles) {\n    var breaker = LineBreaker(str, {\n      lineBreak: styles.lineBreak,\n      wordBreak:\n        styles.overflowWrap === \"break-word\" /* BREAK_WORD */\n          ? \"break-word\"\n          : styles.wordBreak,\n    });\n    var words = [];\n    var bk;\n    var _loop_1 = function () {\n      if (bk.value) {\n        var value = bk.value.slice();\n        var codePoints = toCodePoints$1(value);\n        var word_1 = \"\";\n        codePoints.forEach(function (codePoint) {\n          if (wordSeparators.indexOf(codePoint) === -1) {\n            word_1 += fromCodePoint$1(codePoint);\n          } else {\n            if (word_1.length) {\n              words.push(word_1);\n            }\n            words.push(fromCodePoint$1(codePoint));\n            word_1 = \"\";\n          }\n        });\n        if (word_1.length) {\n          words.push(word_1);\n        }\n      }\n    };\n    while (!(bk = breaker.next()).done) {\n      _loop_1();\n    }\n    return words;\n  };\n\n  var TextContainer = /** @class */ (function () {\n    function TextContainer(context, node, styles) {\n      this.text = transform(node.data, styles.textTransform);\n      this.textBounds = parseTextBounds(context, this.text, styles, node);\n    }\n    return TextContainer;\n  })();\n  var transform = function (text, transform) {\n    switch (transform) {\n      case 1 /* LOWERCASE */:\n        return text.toLowerCase();\n      case 3 /* CAPITALIZE */:\n        return text.replace(CAPITALIZE, capitalize);\n      case 2 /* UPPERCASE */:\n        return text.toUpperCase();\n      default:\n        return text;\n    }\n  };\n  var CAPITALIZE = /(^|\\s|:|-|\\(|\\))([a-z])/g;\n  var capitalize = function (m, p1, p2) {\n    if (m.length > 0) {\n      return p1 + p2.toUpperCase();\n    }\n    return m;\n  };\n\n  var ImageElementContainer = /** @class */ (function (_super) {\n    __extends(ImageElementContainer, _super);\n    function ImageElementContainer(context, img) {\n      var _this = _super.call(this, context, img) || this;\n      _this.src = img.currentSrc || img.src;\n      _this.intrinsicWidth = img.naturalWidth;\n      _this.intrinsicHeight = img.naturalHeight;\n      _this.context.cache.addImage(_this.src);\n      return _this;\n    }\n    return ImageElementContainer;\n  })(ElementContainer);\n\n  var CanvasElementContainer = /** @class */ (function (_super) {\n    __extends(CanvasElementContainer, _super);\n    function CanvasElementContainer(context, canvas) {\n      var _this = _super.call(this, context, canvas) || this;\n      _this.canvas = canvas;\n      _this.intrinsicWidth = canvas.width;\n      _this.intrinsicHeight = canvas.height;\n      return _this;\n    }\n    return CanvasElementContainer;\n  })(ElementContainer);\n\n  var SVGElementContainer = /** @class */ (function (_super) {\n    __extends(SVGElementContainer, _super);\n    function SVGElementContainer(context, img) {\n      var _this = _super.call(this, context, img) || this;\n      var s = new XMLSerializer();\n      var bounds = parseBounds(context, img);\n      img.setAttribute(\"width\", bounds.width + \"px\");\n      img.setAttribute(\"height\", bounds.height + \"px\");\n      _this.svg =\n        \"data:image/svg+xml,\" + encodeURIComponent(s.serializeToString(img));\n      _this.intrinsicWidth = img.width.baseVal.value;\n      _this.intrinsicHeight = img.height.baseVal.value;\n      _this.context.cache.addImage(_this.svg);\n      return _this;\n    }\n    return SVGElementContainer;\n  })(ElementContainer);\n\n  var LIElementContainer = /** @class */ (function (_super) {\n    __extends(LIElementContainer, _super);\n    function LIElementContainer(context, element) {\n      var _this = _super.call(this, context, element) || this;\n      _this.value = element.value;\n      return _this;\n    }\n    return LIElementContainer;\n  })(ElementContainer);\n\n  var OLElementContainer = /** @class */ (function (_super) {\n    __extends(OLElementContainer, _super);\n    function OLElementContainer(context, element) {\n      var _this = _super.call(this, context, element) || this;\n      _this.start = element.start;\n      _this.reversed =\n        typeof element.reversed === \"boolean\" && element.reversed === true;\n      return _this;\n    }\n    return OLElementContainer;\n  })(ElementContainer);\n\n  var CHECKBOX_BORDER_RADIUS = [\n    {\n      type: 15 /* DIMENSION_TOKEN */,\n      flags: 0,\n      unit: \"px\",\n      number: 3,\n    },\n  ];\n  var RADIO_BORDER_RADIUS = [\n    {\n      type: 16 /* PERCENTAGE_TOKEN */,\n      flags: 0,\n      number: 50,\n    },\n  ];\n  var reformatInputBounds = function (bounds) {\n    if (bounds.width > bounds.height) {\n      return new Bounds(\n        bounds.left + (bounds.width - bounds.height) / 2,\n        bounds.top,\n        bounds.height,\n        bounds.height,\n      );\n    } else if (bounds.width < bounds.height) {\n      return new Bounds(\n        bounds.left,\n        bounds.top + (bounds.height - bounds.width) / 2,\n        bounds.width,\n        bounds.width,\n      );\n    }\n    return bounds;\n  };\n  var getInputValue = function (node) {\n    var value =\n      node.type === PASSWORD\n        ? new Array(node.value.length + 1).join(\"\\u2022\")\n        : node.value;\n    return value.length === 0 ? node.placeholder || \"\" : value;\n  };\n  var CHECKBOX = \"checkbox\";\n  var RADIO = \"radio\";\n  var PASSWORD = \"password\";\n  var INPUT_COLOR = 0x2a2a2aff;\n  var InputElementContainer = /** @class */ (function (_super) {\n    __extends(InputElementContainer, _super);\n    function InputElementContainer(context, input) {\n      var _this = _super.call(this, context, input) || this;\n      _this.type = input.type.toLowerCase();\n      _this.checked = input.checked;\n      _this.value = getInputValue(input);\n      if (_this.type === CHECKBOX || _this.type === RADIO) {\n        _this.styles.backgroundColor = 0xdededeff;\n        _this.styles.borderTopColor =\n          _this.styles.borderRightColor =\n          _this.styles.borderBottomColor =\n          _this.styles.borderLeftColor =\n            0xa5a5a5ff;\n        _this.styles.borderTopWidth =\n          _this.styles.borderRightWidth =\n          _this.styles.borderBottomWidth =\n          _this.styles.borderLeftWidth =\n            1;\n        _this.styles.borderTopStyle =\n          _this.styles.borderRightStyle =\n          _this.styles.borderBottomStyle =\n          _this.styles.borderLeftStyle =\n            1 /* SOLID */;\n        _this.styles.backgroundClip = [0 /* BORDER_BOX */];\n        _this.styles.backgroundOrigin = [0 /* BORDER_BOX */];\n        _this.bounds = reformatInputBounds(_this.bounds);\n      }\n      switch (_this.type) {\n        case CHECKBOX:\n          _this.styles.borderTopRightRadius =\n            _this.styles.borderTopLeftRadius =\n            _this.styles.borderBottomRightRadius =\n            _this.styles.borderBottomLeftRadius =\n              CHECKBOX_BORDER_RADIUS;\n          break;\n        case RADIO:\n          _this.styles.borderTopRightRadius =\n            _this.styles.borderTopLeftRadius =\n            _this.styles.borderBottomRightRadius =\n            _this.styles.borderBottomLeftRadius =\n              RADIO_BORDER_RADIUS;\n          break;\n      }\n      return _this;\n    }\n    return InputElementContainer;\n  })(ElementContainer);\n\n  var SelectElementContainer = /** @class */ (function (_super) {\n    __extends(SelectElementContainer, _super);\n    function SelectElementContainer(context, element) {\n      var _this = _super.call(this, context, element) || this;\n      var option = element.options[element.selectedIndex || 0];\n      _this.value = option ? option.text || \"\" : \"\";\n      return _this;\n    }\n    return SelectElementContainer;\n  })(ElementContainer);\n\n  var TextareaElementContainer = /** @class */ (function (_super) {\n    __extends(TextareaElementContainer, _super);\n    function TextareaElementContainer(context, element) {\n      var _this = _super.call(this, context, element) || this;\n      _this.value = element.value;\n      return _this;\n    }\n    return TextareaElementContainer;\n  })(ElementContainer);\n\n  var IFrameElementContainer = /** @class */ (function (_super) {\n    __extends(IFrameElementContainer, _super);\n    function IFrameElementContainer(context, iframe) {\n      var _this = _super.call(this, context, iframe) || this;\n      _this.src = iframe.src;\n      _this.width = parseInt(iframe.width, 10) || 0;\n      _this.height = parseInt(iframe.height, 10) || 0;\n      _this.backgroundColor = _this.styles.backgroundColor;\n      try {\n        if (\n          iframe.contentWindow &&\n          iframe.contentWindow.document &&\n          iframe.contentWindow.document.documentElement\n        ) {\n          _this.tree = parseTree(\n            context,\n            iframe.contentWindow.document.documentElement,\n          );\n          // http://www.w3.org/TR/css3-background/#special-backgrounds\n          var documentBackgroundColor = iframe.contentWindow.document\n            .documentElement\n            ? parseColor(\n                context,\n                getComputedStyle(iframe.contentWindow.document.documentElement)\n                  .backgroundColor,\n              )\n            : COLORS.TRANSPARENT;\n          var bodyBackgroundColor = iframe.contentWindow.document.body\n            ? parseColor(\n                context,\n                getComputedStyle(iframe.contentWindow.document.body)\n                  .backgroundColor,\n              )\n            : COLORS.TRANSPARENT;\n          _this.backgroundColor = isTransparent(documentBackgroundColor)\n            ? isTransparent(bodyBackgroundColor)\n              ? _this.styles.backgroundColor\n              : bodyBackgroundColor\n            : documentBackgroundColor;\n        }\n      } catch (e) {}\n      return _this;\n    }\n    return IFrameElementContainer;\n  })(ElementContainer);\n\n  var LIST_OWNERS = [\"OL\", \"UL\", \"MENU\"];\n  var parseNodeTree = function (context, node, parent, root) {\n    for (\n      var childNode = node.firstChild, nextNode = void 0;\n      childNode;\n      childNode = nextNode\n    ) {\n      nextNode = childNode.nextSibling;\n      if (isTextNode(childNode) && childNode.data.trim().length > 0) {\n        parent.textNodes.push(\n          new TextContainer(context, childNode, parent.styles),\n        );\n      } else if (isElementNode(childNode)) {\n        if (isSlotElement(childNode) && childNode.assignedNodes) {\n          childNode.assignedNodes().forEach(function (childNode) {\n            return parseNodeTree(context, childNode, parent, root);\n          });\n        } else {\n          var container = createContainer(context, childNode);\n          if (container.styles.isVisible()) {\n            if (createsRealStackingContext(childNode, container, root)) {\n              container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n            } else if (createsStackingContext(container.styles)) {\n              container.flags |= 2 /* CREATES_STACKING_CONTEXT */;\n            }\n            if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {\n              container.flags |= 8 /* IS_LIST_OWNER */;\n            }\n            parent.elements.push(container);\n            childNode.slot;\n            if (childNode.shadowRoot) {\n              parseNodeTree(context, childNode.shadowRoot, container, root);\n            } else if (\n              !isTextareaElement(childNode) &&\n              !isSVGElement(childNode) &&\n              !isSelectElement(childNode)\n            ) {\n              parseNodeTree(context, childNode, container, root);\n            }\n          }\n        }\n      }\n    }\n  };\n  var createContainer = function (context, element) {\n    if (isImageElement(element)) {\n      return new ImageElementContainer(context, element);\n    }\n    if (isCanvasElement(element)) {\n      return new CanvasElementContainer(context, element);\n    }\n    if (isSVGElement(element)) {\n      return new SVGElementContainer(context, element);\n    }\n    if (isLIElement(element)) {\n      return new LIElementContainer(context, element);\n    }\n    if (isOLElement(element)) {\n      return new OLElementContainer(context, element);\n    }\n    if (isInputElement(element)) {\n      return new InputElementContainer(context, element);\n    }\n    if (isSelectElement(element)) {\n      return new SelectElementContainer(context, element);\n    }\n    if (isTextareaElement(element)) {\n      return new TextareaElementContainer(context, element);\n    }\n    if (isIFrameElement(element)) {\n      return new IFrameElementContainer(context, element);\n    }\n    return new ElementContainer(context, element);\n  };\n  var parseTree = function (context, element) {\n    var container = createContainer(context, element);\n    container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n    parseNodeTree(context, element, container, container);\n    return container;\n  };\n  var createsRealStackingContext = function (node, container, root) {\n    return (\n      container.styles.isPositionedWithZIndex() ||\n      container.styles.opacity < 1 ||\n      container.styles.isTransformed() ||\n      (isBodyElement(node) && root.styles.isTransparent())\n    );\n  };\n  var createsStackingContext = function (styles) {\n    return styles.isPositioned() || styles.isFloating();\n  };\n  var isTextNode = function (node) {\n    return node.nodeType === Node.TEXT_NODE;\n  };\n  var isElementNode = function (node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n  };\n  var isHTMLElementNode = function (node) {\n    return (\n      isElementNode(node) &&\n      typeof node.style !== \"undefined\" &&\n      !isSVGElementNode(node)\n    );\n  };\n  var isSVGElementNode = function (element) {\n    return typeof element.className === \"object\";\n  };\n  var isLIElement = function (node) {\n    return node.tagName === \"LI\";\n  };\n  var isOLElement = function (node) {\n    return node.tagName === \"OL\";\n  };\n  var isInputElement = function (node) {\n    return node.tagName === \"INPUT\";\n  };\n  var isHTMLElement = function (node) {\n    return node.tagName === \"HTML\";\n  };\n  var isSVGElement = function (node) {\n    return node.tagName === \"svg\";\n  };\n  var isBodyElement = function (node) {\n    return node.tagName === \"BODY\";\n  };\n  var isCanvasElement = function (node) {\n    return node.tagName === \"CANVAS\";\n  };\n  var isVideoElement = function (node) {\n    return node.tagName === \"VIDEO\";\n  };\n  var isImageElement = function (node) {\n    return node.tagName === \"IMG\";\n  };\n  var isIFrameElement = function (node) {\n    return node.tagName === \"IFRAME\";\n  };\n  var isStyleElement = function (node) {\n    return node.tagName === \"STYLE\";\n  };\n  var isScriptElement = function (node) {\n    return node.tagName === \"SCRIPT\";\n  };\n  var isTextareaElement = function (node) {\n    return node.tagName === \"TEXTAREA\";\n  };\n  var isSelectElement = function (node) {\n    return node.tagName === \"SELECT\";\n  };\n  var isSlotElement = function (node) {\n    return node.tagName === \"SLOT\";\n  };\n  // https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n  var isCustomElement = function (node) {\n    return node.tagName.indexOf(\"-\") > 0;\n  };\n\n  var CounterState = /** @class */ (function () {\n    function CounterState() {\n      this.counters = {};\n    }\n    CounterState.prototype.getCounterValue = function (name) {\n      var counter = this.counters[name];\n      if (counter && counter.length) {\n        return counter[counter.length - 1];\n      }\n      return 1;\n    };\n    CounterState.prototype.getCounterValues = function (name) {\n      var counter = this.counters[name];\n      return counter ? counter : [];\n    };\n    CounterState.prototype.pop = function (counters) {\n      var _this = this;\n      counters.forEach(function (counter) {\n        return _this.counters[counter].pop();\n      });\n    };\n    CounterState.prototype.parse = function (style) {\n      var _this = this;\n      var counterIncrement = style.counterIncrement;\n      var counterReset = style.counterReset;\n      var canReset = true;\n      if (counterIncrement !== null) {\n        counterIncrement.forEach(function (entry) {\n          var counter = _this.counters[entry.counter];\n          if (counter && entry.increment !== 0) {\n            canReset = false;\n            if (!counter.length) {\n              counter.push(1);\n            }\n            counter[Math.max(0, counter.length - 1)] += entry.increment;\n          }\n        });\n      }\n      var counterNames = [];\n      if (canReset) {\n        counterReset.forEach(function (entry) {\n          var counter = _this.counters[entry.counter];\n          counterNames.push(entry.counter);\n          if (!counter) {\n            counter = _this.counters[entry.counter] = [];\n          }\n          counter.push(entry.reset);\n        });\n      }\n      return counterNames;\n    };\n    return CounterState;\n  })();\n  var ROMAN_UPPER = {\n    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],\n    values: [\n      \"M\",\n      \"CM\",\n      \"D\",\n      \"CD\",\n      \"C\",\n      \"XC\",\n      \"L\",\n      \"XL\",\n      \"X\",\n      \"IX\",\n      \"V\",\n      \"IV\",\n      \"I\",\n    ],\n  };\n  var ARMENIAN = {\n    integers: [\n      9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600,\n      500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6,\n      5, 4, 3, 2, 1,\n    ],\n    values: [\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n    ],\n  };\n  var HEBREW = {\n    integers: [\n      10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300,\n      200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7,\n      6, 5, 4, 3, 2, 1,\n    ],\n    values: [\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n    ],\n  };\n  var GEORGIAN = {\n    integers: [\n      10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800,\n      700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9,\n      8, 7, 6, 5, 4, 3, 2, 1,\n    ],\n    values: [\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n      \"\",\n    ],\n  };\n  var createAdditiveCounter = function (\n    value,\n    min,\n    max,\n    symbols,\n    fallback,\n    suffix,\n  ) {\n    if (value < min || value > max) {\n      return createCounterText(value, fallback, suffix.length > 0);\n    }\n    return (\n      symbols.integers.reduce(function (string, integer, index) {\n        while (value >= integer) {\n          value -= integer;\n          string += symbols.values[index];\n        }\n        return string;\n      }, \"\") + suffix\n    );\n  };\n  var createCounterStyleWithSymbolResolver = function (\n    value,\n    codePointRangeLength,\n    isNumeric,\n    resolver,\n  ) {\n    var string = \"\";\n    do {\n      if (!isNumeric) {\n        value--;\n      }\n      string = resolver(value) + string;\n      value /= codePointRangeLength;\n    } while (value * codePointRangeLength >= codePointRangeLength);\n    return string;\n  };\n  var createCounterStyleFromRange = function (\n    value,\n    codePointRangeStart,\n    codePointRangeEnd,\n    isNumeric,\n    suffix,\n  ) {\n    var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;\n    return (\n      (value < 0 ? \"-\" : \"\") +\n      (createCounterStyleWithSymbolResolver(\n        Math.abs(value),\n        codePointRangeLength,\n        isNumeric,\n        function (codePoint) {\n          return fromCodePoint$1(\n            Math.floor(codePoint % codePointRangeLength) + codePointRangeStart,\n          );\n        },\n      ) +\n        suffix)\n    );\n  };\n  var createCounterStyleFromSymbols = function (value, symbols, suffix) {\n    if (suffix === void 0) {\n      suffix = \". \";\n    }\n    var codePointRangeLength = symbols.length;\n    return (\n      createCounterStyleWithSymbolResolver(\n        Math.abs(value),\n        codePointRangeLength,\n        false,\n        function (codePoint) {\n          return symbols[Math.floor(codePoint % codePointRangeLength)];\n        },\n      ) + suffix\n    );\n  };\n  var CJK_ZEROS = 1 << 0;\n  var CJK_TEN_COEFFICIENTS = 1 << 1;\n  var CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;\n  var CJK_HUNDRED_COEFFICIENTS = 1 << 3;\n  var createCJKCounter = function (\n    value,\n    numbers,\n    multipliers,\n    negativeSign,\n    suffix,\n    flags,\n  ) {\n    if (value < -9999 || value > 9999) {\n      return createCounterText(value, 4 /* CJK_DECIMAL */, suffix.length > 0);\n    }\n    var tmp = Math.abs(value);\n    var string = suffix;\n    if (tmp === 0) {\n      return numbers[0] + string;\n    }\n    for (var digit = 0; tmp > 0 && digit <= 4; digit++) {\n      var coefficient = tmp % 10;\n      if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== \"\") {\n        string = numbers[coefficient] + string;\n      } else if (\n        coefficient > 1 ||\n        (coefficient === 1 && digit === 0) ||\n        (coefficient === 1 &&\n          digit === 1 &&\n          contains(flags, CJK_TEN_COEFFICIENTS)) ||\n        (coefficient === 1 &&\n          digit === 1 &&\n          contains(flags, CJK_TEN_HIGH_COEFFICIENTS) &&\n          value > 100) ||\n        (coefficient === 1 &&\n          digit > 1 &&\n          contains(flags, CJK_HUNDRED_COEFFICIENTS))\n      ) {\n        string =\n          numbers[coefficient] +\n          (digit > 0 ? multipliers[digit - 1] : \"\") +\n          string;\n      } else if (coefficient === 1 && digit > 0) {\n        string = multipliers[digit - 1] + string;\n      }\n      tmp = Math.floor(tmp / 10);\n    }\n    return (value < 0 ? negativeSign : \"\") + string;\n  };\n  var CHINESE_INFORMAL_MULTIPLIERS = \"\";\n  var CHINESE_FORMAL_MULTIPLIERS = \"\";\n  var JAPANESE_NEGATIVE = \"\";\n  var KOREAN_NEGATIVE = \"\";\n  var createCounterText = function (value, type, appendSuffix) {\n    var defaultSuffix = appendSuffix ? \". \" : \"\";\n    var cjkSuffix = appendSuffix ? \"\" : \"\";\n    var koreanSuffix = appendSuffix ? \", \" : \"\";\n    var spaceSuffix = appendSuffix ? \" \" : \"\";\n    switch (type) {\n      case 0 /* DISC */:\n        return \"\" + spaceSuffix;\n      case 1 /* CIRCLE */:\n        return \"\" + spaceSuffix;\n      case 2 /* SQUARE */:\n        return \"\" + spaceSuffix;\n      case 5 /* DECIMAL_LEADING_ZERO */:\n        var string = createCounterStyleFromRange(\n          value,\n          48,\n          57,\n          true,\n          defaultSuffix,\n        );\n        return string.length < 4 ? \"0\" + string : string;\n      case 4 /* CJK_DECIMAL */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n          cjkSuffix,\n        );\n      case 6 /* LOWER_ROMAN */:\n        return createAdditiveCounter(\n          value,\n          1,\n          3999,\n          ROMAN_UPPER,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        ).toLowerCase();\n      case 7 /* UPPER_ROMAN */:\n        return createAdditiveCounter(\n          value,\n          1,\n          3999,\n          ROMAN_UPPER,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        );\n      case 8 /* LOWER_GREEK */:\n        return createCounterStyleFromRange(\n          value,\n          945,\n          969,\n          false,\n          defaultSuffix,\n        );\n      case 9 /* LOWER_ALPHA */:\n        return createCounterStyleFromRange(\n          value,\n          97,\n          122,\n          false,\n          defaultSuffix,\n        );\n      case 10 /* UPPER_ALPHA */:\n        return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);\n      case 11 /* ARABIC_INDIC */:\n        return createCounterStyleFromRange(\n          value,\n          1632,\n          1641,\n          true,\n          defaultSuffix,\n        );\n      case 12 /* ARMENIAN */:\n      case 49 /* UPPER_ARMENIAN */:\n        return createAdditiveCounter(\n          value,\n          1,\n          9999,\n          ARMENIAN,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        );\n      case 35 /* LOWER_ARMENIAN */:\n        return createAdditiveCounter(\n          value,\n          1,\n          9999,\n          ARMENIAN,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        ).toLowerCase();\n      case 13 /* BENGALI */:\n        return createCounterStyleFromRange(\n          value,\n          2534,\n          2543,\n          true,\n          defaultSuffix,\n        );\n      case 14 /* CAMBODIAN */:\n      case 30 /* KHMER */:\n        return createCounterStyleFromRange(\n          value,\n          6112,\n          6121,\n          true,\n          defaultSuffix,\n        );\n      case 15 /* CJK_EARTHLY_BRANCH */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n          cjkSuffix,\n        );\n      case 16 /* CJK_HEAVENLY_STEM */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n          cjkSuffix,\n        );\n      case 17 /* CJK_IDEOGRAPHIC */:\n      case 48 /* TRAD_CHINESE_INFORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          CHINESE_INFORMAL_MULTIPLIERS,\n          \"\",\n          cjkSuffix,\n          CJK_TEN_COEFFICIENTS |\n            CJK_TEN_HIGH_COEFFICIENTS |\n            CJK_HUNDRED_COEFFICIENTS,\n        );\n      case 47 /* TRAD_CHINESE_FORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          CHINESE_FORMAL_MULTIPLIERS,\n          \"\",\n          cjkSuffix,\n          CJK_ZEROS |\n            CJK_TEN_COEFFICIENTS |\n            CJK_TEN_HIGH_COEFFICIENTS |\n            CJK_HUNDRED_COEFFICIENTS,\n        );\n      case 42 /* SIMP_CHINESE_INFORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          CHINESE_INFORMAL_MULTIPLIERS,\n          \"\",\n          cjkSuffix,\n          CJK_TEN_COEFFICIENTS |\n            CJK_TEN_HIGH_COEFFICIENTS |\n            CJK_HUNDRED_COEFFICIENTS,\n        );\n      case 41 /* SIMP_CHINESE_FORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          CHINESE_FORMAL_MULTIPLIERS,\n          \"\",\n          cjkSuffix,\n          CJK_ZEROS |\n            CJK_TEN_COEFFICIENTS |\n            CJK_TEN_HIGH_COEFFICIENTS |\n            CJK_HUNDRED_COEFFICIENTS,\n        );\n      case 26 /* JAPANESE_INFORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          \"\",\n          JAPANESE_NEGATIVE,\n          cjkSuffix,\n          0,\n        );\n      case 25 /* JAPANESE_FORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          \"\",\n          JAPANESE_NEGATIVE,\n          cjkSuffix,\n          CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS,\n        );\n      case 31 /* KOREAN_HANGUL_FORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          \"\",\n          KOREAN_NEGATIVE,\n          koreanSuffix,\n          CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS,\n        );\n      case 33 /* KOREAN_HANJA_INFORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          \"\",\n          KOREAN_NEGATIVE,\n          koreanSuffix,\n          0,\n        );\n      case 32 /* KOREAN_HANJA_FORMAL */:\n        return createCJKCounter(\n          value,\n          \"\",\n          \"\",\n          KOREAN_NEGATIVE,\n          koreanSuffix,\n          CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS,\n        );\n      case 18 /* DEVANAGARI */:\n        return createCounterStyleFromRange(\n          value,\n          0x966,\n          0x96f,\n          true,\n          defaultSuffix,\n        );\n      case 20 /* GEORGIAN */:\n        return createAdditiveCounter(\n          value,\n          1,\n          19999,\n          GEORGIAN,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        );\n      case 21 /* GUJARATI */:\n        return createCounterStyleFromRange(\n          value,\n          0xae6,\n          0xaef,\n          true,\n          defaultSuffix,\n        );\n      case 22 /* GURMUKHI */:\n        return createCounterStyleFromRange(\n          value,\n          0xa66,\n          0xa6f,\n          true,\n          defaultSuffix,\n        );\n      case 22 /* HEBREW */:\n        return createAdditiveCounter(\n          value,\n          1,\n          10999,\n          HEBREW,\n          3 /* DECIMAL */,\n          defaultSuffix,\n        );\n      case 23 /* HIRAGANA */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n        );\n      case 24 /* HIRAGANA_IROHA */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n        );\n      case 27 /* KANNADA */:\n        return createCounterStyleFromRange(\n          value,\n          0xce6,\n          0xcef,\n          true,\n          defaultSuffix,\n        );\n      case 28 /* KATAKANA */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n          cjkSuffix,\n        );\n      case 29 /* KATAKANA_IROHA */:\n        return createCounterStyleFromSymbols(\n          value,\n          \"\",\n          cjkSuffix,\n        );\n      case 34 /* LAO */:\n        return createCounterStyleFromRange(\n          value,\n          0xed0,\n          0xed9,\n          true,\n          defaultSuffix,\n        );\n      case 37 /* MONGOLIAN */:\n        return createCounterStyleFromRange(\n          value,\n          0x1810,\n          0x1819,\n          true,\n          defaultSuffix,\n        );\n      case 38 /* MYANMAR */:\n        return createCounterStyleFromRange(\n          value,\n          0x1040,\n          0x1049,\n          true,\n          defaultSuffix,\n        );\n      case 39 /* ORIYA */:\n        return createCounterStyleFromRange(\n          value,\n          0xb66,\n          0xb6f,\n          true,\n          defaultSuffix,\n        );\n      case 40 /* PERSIAN */:\n        return createCounterStyleFromRange(\n          value,\n          0x6f0,\n          0x6f9,\n          true,\n          defaultSuffix,\n        );\n      case 43 /* TAMIL */:\n        return createCounterStyleFromRange(\n          value,\n          0xbe6,\n          0xbef,\n          true,\n          defaultSuffix,\n        );\n      case 44 /* TELUGU */:\n        return createCounterStyleFromRange(\n          value,\n          0xc66,\n          0xc6f,\n          true,\n          defaultSuffix,\n        );\n      case 45 /* THAI */:\n        return createCounterStyleFromRange(\n          value,\n          0xe50,\n          0xe59,\n          true,\n          defaultSuffix,\n        );\n      case 46 /* TIBETAN */:\n        return createCounterStyleFromRange(\n          value,\n          0xf20,\n          0xf29,\n          true,\n          defaultSuffix,\n        );\n      case 3 /* DECIMAL */:\n      default:\n        return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n    }\n  };\n\n  var IGNORE_ATTRIBUTE = \"data-htmlVisualizer-ignore\";\n  var DocumentCloner = /** @class */ (function () {\n    function DocumentCloner(context, element, options) {\n      this.context = context;\n      this.options = options;\n      this.scrolledElements = [];\n      this.referenceElement = element;\n      this.counters = new CounterState();\n      this.quoteDepth = 0;\n      if (!element.ownerDocument) {\n        throw new Error(\"Cloned element does not have an owner document\");\n      }\n      // @ts-expect-error\n      this.documentElement = this.cloneNode(\n        element.ownerDocument.documentElement,\n        false,\n      );\n    }\n    DocumentCloner.prototype.toIFrame = function (ownerDocument, windowSize) {\n      var _this = this;\n      var iframe = createIFrameContainer(ownerDocument, windowSize);\n      if (!iframe.contentWindow) {\n        return Promise.reject(\"Unable to find iframe window\");\n      }\n      var scrollX = ownerDocument.defaultView.pageXOffset;\n      var scrollY = ownerDocument.defaultView.pageYOffset;\n      var cloneWindow = iframe.contentWindow;\n      var documentClone = cloneWindow.document;\n      /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n             if window url is about:blank, we can assign the url to current by writing onto the document\n             */\n      var iframeLoad = iframeLoader(iframe).then(function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var onclone, referenceElement;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                this.scrolledElements.forEach(restoreNodeScroll);\n                if (cloneWindow) {\n                  cloneWindow.scrollTo(windowSize.left, windowSize.top);\n                  if (\n                    /(iPad|iPhone|iPod)/g.test(navigator.userAgent) &&\n                    (cloneWindow.scrollY !== windowSize.top ||\n                      cloneWindow.scrollX !== windowSize.left)\n                  ) {\n                    this.context.logger.warn(\n                      \"Unable to restore scroll position for cloned document\",\n                    );\n                    this.context.windowBounds = this.context.windowBounds.add(\n                      cloneWindow.scrollX - windowSize.left,\n                      cloneWindow.scrollY - windowSize.top,\n                      0,\n                      0,\n                    );\n                  }\n                }\n                onclone = this.options.onclone;\n                referenceElement = this.clonedReferenceElement;\n                if (typeof referenceElement === \"undefined\") {\n                  return [\n                    2 /*return*/,\n                    Promise.reject(\n                      \"Error finding the \" +\n                        this.referenceElement.nodeName +\n                        \" in the cloned document\",\n                    ),\n                  ];\n                }\n                if (!(documentClone.fonts && documentClone.fonts.ready))\n                  return [3 /*break*/, 2];\n                return [4 /*yield*/, documentClone.fonts.ready];\n              case 1:\n                _a.sent();\n                _a.label = 2;\n              case 2:\n                if (!/(AppleWebKit)/g.test(navigator.userAgent))\n                  return [3 /*break*/, 4];\n                return [4 /*yield*/, imagesReady(documentClone)];\n              case 3:\n                _a.sent();\n                _a.label = 4;\n              case 4:\n                if (typeof onclone === \"function\") {\n                  return [\n                    2 /*return*/,\n                    Promise.resolve()\n                      .then(function () {\n                        return onclone(documentClone, referenceElement);\n                      })\n                      .then(function () {\n                        return iframe;\n                      }),\n                  ];\n                }\n                return [2 /*return*/, iframe];\n            }\n          });\n        });\n      });\n      documentClone.open();\n      documentClone.write(serializeDoctype(document.doctype) + \"<html></html>\");\n      // Chrome scrolls the parent document for some reason after the write to the cloned window???\n      restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);\n      documentClone.replaceChild(\n        documentClone.adoptNode(this.documentElement),\n        documentClone.documentElement,\n      );\n      documentClone.close();\n      return iframeLoad;\n    };\n    DocumentCloner.prototype.createElementClone = function (node) {\n      if (isDebugging(node, 2 /* CLONE */)) {\n        debugger;\n      }\n      if (isCanvasElement(node)) {\n        return this.createCanvasClone(node);\n      }\n      if (isVideoElement(node)) {\n        return this.createVideoClone(node);\n      }\n      if (isStyleElement(node)) {\n        return this.createStyleClone(node);\n      }\n      var clone = node.cloneNode(false);\n      if (isImageElement(clone)) {\n        clone.onerror = function () {\n          // console.error(\"Failed to load image: \" + clone.src);\n          // Handle the error (e.g., replace the image or hide it)\n        };\n        if (\n          isImageElement(node) &&\n          node.currentSrc &&\n          node.currentSrc !== node.src\n        ) {\n          clone.src = node.currentSrc;\n          clone.srcset = \"\";\n        }\n        if (clone.loading === \"lazy\") {\n          clone.loading = \"eager\";\n        }\n      }\n      if (isCustomElement(clone)) {\n        return this.createCustomElementClone(clone);\n      }\n      return clone;\n    };\n    DocumentCloner.prototype.createCustomElementClone = function (node) {\n      var clone = document.createElement(\"htmlVisualizercustomelement\");\n      copyCSSStyles(node.style, clone);\n      return clone;\n    };\n    DocumentCloner.prototype.createStyleClone = function (node) {\n      try {\n        var sheet = node.sheet;\n        if (sheet && sheet.cssRules) {\n          var css = [].slice.call(sheet.cssRules, 0).reduce(function (\n            css,\n            rule,\n          ) {\n            if (rule && typeof rule.cssText === \"string\") {\n              return css + rule.cssText;\n            }\n            return css;\n          }, \"\");\n          var style = node.cloneNode(false);\n          style.textContent = css;\n          return style;\n        }\n      } catch (e) {\n        // accessing node.sheet.cssRules throws a DOMException\n        this.context.logger.error(\"Unable to access cssRules property\", e);\n        if (e.name !== \"SecurityError\") {\n          throw e;\n        }\n      }\n      return node.cloneNode(false);\n    };\n    DocumentCloner.prototype.createCanvasClone = function (canvas) {\n      var _a;\n      if (this.options.inlineImages && canvas.ownerDocument) {\n        var img = canvas.ownerDocument.createElement(\"img\");\n        try {\n          img.src = canvas.toDataURL();\n          return img;\n        } catch (e) {\n          this.context.logger.info(\n            \"Unable to inline canvas contents, canvas is tainted\",\n            canvas,\n          );\n        }\n      }\n      var clonedCanvas = canvas.cloneNode(false);\n      try {\n        clonedCanvas.width = canvas.width;\n        clonedCanvas.height = canvas.height;\n        var ctx = canvas.getContext(\"2d\");\n        var clonedCtx = clonedCanvas.getContext(\"2d\");\n        if (clonedCtx) {\n          if (!this.options.allowTaint && ctx) {\n            clonedCtx.putImageData(\n              ctx.getImageData(0, 0, canvas.width, canvas.height),\n              0,\n              0,\n            );\n          } else {\n            var gl =\n              (_a = canvas.getContext(\"webgl2\")) !== null && _a !== void 0\n                ? _a\n                : canvas.getContext(\"webgl\");\n            if (gl) {\n              var attribs = gl.getContextAttributes();\n              if (\n                (attribs === null || attribs === void 0\n                  ? void 0\n                  : attribs.preserveDrawingBuffer) === false\n              ) {\n                this.context.logger.warn(\n                  \"Unable to clone WebGL context as it has preserveDrawingBuffer=false\",\n                  canvas,\n                );\n              }\n            }\n            clonedCtx.drawImage(canvas, 0, 0);\n          }\n        }\n        return clonedCanvas;\n      } catch (e) {\n        this.context.logger.info(\n          \"Unable to clone canvas as it is tainted\",\n          canvas,\n        );\n      }\n      return clonedCanvas;\n    };\n    DocumentCloner.prototype.createVideoClone = function (video) {\n      var canvas = video.ownerDocument.createElement(\"canvas\");\n      canvas.width = video.offsetWidth;\n      canvas.height = video.offsetHeight;\n      var ctx = canvas.getContext(\"2d\");\n      try {\n        if (ctx) {\n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n          if (!this.options.allowTaint) {\n            ctx.getImageData(0, 0, canvas.width, canvas.height);\n          }\n        }\n        return canvas;\n      } catch (e) {\n        this.context.logger.info(\n          \"Unable to clone video as it is tainted\",\n          video,\n        );\n      }\n      var blankCanvas = video.ownerDocument.createElement(\"canvas\");\n      blankCanvas.width = video.offsetWidth;\n      blankCanvas.height = video.offsetHeight;\n      return blankCanvas;\n    };\n    DocumentCloner.prototype.appendChildNode = function (\n      clone,\n      child,\n      copyStyles,\n    ) {\n      if (\n        !isElementNode(child) ||\n        (!isScriptElement(child) &&\n          !child.hasAttribute(IGNORE_ATTRIBUTE) &&\n          (typeof this.options.ignoreElements !== \"function\" ||\n            !this.options.ignoreElements(child)))\n      ) {\n        if (\n          !this.options.copyStyles ||\n          !isElementNode(child) ||\n          !isStyleElement(child)\n        ) {\n          clone.appendChild(this.cloneNode(child, copyStyles));\n        }\n      }\n    };\n    DocumentCloner.prototype.cloneChildNodes = function (\n      node,\n      clone,\n      copyStyles,\n    ) {\n      var _this = this;\n      for (\n        var child = node.shadowRoot\n          ? node.shadowRoot.firstChild\n          : node.firstChild;\n        child;\n        child = child.nextSibling\n      ) {\n        if (\n          isElementNode(child) &&\n          isSlotElement(child) &&\n          typeof child.assignedNodes === \"function\"\n        ) {\n          var assignedNodes = child.assignedNodes();\n          if (assignedNodes.length) {\n            assignedNodes.forEach(function (assignedNode) {\n              return _this.appendChildNode(clone, assignedNode, copyStyles);\n            });\n          }\n        } else {\n          this.appendChildNode(clone, child, copyStyles);\n        }\n      }\n    };\n    DocumentCloner.prototype.cloneNode = function (node, copyStyles) {\n      if (isTextNode(node)) {\n        return document.createTextNode(node.data);\n      }\n      if (!node.ownerDocument) {\n        return node.cloneNode(false);\n      }\n      var window = node.ownerDocument.defaultView;\n      if (\n        window &&\n        isElementNode(node) &&\n        (isHTMLElementNode(node) || isSVGElementNode(node))\n      ) {\n        var clone = this.createElementClone(node);\n        clone.style.transitionProperty = \"none\";\n        var style = window.getComputedStyle(node);\n        var styleBefore = window.getComputedStyle(node, \":before\");\n        var styleAfter = window.getComputedStyle(node, \":after\");\n        if (this.referenceElement === node && isHTMLElementNode(clone)) {\n          this.clonedReferenceElement = clone;\n        }\n        if (isBodyElement(clone)) {\n          createPseudoHideStyles(clone);\n        }\n        var counters = this.counters.parse(\n          new CSSParsedCounterDeclaration(this.context, style),\n        );\n        var before = this.resolvePseudoContent(\n          node,\n          clone,\n          styleBefore,\n          PseudoElementType.BEFORE,\n        );\n        if (isCustomElement(node)) {\n          copyStyles = true;\n        }\n        if (!isVideoElement(node)) {\n          this.cloneChildNodes(node, clone, copyStyles);\n        }\n        if (before) {\n          clone.insertBefore(before, clone.firstChild);\n        }\n        var after = this.resolvePseudoContent(\n          node,\n          clone,\n          styleAfter,\n          PseudoElementType.AFTER,\n        );\n        if (after) {\n          clone.appendChild(after);\n        }\n        this.counters.pop(counters);\n        if (\n          (style &&\n            (this.options.copyStyles || isSVGElementNode(node)) &&\n            !isIFrameElement(node)) ||\n          copyStyles\n        ) {\n          copyCSSStyles(style, clone);\n        }\n        if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n          this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n        }\n        if (\n          (isTextareaElement(node) || isSelectElement(node)) &&\n          (isTextareaElement(clone) || isSelectElement(clone))\n        ) {\n          clone.value = node.value;\n        }\n        return clone;\n      }\n      return node.cloneNode(false);\n    };\n    DocumentCloner.prototype.resolvePseudoContent = function (\n      node,\n      clone,\n      style,\n      pseudoElt,\n    ) {\n      var _this = this;\n      if (!style) {\n        return;\n      }\n      var value = style.content;\n      var document = clone.ownerDocument;\n      if (\n        !document ||\n        !value ||\n        value === \"none\" ||\n        value === \"-moz-alt-content\" ||\n        style.display === \"none\"\n      ) {\n        return;\n      }\n      this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n      var declaration = new CSSParsedPseudoDeclaration(this.context, style);\n      var anonymousReplacedElement = document.createElement(\n        \"htmlVisualizerpseudoelement\",\n      );\n      copyCSSStyles(style, anonymousReplacedElement);\n      declaration.content.forEach(function (token) {\n        if (token.type === 0 /* STRING_TOKEN */) {\n          anonymousReplacedElement.appendChild(\n            document.createTextNode(token.value),\n          );\n        } else if (token.type === 22 /* URL_TOKEN */) {\n          var img = document.createElement(\"img\");\n          img.src = token.value;\n          img.style.opacity = \"1\";\n          anonymousReplacedElement.appendChild(img);\n        } else if (token.type === 18 /* FUNCTION */) {\n          if (token.name === \"attr\") {\n            var attr = token.values.filter(isIdentToken);\n            if (attr.length) {\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(node.getAttribute(attr[0].value) || \"\"),\n              );\n            }\n          } else if (token.name === \"counter\") {\n            var _a = token.values.filter(nonFunctionArgSeparator),\n              counter = _a[0],\n              counterStyle = _a[1];\n            if (counter && isIdentToken(counter)) {\n              var counterState = _this.counters.getCounterValue(counter.value);\n              var counterType =\n                counterStyle && isIdentToken(counterStyle)\n                  ? listStyleType.parse(_this.context, counterStyle.value)\n                  : 3; /* DECIMAL */\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(\n                  createCounterText(counterState, counterType, false),\n                ),\n              );\n            }\n          } else if (token.name === \"counters\") {\n            var _b = token.values.filter(nonFunctionArgSeparator),\n              counter = _b[0],\n              delim = _b[1],\n              counterStyle = _b[2];\n            if (counter && isIdentToken(counter)) {\n              var counterStates = _this.counters.getCounterValues(\n                counter.value,\n              );\n              var counterType_1 =\n                counterStyle && isIdentToken(counterStyle)\n                  ? listStyleType.parse(_this.context, counterStyle.value)\n                  : 3; /* DECIMAL */\n              var separator =\n                delim && delim.type === 0 /* STRING_TOKEN */ ? delim.value : \"\";\n              var text = counterStates\n                .map(function (value) {\n                  return createCounterText(value, counterType_1, false);\n                })\n                .join(separator);\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(text),\n              );\n            }\n          } else;\n        } else if (token.type === 20 /* IDENT_TOKEN */) {\n          switch (token.value) {\n            case \"open-quote\":\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(\n                  getQuote(declaration.quotes, _this.quoteDepth++, true),\n                ),\n              );\n              break;\n            case \"close-quote\":\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(\n                  getQuote(declaration.quotes, --_this.quoteDepth, false),\n                ),\n              );\n              break;\n            default:\n              // safari doesn't parse string tokens correctly because of lack of quotes\n              anonymousReplacedElement.appendChild(\n                document.createTextNode(token.value),\n              );\n          }\n        }\n      });\n      anonymousReplacedElement.className =\n        PSEUDO_HIDE_ELEMENT_CLASS_BEFORE +\n        \" \" +\n        PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n      var newClassName =\n        pseudoElt === PseudoElementType.BEFORE\n          ? \" \" + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE\n          : \" \" + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n      if (isSVGElementNode(clone)) {\n        clone.className.baseValue += newClassName;\n      } else {\n        clone.className += newClassName;\n      }\n      return anonymousReplacedElement;\n    };\n    DocumentCloner.destroy = function (container) {\n      if (container.parentNode) {\n        container.parentNode.removeChild(container);\n        return true;\n      }\n      return false;\n    };\n    return DocumentCloner;\n  })();\n  var PseudoElementType;\n  (function (PseudoElementType) {\n    PseudoElementType[(PseudoElementType[\"BEFORE\"] = 0)] = \"BEFORE\";\n    PseudoElementType[(PseudoElementType[\"AFTER\"] = 1)] = \"AFTER\";\n  })(PseudoElementType || (PseudoElementType = {}));\n  var createIFrameContainer = function (ownerDocument, bounds) {\n    var cloneIframeContainer = ownerDocument.createElement(\"iframe\");\n    cloneIframeContainer.className = \"htmlVisualizer-container\";\n    cloneIframeContainer.style.visibility = \"hidden\";\n    cloneIframeContainer.style.position = \"fixed\";\n    cloneIframeContainer.style.left = \"-10000px\";\n    cloneIframeContainer.style.top = \"0px\";\n    cloneIframeContainer.style.border = \"0\";\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = \"no\"; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, \"true\");\n    ownerDocument.body.appendChild(cloneIframeContainer);\n    return cloneIframeContainer;\n  };\n  var imageReady = function (img) {\n    return new Promise(function (resolve) {\n      if (img.complete) {\n        resolve();\n        return;\n      }\n      if (!img.src) {\n        resolve();\n        return;\n      }\n      img.onload = resolve;\n      img.onerror = resolve;\n    });\n  };\n  var imagesReady = function (document) {\n    return Promise.all([].slice.call(document.images, 0).map(imageReady));\n  };\n  var iframeLoader = function (iframe) {\n    return new Promise(function (resolve, reject) {\n      var cloneWindow = iframe.contentWindow;\n      if (!cloneWindow) {\n        return reject(\"No window assigned for iframe\");\n      }\n      var documentClone = cloneWindow.document;\n      cloneWindow.onload = iframe.onload = function () {\n        cloneWindow.onload = iframe.onload = null;\n        var interval = setInterval(function () {\n          if (\n            documentClone.body.childNodes.length > 0 &&\n            documentClone.readyState === \"complete\"\n          ) {\n            clearInterval(interval);\n            resolve(iframe);\n          }\n        }, 50);\n      };\n    });\n  };\n  var ignoredStyleProperties = [\n    \"all\",\n    \"d\",\n    \"content\", // Safari shows pseudoelements if content is set\n  ];\n  var copyCSSStyles = function (style, target) {\n    // Edge does not provide value for cssText\n    for (var i = style.length - 1; i >= 0; i--) {\n      var property = style.item(i);\n      if (ignoredStyleProperties.indexOf(property) === -1) {\n        target.style.setProperty(property, style.getPropertyValue(property));\n      }\n    }\n    return target;\n  };\n  var serializeDoctype = function (doctype) {\n    var str = \"\";\n    if (doctype) {\n      str += \"<!DOCTYPE \";\n      if (doctype.name) {\n        str += doctype.name;\n      }\n      if (doctype.internalSubset) {\n        str += doctype.internalSubset;\n      }\n      if (doctype.publicId) {\n        str += '\"' + doctype.publicId + '\"';\n      }\n      if (doctype.systemId) {\n        str += '\"' + doctype.systemId + '\"';\n      }\n      str += \">\";\n    }\n    return str;\n  };\n  var restoreOwnerScroll = function (ownerDocument, x, y) {\n    if (\n      ownerDocument &&\n      ownerDocument.defaultView &&\n      (x !== ownerDocument.defaultView.pageXOffset ||\n        y !== ownerDocument.defaultView.pageYOffset)\n    ) {\n      ownerDocument.defaultView.scrollTo(x, y);\n    }\n  };\n  var restoreNodeScroll = function (_a) {\n    var element = _a[0],\n      x = _a[1],\n      y = _a[2];\n    element.scrollLeft = x;\n    element.scrollTop = y;\n  };\n  var PSEUDO_BEFORE = \":before\";\n  var PSEUDO_AFTER = \":after\";\n  var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE =\n    \"___htmlVisualizer___pseudoelement_before\";\n  var PSEUDO_HIDE_ELEMENT_CLASS_AFTER =\n    \"___htmlVisualizer___pseudoelement_after\";\n  var PSEUDO_HIDE_ELEMENT_STYLE =\n    '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\n  var createPseudoHideStyles = function (body) {\n    createStyles(\n      body,\n      \".\" +\n        PSEUDO_HIDE_ELEMENT_CLASS_BEFORE +\n        PSEUDO_BEFORE +\n        PSEUDO_HIDE_ELEMENT_STYLE +\n        \"\\n         .\" +\n        PSEUDO_HIDE_ELEMENT_CLASS_AFTER +\n        PSEUDO_AFTER +\n        PSEUDO_HIDE_ELEMENT_STYLE,\n    );\n  };\n  var createStyles = function (body, styles) {\n    var document = body.ownerDocument;\n    if (document) {\n      var style = document.createElement(\"style\");\n      style.textContent = styles;\n      body.appendChild(style);\n    }\n  };\n\n  var CacheStorage = /** @class */ (function () {\n    function CacheStorage() {}\n    CacheStorage.getOrigin = function (url) {\n      var link = CacheStorage._link;\n      if (!link) {\n        return \"about:blank\";\n      }\n      link.href = url;\n      link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n      return link.protocol + link.hostname + link.port;\n    };\n    CacheStorage.isSameOrigin = function (src) {\n      return CacheStorage.getOrigin(src) === CacheStorage._origin;\n    };\n    CacheStorage.setContext = function (window) {\n      CacheStorage._link = window.document.createElement(\"a\");\n      CacheStorage._origin = CacheStorage.getOrigin(window.location.href);\n    };\n    CacheStorage._origin = \"about:blank\";\n    return CacheStorage;\n  })();\n  var Cache = /** @class */ (function () {\n    function Cache(context, _options) {\n      this.context = context;\n      this._options = _options;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this._cache = {};\n    }\n    Cache.prototype.addImage = function (src) {\n      var result = Promise.resolve();\n      if (this.has(src)) {\n        return result;\n      }\n      if (isBlobImage(src) || isRenderable(src)) {\n        (this._cache[src] = this.loadImage(src)).catch(function () {\n          // prevent unhandled rejection\n        });\n        return result;\n      }\n      return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Cache.prototype.match = function (src) {\n      return this._cache[src];\n    };\n    Cache.prototype.loadImage = function (key) {\n      return __awaiter(this, void 0, void 0, function () {\n        var isSameOrigin, useCORS, useProxy, src;\n        var _this = this;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              isSameOrigin = CacheStorage.isSameOrigin(key);\n              useCORS =\n                !isInlineImage(key) &&\n                this._options.useCORS === true &&\n                FEATURES.SUPPORT_CORS_IMAGES &&\n                !isSameOrigin;\n              useProxy =\n                !isInlineImage(key) &&\n                !isSameOrigin &&\n                !isBlobImage(key) &&\n                typeof this._options.proxy === \"string\" &&\n                FEATURES.SUPPORT_CORS_XHR &&\n                !useCORS;\n              if (\n                !isSameOrigin &&\n                this._options.allowTaint === false &&\n                !isInlineImage(key) &&\n                !isBlobImage(key) &&\n                !useProxy &&\n                !useCORS\n              ) {\n                return [2 /*return*/];\n              }\n              src = key;\n              if (!useProxy) return [3 /*break*/, 2];\n              return [4 /*yield*/, this.proxy(src)];\n            case 1:\n              src = _a.sent();\n              _a.label = 2;\n            case 2:\n              this.context.logger.debug(\"Added image \" + key.substring(0, 256));\n              return [\n                4 /*yield*/,\n                new Promise(function (resolve, reject) {\n                  var img = new Image();\n                  img.onload = function () {\n                    return resolve(img);\n                  };\n                  img.onerror = reject;\n                  //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous\n                  if (isInlineBase64Image(src) || useCORS) {\n                    img.crossOrigin = \"Anonymous\";\n                  }\n                  img.src = src;\n                  if (img.complete === true) {\n                    // Inline XML images may fail to parse, throwing an Error later on\n                    setTimeout(function () {\n                      return resolve(img);\n                    }, 500);\n                  }\n                  if (_this._options.imageTimeout > 0) {\n                    setTimeout(function () {\n                      return reject(\n                        \"Timed out (\" +\n                          _this._options.imageTimeout +\n                          \"ms) loading image\",\n                      );\n                    }, _this._options.imageTimeout);\n                  }\n                }),\n              ];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n          }\n        });\n      });\n    };\n    Cache.prototype.has = function (key) {\n      return typeof this._cache[key] !== \"undefined\";\n    };\n    Cache.prototype.keys = function () {\n      return Promise.resolve(Object.keys(this._cache));\n    };\n    Cache.prototype.proxy = function (src) {\n      var _this = this;\n      var proxy = this._options.proxy;\n      if (!proxy) {\n        throw new Error(\"No proxy defined\");\n      }\n      var key = src.substring(0, 256);\n      return new Promise(function (resolve, reject) {\n        var responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? \"blob\" : \"text\";\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function () {\n          if (xhr.status === 200) {\n            if (responseType === \"text\") {\n              resolve(xhr.response);\n            } else {\n              var reader_1 = new FileReader();\n              reader_1.addEventListener(\n                \"load\",\n                function () {\n                  return resolve(reader_1.result);\n                },\n                false,\n              );\n              reader_1.addEventListener(\n                \"error\",\n                function (e) {\n                  return reject(e);\n                },\n                false,\n              );\n              reader_1.readAsDataURL(xhr.response);\n            }\n          } else {\n            reject(\n              \"Failed to proxy resource \" +\n                key +\n                \" with status code \" +\n                xhr.status,\n            );\n          }\n        };\n        xhr.onerror = reject;\n        var queryString = proxy.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n        xhr.open(\n          \"GET\",\n          \"\" +\n            proxy +\n            queryString +\n            \"url=\" +\n            encodeURIComponent(src) +\n            \"&responseType=\" +\n            responseType,\n        );\n        if (responseType !== \"text\" && xhr instanceof XMLHttpRequest) {\n          xhr.responseType = responseType;\n        }\n        if (_this._options.imageTimeout) {\n          var timeout_1 = _this._options.imageTimeout;\n          xhr.timeout = timeout_1;\n          xhr.ontimeout = function () {\n            return reject(\"Timed out (\" + timeout_1 + \"ms) proxying \" + key);\n          };\n        }\n        xhr.send();\n      });\n    };\n    return Cache;\n  })();\n  var INLINE_SVG = /^data:image\\/svg\\+xml/i;\n  var INLINE_BASE64 = /^data:image\\/.*;base64,/i;\n  var INLINE_IMG = /^data:image\\/.*/i;\n  var isRenderable = function (src) {\n    return FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);\n  };\n  var isInlineImage = function (src) {\n    return INLINE_IMG.test(src);\n  };\n  var isInlineBase64Image = function (src) {\n    return INLINE_BASE64.test(src);\n  };\n  var isBlobImage = function (src) {\n    return src.substr(0, 4) === \"blob\";\n  };\n  var isSVG = function (src) {\n    return src.substr(-3).toLowerCase() === \"svg\" || INLINE_SVG.test(src);\n  };\n\n  var Vector = /** @class */ (function () {\n    function Vector(x, y) {\n      this.type = 0 /* VECTOR */;\n      this.x = x;\n      this.y = y;\n    }\n    Vector.prototype.add = function (deltaX, deltaY) {\n      return new Vector(this.x + deltaX, this.y + deltaY);\n    };\n    return Vector;\n  })();\n\n  var lerp = function (a, b, t) {\n    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);\n  };\n  var BezierCurve = /** @class */ (function () {\n    function BezierCurve(start, startControl, endControl, end) {\n      this.type = 1 /* BEZIER_CURVE */;\n      this.start = start;\n      this.startControl = startControl;\n      this.endControl = endControl;\n      this.end = end;\n    }\n    BezierCurve.prototype.subdivide = function (t, firstHalf) {\n      var ab = lerp(this.start, this.startControl, t);\n      var bc = lerp(this.startControl, this.endControl, t);\n      var cd = lerp(this.endControl, this.end, t);\n      var abbc = lerp(ab, bc, t);\n      var bccd = lerp(bc, cd, t);\n      var dest = lerp(abbc, bccd, t);\n      return firstHalf\n        ? new BezierCurve(this.start, ab, abbc, dest)\n        : new BezierCurve(dest, bccd, cd, this.end);\n    };\n    BezierCurve.prototype.add = function (deltaX, deltaY) {\n      return new BezierCurve(\n        this.start.add(deltaX, deltaY),\n        this.startControl.add(deltaX, deltaY),\n        this.endControl.add(deltaX, deltaY),\n        this.end.add(deltaX, deltaY),\n      );\n    };\n    BezierCurve.prototype.reverse = function () {\n      return new BezierCurve(\n        this.end,\n        this.endControl,\n        this.startControl,\n        this.start,\n      );\n    };\n    return BezierCurve;\n  })();\n  var isBezierCurve = function (path) {\n    return path.type === 1 /* BEZIER_CURVE */;\n  };\n\n  var BoundCurves = /** @class */ (function () {\n    function BoundCurves(element) {\n      var styles = element.styles;\n      var bounds = element.bounds;\n      var _a = getAbsoluteValueForTuple(\n          styles.borderTopLeftRadius,\n          bounds.width,\n          bounds.height,\n        ),\n        tlh = _a[0],\n        tlv = _a[1];\n      var _b = getAbsoluteValueForTuple(\n          styles.borderTopRightRadius,\n          bounds.width,\n          bounds.height,\n        ),\n        trh = _b[0],\n        trv = _b[1];\n      var _c = getAbsoluteValueForTuple(\n          styles.borderBottomRightRadius,\n          bounds.width,\n          bounds.height,\n        ),\n        brh = _c[0],\n        brv = _c[1];\n      var _d = getAbsoluteValueForTuple(\n          styles.borderBottomLeftRadius,\n          bounds.width,\n          bounds.height,\n        ),\n        blh = _d[0],\n        blv = _d[1];\n      var factors = [];\n      factors.push((tlh + trh) / bounds.width);\n      factors.push((blh + brh) / bounds.width);\n      factors.push((tlv + blv) / bounds.height);\n      factors.push((trv + brv) / bounds.height);\n      var maxFactor = Math.max.apply(Math, factors);\n      if (maxFactor > 1) {\n        tlh /= maxFactor;\n        tlv /= maxFactor;\n        trh /= maxFactor;\n        trv /= maxFactor;\n        brh /= maxFactor;\n        brv /= maxFactor;\n        blh /= maxFactor;\n        blv /= maxFactor;\n      }\n      var topWidth = bounds.width - trh;\n      var rightHeight = bounds.height - brv;\n      var bottomWidth = bounds.width - brh;\n      var leftHeight = bounds.height - blv;\n      var borderTopWidth = styles.borderTopWidth;\n      var borderRightWidth = styles.borderRightWidth;\n      var borderBottomWidth = styles.borderBottomWidth;\n      var borderLeftWidth = styles.borderLeftWidth;\n      var paddingTop = getAbsoluteValue(\n        styles.paddingTop,\n        element.bounds.width,\n      );\n      var paddingRight = getAbsoluteValue(\n        styles.paddingRight,\n        element.bounds.width,\n      );\n      var paddingBottom = getAbsoluteValue(\n        styles.paddingBottom,\n        element.bounds.width,\n      );\n      var paddingLeft = getAbsoluteValue(\n        styles.paddingLeft,\n        element.bounds.width,\n      );\n      this.topLeftBorderDoubleOuterBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth / 3,\n              bounds.top + borderTopWidth / 3,\n              tlh - borderLeftWidth / 3,\n              tlv - borderTopWidth / 3,\n              CORNER.TOP_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth / 3,\n              bounds.top + borderTopWidth / 3,\n            );\n      this.topRightBorderDoubleOuterBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + topWidth,\n              bounds.top + borderTopWidth / 3,\n              trh - borderRightWidth / 3,\n              trv - borderTopWidth / 3,\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth / 3,\n              bounds.top + borderTopWidth / 3,\n            );\n      this.bottomRightBorderDoubleOuterBox =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left + bottomWidth,\n              bounds.top + rightHeight,\n              brh - borderRightWidth / 3,\n              brv - borderBottomWidth / 3,\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth / 3,\n              bounds.top + bounds.height - borderBottomWidth / 3,\n            );\n      this.bottomLeftBorderDoubleOuterBox =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth / 3,\n              bounds.top + leftHeight,\n              blh - borderLeftWidth / 3,\n              blv - borderBottomWidth / 3,\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth / 3,\n              bounds.top + bounds.height - borderBottomWidth / 3,\n            );\n      this.topLeftBorderDoubleInnerBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + (borderLeftWidth * 2) / 3,\n              bounds.top + (borderTopWidth * 2) / 3,\n              tlh - (borderLeftWidth * 2) / 3,\n              tlv - (borderTopWidth * 2) / 3,\n              CORNER.TOP_LEFT,\n            )\n          : new Vector(\n              bounds.left + (borderLeftWidth * 2) / 3,\n              bounds.top + (borderTopWidth * 2) / 3,\n            );\n      this.topRightBorderDoubleInnerBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + topWidth,\n              bounds.top + (borderTopWidth * 2) / 3,\n              trh - (borderRightWidth * 2) / 3,\n              trv - (borderTopWidth * 2) / 3,\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n              bounds.top + (borderTopWidth * 2) / 3,\n            );\n      this.bottomRightBorderDoubleInnerBox =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left + bottomWidth,\n              bounds.top + rightHeight,\n              brh - (borderRightWidth * 2) / 3,\n              brv - (borderBottomWidth * 2) / 3,\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n              bounds.top + bounds.height - (borderBottomWidth * 2) / 3,\n            );\n      this.bottomLeftBorderDoubleInnerBox =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left + (borderLeftWidth * 2) / 3,\n              bounds.top + leftHeight,\n              blh - (borderLeftWidth * 2) / 3,\n              blv - (borderBottomWidth * 2) / 3,\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(\n              bounds.left + (borderLeftWidth * 2) / 3,\n              bounds.top + bounds.height - (borderBottomWidth * 2) / 3,\n            );\n      this.topLeftBorderStroke =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth / 2,\n              bounds.top + borderTopWidth / 2,\n              tlh - borderLeftWidth / 2,\n              tlv - borderTopWidth / 2,\n              CORNER.TOP_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth / 2,\n              bounds.top + borderTopWidth / 2,\n            );\n      this.topRightBorderStroke =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + topWidth,\n              bounds.top + borderTopWidth / 2,\n              trh - borderRightWidth / 2,\n              trv - borderTopWidth / 2,\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth / 2,\n              bounds.top + borderTopWidth / 2,\n            );\n      this.bottomRightBorderStroke =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left + bottomWidth,\n              bounds.top + rightHeight,\n              brh - borderRightWidth / 2,\n              brv - borderBottomWidth / 2,\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth / 2,\n              bounds.top + bounds.height - borderBottomWidth / 2,\n            );\n      this.bottomLeftBorderStroke =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth / 2,\n              bounds.top + leftHeight,\n              blh - borderLeftWidth / 2,\n              blv - borderBottomWidth / 2,\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth / 2,\n              bounds.top + bounds.height - borderBottomWidth / 2,\n            );\n      this.topLeftBorderBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT)\n          : new Vector(bounds.left, bounds.top);\n      this.topRightBorderBox =\n        trh > 0 || trv > 0\n          ? getCurvePoints(\n              bounds.left + topWidth,\n              bounds.top,\n              trh,\n              trv,\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(bounds.left + bounds.width, bounds.top);\n      this.bottomRightBorderBox =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left + bottomWidth,\n              bounds.top + rightHeight,\n              brh,\n              brv,\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);\n      this.bottomLeftBorderBox =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left,\n              bounds.top + leftHeight,\n              blh,\n              blv,\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(bounds.left, bounds.top + bounds.height);\n      this.topLeftPaddingBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth,\n              bounds.top + borderTopWidth,\n              Math.max(0, tlh - borderLeftWidth),\n              Math.max(0, tlv - borderTopWidth),\n              CORNER.TOP_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth,\n              bounds.top + borderTopWidth,\n            );\n      this.topRightPaddingBox =\n        trh > 0 || trv > 0\n          ? getCurvePoints(\n              bounds.left + Math.min(topWidth, bounds.width - borderRightWidth),\n              bounds.top + borderTopWidth,\n              topWidth > bounds.width + borderRightWidth\n                ? 0\n                : Math.max(0, trh - borderRightWidth),\n              Math.max(0, trv - borderTopWidth),\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth,\n              bounds.top + borderTopWidth,\n            );\n      this.bottomRightPaddingBox =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left +\n                Math.min(bottomWidth, bounds.width - borderLeftWidth),\n              bounds.top +\n                Math.min(rightHeight, bounds.height - borderBottomWidth),\n              Math.max(0, brh - borderRightWidth),\n              Math.max(0, brv - borderBottomWidth),\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - borderRightWidth,\n              bounds.top + bounds.height - borderBottomWidth,\n            );\n      this.bottomLeftPaddingBox =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth,\n              bounds.top +\n                Math.min(leftHeight, bounds.height - borderBottomWidth),\n              Math.max(0, blh - borderLeftWidth),\n              Math.max(0, blv - borderBottomWidth),\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth,\n              bounds.top + bounds.height - borderBottomWidth,\n            );\n      this.topLeftContentBox =\n        tlh > 0 || tlv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth + paddingLeft,\n              bounds.top + borderTopWidth + paddingTop,\n              Math.max(0, tlh - (borderLeftWidth + paddingLeft)),\n              Math.max(0, tlv - (borderTopWidth + paddingTop)),\n              CORNER.TOP_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth + paddingLeft,\n              bounds.top + borderTopWidth + paddingTop,\n            );\n      this.topRightContentBox =\n        trh > 0 || trv > 0\n          ? getCurvePoints(\n              bounds.left +\n                Math.min(\n                  topWidth,\n                  bounds.width + borderLeftWidth + paddingLeft,\n                ),\n              bounds.top + borderTopWidth + paddingTop,\n              topWidth > bounds.width + borderLeftWidth + paddingLeft\n                ? 0\n                : trh - borderLeftWidth + paddingLeft,\n              trv - (borderTopWidth + paddingTop),\n              CORNER.TOP_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - (borderRightWidth + paddingRight),\n              bounds.top + borderTopWidth + paddingTop,\n            );\n      this.bottomRightContentBox =\n        brh > 0 || brv > 0\n          ? getCurvePoints(\n              bounds.left +\n                Math.min(\n                  bottomWidth,\n                  bounds.width - (borderLeftWidth + paddingLeft),\n                ),\n              bounds.top +\n                Math.min(\n                  rightHeight,\n                  bounds.height + borderTopWidth + paddingTop,\n                ),\n              Math.max(0, brh - (borderRightWidth + paddingRight)),\n              brv - (borderBottomWidth + paddingBottom),\n              CORNER.BOTTOM_RIGHT,\n            )\n          : new Vector(\n              bounds.left + bounds.width - (borderRightWidth + paddingRight),\n              bounds.top + bounds.height - (borderBottomWidth + paddingBottom),\n            );\n      this.bottomLeftContentBox =\n        blh > 0 || blv > 0\n          ? getCurvePoints(\n              bounds.left + borderLeftWidth + paddingLeft,\n              bounds.top + leftHeight,\n              Math.max(0, blh - (borderLeftWidth + paddingLeft)),\n              blv - (borderBottomWidth + paddingBottom),\n              CORNER.BOTTOM_LEFT,\n            )\n          : new Vector(\n              bounds.left + borderLeftWidth + paddingLeft,\n              bounds.top + bounds.height - (borderBottomWidth + paddingBottom),\n            );\n    }\n    return BoundCurves;\n  })();\n  var CORNER;\n  (function (CORNER) {\n    CORNER[(CORNER[\"TOP_LEFT\"] = 0)] = \"TOP_LEFT\";\n    CORNER[(CORNER[\"TOP_RIGHT\"] = 1)] = \"TOP_RIGHT\";\n    CORNER[(CORNER[\"BOTTOM_RIGHT\"] = 2)] = \"BOTTOM_RIGHT\";\n    CORNER[(CORNER[\"BOTTOM_LEFT\"] = 3)] = \"BOTTOM_LEFT\";\n  })(CORNER || (CORNER = {}));\n  var getCurvePoints = function (x, y, r1, r2, position) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = r1 * kappa; // control point offset horizontal\n    var oy = r2 * kappa; // control point offset vertical\n    var xm = x + r1; // x-middle\n    var ym = y + r2; // y-middle\n    switch (position) {\n      case CORNER.TOP_LEFT:\n        return new BezierCurve(\n          new Vector(x, ym),\n          new Vector(x, ym - oy),\n          new Vector(xm - ox, y),\n          new Vector(xm, y),\n        );\n      case CORNER.TOP_RIGHT:\n        return new BezierCurve(\n          new Vector(x, y),\n          new Vector(x + ox, y),\n          new Vector(xm, ym - oy),\n          new Vector(xm, ym),\n        );\n      case CORNER.BOTTOM_RIGHT:\n        return new BezierCurve(\n          new Vector(xm, y),\n          new Vector(xm, y + oy),\n          new Vector(x + ox, ym),\n          new Vector(x, ym),\n        );\n      case CORNER.BOTTOM_LEFT:\n      default:\n        return new BezierCurve(\n          new Vector(xm, ym),\n          new Vector(xm - ox, ym),\n          new Vector(x, y + oy),\n          new Vector(x, y),\n        );\n    }\n  };\n  var calculateBorderBoxPath = function (curves) {\n    return [\n      curves.topLeftBorderBox,\n      curves.topRightBorderBox,\n      curves.bottomRightBorderBox,\n      curves.bottomLeftBorderBox,\n    ];\n  };\n  var calculateContentBoxPath = function (curves) {\n    return [\n      curves.topLeftContentBox,\n      curves.topRightContentBox,\n      curves.bottomRightContentBox,\n      curves.bottomLeftContentBox,\n    ];\n  };\n  var calculatePaddingBoxPath = function (curves) {\n    return [\n      curves.topLeftPaddingBox,\n      curves.topRightPaddingBox,\n      curves.bottomRightPaddingBox,\n      curves.bottomLeftPaddingBox,\n    ];\n  };\n\n  var TransformEffect = /** @class */ (function () {\n    function TransformEffect(offsetX, offsetY, matrix) {\n      this.offsetX = offsetX;\n      this.offsetY = offsetY;\n      this.matrix = matrix;\n      this.type = 0 /* TRANSFORM */;\n      this.target = 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */;\n    }\n    return TransformEffect;\n  })();\n  var ClipEffect = /** @class */ (function () {\n    function ClipEffect(path, target) {\n      this.path = path;\n      this.target = target;\n      this.type = 1 /* CLIP */;\n    }\n    return ClipEffect;\n  })();\n  var OpacityEffect = /** @class */ (function () {\n    function OpacityEffect(opacity) {\n      this.opacity = opacity;\n      this.type = 2 /* OPACITY */;\n      this.target = 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */;\n    }\n    return OpacityEffect;\n  })();\n  var isTransformEffect = function (effect) {\n    return effect.type === 0 /* TRANSFORM */;\n  };\n  var isClipEffect = function (effect) {\n    return effect.type === 1 /* CLIP */;\n  };\n  var isOpacityEffect = function (effect) {\n    return effect.type === 2 /* OPACITY */;\n  };\n\n  var equalPath = function (a, b) {\n    if (a.length === b.length) {\n      return a.some(function (v, i) {\n        return v === b[i];\n      });\n    }\n    return false;\n  };\n  var transformPath = function (path, deltaX, deltaY, deltaW, deltaH) {\n    return path.map(function (point, index) {\n      switch (index) {\n        case 0:\n          return point.add(deltaX, deltaY);\n        case 1:\n          return point.add(deltaX + deltaW, deltaY);\n        case 2:\n          return point.add(deltaX + deltaW, deltaY + deltaH);\n        case 3:\n          return point.add(deltaX, deltaY + deltaH);\n      }\n      return point;\n    });\n  };\n\n  var StackingContext = /** @class */ (function () {\n    function StackingContext(container) {\n      this.element = container;\n      this.inlineLevel = [];\n      this.nonInlineLevel = [];\n      this.negativeZIndex = [];\n      this.zeroOrAutoZIndexOrTransformedOrOpacity = [];\n      this.positiveZIndex = [];\n      this.nonPositionedFloats = [];\n      this.nonPositionedInlineLevel = [];\n    }\n    return StackingContext;\n  })();\n  var ElementPaint = /** @class */ (function () {\n    function ElementPaint(container, parent) {\n      this.container = container;\n      this.parent = parent;\n      this.effects = [];\n      this.curves = new BoundCurves(this.container);\n      if (this.container.styles.opacity < 1) {\n        this.effects.push(new OpacityEffect(this.container.styles.opacity));\n      }\n      if (this.container.styles.transform !== null) {\n        var offsetX =\n          this.container.bounds.left +\n          this.container.styles.transformOrigin[0].number;\n        var offsetY =\n          this.container.bounds.top +\n          this.container.styles.transformOrigin[1].number;\n        var matrix = this.container.styles.transform;\n        this.effects.push(new TransformEffect(offsetX, offsetY, matrix));\n      }\n      if (this.container.styles.overflowX !== 0 /* VISIBLE */) {\n        var borderBox = calculateBorderBoxPath(this.curves);\n        var paddingBox = calculatePaddingBoxPath(this.curves);\n        if (equalPath(borderBox, paddingBox)) {\n          this.effects.push(\n            new ClipEffect(\n              borderBox,\n              2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */,\n            ),\n          );\n        } else {\n          this.effects.push(\n            new ClipEffect(borderBox, 2 /* BACKGROUND_BORDERS */),\n          );\n          this.effects.push(new ClipEffect(paddingBox, 4 /* CONTENT */));\n        }\n      }\n    }\n    ElementPaint.prototype.getEffects = function (target) {\n      var inFlow =\n        [2 /* ABSOLUTE */, 3 /* FIXED */].indexOf(\n          this.container.styles.position,\n        ) === -1;\n      var parent = this.parent;\n      var effects = this.effects.slice(0);\n      while (parent) {\n        var croplessEffects = parent.effects.filter(function (effect) {\n          return !isClipEffect(effect);\n        });\n        if (\n          inFlow ||\n          parent.container.styles.position !== 0 /* STATIC */ ||\n          !parent.parent\n        ) {\n          effects.unshift.apply(effects, croplessEffects);\n          inFlow =\n            [2 /* ABSOLUTE */, 3 /* FIXED */].indexOf(\n              parent.container.styles.position,\n            ) === -1;\n          if (parent.container.styles.overflowX !== 0 /* VISIBLE */) {\n            var borderBox = calculateBorderBoxPath(parent.curves);\n            var paddingBox = calculatePaddingBoxPath(parent.curves);\n            if (!equalPath(borderBox, paddingBox)) {\n              effects.unshift(\n                new ClipEffect(\n                  paddingBox,\n                  2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */,\n                ),\n              );\n            }\n          }\n        } else {\n          effects.unshift.apply(effects, croplessEffects);\n        }\n        parent = parent.parent;\n      }\n      return effects.filter(function (effect) {\n        return contains(effect.target, target);\n      });\n    };\n    return ElementPaint;\n  })();\n  var parseStackTree = function (\n    parent,\n    stackingContext,\n    realStackingContext,\n    listItems,\n  ) {\n    parent.container.elements.forEach(function (child) {\n      var treatAsRealStackingContext = contains(\n        child.flags,\n        4 /* CREATES_REAL_STACKING_CONTEXT */,\n      );\n      var createsStackingContext = contains(\n        child.flags,\n        2 /* CREATES_STACKING_CONTEXT */,\n      );\n      var paintContainer = new ElementPaint(child, parent);\n      if (contains(child.styles.display, 2048 /* LIST_ITEM */)) {\n        listItems.push(paintContainer);\n      }\n      var listOwnerItems = contains(child.flags, 8 /* IS_LIST_OWNER */)\n        ? []\n        : listItems;\n      if (treatAsRealStackingContext || createsStackingContext) {\n        var parentStack =\n          treatAsRealStackingContext || child.styles.isPositioned()\n            ? realStackingContext\n            : stackingContext;\n        var stack = new StackingContext(paintContainer);\n        if (\n          child.styles.isPositioned() ||\n          child.styles.opacity < 1 ||\n          child.styles.isTransformed()\n        ) {\n          var order_1 = child.styles.zIndex.order;\n          if (order_1 < 0) {\n            var index_1 = 0;\n            parentStack.negativeZIndex.some(function (current, i) {\n              if (order_1 > current.element.container.styles.zIndex.order) {\n                index_1 = i;\n                return false;\n              } else if (index_1 > 0) {\n                return true;\n              }\n              return false;\n            });\n            parentStack.negativeZIndex.splice(index_1, 0, stack);\n          } else if (order_1 > 0) {\n            var index_2 = 0;\n            parentStack.positiveZIndex.some(function (current, i) {\n              if (order_1 >= current.element.container.styles.zIndex.order) {\n                index_2 = i + 1;\n                return false;\n              } else if (index_2 > 0) {\n                return true;\n              }\n              return false;\n            });\n            parentStack.positiveZIndex.splice(index_2, 0, stack);\n          } else {\n            parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);\n          }\n        } else {\n          if (child.styles.isFloating()) {\n            parentStack.nonPositionedFloats.push(stack);\n          } else {\n            parentStack.nonPositionedInlineLevel.push(stack);\n          }\n        }\n        parseStackTree(\n          paintContainer,\n          stack,\n          treatAsRealStackingContext ? stack : realStackingContext,\n          listOwnerItems,\n        );\n      } else {\n        if (child.styles.isInlineLevel()) {\n          stackingContext.inlineLevel.push(paintContainer);\n        } else {\n          stackingContext.nonInlineLevel.push(paintContainer);\n        }\n        parseStackTree(\n          paintContainer,\n          stackingContext,\n          realStackingContext,\n          listOwnerItems,\n        );\n      }\n      if (contains(child.flags, 8 /* IS_LIST_OWNER */)) {\n        processListItems(child, listOwnerItems);\n      }\n    });\n  };\n  var processListItems = function (owner, elements) {\n    var numbering = owner instanceof OLElementContainer ? owner.start : 1;\n    var reversed = owner instanceof OLElementContainer ? owner.reversed : false;\n    for (var i = 0; i < elements.length; i++) {\n      var item = elements[i];\n      if (\n        item.container instanceof LIElementContainer &&\n        typeof item.container.value === \"number\" &&\n        item.container.value !== 0\n      ) {\n        numbering = item.container.value;\n      }\n      item.listValue = createCounterText(\n        numbering,\n        item.container.styles.listStyleType,\n        true,\n      );\n      numbering += reversed ? -1 : 1;\n    }\n  };\n  var parseStackingContexts = function (container) {\n    var paintContainer = new ElementPaint(container, null);\n    var root = new StackingContext(paintContainer);\n    var listItems = [];\n    parseStackTree(paintContainer, root, root, listItems);\n    processListItems(paintContainer.container, listItems);\n    return root;\n  };\n\n  var parsePathForBorder = function (curves, borderSide) {\n    switch (borderSide) {\n      case 0:\n        return createPathFromCurves(\n          curves.topLeftBorderBox,\n          curves.topLeftPaddingBox,\n          curves.topRightBorderBox,\n          curves.topRightPaddingBox,\n        );\n      case 1:\n        return createPathFromCurves(\n          curves.topRightBorderBox,\n          curves.topRightPaddingBox,\n          curves.bottomRightBorderBox,\n          curves.bottomRightPaddingBox,\n        );\n      case 2:\n        return createPathFromCurves(\n          curves.bottomRightBorderBox,\n          curves.bottomRightPaddingBox,\n          curves.bottomLeftBorderBox,\n          curves.bottomLeftPaddingBox,\n        );\n      case 3:\n      default:\n        return createPathFromCurves(\n          curves.bottomLeftBorderBox,\n          curves.bottomLeftPaddingBox,\n          curves.topLeftBorderBox,\n          curves.topLeftPaddingBox,\n        );\n    }\n  };\n  var parsePathForBorderDoubleOuter = function (curves, borderSide) {\n    switch (borderSide) {\n      case 0:\n        return createPathFromCurves(\n          curves.topLeftBorderBox,\n          curves.topLeftBorderDoubleOuterBox,\n          curves.topRightBorderBox,\n          curves.topRightBorderDoubleOuterBox,\n        );\n      case 1:\n        return createPathFromCurves(\n          curves.topRightBorderBox,\n          curves.topRightBorderDoubleOuterBox,\n          curves.bottomRightBorderBox,\n          curves.bottomRightBorderDoubleOuterBox,\n        );\n      case 2:\n        return createPathFromCurves(\n          curves.bottomRightBorderBox,\n          curves.bottomRightBorderDoubleOuterBox,\n          curves.bottomLeftBorderBox,\n          curves.bottomLeftBorderDoubleOuterBox,\n        );\n      case 3:\n      default:\n        return createPathFromCurves(\n          curves.bottomLeftBorderBox,\n          curves.bottomLeftBorderDoubleOuterBox,\n          curves.topLeftBorderBox,\n          curves.topLeftBorderDoubleOuterBox,\n        );\n    }\n  };\n  var parsePathForBorderDoubleInner = function (curves, borderSide) {\n    switch (borderSide) {\n      case 0:\n        return createPathFromCurves(\n          curves.topLeftBorderDoubleInnerBox,\n          curves.topLeftPaddingBox,\n          curves.topRightBorderDoubleInnerBox,\n          curves.topRightPaddingBox,\n        );\n      case 1:\n        return createPathFromCurves(\n          curves.topRightBorderDoubleInnerBox,\n          curves.topRightPaddingBox,\n          curves.bottomRightBorderDoubleInnerBox,\n          curves.bottomRightPaddingBox,\n        );\n      case 2:\n        return createPathFromCurves(\n          curves.bottomRightBorderDoubleInnerBox,\n          curves.bottomRightPaddingBox,\n          curves.bottomLeftBorderDoubleInnerBox,\n          curves.bottomLeftPaddingBox,\n        );\n      case 3:\n      default:\n        return createPathFromCurves(\n          curves.bottomLeftBorderDoubleInnerBox,\n          curves.bottomLeftPaddingBox,\n          curves.topLeftBorderDoubleInnerBox,\n          curves.topLeftPaddingBox,\n        );\n    }\n  };\n  var parsePathForBorderStroke = function (curves, borderSide) {\n    switch (borderSide) {\n      case 0:\n        return createStrokePathFromCurves(\n          curves.topLeftBorderStroke,\n          curves.topRightBorderStroke,\n        );\n      case 1:\n        return createStrokePathFromCurves(\n          curves.topRightBorderStroke,\n          curves.bottomRightBorderStroke,\n        );\n      case 2:\n        return createStrokePathFromCurves(\n          curves.bottomRightBorderStroke,\n          curves.bottomLeftBorderStroke,\n        );\n      case 3:\n      default:\n        return createStrokePathFromCurves(\n          curves.bottomLeftBorderStroke,\n          curves.topLeftBorderStroke,\n        );\n    }\n  };\n  var createStrokePathFromCurves = function (outer1, outer2) {\n    var path = [];\n    if (isBezierCurve(outer1)) {\n      path.push(outer1.subdivide(0.5, false));\n    } else {\n      path.push(outer1);\n    }\n    if (isBezierCurve(outer2)) {\n      path.push(outer2.subdivide(0.5, true));\n    } else {\n      path.push(outer2);\n    }\n    return path;\n  };\n  var createPathFromCurves = function (outer1, inner1, outer2, inner2) {\n    var path = [];\n    if (isBezierCurve(outer1)) {\n      path.push(outer1.subdivide(0.5, false));\n    } else {\n      path.push(outer1);\n    }\n    if (isBezierCurve(outer2)) {\n      path.push(outer2.subdivide(0.5, true));\n    } else {\n      path.push(outer2);\n    }\n    if (isBezierCurve(inner2)) {\n      path.push(inner2.subdivide(0.5, true).reverse());\n    } else {\n      path.push(inner2);\n    }\n    if (isBezierCurve(inner1)) {\n      path.push(inner1.subdivide(0.5, false).reverse());\n    } else {\n      path.push(inner1);\n    }\n    return path;\n  };\n\n  var paddingBox = function (element) {\n    var bounds = element.bounds;\n    var styles = element.styles;\n    return bounds.add(\n      styles.borderLeftWidth,\n      styles.borderTopWidth,\n      -(styles.borderRightWidth + styles.borderLeftWidth),\n      -(styles.borderTopWidth + styles.borderBottomWidth),\n    );\n  };\n  var contentBox = function (element) {\n    var styles = element.styles;\n    var bounds = element.bounds;\n    var paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);\n    var paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);\n    var paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);\n    var paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);\n    return bounds.add(\n      paddingLeft + styles.borderLeftWidth,\n      paddingTop + styles.borderTopWidth,\n      -(\n        styles.borderRightWidth +\n        styles.borderLeftWidth +\n        paddingLeft +\n        paddingRight\n      ),\n      -(\n        styles.borderTopWidth +\n        styles.borderBottomWidth +\n        paddingTop +\n        paddingBottom\n      ),\n    );\n  };\n\n  var calculateBackgroundPositioningArea = function (\n    backgroundOrigin,\n    element,\n  ) {\n    if (backgroundOrigin === 0 /* BORDER_BOX */) {\n      return element.bounds;\n    }\n    if (backgroundOrigin === 2 /* CONTENT_BOX */) {\n      return contentBox(element);\n    }\n    return paddingBox(element);\n  };\n  var calculateBackgroundPaintingArea = function (backgroundClip, element) {\n    if (backgroundClip === 0 /* BORDER_BOX */) {\n      return element.bounds;\n    }\n    if (backgroundClip === 2 /* CONTENT_BOX */) {\n      return contentBox(element);\n    }\n    return paddingBox(element);\n  };\n  var calculateBackgroundRendering = function (\n    container,\n    index,\n    intrinsicSize,\n  ) {\n    var backgroundPositioningArea = calculateBackgroundPositioningArea(\n      getBackgroundValueForIndex(container.styles.backgroundOrigin, index),\n      container,\n    );\n    var backgroundPaintingArea = calculateBackgroundPaintingArea(\n      getBackgroundValueForIndex(container.styles.backgroundClip, index),\n      container,\n    );\n    var backgroundImageSize = calculateBackgroundSize(\n      getBackgroundValueForIndex(container.styles.backgroundSize, index),\n      intrinsicSize,\n      backgroundPositioningArea,\n    );\n    var sizeWidth = backgroundImageSize[0],\n      sizeHeight = backgroundImageSize[1];\n    var position = getAbsoluteValueForTuple(\n      getBackgroundValueForIndex(container.styles.backgroundPosition, index),\n      backgroundPositioningArea.width - sizeWidth,\n      backgroundPositioningArea.height - sizeHeight,\n    );\n    var path = calculateBackgroundRepeatPath(\n      getBackgroundValueForIndex(container.styles.backgroundRepeat, index),\n      position,\n      backgroundImageSize,\n      backgroundPositioningArea,\n      backgroundPaintingArea,\n    );\n    var offsetX = Math.round(backgroundPositioningArea.left + position[0]);\n    var offsetY = Math.round(backgroundPositioningArea.top + position[1]);\n    return [path, offsetX, offsetY, sizeWidth, sizeHeight];\n  };\n  var isAuto = function (token) {\n    return isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;\n  };\n  var hasIntrinsicValue = function (value) {\n    return typeof value === \"number\";\n  };\n  var calculateBackgroundSize = function (size, _a, bounds) {\n    var intrinsicWidth = _a[0],\n      intrinsicHeight = _a[1],\n      intrinsicProportion = _a[2];\n    var first = size[0],\n      second = size[1];\n    if (!first) {\n      return [0, 0];\n    }\n    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {\n      return [\n        getAbsoluteValue(first, bounds.width),\n        getAbsoluteValue(second, bounds.height),\n      ];\n    }\n    var hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);\n    if (\n      isIdentToken(first) &&\n      (first.value === BACKGROUND_SIZE.CONTAIN ||\n        first.value === BACKGROUND_SIZE.COVER)\n    ) {\n      if (hasIntrinsicValue(intrinsicProportion)) {\n        var targetRatio = bounds.width / bounds.height;\n        return targetRatio < intrinsicProportion !==\n          (first.value === BACKGROUND_SIZE.COVER)\n          ? [bounds.width, bounds.width / intrinsicProportion]\n          : [bounds.height * intrinsicProportion, bounds.height];\n      }\n      return [bounds.width, bounds.height];\n    }\n    var hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);\n    var hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);\n    var hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;\n    // If the background-size is auto or auto auto:\n    if (isAuto(first) && (!second || isAuto(second))) {\n      // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.\n      if (hasIntrinsicWidth && hasIntrinsicHeight) {\n        return [intrinsicWidth, intrinsicHeight];\n      }\n      // If the image has no intrinsic dimensions and has no intrinsic proportions,\n      // it's rendered at the size of the background positioning area.\n      if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {\n        return [bounds.width, bounds.height];\n      }\n      // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.\n      // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.\n      // The other dimension is computed using the specified dimension and the intrinsic proportions.\n      if (hasIntrinsicDimensions && hasIntrinsicProportion) {\n        var width_1 = hasIntrinsicWidth\n          ? intrinsicWidth\n          : intrinsicHeight * intrinsicProportion;\n        var height_1 = hasIntrinsicHeight\n          ? intrinsicHeight\n          : intrinsicWidth / intrinsicProportion;\n        return [width_1, height_1];\n      }\n      // If the image has only one intrinsic dimension but has no intrinsic proportions,\n      // it's rendered using the specified dimension and the other dimension of the background positioning area.\n      var width_2 = hasIntrinsicWidth ? intrinsicWidth : bounds.width;\n      var height_2 = hasIntrinsicHeight ? intrinsicHeight : bounds.height;\n      return [width_2, height_2];\n    }\n    // If the image has intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.\n    if (hasIntrinsicProportion) {\n      var width_3 = 0;\n      var height_3 = 0;\n      if (isLengthPercentage(first)) {\n        width_3 = getAbsoluteValue(first, bounds.width);\n      } else if (isLengthPercentage(second)) {\n        height_3 = getAbsoluteValue(second, bounds.height);\n      }\n      if (isAuto(first)) {\n        width_3 = height_3 * intrinsicProportion;\n      } else if (!second || isAuto(second)) {\n        height_3 = width_3 / intrinsicProportion;\n      }\n      return [width_3, height_3];\n    }\n    // If the image has no intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,\n    // if there is one. If there is no such intrinsic dimension,\n    // it becomes the corresponding dimension of the background positioning area.\n    var width = null;\n    var height = null;\n    if (isLengthPercentage(first)) {\n      width = getAbsoluteValue(first, bounds.width);\n    } else if (second && isLengthPercentage(second)) {\n      height = getAbsoluteValue(second, bounds.height);\n    }\n    if (width !== null && (!second || isAuto(second))) {\n      height =\n        hasIntrinsicWidth && hasIntrinsicHeight\n          ? (width / intrinsicWidth) * intrinsicHeight\n          : bounds.height;\n    }\n    if (height !== null && isAuto(first)) {\n      width =\n        hasIntrinsicWidth && hasIntrinsicHeight\n          ? (height / intrinsicHeight) * intrinsicWidth\n          : bounds.width;\n    }\n    if (width !== null && height !== null) {\n      return [width, height];\n    }\n    throw new Error(\"Unable to calculate background-size for element\");\n  };\n  var getBackgroundValueForIndex = function (values, index) {\n    var value = values[index];\n    if (typeof value === \"undefined\") {\n      return values[0];\n    }\n    return value;\n  };\n  var calculateBackgroundRepeatPath = function (\n    repeat,\n    _a,\n    _b,\n    backgroundPositioningArea,\n    backgroundPaintingArea,\n  ) {\n    var x = _a[0],\n      y = _a[1];\n    var width = _b[0],\n      height = _b[1];\n    switch (repeat) {\n      case 2 /* REPEAT_X */:\n        return [\n          new Vector(\n            Math.round(backgroundPositioningArea.left),\n            Math.round(backgroundPositioningArea.top + y),\n          ),\n          new Vector(\n            Math.round(\n              backgroundPositioningArea.left + backgroundPositioningArea.width,\n            ),\n            Math.round(backgroundPositioningArea.top + y),\n          ),\n          new Vector(\n            Math.round(\n              backgroundPositioningArea.left + backgroundPositioningArea.width,\n            ),\n            Math.round(height + backgroundPositioningArea.top + y),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left),\n            Math.round(height + backgroundPositioningArea.top + y),\n          ),\n        ];\n      case 3 /* REPEAT_Y */:\n        return [\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x),\n            Math.round(backgroundPositioningArea.top),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x + width),\n            Math.round(backgroundPositioningArea.top),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x + width),\n            Math.round(\n              backgroundPositioningArea.height + backgroundPositioningArea.top,\n            ),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x),\n            Math.round(\n              backgroundPositioningArea.height + backgroundPositioningArea.top,\n            ),\n          ),\n        ];\n      case 1 /* NO_REPEAT */:\n        return [\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x),\n            Math.round(backgroundPositioningArea.top + y),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x + width),\n            Math.round(backgroundPositioningArea.top + y),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x + width),\n            Math.round(backgroundPositioningArea.top + y + height),\n          ),\n          new Vector(\n            Math.round(backgroundPositioningArea.left + x),\n            Math.round(backgroundPositioningArea.top + y + height),\n          ),\n        ];\n      default:\n        return [\n          new Vector(\n            Math.round(backgroundPaintingArea.left),\n            Math.round(backgroundPaintingArea.top),\n          ),\n          new Vector(\n            Math.round(\n              backgroundPaintingArea.left + backgroundPaintingArea.width,\n            ),\n            Math.round(backgroundPaintingArea.top),\n          ),\n          new Vector(\n            Math.round(\n              backgroundPaintingArea.left + backgroundPaintingArea.width,\n            ),\n            Math.round(\n              backgroundPaintingArea.height + backgroundPaintingArea.top,\n            ),\n          ),\n          new Vector(\n            Math.round(backgroundPaintingArea.left),\n            Math.round(\n              backgroundPaintingArea.height + backgroundPaintingArea.top,\n            ),\n          ),\n        ];\n    }\n  };\n\n  var SMALL_IMAGE =\n    \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\n  var SAMPLE_TEXT = \"Hidden Text\";\n  var FontMetrics = /** @class */ (function () {\n    function FontMetrics(document) {\n      this._data = {};\n      this._document = document;\n    }\n    FontMetrics.prototype.parseMetrics = function (fontFamily, fontSize) {\n      var container = this._document.createElement(\"div\");\n      var img = this._document.createElement(\"img\");\n      var span = this._document.createElement(\"span\");\n      var body = this._document.body;\n      container.style.visibility = \"hidden\";\n      container.style.fontFamily = fontFamily;\n      container.style.fontSize = fontSize;\n      container.style.margin = \"0\";\n      container.style.padding = \"0\";\n      container.style.whiteSpace = \"nowrap\";\n      body.appendChild(container);\n      img.src = SMALL_IMAGE;\n      img.width = 1;\n      img.height = 1;\n      img.style.margin = \"0\";\n      img.style.padding = \"0\";\n      img.style.verticalAlign = \"baseline\";\n      span.style.fontFamily = fontFamily;\n      span.style.fontSize = fontSize;\n      span.style.margin = \"0\";\n      span.style.padding = \"0\";\n      span.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n      container.appendChild(span);\n      container.appendChild(img);\n      var baseline = img.offsetTop - span.offsetTop + 2;\n      container.removeChild(span);\n      container.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n      container.style.lineHeight = \"normal\";\n      img.style.verticalAlign = \"super\";\n      var middle = img.offsetTop - container.offsetTop + 2;\n      body.removeChild(container);\n      return { baseline: baseline, middle: middle };\n    };\n    FontMetrics.prototype.getMetrics = function (fontFamily, fontSize) {\n      var key = fontFamily + \" \" + fontSize;\n      if (typeof this._data[key] === \"undefined\") {\n        this._data[key] = this.parseMetrics(fontFamily, fontSize);\n      }\n      return this._data[key];\n    };\n    return FontMetrics;\n  })();\n\n  var Renderer = /** @class */ (function () {\n    function Renderer(context, options) {\n      this.context = context;\n      this.options = options;\n    }\n    return Renderer;\n  })();\n\n  var MASK_OFFSET = 10000;\n  var CanvasRenderer = /** @class */ (function (_super) {\n    __extends(CanvasRenderer, _super);\n    function CanvasRenderer(context, options) {\n      var _this = _super.call(this, context, options) || this;\n      _this._activeEffects = [];\n      _this.canvas = options.canvas\n        ? options.canvas\n        : document.createElement(\"canvas\");\n      _this.ctx = _this.canvas.getContext(\"2d\");\n      if (!options.canvas) {\n        _this.canvas.width = Math.floor(options.width * options.scale);\n        _this.canvas.height = Math.floor(options.height * options.scale);\n        _this.canvas.style.width = options.width + \"px\";\n        _this.canvas.style.height = options.height + \"px\";\n      }\n      _this.fontMetrics = new FontMetrics(document);\n      _this.ctx.scale(_this.options.scale, _this.options.scale);\n      _this.ctx.translate(-options.x, -options.y);\n      _this.ctx.textBaseline = \"bottom\";\n      _this._activeEffects = [];\n      _this.context.logger.debug(\n        \"Canvas renderer initialized (\" +\n          options.width +\n          \"x\" +\n          options.height +\n          \") with scale \" +\n          options.scale,\n      );\n      return _this;\n    }\n    CanvasRenderer.prototype.applyEffects = function (effects) {\n      var _this = this;\n      while (this._activeEffects.length) {\n        this.popEffect();\n      }\n      effects.forEach(function (effect) {\n        return _this.applyEffect(effect);\n      });\n    };\n    CanvasRenderer.prototype.applyEffect = function (effect) {\n      this.ctx.save();\n      if (isOpacityEffect(effect)) {\n        this.ctx.globalAlpha = effect.opacity;\n      }\n      if (isTransformEffect(effect)) {\n        this.ctx.translate(effect.offsetX, effect.offsetY);\n        this.ctx.transform(\n          effect.matrix[0],\n          effect.matrix[1],\n          effect.matrix[2],\n          effect.matrix[3],\n          effect.matrix[4],\n          effect.matrix[5],\n        );\n        this.ctx.translate(-effect.offsetX, -effect.offsetY);\n      }\n      if (isClipEffect(effect)) {\n        this.path(effect.path);\n        this.ctx.clip();\n      }\n      this._activeEffects.push(effect);\n    };\n    CanvasRenderer.prototype.popEffect = function () {\n      this._activeEffects.pop();\n      this.ctx.restore();\n    };\n    CanvasRenderer.prototype.renderStack = function (stack) {\n      return __awaiter(this, void 0, void 0, function () {\n        var styles;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              styles = stack.element.container.styles;\n              if (!styles.isVisible()) return [3 /*break*/, 2];\n              return [4 /*yield*/, this.renderStackContent(stack)];\n            case 1:\n              _a.sent();\n              _a.label = 2;\n            case 2:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderNode = function (paint) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (contains(paint.container.flags, 16 /* DEBUG_RENDER */)) {\n                debugger;\n              }\n              if (!paint.container.styles.isVisible()) return [3 /*break*/, 3];\n              return [4 /*yield*/, this.renderNodeBackgroundAndBorders(paint)];\n            case 1:\n              _a.sent();\n              return [4 /*yield*/, this.renderNodeContent(paint)];\n            case 2:\n              _a.sent();\n              _a.label = 3;\n            case 3:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderTextWithLetterSpacing = function (\n      text,\n      letterSpacing,\n      baseline,\n    ) {\n      var _this = this;\n      if (letterSpacing === 0) {\n        this.ctx.fillText(\n          text.text,\n          text.bounds.left,\n          text.bounds.top + baseline,\n        );\n      } else {\n        var letters = segmentGraphemes(text.text);\n        letters.reduce(function (left, letter) {\n          _this.ctx.fillText(letter, left, text.bounds.top + baseline);\n          return left + _this.ctx.measureText(letter).width;\n        }, text.bounds.left);\n      }\n    };\n    CanvasRenderer.prototype.createFontStyle = function (styles) {\n      var fontVariant = styles.fontVariant\n        .filter(function (variant) {\n          return variant === \"normal\" || variant === \"small-caps\";\n        })\n        .join(\"\");\n      var fontFamily = fixIOSSystemFonts(styles.fontFamily).join(\", \");\n      var fontSize = isDimensionToken(styles.fontSize)\n        ? \"\" + styles.fontSize.number + styles.fontSize.unit\n        : styles.fontSize.number + \"px\";\n      return [\n        [\n          styles.fontStyle,\n          fontVariant,\n          styles.fontWeight,\n          fontSize,\n          fontFamily,\n        ].join(\" \"),\n        fontFamily,\n        fontSize,\n      ];\n    };\n    CanvasRenderer.prototype.renderTextNode = function (text, styles) {\n      return __awaiter(this, void 0, void 0, function () {\n        var _a, font, fontFamily, fontSize, _b, baseline, middle, paintOrder;\n        var _this = this;\n        return __generator(this, function (_c) {\n          (_a = this.createFontStyle(styles)),\n            (font = _a[0]),\n            (fontFamily = _a[1]),\n            (fontSize = _a[2]);\n          this.ctx.font = font;\n          this.ctx.direction = styles.direction === 1 /* RTL */ ? \"rtl\" : \"ltr\";\n          this.ctx.textAlign = \"left\";\n          this.ctx.textBaseline = \"alphabetic\";\n          (_b = this.fontMetrics.getMetrics(fontFamily, fontSize)),\n            (baseline = _b.baseline),\n            (middle = _b.middle);\n          paintOrder = styles.paintOrder;\n          text.textBounds.forEach(function (text) {\n            paintOrder.forEach(function (paintOrderLayer) {\n              switch (paintOrderLayer) {\n                case 0 /* FILL */:\n                  _this.ctx.fillStyle = asString(styles.color);\n                  _this.renderTextWithLetterSpacing(\n                    text,\n                    styles.letterSpacing,\n                    baseline,\n                  );\n                  var textShadows = styles.textShadow;\n                  if (textShadows.length && text.text.trim().length) {\n                    textShadows\n                      .slice(0)\n                      .reverse()\n                      .forEach(function (textShadow) {\n                        _this.ctx.shadowColor = asString(textShadow.color);\n                        _this.ctx.shadowOffsetX =\n                          textShadow.offsetX.number * _this.options.scale;\n                        _this.ctx.shadowOffsetY =\n                          textShadow.offsetY.number * _this.options.scale;\n                        _this.ctx.shadowBlur = textShadow.blur.number;\n                        _this.renderTextWithLetterSpacing(\n                          text,\n                          styles.letterSpacing,\n                          baseline,\n                        );\n                      });\n                    _this.ctx.shadowColor = \"\";\n                    _this.ctx.shadowOffsetX = 0;\n                    _this.ctx.shadowOffsetY = 0;\n                    _this.ctx.shadowBlur = 0;\n                  }\n                  if (styles.textDecorationLine.length) {\n                    _this.ctx.fillStyle = asString(\n                      styles.textDecorationColor || styles.color,\n                    );\n                    styles.textDecorationLine.forEach(\n                      function (textDecorationLine) {\n                        switch (textDecorationLine) {\n                          case 1 /* UNDERLINE */:\n                            // Draws a line at the baseline of the font\n                            // TODO As some browsers display the line as more than 1px if the font-size is big,\n                            // need to take that into account both in position and size\n                            _this.ctx.fillRect(\n                              text.bounds.left,\n                              Math.round(text.bounds.top + baseline),\n                              text.bounds.width,\n                              1,\n                            );\n                            break;\n                          case 2 /* OVERLINE */:\n                            _this.ctx.fillRect(\n                              text.bounds.left,\n                              Math.round(text.bounds.top),\n                              text.bounds.width,\n                              1,\n                            );\n                            break;\n                          case 3 /* LINE_THROUGH */:\n                            // TODO try and find exact position for line-through\n                            _this.ctx.fillRect(\n                              text.bounds.left,\n                              Math.ceil(text.bounds.top + middle),\n                              text.bounds.width,\n                              1,\n                            );\n                            break;\n                        }\n                      },\n                    );\n                  }\n                  break;\n                case 1 /* STROKE */:\n                  if (styles.webkitTextStrokeWidth && text.text.trim().length) {\n                    _this.ctx.strokeStyle = asString(\n                      styles.webkitTextStrokeColor,\n                    );\n                    _this.ctx.lineWidth = styles.webkitTextStrokeWidth;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    _this.ctx.lineJoin = !!window.chrome ? \"miter\" : \"round\";\n                    _this.ctx.strokeText(\n                      text.text,\n                      text.bounds.left,\n                      text.bounds.top + baseline,\n                    );\n                  }\n                  _this.ctx.strokeStyle = \"\";\n                  _this.ctx.lineWidth = 0;\n                  _this.ctx.lineJoin = \"miter\";\n                  break;\n              }\n            });\n          });\n          return [2 /*return*/];\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderReplacedElement = function (\n      container,\n      curves,\n      image,\n    ) {\n      if (\n        image &&\n        container.intrinsicWidth > 0 &&\n        container.intrinsicHeight > 0\n      ) {\n        var box = contentBox(container);\n        var path = calculatePaddingBoxPath(curves);\n        this.path(path);\n        this.ctx.save();\n        this.ctx.clip();\n        this.ctx.drawImage(\n          image,\n          0,\n          0,\n          container.intrinsicWidth,\n          container.intrinsicHeight,\n          box.left,\n          box.top,\n          box.width,\n          box.height,\n        );\n        this.ctx.restore();\n      }\n    };\n    CanvasRenderer.prototype.renderNodeContent = function (paint) {\n      return __awaiter(this, void 0, void 0, function () {\n        var container,\n          curves,\n          styles,\n          _i,\n          _a,\n          child,\n          image,\n          image,\n          iframeRenderer,\n          canvas,\n          size,\n          _b,\n          fontFamily,\n          fontSize,\n          baseline,\n          bounds,\n          x,\n          textBounds,\n          img,\n          image,\n          url,\n          fontFamily,\n          bounds;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              this.applyEffects(paint.getEffects(4 /* CONTENT */));\n              container = paint.container;\n              curves = paint.curves;\n              styles = container.styles;\n              (_i = 0), (_a = container.textNodes);\n              _c.label = 1;\n            case 1:\n              if (!(_i < _a.length)) return [3 /*break*/, 4];\n              child = _a[_i];\n              return [4 /*yield*/, this.renderTextNode(child, styles)];\n            case 2:\n              _c.sent();\n              _c.label = 3;\n            case 3:\n              _i++;\n              return [3 /*break*/, 1];\n            case 4:\n              if (!(container instanceof ImageElementContainer))\n                return [3 /*break*/, 8];\n              _c.label = 5;\n            case 5:\n              _c.trys.push([5, 7, , 8]);\n              return [4 /*yield*/, this.context.cache.match(container.src)];\n            case 6:\n              image = _c.sent();\n              this.renderReplacedElement(container, curves, image);\n              return [3 /*break*/, 8];\n            case 7:\n              _c.sent();\n              this.context.logger.error(\"Error loading image \" + container.src);\n              return [3 /*break*/, 8];\n            case 8:\n              if (container instanceof CanvasElementContainer) {\n                this.renderReplacedElement(container, curves, container.canvas);\n              }\n              if (!(container instanceof SVGElementContainer))\n                return [3 /*break*/, 12];\n              _c.label = 9;\n            case 9:\n              _c.trys.push([9, 11, , 12]);\n              return [4 /*yield*/, this.context.cache.match(container.svg)];\n            case 10:\n              image = _c.sent();\n              this.renderReplacedElement(container, curves, image);\n              return [3 /*break*/, 12];\n            case 11:\n              _c.sent();\n              this.context.logger.error(\n                \"Error loading svg \" + container.svg.substring(0, 255),\n              );\n              return [3 /*break*/, 12];\n            case 12:\n              if (\n                !(container instanceof IFrameElementContainer && container.tree)\n              )\n                return [3 /*break*/, 14];\n              iframeRenderer = new CanvasRenderer(this.context, {\n                scale: this.options.scale,\n                backgroundColor: container.backgroundColor,\n                x: 0,\n                y: 0,\n                width: container.width,\n                height: container.height,\n              });\n              return [4 /*yield*/, iframeRenderer.render(container.tree)];\n            case 13:\n              canvas = _c.sent();\n              if (container.width && container.height) {\n                this.ctx.drawImage(\n                  canvas,\n                  0,\n                  0,\n                  container.width,\n                  container.height,\n                  container.bounds.left,\n                  container.bounds.top,\n                  container.bounds.width,\n                  container.bounds.height,\n                );\n              }\n              _c.label = 14;\n            case 14:\n              if (container instanceof InputElementContainer) {\n                size = Math.min(\n                  container.bounds.width,\n                  container.bounds.height,\n                );\n                if (container.type === CHECKBOX) {\n                  if (container.checked) {\n                    this.ctx.save();\n                    this.path([\n                      new Vector(\n                        container.bounds.left + size * 0.39363,\n                        container.bounds.top + size * 0.79,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.16,\n                        container.bounds.top + size * 0.5549,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.27347,\n                        container.bounds.top + size * 0.44071,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.39694,\n                        container.bounds.top + size * 0.5649,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.72983,\n                        container.bounds.top + size * 0.23,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.84,\n                        container.bounds.top + size * 0.34085,\n                      ),\n                      new Vector(\n                        container.bounds.left + size * 0.39363,\n                        container.bounds.top + size * 0.79,\n                      ),\n                    ]);\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                  }\n                } else if (container.type === RADIO) {\n                  if (container.checked) {\n                    this.ctx.save();\n                    this.ctx.beginPath();\n                    this.ctx.arc(\n                      container.bounds.left + size / 2,\n                      container.bounds.top + size / 2,\n                      size / 4,\n                      0,\n                      Math.PI * 2,\n                      true,\n                    );\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                  }\n                }\n              }\n              if (isTextInputElement(container) && container.value.length) {\n                (_b = this.createFontStyle(styles)),\n                  (fontFamily = _b[0]),\n                  (fontSize = _b[1]);\n                baseline = this.fontMetrics.getMetrics(\n                  fontFamily,\n                  fontSize,\n                ).baseline;\n                this.ctx.font = fontFamily;\n                this.ctx.fillStyle = asString(styles.color);\n                this.ctx.textBaseline = \"alphabetic\";\n                this.ctx.textAlign = canvasTextAlign(\n                  container.styles.textAlign,\n                );\n                bounds = contentBox(container);\n                x = 0;\n                switch (container.styles.textAlign) {\n                  case 1 /* CENTER */:\n                    x += bounds.width / 2;\n                    break;\n                  case 2 /* RIGHT */:\n                    x += bounds.width;\n                    break;\n                }\n                textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);\n                this.ctx.save();\n                this.path([\n                  new Vector(bounds.left, bounds.top),\n                  new Vector(bounds.left + bounds.width, bounds.top),\n                  new Vector(\n                    bounds.left + bounds.width,\n                    bounds.top + bounds.height,\n                  ),\n                  new Vector(bounds.left, bounds.top + bounds.height),\n                ]);\n                this.ctx.clip();\n                this.renderTextWithLetterSpacing(\n                  new TextBounds(container.value, textBounds),\n                  styles.letterSpacing,\n                  baseline,\n                );\n                this.ctx.restore();\n                this.ctx.textBaseline = \"alphabetic\";\n                this.ctx.textAlign = \"left\";\n              }\n              if (!contains(container.styles.display, 2048 /* LIST_ITEM */))\n                return [3 /*break*/, 20];\n              if (!(container.styles.listStyleImage !== null))\n                return [3 /*break*/, 19];\n              img = container.styles.listStyleImage;\n              if (!((img.type === 0) /* URL */)) return [3 /*break*/, 18];\n              image = void 0;\n              url = img.url;\n              _c.label = 15;\n            case 15:\n              _c.trys.push([15, 17, , 18]);\n              return [4 /*yield*/, this.context.cache.match(url)];\n            case 16:\n              image = _c.sent();\n              this.ctx.drawImage(\n                image,\n                container.bounds.left - (image.width + 10),\n                container.bounds.top,\n              );\n              return [3 /*break*/, 18];\n            case 17:\n              _c.sent();\n              this.context.logger.error(\n                \"Error loading list-style-image \" + url,\n              );\n              return [3 /*break*/, 18];\n            case 18:\n              return [3 /*break*/, 20];\n            case 19:\n              if (\n                paint.listValue &&\n                container.styles.listStyleType !== -1 /* NONE */\n              ) {\n                fontFamily = this.createFontStyle(styles)[0];\n                this.ctx.font = fontFamily;\n                this.ctx.fillStyle = asString(styles.color);\n                this.ctx.textBaseline = \"middle\";\n                this.ctx.textAlign = \"right\";\n                bounds = new Bounds(\n                  container.bounds.left,\n                  container.bounds.top +\n                    getAbsoluteValue(\n                      container.styles.paddingTop,\n                      container.bounds.width,\n                    ),\n                  container.bounds.width,\n                  computeLineHeight(styles.lineHeight, styles.fontSize.number) /\n                    2 +\n                    1,\n                );\n                this.renderTextWithLetterSpacing(\n                  new TextBounds(paint.listValue, bounds),\n                  styles.letterSpacing,\n                  computeLineHeight(styles.lineHeight, styles.fontSize.number) /\n                    2 +\n                    2,\n                );\n                this.ctx.textBaseline = \"bottom\";\n                this.ctx.textAlign = \"left\";\n              }\n              _c.label = 20;\n            case 20:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderStackContent = function (stack) {\n      return __awaiter(this, void 0, void 0, function () {\n        var _i,\n          _a,\n          child,\n          _b,\n          _c,\n          child,\n          _d,\n          _e,\n          child,\n          _f,\n          _g,\n          child,\n          _h,\n          _j,\n          child,\n          _k,\n          _l,\n          child,\n          _m,\n          _o,\n          child;\n        return __generator(this, function (_p) {\n          switch (_p.label) {\n            case 0:\n              if (\n                contains(stack.element.container.flags, 16 /* DEBUG_RENDER */)\n              ) {\n                debugger;\n              }\n              // https://www.w3.org/TR/css-position-3/#painting-order\n              // 1. the background and borders of the element forming the stacking context.\n              return [\n                4 /*yield*/,\n                this.renderNodeBackgroundAndBorders(stack.element),\n              ];\n            case 1:\n              // https://www.w3.org/TR/css-position-3/#painting-order\n              // 1. the background and borders of the element forming the stacking context.\n              _p.sent();\n              (_i = 0), (_a = stack.negativeZIndex);\n              _p.label = 2;\n            case 2:\n              if (!(_i < _a.length)) return [3 /*break*/, 5];\n              child = _a[_i];\n              return [4 /*yield*/, this.renderStack(child)];\n            case 3:\n              _p.sent();\n              _p.label = 4;\n            case 4:\n              _i++;\n              return [3 /*break*/, 2];\n            case 5:\n              // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n              return [4 /*yield*/, this.renderNodeContent(stack.element)];\n            case 6:\n              // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n              _p.sent();\n              (_b = 0), (_c = stack.nonInlineLevel);\n              _p.label = 7;\n            case 7:\n              if (!(_b < _c.length)) return [3 /*break*/, 10];\n              child = _c[_b];\n              return [4 /*yield*/, this.renderNode(child)];\n            case 8:\n              _p.sent();\n              _p.label = 9;\n            case 9:\n              _b++;\n              return [3 /*break*/, 7];\n            case 10:\n              (_d = 0), (_e = stack.nonPositionedFloats);\n              _p.label = 11;\n            case 11:\n              if (!(_d < _e.length)) return [3 /*break*/, 14];\n              child = _e[_d];\n              return [4 /*yield*/, this.renderStack(child)];\n            case 12:\n              _p.sent();\n              _p.label = 13;\n            case 13:\n              _d++;\n              return [3 /*break*/, 11];\n            case 14:\n              (_f = 0), (_g = stack.nonPositionedInlineLevel);\n              _p.label = 15;\n            case 15:\n              if (!(_f < _g.length)) return [3 /*break*/, 18];\n              child = _g[_f];\n              return [4 /*yield*/, this.renderStack(child)];\n            case 16:\n              _p.sent();\n              _p.label = 17;\n            case 17:\n              _f++;\n              return [3 /*break*/, 15];\n            case 18:\n              (_h = 0), (_j = stack.inlineLevel);\n              _p.label = 19;\n            case 19:\n              if (!(_h < _j.length)) return [3 /*break*/, 22];\n              child = _j[_h];\n              return [4 /*yield*/, this.renderNode(child)];\n            case 20:\n              _p.sent();\n              _p.label = 21;\n            case 21:\n              _h++;\n              return [3 /*break*/, 19];\n            case 22:\n              (_k = 0), (_l = stack.zeroOrAutoZIndexOrTransformedOrOpacity);\n              _p.label = 23;\n            case 23:\n              if (!(_k < _l.length)) return [3 /*break*/, 26];\n              child = _l[_k];\n              return [4 /*yield*/, this.renderStack(child)];\n            case 24:\n              _p.sent();\n              _p.label = 25;\n            case 25:\n              _k++;\n              return [3 /*break*/, 23];\n            case 26:\n              (_m = 0), (_o = stack.positiveZIndex);\n              _p.label = 27;\n            case 27:\n              if (!(_m < _o.length)) return [3 /*break*/, 30];\n              child = _o[_m];\n              return [4 /*yield*/, this.renderStack(child)];\n            case 28:\n              _p.sent();\n              _p.label = 29;\n            case 29:\n              _m++;\n              return [3 /*break*/, 27];\n            case 30:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.mask = function (paths) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(0, 0);\n      this.ctx.lineTo(this.canvas.width, 0);\n      this.ctx.lineTo(this.canvas.width, this.canvas.height);\n      this.ctx.lineTo(0, this.canvas.height);\n      this.ctx.lineTo(0, 0);\n      this.formatPath(paths.slice(0).reverse());\n      this.ctx.closePath();\n    };\n    CanvasRenderer.prototype.path = function (paths) {\n      this.ctx.beginPath();\n      this.formatPath(paths);\n      this.ctx.closePath();\n    };\n    CanvasRenderer.prototype.formatPath = function (paths) {\n      var _this = this;\n      paths.forEach(function (point, index) {\n        var start = isBezierCurve(point) ? point.start : point;\n        if (index === 0) {\n          _this.ctx.moveTo(start.x, start.y);\n        } else {\n          _this.ctx.lineTo(start.x, start.y);\n        }\n        if (isBezierCurve(point)) {\n          _this.ctx.bezierCurveTo(\n            point.startControl.x,\n            point.startControl.y,\n            point.endControl.x,\n            point.endControl.y,\n            point.end.x,\n            point.end.y,\n          );\n        }\n      });\n    };\n    CanvasRenderer.prototype.renderRepeat = function (\n      path,\n      pattern,\n      offsetX,\n      offsetY,\n    ) {\n      this.path(path);\n      this.ctx.fillStyle = pattern;\n      this.ctx.translate(offsetX, offsetY);\n      this.ctx.fill();\n      this.ctx.translate(-offsetX, -offsetY);\n    };\n    CanvasRenderer.prototype.resizeImage = function (image, width, height) {\n      var _a;\n      if (image.width === width && image.height === height) {\n        return image;\n      }\n      var ownerDocument =\n        (_a = this.canvas.ownerDocument) !== null && _a !== void 0\n          ? _a\n          : document;\n      var canvas = ownerDocument.createElement(\"canvas\");\n      canvas.width = Math.max(1, width);\n      canvas.height = Math.max(1, height);\n      var ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(\n        image,\n        0,\n        0,\n        image.width,\n        image.height,\n        0,\n        0,\n        width,\n        height,\n      );\n      return canvas;\n    };\n    CanvasRenderer.prototype.renderBackgroundImage = function (container) {\n      return __awaiter(this, void 0, void 0, function () {\n        var index, _loop_1, this_1, _i, _a, backgroundImage;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              index = container.styles.backgroundImage.length - 1;\n              _loop_1 = function (backgroundImage) {\n                var image,\n                  url,\n                  _c,\n                  path,\n                  x,\n                  y,\n                  width,\n                  height,\n                  pattern,\n                  _d,\n                  path,\n                  x,\n                  y,\n                  width,\n                  height,\n                  _e,\n                  lineLength,\n                  x0,\n                  x1,\n                  y0,\n                  y1,\n                  canvas,\n                  ctx,\n                  gradient_1,\n                  pattern,\n                  _f,\n                  path,\n                  left,\n                  top_1,\n                  width,\n                  height,\n                  position,\n                  x,\n                  y,\n                  _g,\n                  rx,\n                  ry,\n                  radialGradient_1,\n                  midX,\n                  midY,\n                  f,\n                  invF;\n                return __generator(this, function (_h) {\n                  switch (_h.label) {\n                    case 0:\n                      if (!((backgroundImage.type === 0) /* URL */))\n                        return [3 /*break*/, 5];\n                      image = void 0;\n                      url = backgroundImage.url;\n                      _h.label = 1;\n                    case 1:\n                      _h.trys.push([1, 3, , 4]);\n                      return [4 /*yield*/, this_1.context.cache.match(url)];\n                    case 2:\n                      image = _h.sent();\n                      return [3 /*break*/, 4];\n                    case 3:\n                      _h.sent();\n                      this_1.context.logger.error(\n                        \"Error loading background-image \" + url,\n                      );\n                      return [3 /*break*/, 4];\n                    case 4:\n                      if (image) {\n                        (_c = calculateBackgroundRendering(container, index, [\n                          image.width,\n                          image.height,\n                          image.width / image.height,\n                        ])),\n                          (path = _c[0]),\n                          (x = _c[1]),\n                          (y = _c[2]),\n                          (width = _c[3]),\n                          (height = _c[4]);\n                        pattern = this_1.ctx.createPattern(\n                          this_1.resizeImage(image, width, height),\n                          \"repeat\",\n                        );\n                        this_1.renderRepeat(path, pattern, x, y);\n                      }\n                      return [3 /*break*/, 6];\n                    case 5:\n                      if (isLinearGradient(backgroundImage)) {\n                        (_d = calculateBackgroundRendering(container, index, [\n                          null,\n                          null,\n                          null,\n                        ])),\n                          (path = _d[0]),\n                          (x = _d[1]),\n                          (y = _d[2]),\n                          (width = _d[3]),\n                          (height = _d[4]);\n                        (_e = calculateGradientDirection(\n                          backgroundImage.angle,\n                          width,\n                          height,\n                        )),\n                          (lineLength = _e[0]),\n                          (x0 = _e[1]),\n                          (x1 = _e[2]),\n                          (y0 = _e[3]),\n                          (y1 = _e[4]);\n                        canvas = document.createElement(\"canvas\");\n                        canvas.width = width;\n                        canvas.height = height;\n                        ctx = canvas.getContext(\"2d\");\n                        gradient_1 = ctx.createLinearGradient(x0, y0, x1, y1);\n                        processColorStops(\n                          backgroundImage.stops,\n                          lineLength,\n                        ).forEach(function (colorStop) {\n                          return gradient_1.addColorStop(\n                            colorStop.stop,\n                            asString(colorStop.color),\n                          );\n                        });\n                        ctx.fillStyle = gradient_1;\n                        ctx.fillRect(0, 0, width, height);\n                        if (width > 0 && height > 0) {\n                          pattern = this_1.ctx.createPattern(canvas, \"repeat\");\n                          this_1.renderRepeat(path, pattern, x, y);\n                        }\n                      } else if (isRadialGradient(backgroundImage)) {\n                        (_f = calculateBackgroundRendering(container, index, [\n                          null,\n                          null,\n                          null,\n                        ])),\n                          (path = _f[0]),\n                          (left = _f[1]),\n                          (top_1 = _f[2]),\n                          (width = _f[3]),\n                          (height = _f[4]);\n                        position =\n                          backgroundImage.position.length === 0\n                            ? [FIFTY_PERCENT]\n                            : backgroundImage.position;\n                        x = getAbsoluteValue(position[0], width);\n                        y = getAbsoluteValue(\n                          position[position.length - 1],\n                          height,\n                        );\n                        (_g = calculateRadius(\n                          backgroundImage,\n                          x,\n                          y,\n                          width,\n                          height,\n                        )),\n                          (rx = _g[0]),\n                          (ry = _g[1]);\n                        if (rx > 0 && ry > 0) {\n                          radialGradient_1 = this_1.ctx.createRadialGradient(\n                            left + x,\n                            top_1 + y,\n                            0,\n                            left + x,\n                            top_1 + y,\n                            rx,\n                          );\n                          processColorStops(\n                            backgroundImage.stops,\n                            rx * 2,\n                          ).forEach(function (colorStop) {\n                            return radialGradient_1.addColorStop(\n                              colorStop.stop,\n                              asString(colorStop.color),\n                            );\n                          });\n                          this_1.path(path);\n                          this_1.ctx.fillStyle = radialGradient_1;\n                          if (rx !== ry) {\n                            midX =\n                              container.bounds.left +\n                              0.5 * container.bounds.width;\n                            midY =\n                              container.bounds.top +\n                              0.5 * container.bounds.height;\n                            f = ry / rx;\n                            invF = 1 / f;\n                            this_1.ctx.save();\n                            this_1.ctx.translate(midX, midY);\n                            this_1.ctx.transform(1, 0, 0, f, 0, 0);\n                            this_1.ctx.translate(-midX, -midY);\n                            this_1.ctx.fillRect(\n                              left,\n                              invF * (top_1 - midY) + midY,\n                              width,\n                              height * invF,\n                            );\n                            this_1.ctx.restore();\n                          } else {\n                            this_1.ctx.fill();\n                          }\n                        }\n                      }\n                      _h.label = 6;\n                    case 6:\n                      index--;\n                      return [2 /*return*/];\n                  }\n                });\n              };\n              this_1 = this;\n              (_i = 0),\n                (_a = container.styles.backgroundImage.slice(0).reverse());\n              _b.label = 1;\n            case 1:\n              if (!(_i < _a.length)) return [3 /*break*/, 4];\n              backgroundImage = _a[_i];\n              return [5 /*yield**/, _loop_1(backgroundImage)];\n            case 2:\n              _b.sent();\n              _b.label = 3;\n            case 3:\n              _i++;\n              return [3 /*break*/, 1];\n            case 4:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderSolidBorder = function (\n      color,\n      side,\n      curvePoints,\n    ) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          this.path(parsePathForBorder(curvePoints, side));\n          this.ctx.fillStyle = asString(color);\n          this.ctx.fill();\n          return [2 /*return*/];\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderDoubleBorder = function (\n      color,\n      width,\n      side,\n      curvePoints,\n    ) {\n      return __awaiter(this, void 0, void 0, function () {\n        var outerPaths, innerPaths;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(width < 3)) return [3 /*break*/, 2];\n              return [\n                4 /*yield*/,\n                this.renderSolidBorder(color, side, curvePoints),\n              ];\n            case 1:\n              _a.sent();\n              return [2 /*return*/];\n            case 2:\n              outerPaths = parsePathForBorderDoubleOuter(curvePoints, side);\n              this.path(outerPaths);\n              this.ctx.fillStyle = asString(color);\n              this.ctx.fill();\n              innerPaths = parsePathForBorderDoubleInner(curvePoints, side);\n              this.path(innerPaths);\n              this.ctx.fill();\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderNodeBackgroundAndBorders = function (paint) {\n      return __awaiter(this, void 0, void 0, function () {\n        var styles,\n          hasBackground,\n          borders,\n          backgroundPaintingArea,\n          side,\n          _i,\n          borders_1,\n          border;\n        var _this = this;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              this.applyEffects(paint.getEffects(2 /* BACKGROUND_BORDERS */));\n              styles = paint.container.styles;\n              hasBackground =\n                !isTransparent(styles.backgroundColor) ||\n                styles.backgroundImage.length;\n              borders = [\n                {\n                  style: styles.borderTopStyle,\n                  color: styles.borderTopColor,\n                  width: styles.borderTopWidth,\n                },\n                {\n                  style: styles.borderRightStyle,\n                  color: styles.borderRightColor,\n                  width: styles.borderRightWidth,\n                },\n                {\n                  style: styles.borderBottomStyle,\n                  color: styles.borderBottomColor,\n                  width: styles.borderBottomWidth,\n                },\n                {\n                  style: styles.borderLeftStyle,\n                  color: styles.borderLeftColor,\n                  width: styles.borderLeftWidth,\n                },\n              ];\n              backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(\n                getBackgroundValueForIndex(styles.backgroundClip, 0),\n                paint.curves,\n              );\n              if (!(hasBackground || styles.boxShadow.length))\n                return [3 /*break*/, 2];\n              this.ctx.save();\n              this.path(backgroundPaintingArea);\n              this.ctx.clip();\n              if (!isTransparent(styles.backgroundColor)) {\n                this.ctx.fillStyle = asString(styles.backgroundColor);\n                this.ctx.fill();\n              }\n              return [4 /*yield*/, this.renderBackgroundImage(paint.container)];\n            case 1:\n              _a.sent();\n              this.ctx.restore();\n              styles.boxShadow\n                .slice(0)\n                .reverse()\n                .forEach(function (shadow) {\n                  _this.ctx.save();\n                  var borderBoxArea = calculateBorderBoxPath(paint.curves);\n                  var maskOffset = shadow.inset ? 0 : MASK_OFFSET;\n                  var shadowPaintingArea = transformPath(\n                    borderBoxArea,\n                    -maskOffset +\n                      (shadow.inset ? 1 : -1) * shadow.spread.number,\n                    (shadow.inset ? 1 : -1) * shadow.spread.number,\n                    shadow.spread.number * (shadow.inset ? -2 : 2),\n                    shadow.spread.number * (shadow.inset ? -2 : 2),\n                  );\n                  if (shadow.inset) {\n                    _this.path(borderBoxArea);\n                    _this.ctx.clip();\n                    _this.mask(shadowPaintingArea);\n                  } else {\n                    _this.mask(borderBoxArea);\n                    _this.ctx.clip();\n                    _this.path(shadowPaintingArea);\n                  }\n                  _this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;\n                  _this.ctx.shadowOffsetY = shadow.offsetY.number;\n                  _this.ctx.shadowColor = asString(shadow.color);\n                  _this.ctx.shadowBlur = shadow.blur.number;\n                  _this.ctx.fillStyle = shadow.inset\n                    ? asString(shadow.color)\n                    : \"rgba(0,0,0,1)\";\n                  _this.ctx.fill();\n                  _this.ctx.restore();\n                });\n              _a.label = 2;\n            case 2:\n              side = 0;\n              (_i = 0), (borders_1 = borders);\n              _a.label = 3;\n            case 3:\n              if (!(_i < borders_1.length)) return [3 /*break*/, 13];\n              border = borders_1[_i];\n              if (\n                !(\n                  border.style !== 0 /* NONE */ &&\n                  !isTransparent(border.color) &&\n                  border.width > 0\n                )\n              )\n                return [3 /*break*/, 11];\n              if (!((border.style === 2) /* DASHED */)) return [3 /*break*/, 5];\n              return [\n                4 /*yield*/,\n                this.renderDashedDottedBorder(\n                  border.color,\n                  border.width,\n                  side,\n                  paint.curves,\n                  2 /* DASHED */,\n                ),\n              ];\n            case 4:\n              _a.sent();\n              return [3 /*break*/, 11];\n            case 5:\n              if (!((border.style === 3) /* DOTTED */)) return [3 /*break*/, 7];\n              return [\n                4 /*yield*/,\n                this.renderDashedDottedBorder(\n                  border.color,\n                  border.width,\n                  side,\n                  paint.curves,\n                  3 /* DOTTED */,\n                ),\n              ];\n            case 6:\n              _a.sent();\n              return [3 /*break*/, 11];\n            case 7:\n              if (!((border.style === 4) /* DOUBLE */)) return [3 /*break*/, 9];\n              return [\n                4 /*yield*/,\n                this.renderDoubleBorder(\n                  border.color,\n                  border.width,\n                  side,\n                  paint.curves,\n                ),\n              ];\n            case 8:\n              _a.sent();\n              return [3 /*break*/, 11];\n            case 9:\n              return [\n                4 /*yield*/,\n                this.renderSolidBorder(border.color, side, paint.curves),\n              ];\n            case 10:\n              _a.sent();\n              _a.label = 11;\n            case 11:\n              side++;\n              _a.label = 12;\n            case 12:\n              _i++;\n              return [3 /*break*/, 3];\n            case 13:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n    CanvasRenderer.prototype.renderDashedDottedBorder = function (\n      color,\n      width,\n      side,\n      curvePoints,\n      style,\n    ) {\n      return __awaiter(this, void 0, void 0, function () {\n        var strokePaths,\n          boxPaths,\n          startX,\n          startY,\n          endX,\n          endY,\n          length,\n          dashLength,\n          spaceLength,\n          useLineDash,\n          multiplier,\n          numberOfDashes,\n          minSpace,\n          maxSpace,\n          path1,\n          path2,\n          path1,\n          path2;\n        return __generator(this, function (_a) {\n          this.ctx.save();\n          strokePaths = parsePathForBorderStroke(curvePoints, side);\n          boxPaths = parsePathForBorder(curvePoints, side);\n          if (style === 2 /* DASHED */) {\n            this.path(boxPaths);\n            this.ctx.clip();\n          }\n          if (isBezierCurve(boxPaths[0])) {\n            startX = boxPaths[0].start.x;\n            startY = boxPaths[0].start.y;\n          } else {\n            startX = boxPaths[0].x;\n            startY = boxPaths[0].y;\n          }\n          if (isBezierCurve(boxPaths[1])) {\n            endX = boxPaths[1].end.x;\n            endY = boxPaths[1].end.y;\n          } else {\n            endX = boxPaths[1].x;\n            endY = boxPaths[1].y;\n          }\n          if (side === 0 || side === 2) {\n            length = Math.abs(startX - endX);\n          } else {\n            length = Math.abs(startY - endY);\n          }\n          this.ctx.beginPath();\n          if (style === 3 /* DOTTED */) {\n            this.formatPath(strokePaths);\n          } else {\n            this.formatPath(boxPaths.slice(0, 2));\n          }\n          dashLength = width < 3 ? width * 3 : width * 2;\n          spaceLength = width < 3 ? width * 2 : width;\n          if (style === 3 /* DOTTED */) {\n            dashLength = width;\n            spaceLength = width;\n          }\n          useLineDash = true;\n          if (length <= dashLength * 2) {\n            useLineDash = false;\n          } else if (length <= dashLength * 2 + spaceLength) {\n            multiplier = length / (2 * dashLength + spaceLength);\n            dashLength *= multiplier;\n            spaceLength *= multiplier;\n          } else {\n            numberOfDashes = Math.floor(\n              (length + spaceLength) / (dashLength + spaceLength),\n            );\n            minSpace =\n              (length - numberOfDashes * dashLength) / (numberOfDashes - 1);\n            maxSpace =\n              (length - (numberOfDashes + 1) * dashLength) / numberOfDashes;\n            spaceLength =\n              maxSpace <= 0 ||\n              Math.abs(spaceLength - minSpace) <\n                Math.abs(spaceLength - maxSpace)\n                ? minSpace\n                : maxSpace;\n          }\n          if (useLineDash) {\n            if (style === 3 /* DOTTED */) {\n              this.ctx.setLineDash([0, dashLength + spaceLength]);\n            } else {\n              this.ctx.setLineDash([dashLength, spaceLength]);\n            }\n          }\n          if (style === 3 /* DOTTED */) {\n            this.ctx.lineCap = \"round\";\n            this.ctx.lineWidth = width;\n          } else {\n            this.ctx.lineWidth = width * 2 + 1.1;\n          }\n          this.ctx.strokeStyle = asString(color);\n          this.ctx.stroke();\n          this.ctx.setLineDash([]);\n          // dashed round edge gap\n          if (style === 2 /* DASHED */) {\n            if (isBezierCurve(boxPaths[0])) {\n              path1 = boxPaths[3];\n              path2 = boxPaths[0];\n              this.ctx.beginPath();\n              this.formatPath([\n                new Vector(path1.end.x, path1.end.y),\n                new Vector(path2.start.x, path2.start.y),\n              ]);\n              this.ctx.stroke();\n            }\n            if (isBezierCurve(boxPaths[1])) {\n              path1 = boxPaths[1];\n              path2 = boxPaths[2];\n              this.ctx.beginPath();\n              this.formatPath([\n                new Vector(path1.end.x, path1.end.y),\n                new Vector(path2.start.x, path2.start.y),\n              ]);\n              this.ctx.stroke();\n            }\n          }\n          this.ctx.restore();\n          return [2 /*return*/];\n        });\n      });\n    };\n    CanvasRenderer.prototype.render = function (element) {\n      return __awaiter(this, void 0, void 0, function () {\n        var stack;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (this.options.backgroundColor) {\n                this.ctx.fillStyle = asString(this.options.backgroundColor);\n                this.ctx.fillRect(\n                  this.options.x,\n                  this.options.y,\n                  this.options.width,\n                  this.options.height,\n                );\n              }\n              stack = parseStackingContexts(element);\n              return [4 /*yield*/, this.renderStack(stack)];\n            case 1:\n              _a.sent();\n              this.applyEffects([]);\n              return [2 /*return*/, this.canvas];\n          }\n        });\n      });\n    };\n    return CanvasRenderer;\n  })(Renderer);\n  var isTextInputElement = function (container) {\n    if (container instanceof TextareaElementContainer) {\n      return true;\n    } else if (container instanceof SelectElementContainer) {\n      return true;\n    } else if (\n      container instanceof InputElementContainer &&\n      container.type !== RADIO &&\n      container.type !== CHECKBOX\n    ) {\n      return true;\n    }\n    return false;\n  };\n  var calculateBackgroundCurvedPaintingArea = function (clip, curves) {\n    switch (clip) {\n      case 0 /* BORDER_BOX */:\n        return calculateBorderBoxPath(curves);\n      case 2 /* CONTENT_BOX */:\n        return calculateContentBoxPath(curves);\n      case 1 /* PADDING_BOX */:\n      default:\n        return calculatePaddingBoxPath(curves);\n    }\n  };\n  var canvasTextAlign = function (textAlign) {\n    switch (textAlign) {\n      case 1 /* CENTER */:\n        return \"center\";\n      case 2 /* RIGHT */:\n        return \"right\";\n      case 0 /* LEFT */:\n      default:\n        return \"left\";\n    }\n  };\n\n  var iOSBrokenFonts = [\"-apple-system\", \"system-ui\"];\n  var fixIOSSystemFonts = function (fontFamilies) {\n    return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)\n      ? fontFamilies.filter(function (fontFamily) {\n          return iOSBrokenFonts.indexOf(fontFamily) === -1;\n        })\n      : fontFamilies;\n  };\n\n  var ForeignObjectRenderer = /** @class */ (function (_super) {\n    __extends(ForeignObjectRenderer, _super);\n    function ForeignObjectRenderer(context, options) {\n      var _this = _super.call(this, context, options) || this;\n      _this.canvas = options.canvas\n        ? options.canvas\n        : document.createElement(\"canvas\");\n      _this.ctx = _this.canvas.getContext(\"2d\");\n      _this.options = options;\n      _this.canvas.width = Math.floor(options.width * options.scale);\n      _this.canvas.height = Math.floor(options.height * options.scale);\n      _this.canvas.style.width = options.width + \"px\";\n      _this.canvas.style.height = options.height + \"px\";\n      _this.ctx.scale(_this.options.scale, _this.options.scale);\n      _this.ctx.translate(-options.x, -options.y);\n      _this.context.logger.debug(\n        \"EXPERIMENTAL ForeignObject renderer initialized (\" +\n          options.width +\n          \"x\" +\n          options.height +\n          \" at \" +\n          options.x +\n          \",\" +\n          options.y +\n          \") with scale \" +\n          options.scale,\n      );\n      return _this;\n    }\n    ForeignObjectRenderer.prototype.render = function (element) {\n      return __awaiter(this, void 0, void 0, function () {\n        var svg, img;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              svg = createForeignObjectSVG(\n                this.options.width * this.options.scale,\n                this.options.height * this.options.scale,\n                this.options.scale,\n                this.options.scale,\n                element,\n              );\n              return [4 /*yield*/, loadSerializedSVG(svg)];\n            case 1:\n              img = _a.sent();\n              if (this.options.backgroundColor) {\n                this.ctx.fillStyle = asString(this.options.backgroundColor);\n                this.ctx.fillRect(\n                  0,\n                  0,\n                  this.options.width * this.options.scale,\n                  this.options.height * this.options.scale,\n                );\n              }\n              this.ctx.drawImage(\n                img,\n                -this.options.x * this.options.scale,\n                -this.options.y * this.options.scale,\n              );\n              return [2 /*return*/, this.canvas];\n          }\n        });\n      });\n    };\n    return ForeignObjectRenderer;\n  })(Renderer);\n  var loadSerializedSVG = function (svg) {\n    return new Promise(function (resolve, reject) {\n      var img = new Image();\n      img.onload = function () {\n        resolve(img);\n      };\n      img.onerror = reject;\n      img.src =\n        \"data:image/svg+xml;charset=utf-8,\" +\n        encodeURIComponent(new XMLSerializer().serializeToString(svg));\n    });\n  };\n\n  var Logger = /** @class */ (function () {\n    function Logger(_a) {\n      var id = _a.id,\n        enabled = _a.enabled;\n      this.id = id;\n      this.enabled = enabled;\n      this.start = Date.now();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.debug = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (this.enabled) {\n        // eslint-disable-next-line no-console\n        if (\n          typeof window !== \"undefined\" &&\n          window.console &&\n          typeof console.debug === \"function\"\n        ) {\n          // eslint-disable-next-line no-console\n          console.debug.apply(\n            console,\n            __spreadArray([this.id, this.getTime() + \"ms\"], args),\n          );\n        } else {\n          this.info.apply(this, args);\n        }\n      }\n    };\n    Logger.prototype.getTime = function () {\n      return Date.now() - this.start;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.info = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (this.enabled) {\n        // eslint-disable-next-line no-console\n        if (\n          typeof window !== \"undefined\" &&\n          window.console &&\n          typeof console.info === \"function\"\n        ) {\n          // eslint-disable-next-line no-console\n          console.info.apply(\n            console,\n            __spreadArray([this.id, this.getTime() + \"ms\"], args),\n          );\n        }\n      }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.warn = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (this.enabled) {\n        // eslint-disable-next-line no-console\n        if (\n          typeof window !== \"undefined\" &&\n          window.console &&\n          typeof console.warn === \"function\"\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn.apply(\n            console,\n            __spreadArray([this.id, this.getTime() + \"ms\"], args),\n          );\n        } else {\n          this.info.apply(this, args);\n        }\n      }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.error = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (this.enabled) {\n        // eslint-disable-next-line no-console\n        if (\n          typeof window !== \"undefined\" &&\n          window.console &&\n          typeof console.error === \"function\"\n        ) {\n          // eslint-disable-next-line no-console\n          console.error.apply(\n            console,\n            __spreadArray([this.id, this.getTime() + \"ms\"], args),\n          );\n        } else {\n          this.info.apply(this, args);\n        }\n      }\n    };\n    Logger.instances = {};\n    return Logger;\n  })();\n\n  var Context = /** @class */ (function () {\n    function Context(options, windowBounds) {\n      var _a;\n      this.windowBounds = windowBounds;\n      this.instanceName = \"#\" + Context.instanceCount++;\n      this.logger = new Logger({\n        id: this.instanceName,\n        enabled: options.logging,\n      });\n      this.cache =\n        (_a = options.cache) !== null && _a !== void 0\n          ? _a\n          : new Cache(this, options);\n    }\n    Context.instanceCount = 1;\n    return Context;\n  })();\n\n  var htmlVisualizer = function (element, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return renderElement(element, options);\n  };\n  if (typeof window !== \"undefined\") {\n    CacheStorage.setContext(window);\n  }\n  var renderElement = function (element, opts) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var ownerDocument,\n        defaultView,\n        resourceOptions,\n        contextOptions,\n        windowOptions,\n        windowBounds,\n        context,\n        foreignObjectRendering,\n        cloneOptions,\n        documentCloner,\n        clonedElement,\n        container,\n        _a,\n        width,\n        height,\n        left,\n        top,\n        backgroundColor,\n        renderOptions,\n        canvas,\n        renderer,\n        root,\n        renderer;\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\n      return __generator(this, function (_u) {\n        switch (_u.label) {\n          case 0:\n            if (!element || typeof element !== \"object\") {\n              return [\n                2 /*return*/,\n                Promise.reject(\"Invalid element provided as first argument\"),\n              ];\n            }\n            ownerDocument = element.ownerDocument;\n            if (!ownerDocument) {\n              throw new Error(\"Element is not attached to a Document\");\n            }\n            defaultView = ownerDocument.defaultView;\n            if (!defaultView) {\n              throw new Error(\"Document is not attached to a Window\");\n            }\n            resourceOptions = {\n              allowTaint:\n                (_b = opts.allowTaint) !== null && _b !== void 0 ? _b : false,\n              imageTimeout:\n                (_c = opts.imageTimeout) !== null && _c !== void 0 ? _c : 15000,\n              proxy: opts.proxy,\n              useCORS:\n                (_d = opts.useCORS) !== null && _d !== void 0 ? _d : false,\n            };\n            contextOptions = __assign(\n              {\n                logging:\n                  (_e = opts.logging) !== null && _e !== void 0 ? _e : true,\n                cache: opts.cache,\n              },\n              resourceOptions,\n            );\n            windowOptions = {\n              windowWidth:\n                (_f = opts.windowWidth) !== null && _f !== void 0\n                  ? _f\n                  : defaultView.innerWidth,\n              windowHeight:\n                (_g = opts.windowHeight) !== null && _g !== void 0\n                  ? _g\n                  : defaultView.innerHeight,\n              scrollX:\n                (_h = opts.scrollX) !== null && _h !== void 0\n                  ? _h\n                  : defaultView.pageXOffset,\n              scrollY:\n                (_j = opts.scrollY) !== null && _j !== void 0\n                  ? _j\n                  : defaultView.pageYOffset,\n            };\n            windowBounds = new Bounds(\n              windowOptions.scrollX,\n              windowOptions.scrollY,\n              windowOptions.windowWidth,\n              windowOptions.windowHeight,\n            );\n            context = new Context(contextOptions, windowBounds);\n            foreignObjectRendering =\n              (_k = opts.foreignObjectRendering) !== null && _k !== void 0\n                ? _k\n                : false;\n            cloneOptions = {\n              allowTaint:\n                (_l = opts.allowTaint) !== null && _l !== void 0 ? _l : false,\n              onclone: opts.onclone,\n              ignoreElements: opts.ignoreElements,\n              inlineImages: foreignObjectRendering,\n              copyStyles: foreignObjectRendering,\n            };\n            context.logger.debug(\n              \"Starting document clone with size \" +\n                windowBounds.width +\n                \"x\" +\n                windowBounds.height +\n                \" scrolled to \" +\n                -windowBounds.left +\n                \",\" +\n                -windowBounds.top,\n            );\n            documentCloner = new DocumentCloner(context, element, cloneOptions);\n            clonedElement = documentCloner.clonedReferenceElement;\n            if (!clonedElement) {\n              return [\n                2 /*return*/,\n                Promise.reject(\"Unable to find element in cloned iframe\"),\n              ];\n            }\n            return [\n              4 /*yield*/,\n              documentCloner.toIFrame(ownerDocument, windowBounds),\n            ];\n          case 1:\n            container = _u.sent();\n            (_a =\n              isBodyElement(clonedElement) || isHTMLElement(clonedElement)\n                ? parseDocumentSize(clonedElement.ownerDocument)\n                : parseBounds(context, clonedElement)),\n              (width = _a.width),\n              (height = _a.height),\n              (left = _a.left),\n              (top = _a.top);\n            backgroundColor = parseBackgroundColor(\n              context,\n              clonedElement,\n              opts.backgroundColor,\n            );\n            renderOptions = {\n              canvas: opts.canvas,\n              backgroundColor: backgroundColor,\n              scale:\n                (_o =\n                  (_m = opts.scale) !== null && _m !== void 0\n                    ? _m\n                    : defaultView.devicePixelRatio) !== null && _o !== void 0\n                  ? _o\n                  : 1,\n              x: ((_p = opts.x) !== null && _p !== void 0 ? _p : 0) + left,\n              y: ((_q = opts.y) !== null && _q !== void 0 ? _q : 0) + top,\n              width:\n                (_r = opts.width) !== null && _r !== void 0\n                  ? _r\n                  : Math.ceil(width),\n              height:\n                (_s = opts.height) !== null && _s !== void 0\n                  ? _s\n                  : Math.ceil(height),\n            };\n            if (!foreignObjectRendering) return [3 /*break*/, 3];\n            context.logger.debug(\n              \"Document cloned, using foreign object rendering\",\n            );\n            renderer = new ForeignObjectRenderer(context, renderOptions);\n            return [4 /*yield*/, renderer.render(clonedElement)];\n          case 2:\n            canvas = _u.sent();\n            return [3 /*break*/, 5];\n          case 3:\n            context.logger.debug(\n              \"Document cloned, element located at \" +\n                left +\n                \",\" +\n                top +\n                \" with size \" +\n                width +\n                \"x\" +\n                height +\n                \" using computed rendering\",\n            );\n            context.logger.debug(\"Starting DOM parsing\");\n            root = parseTree(context, clonedElement);\n            if (backgroundColor === root.styles.backgroundColor) {\n              root.styles.backgroundColor = COLORS.TRANSPARENT;\n            }\n            context.logger.debug(\n              \"Starting renderer for element at \" +\n                renderOptions.x +\n                \",\" +\n                renderOptions.y +\n                \" with size \" +\n                renderOptions.width +\n                \"x\" +\n                renderOptions.height,\n            );\n            renderer = new CanvasRenderer(context, renderOptions);\n            return [4 /*yield*/, renderer.render(root)];\n          case 4:\n            canvas = _u.sent();\n            _u.label = 5;\n          case 5:\n            if (\n              (_t = opts.removeContainer) !== null && _t !== void 0 ? _t : true\n            ) {\n              if (!DocumentCloner.destroy(container)) {\n                context.logger.error(\n                  \"Cannot detach cloned iframe as it is not in the DOM anymore\",\n                );\n              }\n            }\n            context.logger.debug(\"Finished rendering\");\n            return [2 /*return*/, canvas];\n        }\n      });\n    });\n  };\n  var parseBackgroundColor = function (\n    context,\n    element,\n    backgroundColorOverride,\n  ) {\n    var ownerDocument = element.ownerDocument;\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    var documentBackgroundColor = ownerDocument.documentElement\n      ? parseColor(\n          context,\n          getComputedStyle(ownerDocument.documentElement).backgroundColor,\n        )\n      : COLORS.TRANSPARENT;\n    var bodyBackgroundColor = ownerDocument.body\n      ? parseColor(\n          context,\n          getComputedStyle(ownerDocument.body).backgroundColor,\n        )\n      : COLORS.TRANSPARENT;\n    var defaultBackgroundColor =\n      typeof backgroundColorOverride === \"string\"\n        ? parseColor(context, backgroundColorOverride)\n        : backgroundColorOverride === null\n          ? COLORS.TRANSPARENT\n          : 0xffffffff;\n    return element === ownerDocument.documentElement\n      ? isTransparent(documentBackgroundColor)\n        ? isTransparent(bodyBackgroundColor)\n          ? defaultBackgroundColor\n          : bodyBackgroundColor\n        : documentBackgroundColor\n      : defaultBackgroundColor;\n  };\n\n  return htmlVisualizer;\n})();\n","import { Logger } from \"../logger/logger\";\n\nexport function checkThroughFilters(\n  url: string,\n  second_document_string: string,\n  orgId: string,\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      const endpointFilters =\n        \"https://5xpb4fkh75h5s4vngnzy6oowcy0cgahe.lambda-url.us-east-1.on.aws/\";\n      fetch(endpointFilters, {\n        method: \"POST\",\n        body: JSON.stringify({\n          url: url,\n          htmlContent: second_document_string,\n          orgId: orgId,\n        }),\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error(\n              \"[checkThroughFilters]: Network response was not ok\",\n            );\n          }\n          return response.json();\n        })\n        .then((data) => {\n          Logger.log(\"[checkThroughFilters]: Response from server:\", data);\n          resolve(data.valid);\n        })\n        .catch((error) => {\n          Logger.error(\"[checkThroughFilters]: Error:\", error);\n          resolve(true);\n        });\n    } catch (error) {\n      Logger.error(error);\n      resolve(true);\n    }\n  });\n}\n\nexport async function getS3SignedUrls(recordID: string): Promise<{\n  uploadURL_htmlVisualizer: string;\n  uploadURL_html: string;\n  uploadURL_markDown: string;\n  uploadURL_html_contained: string;\n}> {\n  return new Promise((resolve) => {\n    fetch(\n      \"https://5xub3rkd3rqg6ebumgrvkjrm6u0jgqnw.lambda-url.us-east-1.on.aws/?recordID=\" +\n        recordID,\n    )\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"[getS3SignedUrl]: Network response was not ok\");\n        }\n        return response.json();\n      })\n      .then((data) => {\n        Logger.log(\"[getS3SignedUrl]: Response from server:\", data);\n        resolve({\n          uploadURL_htmlVisualizer: data.uploadURL_htmlVisualizer,\n          uploadURL_html: data.uploadURL_html,\n          uploadURL_markDown: data.uploadURL_markDown,\n          uploadURL_html_contained: data.uploadURL_html_contained,\n        });\n      });\n  });\n}\n","import { tellToDeleteIframe } from \"../message-background\";\nimport { getIdentifier } from \"../../utils/identity-helpers\";\nimport { Logger } from \"../../logger/logger\";\nimport { htmlVisualizer } from \"../../htmlVisualizer/htmlVisualizer\";\nimport { sendMessageToBackground } from \"../../utils/messaging-helpers\";\nimport {\n  checkThroughFilters,\n  getS3SignedUrls,\n} from \"../contained-visualizer-helpers\";\nimport { getFromRequestInfoStorage } from \"../../request-info/request-info-helpers\";\nimport { getFromRequestMessageStorage } from \"../../request-message/request-message-helpers\";\n\nlet htmlVisualizerTimedOut: boolean = true;\n\nasync function updateDynamo(\n  recordID: string,\n  url: string,\n  htmlTransformer: string,\n  orgId: string,\n  htmlKey: string = \"--\",\n  markdownKey: string = \"--\",\n  htmlVisualizerKey: string = \"--\",\n  delayBetweenExecutions: number = 500,\n) {\n  Logger.log(\"  updateDynamo - Saving Crawl \");\n  Logger.log(\"RecordID:\", recordID);\n  Logger.log(\"URL:\", url);\n  Logger.log(\"HTML Transformer:\", htmlTransformer);\n  Logger.log(\"OrgID:\", orgId);\n  Logger.log(\"HTML Key:\", htmlKey);\n  Logger.log(\"Markdown Key:\", markdownKey);\n  Logger.log(\"HTML Visualizer Key:\", htmlVisualizerKey);\n  Logger.log(\"Delay Between Executions:\", delayBetweenExecutions);\n\n  getIdentifier().then(async (device_identifier: string) => {\n    let endpoint: string =\n      \"https://zuaq4uywadlj75qqkfns3bmoom0xpaiz.lambda-url.us-east-1.on.aws/\";\n    let requestMessageInfo = await getFromRequestMessageStorage(recordID);\n    if (requestMessageInfo && requestMessageInfo.update_dynamo_endpoint) {\n      Logger.log(\n        \"Using update_dynamo_endpoint from requestMessageInfo:\",\n        requestMessageInfo.update_dynamo_endpoint,\n      );\n      endpoint = requestMessageInfo.update_dynamo_endpoint;\n    }\n\n    Logger.log(\"Device Identifier:\", device_identifier);\n    let moreInfo: any = await getFromRequestInfoStorage(recordID);\n    Logger.log(\"[updateDynamo] => More Info:\", moreInfo);\n    const bodyData = {\n      recordID: recordID,\n      url: url,\n      htmlTransformer: htmlTransformer,\n      orgId: orgId,\n      device_identifier: device_identifier,\n      final_url: window.location.href,\n      htmlFileName: htmlKey,\n      markdownFileName: markdownKey,\n      htmlVisualizerFileName: htmlVisualizerKey,\n      statusCode: moreInfo.statusCode,\n      requestMessageInfo: requestMessageInfo,\n    };\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"text/plain\" },\n      body: JSON.stringify(bodyData),\n    };\n\n    Logger.log(\"[updateDynamo]: Sending data to server =>\");\n    Logger.log(bodyData);\n\n    fetch(endpoint, requestOptions)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        return response.json();\n      })\n      .then((data) => {\n        Logger.log(\"Response from server:\", data);\n        return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n      })\n      .catch((error) => {\n        Logger.error(\"Error:\", error);\n        return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n      });\n  });\n}\n\nexport async function saveWithVisualizer(\n  recordID: string,\n  content: string,\n  markDown: string,\n  url: string,\n  htmlTransformer: string,\n  orgId: string,\n  second_document_string: string,\n  delayBetweenExecutions: number = 500,\n  openTabOnlyIfMust: boolean = false,\n) {\n  Logger.log(\"  saveWithVisualizer - Saving Crawl \");\n  Logger.log(\"RecordID:\", recordID);\n  // first pass through filters\n  let isValid = await checkThroughFilters(url, second_document_string, orgId);\n  if (!isValid) {\n    Logger.log(\"URL did not pass through filters\");\n    return tellToDeleteIframe(recordID, false);\n  }\n  let signedUrls = await getS3SignedUrls(recordID);\n  let htmlVisualizerURL = signedUrls.uploadURL_htmlVisualizer;\n  let htmlURL = signedUrls.uploadURL_html;\n  let markDownURL = signedUrls.uploadURL_markDown;\n\n  await sendMessageToBackground({\n    intent: \"putHTMLToSigned\",\n    htmlURL_signed: htmlURL,\n    content: content,\n  });\n  await sendMessageToBackground({\n    intent: \"putMarkdownToSigned\",\n    markdownURL_signed: markDownURL,\n    markDown: markDown,\n  });\n\n  setTimeout(async () => {\n    if (htmlVisualizerTimedOut) {\n      Logger.error(\"HTML Visualizer Timed Out\");\n      // still save what savable\n      await updateDynamo(\n        recordID,\n        url,\n        htmlTransformer,\n        orgId,\n        \"text_\" + recordID + \".txt\",\n        \"markDown_\" + recordID + \".txt\",\n      );\n      return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n    } else {\n      Logger.log(\"HTML Visualizer Completed Correctly\");\n      htmlVisualizerTimedOut = true;\n    }\n  }, 20000);\n\n  // after that, attempt to visualize the HTML\n  Logger.log(\"Attempting to visualize HTML...\");\n\n  await sendMessageToBackground({\n    intent: \"fixImageRenderHTMLVisualizer\",\n  });\n  // window.scrollTo(0, 0);\n  let base64image = await htmlVisualizer(document.body, {\n    useCORS: true,\n    // allowTaint: true,\n    logging: false,\n  })\n    .then(function (canvas: HTMLCanvasElement | null) {\n      Logger.log(\"IMAGE IS HERE\");\n      if (!canvas) return \"\";\n      return canvas.toDataURL(\"image/png\");\n    })\n    .catch(async function (error: any) {\n      // here retry by allowingTaint to be false\n      Logger.error(\"[SCRIPT IS] : ERROR => \", error);\n    });\n  Logger.log(base64image);\n\n  await sendMessageToBackground({\n    intent: \"putHTMLVisualizerToSigned\",\n    htmlVisualizerURL_signed: htmlVisualizerURL,\n    base64image: base64image,\n  });\n  await sendMessageToBackground({\n    intent: \"resetImageRenderHTMLVisualizer\",\n  });\n  await updateDynamo(\n    recordID,\n    url,\n    htmlTransformer,\n    orgId,\n    \"text_\" + recordID + \".txt\",\n    \"markDown_\" + recordID + \".txt\",\n    \"image_\" + recordID + \".png\",\n    delayBetweenExecutions,\n  );\n  htmlVisualizerTimedOut = false;\n}\n","export enum OutputType {\n  OBJECT = \"object\",\n  STRING = \"string\",\n}\nexport enum LogLevel {\n  DEBUG = \"debug\",\n  INFO = \"info\",\n  WARN = \"warn\",\n  ERROR = \"error\",\n  FATAL = \"fatal\",\n  OFF = \"off\",\n}\nexport interface Options {\n  rulesToAddToDocStyle?: string[];\n  cssSelectorsOfIgnoredElements: string[];\n  tagsOfSkippedElementsForChildTreeCssHandling?: string[];\n  attrKeyForSavingElementOrigClass?: string;\n  attrKeyForSavingElementOrigStyle?: string;\n  prefixForNewGeneratedClasses?: string;\n  prefixForNewGeneratedPseudoClasses?: string;\n  imageFormatForDataUrl?: string;\n  imageQualityForDataUrl?: number;\n  logLevel?: LogLevel;\n}\nexport type CaptureOutput = HTMLElement | string | null;\nexport type CaptureFunction = (\n  outputType?: OutputType,\n  htmlDocument?: HTMLDocument,\n  options?: Options,\n) => CaptureOutput;\n","import { LogLevel } from \"./types\";\n\nlet selectedLogLevel: LogLevel = LogLevel.WARN;\n\nconst setLogLevel = (levelName: LogLevel = LogLevel.WARN): void => {\n  selectedLogLevel = levelName;\n};\nconst getLogLevel = (): LogLevel => {\n  return selectedLogLevel;\n};\nconst log = (msg: string, levelName: LogLevel): void => {\n  const logLevelNumbers = [\n    LogLevel.DEBUG,\n    LogLevel.INFO,\n    LogLevel.WARN,\n    LogLevel.ERROR,\n    LogLevel.FATAL,\n    LogLevel.OFF,\n  ];\n  if (\n    logLevelNumbers.indexOf(levelName) >=\n    logLevelNumbers.indexOf(selectedLogLevel)\n  ) {\n    // console.log(\"|h-s-c-js|\" + levelName + \"| \" + msg);\n  }\n};\nconst isDebug = (): boolean => {\n  return selectedLogLevel === LogLevel.DEBUG;\n};\nconst debug = (msg: string): void => {\n  log(msg, LogLevel.DEBUG);\n};\nconst info = (msg: string): void => {\n  log(msg, LogLevel.INFO);\n};\nconst warn = (msg: string): void => {\n  log(msg, LogLevel.WARN);\n};\nconst error = (msg: string): void => {\n  log(msg, LogLevel.ERROR);\n};\nconst fatal = (msg: string): void => {\n  log(msg, LogLevel.FATAL);\n};\n\nexport const logger = {\n  isDebug,\n  setLogLevel,\n  getLogLevel,\n  debug,\n  info,\n  warn,\n  error,\n  fatal,\n};\n","export const utf8Encode = (str: string): string => {\n  const target = str.replace(/\\r\\n/g, \"\\n\");\n  let utfText = \"\";\n  for (let n = 0; n < target.length; n++) {\n    const c = target.charCodeAt(n);\n    if (c < 128) {\n      utfText += String.fromCharCode(c);\n    } else if (c > 127 && c < 2048) {\n      utfText += String.fromCharCode((c >> 6) | 192);\n      utfText += String.fromCharCode((c & 63) | 128);\n    } else {\n      utfText += String.fromCharCode((c >> 12) | 224);\n      utfText += String.fromCharCode(((c >> 6) & 63) | 128);\n      utfText += String.fromCharCode((c & 63) | 128);\n    }\n  }\n  return utfText;\n};\n\nexport const base64Encode = (str: string): string => {\n  let output = \"\";\n  const keyStr =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n  let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n  let i = 0;\n  str = utf8Encode(str);\n  while (i < str.length) {\n    chr1 = str.charCodeAt(i++);\n    chr2 = str.charCodeAt(i++);\n    chr3 = str.charCodeAt(i++);\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n    output =\n      output +\n      keyStr.charAt(enc1) +\n      keyStr.charAt(enc2) +\n      keyStr.charAt(enc3) +\n      keyStr.charAt(enc4);\n  }\n  return output;\n};\n\nexport const uriEncode = (str: string): string => {\n  return (str ? encodeURI(str) : \"\") || \"\";\n};\n","import { CaptureFunction, LogLevel, OutputType } from \"./types\";\nimport { logger } from \"./logger\";\nimport { base64Encode, uriEncode } from \"./encoder\";\n\ninterface CaptureContext {\n  isBody: boolean;\n  baseClass: Map<string, string>;\n  classMap: Map<string, string>;\n  classCount: number;\n  pseudoStyles: Array<string>;\n  pseudoClassCount: number;\n  shouldHandleImgDataUrl: boolean;\n  canvas: HTMLCanvasElement | null;\n  doc: HTMLDocument;\n  ignoredElms: Node[];\n  options: {\n    rulesToAddToDocStyle: string[];\n    cssSelectorsOfIgnoredElements: string[];\n    computedStyleKeyValuePairsOfIgnoredElements: object;\n    tagsOfSkippedElementsForChildTreeCssHandling: string[];\n    attrKeyForSavingElementOrigClass: string;\n    attrKeyForSavingElementOrigStyle: string;\n    prefixForNewGeneratedClasses: string;\n    prefixForNewGeneratedPseudoClasses: string;\n    imageFormatForDataUrl: string;\n    imageQualityForDataUrl: number;\n    logLevel: LogLevel;\n  };\n}\n\nconst getClassName = (domElm: Element): string => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const className: any = (domElm && domElm.className) || \"\";\n  const stringClass =\n    className.toString() === \"[object SVGAnimatedString]\"\n      ? className.baseVal\n      : className;\n  return typeof stringClass === \"string\" ? stringClass : \"\";\n};\n\nconst getClasses = (domElm: Element): string[] => {\n  const className = getClassName(domElm);\n  const classNames = className ? className.split(\" \") : [];\n  return classNames.reduce((result: string[], c: string) => {\n    if (c) {\n      result.push(c);\n    }\n    return result;\n  }, [] as string[]);\n};\n\nconst handleElmCss = (\n  context: CaptureContext,\n  domElm: Element,\n  newElm: Element,\n): void => {\n  const handleOrigClassAndStyle = (): void => {\n    if (newElm !== undefined && newElm !== null) {\n      if (getClasses(newElm).length > 0) {\n        newElm.setAttribute(\n          context.options.attrKeyForSavingElementOrigClass,\n          getClassName(newElm),\n        );\n        newElm.removeAttribute(\"class\");\n      }\n      if (newElm.getAttribute(\"style\")) {\n        newElm.setAttribute(\n          context.options.attrKeyForSavingElementOrigStyle,\n          newElm.getAttribute(\"style\") || \"\",\n        );\n        newElm.removeAttribute(\"style\");\n      }\n    }\n  };\n  const handleRegularElmStyle = (): string => {\n    let classStr = `${context.options.prefixForNewGeneratedClasses}0 `;\n    const computedStyle = getComputedStyle(domElm);\n    for (let i = 0; i < computedStyle.length; i++) {\n      const property = computedStyle.item(i);\n      const value = computedStyle.getPropertyValue(property);\n      if (value !== context.baseClass.get(property)) {\n        const mapKey = property + \":\" + value;\n        let className: string = context.classMap.get(mapKey) || \"\";\n        if (!className) {\n          context.classCount++;\n          className = `${context.options.prefixForNewGeneratedClasses}${context.classCount}`;\n          context.classMap.set(mapKey, className);\n        }\n        classStr += className + \" \";\n      }\n    }\n    return classStr;\n  };\n  const handlePseudoElmsStyle = (): string => {\n    let classStr = \"\";\n    for (const pseudoType of [\"::before\", \"::after\"]) {\n      const computedStyle = getComputedStyle(domElm, pseudoType);\n      if (![\"none\", \"normal\"].includes(computedStyle.content)) {\n        context.pseudoClassCount++;\n        const className = `${context.options.prefixForNewGeneratedPseudoClasses}${context.pseudoClassCount}`;\n        classStr += className + \" \";\n        context.pseudoStyles.push(`.${className}${pseudoType}{`);\n        for (let i = 0; i < computedStyle.length; i++) {\n          const property = computedStyle.item(i);\n          const value = computedStyle.getPropertyValue(property);\n          context.pseudoStyles.push(`${property}:${value};`);\n        }\n        context.pseudoStyles.push(\"}\");\n      }\n    }\n    return classStr;\n  };\n  handleOrigClassAndStyle();\n  let classStr = handleRegularElmStyle();\n  classStr += handlePseudoElmsStyle();\n  if (newElm !== undefined && newElm !== null) {\n    newElm.setAttribute(\"class\", classStr.trim());\n  }\n};\n\nconst getCanvasDataUrl = (\n  context: CaptureContext,\n  domElm: HTMLImageElement | HTMLCanvasElement,\n): string => {\n  let canvasDataUrl = \"\";\n  try {\n    if (!context.canvas) {\n      context.canvas = context.doc.createElement(\"canvas\");\n    }\n    context.canvas.width =\n      domElm instanceof HTMLImageElement\n        ? domElm.naturalWidth\n        : domElm.offsetWidth;\n    context.canvas.height =\n      domElm instanceof HTMLImageElement\n        ? domElm.naturalHeight\n        : domElm.offsetHeight;\n    const ctx = context.canvas.getContext(\"2d\");\n    if (ctx) {\n      ctx.drawImage(domElm, 0, 0);\n    }\n    canvasDataUrl = context.canvas.toDataURL(\n      context.options.imageFormatForDataUrl,\n      context.options.imageQualityForDataUrl,\n    );\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (ex: any) {\n    logger.warn(`getCanvasDataUrl() - ${ex.message}`);\n  }\n  return canvasDataUrl;\n};\n\nconst handleInputElement = (\n  domElm: HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement,\n  newElm: Element,\n): void => {\n  if (newElm !== undefined && newElm !== null) {\n    newElm.setAttribute(\"value\", domElm.value);\n  }\n  if (domElm !== undefined && domElm !== null) {\n    const domType = domElm.getAttribute(\"type\");\n    if (\n      domElm instanceof HTMLInputElement &&\n      (domType === \"checkbox\" || domType === \"radio\")\n    ) {\n      if (domElm.checked) {\n        if (newElm !== undefined && newElm !== null) {\n          (newElm as HTMLInputElement).setAttribute(\"checked\", \"checked\");\n        }\n      } else {\n        newElm.removeAttribute(\"checked\");\n      }\n    } else if (domElm instanceof HTMLTextAreaElement && domElm.value) {\n      (newElm as HTMLInputElement).innerText = domElm.value;\n    } else if (\n      domElm instanceof HTMLSelectElement &&\n      domElm.value &&\n      domElm.children\n    ) {\n      for (let i = domElm.children.length - 1; i >= 0; i--) {\n        if (domElm.children[i].getAttribute(\"value\") === domElm.value) {\n          if (newElm.children[i] !== undefined && newElm.children[i] !== null) {\n            newElm.children[i].setAttribute(\"selected\", \"\");\n          }\n        } else {\n          if (newElm.children[i] !== undefined && newElm.children[i] !== null) {\n            newElm.children[i].removeAttribute(\"selected\");\n          }\n        }\n      }\n    }\n  }\n};\n\nconst handleImageElement = (\n  context: CaptureContext,\n  domElm: HTMLImageElement,\n  newElm: Element,\n): void => {\n  if (context.shouldHandleImgDataUrl) {\n    const imgDataUrl = getCanvasDataUrl(context, domElm);\n    if (imgDataUrl && newElm !== undefined && newElm !== null) {\n      newElm.setAttribute(\"src\", imgDataUrl);\n    }\n  }\n};\n\nconst handleCanvasElement = (\n  context: CaptureContext,\n  domElm: HTMLCanvasElement,\n  newElm: Element,\n): void => {\n  const canvasDataUrl = getCanvasDataUrl(context, domElm);\n  if (canvasDataUrl && newElm !== undefined && newElm !== null) {\n    newElm.setAttribute(\"src\", canvasDataUrl);\n  }\n  if (newElm !== undefined && newElm !== null) {\n    newElm.outerHTML = newElm.outerHTML.replace(/<canvas/g, \"<img\");\n  }\n};\n\nconst shouldIgnoreElm = (context: CaptureContext, domElm: Element): boolean => {\n  if (context.ignoredElms.includes(domElm)) {\n    return true;\n  }\n  const computedStyleKeyValuePairsOfIgnoredElements = Object.entries(\n    context.options.computedStyleKeyValuePairsOfIgnoredElements,\n  );\n  if (\n    context.isBody &&\n    computedStyleKeyValuePairsOfIgnoredElements.length > 0\n  ) {\n    const computedStyle = getComputedStyle(domElm);\n    for (const [k, v] of computedStyleKeyValuePairsOfIgnoredElements) {\n      if (computedStyle.getPropertyValue(k) === v) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nconst recursiveWalk = (\n  context: CaptureContext,\n  domElm: Element,\n  newElm: Element,\n  handleCss: boolean,\n): void => {\n  if (context.isBody) {\n    if (\n      domElm instanceof HTMLInputElement ||\n      domElm instanceof HTMLTextAreaElement ||\n      domElm instanceof HTMLSelectElement\n    ) {\n      handleInputElement(domElm, newElm);\n    } else if (domElm instanceof HTMLImageElement) {\n      handleImageElement(context, domElm, newElm);\n    } else if (domElm instanceof HTMLCanvasElement) {\n      handleCanvasElement(context, domElm, newElm);\n    }\n  }\n  if (handleCss) {\n    handleElmCss(context, domElm, newElm);\n    if (\n      context.options.tagsOfSkippedElementsForChildTreeCssHandling.includes(\n        domElm.tagName.toLowerCase(),\n      )\n    ) {\n      handleCss = false;\n    }\n  }\n  if (domElm.children) {\n    for (let i = domElm.children.length - 1; i >= 0; i--) {\n      if (shouldIgnoreElm(context, domElm.children[i])) {\n        newElm.removeChild(newElm.children[i]);\n      } else {\n        recursiveWalk(\n          context,\n          domElm.children[i],\n          newElm.children[i],\n          handleCss,\n        );\n      }\n    }\n  }\n};\n\nconst createBaseClass = (context: CaptureContext) => {\n  const dummyElm = context.doc.createElement(\"div\");\n  dummyElm.id = \"html-screen-capture-dummy-div\";\n  dummyElm.style[\"display\"] = \"none\";\n  context.doc.body.appendChild(dummyElm);\n  const computedStyle = getComputedStyle(dummyElm);\n  for (let i = 0; i < computedStyle.length; i++) {\n    const property = computedStyle.item(i);\n    const value = computedStyle.getPropertyValue(property);\n    context.baseClass.set(property, value);\n  }\n  context.baseClass.set(\"display\", \"block\");\n  if (dummyElm.parentNode) {\n    dummyElm.parentNode.removeChild(dummyElm);\n  }\n};\n\nconst getIgnoredElms = (context: CaptureContext) => {\n  if (\n    !context.options.cssSelectorsOfIgnoredElements ||\n    !context.options.cssSelectorsOfIgnoredElements.length\n  ) {\n    return [];\n  }\n  const ignoredElms: Node[] = [];\n  context.options.cssSelectorsOfIgnoredElements.forEach((cssSelector) => {\n    const elms = context.doc.documentElement.querySelectorAll(cssSelector);\n    elms.forEach((elm) => {\n      ignoredElms.push(elm);\n    });\n  });\n  return ignoredElms;\n};\n\nconst getHtmlObject = (context: CaptureContext): HTMLElement => {\n  context.ignoredElms = getIgnoredElms(context);\n  const createNewHtml = (): HTMLElement => {\n    const newHtml = context.doc.documentElement.cloneNode(false) as HTMLElement;\n    handleElmCss(context, context.doc.documentElement, newHtml);\n    return newHtml;\n  };\n  const appendNewHead = (newHtml: HTMLElement): void => {\n    const newHead = context.doc.head.cloneNode(true) as HTMLElement;\n    context.isBody = false;\n    recursiveWalk(context, context.doc.head, newHead, false);\n    newHtml.appendChild(newHead);\n  };\n  const appendNewBody = (newHtml: HTMLElement): void => {\n    createBaseClass(context);\n    const newBody = context.doc.body.cloneNode(true) as HTMLElement;\n    context.isBody = true;\n    recursiveWalk(context, context.doc.body, newBody, true);\n    newHtml.appendChild(newBody);\n  };\n  const appendNewStyle = (newHtml: Element): void => {\n    const style = context.doc.createElement(\"style\");\n    let cssText = `.${context.options.prefixForNewGeneratedClasses}0{`;\n    context.baseClass.forEach((v, k) => {\n      cssText += `${k}:${v};`;\n    });\n    cssText += \"}\";\n    context.classMap.forEach((v, k) => {\n      cssText += `.${v}{${k}}`;\n    });\n    cssText += context.pseudoStyles.join(\"\");\n    cssText += context.options.rulesToAddToDocStyle.join(\"\");\n    style.appendChild(context.doc.createTextNode(cssText));\n    newHtml.children[0].appendChild(style);\n  };\n  const newHtml = createNewHtml();\n  appendNewHead(newHtml);\n  appendNewBody(newHtml);\n  appendNewStyle(newHtml);\n  return newHtml;\n};\n\nconst prepareOutput = (\n  newHtmlObject: HTMLElement,\n  outputType: OutputType,\n): string | HTMLElement => {\n  let output: string | HTMLElement | null = null;\n  if (outputType === OutputType.OBJECT) {\n    output = newHtmlObject;\n  } else {\n    const outerHtml = (newHtmlObject ? newHtmlObject.outerHTML : \"\") || \"\";\n    if (outerHtml) {\n      if (outputType === OutputType.STRING) {\n        output = outerHtml;\n      } else if (outputType === \"uri\") {\n        //support for a deprecated value\n        output = uriEncode(outerHtml);\n      } else if (outputType === \"base64\") {\n        //support for a deprecated value\n        output = base64Encode(outerHtml);\n      }\n    }\n    output = output || \"\";\n  }\n  if (logger.isDebug()) {\n    logger.debug(\n      `output: ${output instanceof HTMLElement ? output.outerHTML : output}`,\n    );\n  }\n  return output;\n};\n\nexport const goCapture: CaptureFunction = (\n  outputType?,\n  htmlDocument?,\n  options?,\n) => {\n  const startTime = new Date().getTime();\n  let output: string | HTMLElement | null = null;\n  const context: CaptureContext = {\n    isBody: false,\n    baseClass: new Map<string, string>(),\n    classMap: new Map<string, string>(),\n    classCount: 0,\n    pseudoStyles: [],\n    pseudoClassCount: 0,\n    shouldHandleImgDataUrl: true,\n    canvas: null,\n    doc: htmlDocument || document,\n    ignoredElms: [],\n    options: {\n      ...{\n        rulesToAddToDocStyle: [],\n        cssSelectorsOfIgnoredElements: [\"script\", \"link\", \"style\"],\n        computedStyleKeyValuePairsOfIgnoredElements: { display: \"none\" },\n        tagsOfSkippedElementsForChildTreeCssHandling: [\"svg\"],\n        attrKeyForSavingElementOrigClass: \"_class\",\n        attrKeyForSavingElementOrigStyle: \"_style\",\n        prefixForNewGeneratedClasses: \"c\",\n        prefixForNewGeneratedPseudoClasses: \"p\",\n        imageFormatForDataUrl: \"image/png\",\n        imageQualityForDataUrl: 0.92,\n        logLevel: LogLevel.WARN,\n      },\n      ...(options || {}),\n    },\n  };\n  try {\n    logger.setLogLevel(context.options.logLevel);\n    const newHtmlObject = getHtmlObject(context);\n    output = prepareOutput(newHtmlObject, outputType || OutputType.OBJECT);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (ex: any) {\n    logger.error(`goCapture() - error - ${ex.message}`);\n  } finally {\n    logger.info(`goCapture() - end - ${new Date().getTime() - startTime}ms`);\n  }\n  return output;\n};\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport {\n  OutputType,\n  LogLevel,\n  Options,\n  CaptureOutput,\n  CaptureFunction,\n} from \"./types\";\nimport { goCapture } from \"./capturer\";\n\nexport {\n  OutputType,\n  LogLevel,\n  Options,\n  CaptureOutput,\n  CaptureFunction,\n} from \"./types\";\nexport const capture: CaptureFunction = (\n  outputType?,\n  htmlDocument?,\n  options?,\n) => {\n  return goCapture(outputType, htmlDocument, options);\n};\n","import { tellToDeleteIframe } from \"../message-background\";\nimport { getIdentifier } from \"../../utils/identity-helpers\";\nimport { Logger } from \"../../logger/logger\";\nimport { sendMessageToBackground } from \"../../utils/messaging-helpers\";\nimport {\n  checkThroughFilters,\n  getS3SignedUrls,\n} from \"../contained-visualizer-helpers\";\nimport { capture, OutputType } from \"../../htmlVisualizer/src\";\nimport { getFromRequestInfoStorage } from \"../../request-info/request-info-helpers\";\nimport { getFromRequestMessageStorage } from \"../../request-message/request-message-helpers\";\n\nasync function tellEC2ToRender(\n  recordID: string,\n  url: string,\n  htmlTransformer: string,\n  orgId: string,\n  delayBetweenExecutions: number = 500,\n) {\n  Logger.log(\" tellEC2ToRender - Rendering \");\n  Logger.log(\"RecordID:\", recordID);\n  Logger.log(\"URL:\", url);\n  Logger.log(\"HTML Transformer:\", htmlTransformer);\n  Logger.log(\"OrgID:\", orgId);\n  Logger.log(\"Delay Between Executions:\", delayBetweenExecutions);\n\n  getIdentifier().then(async (node_identifier: string) => {\n    let endpoint: string =\n      \"https://mjkrxoav2cqz3dtgn6ttcyxeua0mqpul.lambda-url.us-east-1.on.aws/\";\n    let requestMessageInfo = await getFromRequestMessageStorage(recordID);\n    if (requestMessageInfo && requestMessageInfo.ec2_render_endpoint) {\n      Logger.log(\n        \"Using ec2_render_endpoint from requestMessageInfo:\",\n        requestMessageInfo.ec2_render_endpoint,\n      );\n      endpoint = requestMessageInfo.ec2_render_endpoint;\n    }\n\n    let moreInfo: any = await getFromRequestInfoStorage(recordID);\n    Logger.log(\"[tellEC2ToRender] => More Info:\", moreInfo);\n    const bodyData = {\n      recordID: recordID,\n      url: url,\n      htmlTransformer: htmlTransformer,\n      orgId: orgId,\n      node_identifier: node_identifier,\n      final_url: window.location.href,\n      statusCode: moreInfo.statusCode,\n    };\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"text/plain\" },\n      body: JSON.stringify(bodyData),\n    };\n\n    fetch(endpoint, requestOptions)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"[tellEC2ToRender]:Network response was not ok\");\n        }\n        return response.json();\n      })\n      .then((data) => {\n        Logger.log(\"[tellEC2ToRender]: Response from server:\", data);\n        return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n      })\n      .catch((error) => {\n        Logger.error(\"[tellEC2ToRender]: Error:\", error);\n        return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n      });\n  });\n}\n\nexport async function saveWithContained(\n  recordID: string,\n  content: string,\n  markDown: string,\n  url: string,\n  htmlTransformer: string,\n  orgId: string,\n  second_document_string: string,\n  not_in_iframe: boolean = false,\n  delayBetweenExecutions: number = 500,\n  openTabOnlyIfMust: boolean = false,\n) {\n  Logger.log(\"  saveWithContained - Saving Crawl . RecordID:\", recordID);\n  // first pass through filters\n  let isValid = await checkThroughFilters(url, second_document_string, orgId);\n  if (!isValid) {\n    Logger.log(\"URL did not pass through filters\");\n    return tellToDeleteIframe(recordID, false, delayBetweenExecutions);\n  }\n  let signedUrls = await getS3SignedUrls(recordID);\n  let htmlContainedURL = signedUrls.uploadURL_html_contained;\n  let htmlURL = signedUrls.uploadURL_html;\n  let markDownURL = signedUrls.uploadURL_markDown;\n\n  await sendMessageToBackground({\n    intent: \"putHTMLToSigned\",\n    htmlURL_signed: htmlURL,\n    content: content,\n  });\n  await sendMessageToBackground({\n    intent: \"putMarkdownToSigned\",\n    markdownURL_signed: markDownURL,\n    markDown: markDown,\n  });\n\n  // after that, attempt to visualize the HTML\n  await sendMessageToBackground({\n    intent: \"fixImageRenderHTMLVisualizer\",\n  });\n\n  Logger.log(\"Attempting to visualize CONTAINED HTML...\");\n  Logger.log(\"##########################################\");\n  // before capturing, scroll down 5 times, smoothly\n  if (!not_in_iframe) {\n    for (let i = 0; i < 5; i++) {\n      window.scrollTo({\n        top: window.innerHeight * i,\n        behavior: \"smooth\",\n      });\n    }\n    // scroll to top and capture\n    for (let i = 0; i < 5; i++) {\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\",\n      });\n    }\n  }\n\n  const capturedHtml = capture(OutputType.STRING, window.document);\n  Logger.log(capturedHtml);\n  Logger.log(\"##########################################\");\n\n  await sendMessageToBackground({\n    intent: \"putHTMLContainedToSigned\",\n    htmlContainedURL_signed: htmlContainedURL,\n    htmlContainedString: not_in_iframe ? content : capturedHtml,\n  });\n  await sendMessageToBackground({\n    intent: \"resetImageRenderHTMLVisualizer\",\n  });\n  await tellEC2ToRender(\n    recordID,\n    url,\n    htmlTransformer,\n    orgId,\n    delayBetweenExecutions,\n  );\n}\n","import { Logger } from \"../logger/logger\";\n\nexport interface FormField {\n  name: string;\n  value: string;\n}\n\nexport interface Action {\n  type: string;\n  [key: string]: any;\n}\n\nexport function executeActions(\n  actions: Action[],\n  document: Document,\n): Promise<void> {\n  return new Promise((resolve) => {\n    let index = 0;\n\n    function executeNextAction() {\n      if (index >= actions.length) {\n        resolve();\n        return;\n      }\n\n      const action = actions[index];\n      index++;\n\n      switch (action.type) {\n        case \"wait\":\n          setTimeout(executeNextAction, action.milliseconds);\n          break;\n\n        case \"click\":\n          const clickElement = document.querySelector<HTMLElement>(\n            action.selector,\n          );\n          if (clickElement) {\n            if (\n              /**\n               * Prevents triggering a download in the user's browser. See discussion: https://discord.com/channels/1221455179619106887/1221893620710375425/1325847913263267861\n               *\n               * If the crawler clicks on a link with the 'download' attribute, the browser doesn't open the file in a new tab. Instead, it tries to download the file.\n               * This likely triggered a download in the user's browser. It also explains why this issue happens only rarely since the download attribute isn't commonly used.\n               *\n               * MDN: \"The HTMLAnchorElement.download property is a string indicating that the linked resource is intended to be downloaded\n               * rather than displayed in the browser.\"\n               *\n               *\n               */\n              clickElement instanceof HTMLAnchorElement &&\n              clickElement.hasAttribute(\"download\")\n            ) {\n              clickElement.removeAttribute(\"download\");\n            }\n\n            clickElement.click();\n          }\n          executeNextAction();\n          break;\n\n        case \"write\":\n          const activeElement = document.activeElement as\n            | HTMLInputElement\n            | HTMLTextAreaElement;\n          if (activeElement && \"value\" in activeElement) {\n            const start = activeElement.selectionStart || 0;\n            const end = activeElement.selectionEnd || 0;\n            activeElement.value =\n              activeElement.value.substring(0, start) +\n              action.text +\n              activeElement.value.substring(end);\n            activeElement.selectionStart = activeElement.selectionEnd =\n              start + action.text.length;\n          }\n          executeNextAction();\n          break;\n\n        case \"fill_input\":\n          const inputElement = document.querySelector(\n            action.selector,\n          ) as HTMLInputElement;\n          if (inputElement) {\n            inputElement.value = action.value;\n          }\n          executeNextAction();\n          break;\n\n        case \"fill_textarea\":\n          const textareaElement = document.querySelector(\n            action.selector,\n          ) as HTMLTextAreaElement;\n          if (textareaElement) {\n            textareaElement.value = action.value;\n          }\n          executeNextAction();\n          break;\n\n        case \"select\":\n          const selectElement = document.querySelector(\n            action.selector,\n          ) as HTMLSelectElement;\n          if (selectElement) {\n            selectElement.value = action.value;\n          }\n          executeNextAction();\n          break;\n\n        case \"fill_form\":\n          const formElement = document.querySelector(\n            action.selector,\n          ) as HTMLFormElement;\n          if (formElement) {\n            const formData = new FormData(formElement);\n            action.fields.forEach((field: FormField) => {\n              formData.set(field.name, field.value);\n            });\n          }\n          executeNextAction();\n          break;\n\n        case \"press\":\n          const event = new KeyboardEvent(\"keydown\", { key: action.key });\n          document.dispatchEvent(event);\n          executeNextAction();\n          break;\n\n        case \"scroll\":\n          window.scrollBy({\n            top: action.direction === \"up\" ? -action.amount : action.amount,\n            left:\n              action.direction === \"left\"\n                ? -action.amount\n                : action.direction === \"right\"\n                  ? action.amount\n                  : 0,\n            behavior: \"smooth\",\n          });\n          executeNextAction();\n          break;\n\n        default:\n          Logger.warn(`Unknown action type: ${action.type}`);\n          executeNextAction();\n      }\n    }\n\n    executeNextAction();\n  });\n}\n","import { isPdfEmbedElementPresent } from \"./check-pdf\";\nimport {\n  get_document_html,\n  removeElementsByClassNames,\n  removeImagesDOM,\n  removeSelectorsFromDocument,\n} from \"./dom-processing\";\nimport { saveCrawl } from \"./save/save-crawl\";\nimport { TurndownService } from \"../turndown/turndown\";\nimport { extractTextFromPDF } from \"../pdf/pdf-getter\";\nimport { Logger } from \"../logger/logger\";\nimport { saveWithVisualizer } from \"./save/save-with-visualizer\";\nimport { saveWithContained } from \"./save/save-with-contained\";\nimport { Action, executeActions } from \"./actions\";\nexport async function initCrawl(event: MessageEvent, shouldDispatch: boolean) {\n  window.addEventListener(\"message\", async function (event) {\n    initCrawlHelper(event, 0);\n  });\n  if (shouldDispatch) {\n    window.dispatchEvent(\n      new MessageEvent(\"message\", {\n        data: event.data,\n      }),\n    );\n  }\n}\n\nfunction initCrawlHelper(event: MessageEvent, numTries: number) {\n  let isMCrawl = event.data.isMCrawl;\n  if (isMCrawl) {\n    let recordID = event.data.recordID;\n    let removeCSSselectors = event.data.removeCSSselectors;\n    let classNamesToBeRemoved = event.data.classNamesToBeRemoved;\n    let fastLane = event.data.hasOwnProperty(\"fastLane\")\n      ? event.data.fastLane\n      : false;\n    let url_to_crawl = event.data.hasOwnProperty(\"url_to_crawl\")\n      ? event.data.url_to_crawl\n      : \"\";\n    let htmlTransformer = event.data.hasOwnProperty(\"htmlTransformer\")\n      ? event.data.htmlTransformer\n      : \"none\";\n    let removeImages = event.data.hasOwnProperty(\"removeImages\")\n      ? event.data.removeImages.toString().toLowerCase() === \"true\"\n      : false;\n    let htmlVisualizer: boolean = event.data.hasOwnProperty(\"htmlVisualizer\")\n      ? event.data.htmlVisualizer.toString().toLowerCase() === \"true\"\n      : true;\n    let htmlContained: boolean = event.data.hasOwnProperty(\"htmlContained\")\n      ? event.data.htmlContained.toString().toLowerCase() === \"true\"\n      : false;\n    let actions: Action[] = event.data.hasOwnProperty(\"actions\")\n      ? JSON.parse(event.data.actions)\n      : [];\n    let saveHtml: boolean = event.data.hasOwnProperty(\"saveHtml\")\n      ? event.data.saveHtml.toString().toLowerCase() === \"true\"\n      : false;\n    let saveMarkdown: boolean = event.data.hasOwnProperty(\"saveMarkdown\")\n      ? event.data.saveMarkdown.toString().toLowerCase() === \"true\"\n      : false;\n    let cerealObject: string = event.data.hasOwnProperty(\"cerealObject\")\n      ? event.data.cerealObject\n      : \"{}\";\n    let rawData: boolean = event.data.hasOwnProperty(\"rawData\")\n      ? event.data.rawData.toString().toLowerCase() === \"true\"\n      : false;\n\n    let waitBeforeScraping = parseInt(event.data.waitBeforeScraping);\n    Logger.log(\"[initCrawl]: waitBeforeScraping \" + waitBeforeScraping);\n    Logger.log(\"[initCrawl]: rawData \" + rawData);\n    setTimeout(async () => {\n      let document_to_use = document;\n      let url_check_pdf = window.location.href;\n      let isPDF = url_check_pdf.includes(\"?\")\n        ? url_check_pdf.split(\"?\")[0].endsWith(\".pdf\")\n        : url_check_pdf.endsWith(\".pdf\");\n      if (!isPDF) isPDF = isPdfEmbedElementPresent();\n      let orgId = event.data.hasOwnProperty(\"orgId\") ? event.data.orgId : \"\";\n      let saveText = event.data.hasOwnProperty(\"saveText\")\n        ? event.data.saveText\n        : false;\n\n      let fetchInstead = event.data.hasOwnProperty(\"fetchInstead\")\n        ? event.data.fetchInstead.toString().toLowerCase() === \"true\"\n        : false;\n      if (fetchInstead) {\n        let response = await fetch(window.location.href);\n        let html = await response.text();\n        let parser = new DOMParser();\n        document_to_use = parser.parseFromString(html, \"text/html\");\n      }\n      if (actions.length > 0) {\n        await executeActions(actions, document_to_use);\n      }\n\n      await processCrawl(\n        recordID,\n        isPDF,\n        event,\n        numTries,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        fastLane,\n        saveText,\n        removeCSSselectors,\n        classNamesToBeRemoved,\n        document_to_use,\n        htmlVisualizer,\n        htmlContained,\n        removeImages,\n        saveHtml,\n        saveMarkdown,\n        cerealObject,\n        rawData,\n      );\n    }, waitBeforeScraping);\n  }\n}\n\nasync function processCrawl(\n  recordID: string,\n  isPDF: boolean,\n  event: MessageEvent,\n  numTries: number,\n  url_to_crawl: string,\n  htmlTransformer: string,\n  orgId: string,\n  fastLane: boolean,\n  saveText: string,\n  removeCSSselectors: string,\n  classNamesToBeRemoved: string[],\n  document_to_use: Document,\n  htmlVisualizer: boolean,\n  htmlContained: boolean,\n  removeImages: boolean,\n  saveHtml: boolean,\n  saveMarkdown: boolean,\n  cerealObject: string,\n  rawData: boolean,\n) {\n  if (removeCSSselectors === \"default\") {\n    removeSelectorsFromDocument(document_to_use, []);\n  } else if (removeCSSselectors !== \"\" && removeCSSselectors !== \"none\") {\n    try {\n      let selectors = JSON.parse(removeCSSselectors);\n      removeSelectorsFromDocument(document_to_use, selectors);\n    } catch (e) {\n      Logger.error(\"[initCrawl ] : Error parsing removeCSSselectors =>\", e);\n    }\n  }\n\n  let second_document_string: string = \"\";\n  if (htmlVisualizer || htmlContained) {\n    let second_document = document_to_use.cloneNode(true) as Document;\n    removeSelectorsFromDocument(second_document, []);\n    second_document_string = get_document_html(\"\\n\", second_document);\n    second_document_string = second_document_string\n      .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n      .replace(/\\\\t/gm, \"\");\n  }\n\n  if (classNamesToBeRemoved.length > 0)\n    removeElementsByClassNames(classNamesToBeRemoved);\n  if (removeImages) removeImagesDOM(document_to_use);\n\n  let doc_string = get_document_html(\"\\n\", document_to_use);\n  doc_string = doc_string.replace(/(\\r\\n|\\n|\\r)/gm, \"\").replace(/\\\\t/gm, \"\");\n\n  Logger.log(\"[] : Sending data to server...\");\n  Logger.log(\"[] : recordID => \" + recordID);\n  let markDown;\n  if (!isPDF) {\n    if (saveMarkdown || htmlVisualizer || htmlContained) {\n      let turnDownService = new (TurndownService as any)({});\n      markDown = turnDownService.turndown(\n        document_to_use.documentElement.outerHTML,\n      );\n      Logger.log(\"[] : markDown => \" + markDown);\n    } else {\n      markDown = \"\";\n    }\n\n    if ((markDown.trim() === \"\" || markDown === \"null\") && numTries < 4) {\n      Logger.log(\"[initCrawl ] : markDown is empty. RESETTING\");\n      setTimeout(() => {\n        initCrawlHelper(event, numTries + 1);\n      }, 2000);\n    } else {\n      if (htmlVisualizer) {\n        // SPECIAL LOGIC FOR HTML VISUALIZER\n        await saveWithVisualizer(\n          recordID,\n          doc_string,\n          markDown,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          second_document_string,\n        );\n      } else if (htmlContained) {\n        // SPECIAL LOGIC FOR HTML CONTAINED\n        await saveWithContained(\n          recordID,\n          doc_string,\n          markDown,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          second_document_string,\n          false,\n        );\n      } else {\n        saveCrawl(\n          recordID,\n          doc_string,\n          markDown,\n          fastLane,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          saveText,\n          saveHtml,\n          saveMarkdown,\n          event.data.hasOwnProperty(\"BATCH_execution\")\n            ? event.data.BATCH_execution\n            : false,\n          event.data.hasOwnProperty(\"batch_id\") ? event.data.batch_id : \"\",\n          false,\n          500,\n          false,\n          cerealObject,\n        );\n      }\n    }\n  } else {\n    Logger.log(\"[initCrawl ] : it's a PDF\");\n    let text: string = await extractTextFromPDF(url_to_crawl, rawData);\n    Logger.log(\"[initCrawl ] : text => \" + text);\n    if (htmlVisualizer) {\n      // SPECIAL LOGIC FOR HTML VISUALIZER\n      await saveWithVisualizer(\n        recordID,\n        text,\n        text,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        second_document_string,\n      );\n    } else if (htmlContained) {\n      // SPECIAL LOGIC FOR HTML CONTAINED\n      await saveWithContained(\n        recordID,\n        text,\n        text,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        second_document_string,\n        false,\n      );\n    } else {\n      saveCrawl(\n        recordID,\n        text,\n        text,\n        fastLane,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        saveText,\n        saveHtml,\n        saveMarkdown,\n        event.data.hasOwnProperty(\"BATCH_execution\")\n          ? event.data.BATCH_execution\n          : false,\n        event.data.hasOwnProperty(\"batch_id\") ? event.data.batch_id : \"\",\n        false,\n        500,\n        false,\n        cerealObject,\n      );\n    }\n  }\n}\n","export function muteIframe(): void {\n  // For iframes, we don't want to play any audio or video\n  // Mute and pause all existing video and audio elements\n  const videos: HTMLCollectionOf<HTMLVideoElement> =\n    document.getElementsByTagName(\"video\");\n  const audios: HTMLCollectionOf<HTMLAudioElement> =\n    document.getElementsByTagName(\"audio\");\n\n  for (let i = 0; i < videos.length; i++) {\n    videos[i].muted = true;\n    videos[i].pause();\n  }\n\n  for (let i = 0; i < audios.length; i++) {\n    audios[i].muted = true;\n    audios[i].pause();\n  }\n\n  new MutationObserver((mutationsList, _observer) => {\n    // Iterate over all mutations that just occurred\n    for (const mutation of mutationsList) {\n      // If the addedNodes property has one or more nodes\n      for (let i = 0; i < mutation.addedNodes.length; i++) {\n        const addedNode = mutation.addedNodes[i];\n        // Check if the added node is an Element and if it's a video or audio element\n        if (\n          addedNode instanceof Element &&\n          (addedNode.tagName === \"VIDEO\" || addedNode.tagName === \"AUDIO\")\n        ) {\n          // If so, mute and pause the media element\n          (addedNode as HTMLMediaElement).muted = true;\n          (addedNode as HTMLMediaElement).pause();\n        }\n      }\n    }\n  }).observe(document, { childList: true, subtree: true });\n}\n","export function executeFunctionIfOrWhenBodyExists(func: Function): void {\n  if (document.body) {\n    func();\n  } else {\n    new MutationObserver((_, observer) => {\n      const { body } = document;\n      if (!body) return;\n      observer.disconnect();\n      func();\n    }).observe(document.documentElement, { childList: true });\n  }\n}\n","import { Logger } from \"../logger/logger\";\nexport function safeRenderIframe(): boolean {\n  try {\n    // Override the alert, prompt and confirm functions\n    window.alert = function () {\n      return null;\n    };\n    window.confirm = function () {\n      return false;\n    };\n    window.print = function () {\n      return false;\n    };\n    window.prompt = function () {\n      return null;\n    };\n    overWriteBlank();\n    return true;\n  } catch (e) {\n    Logger.log(\"Error in safeRenderIframe => \" + e);\n    return false;\n  }\n}\n\nfunction overWriteBlank(): boolean {\n  try {\n    var originalWindowOpen = window.open;\n    // Override the window.open method\n    window.open = function (url, windowName, windowFeatures) {\n      // Change the windowName to '_self' to always open in the same window/tab\n      windowName = \"_self\"; // This forces it to open in the same window\n      // Call the original window.open method with new arguments\n      return originalWindowOpen(url, windowName, windowFeatures);\n    };\n    return true;\n  } catch (e) {\n    Logger.log(\"Error in overWriteBlank => \" + e);\n    return false;\n  }\n}\n","import { inIframe } from \"../utils/iframe-helpers\";\nimport {\n  DynamicSelector,\n  getSelectorInfo,\n  waitForElementDynamicSelector,\n} from \"./evaluate-selector\";\nimport { Logger } from \"../logger/logger\";\nimport { initCrawl } from \"./init-crawl\";\nimport { muteIframe } from \"./mute-iframe\";\nimport { executeFunctionIfOrWhenBodyExists } from \"../utils/document-body-observer\";\nimport { safeRenderIframe } from \"./safe-render\";\n\nlet alreadyReplied: boolean = false;\n\nexport function listenerAlive() {\n  if (typeof window !== \"undefined\") {\n    window.addEventListener(\"message\", (event) => {\n      if (event.data.isContentScriptAlive) {\n        muteIframe();\n        window.parent.postMessage(\n          { isIframeAlive: true, recordID: event.data.recordID },\n          \"*\",\n        );\n      }\n    });\n  }\n}\n\nexport function attachMutationObserver() {\n  executeFunctionIfOrWhenBodyExists(() => {\n    initIframeListeners();\n  });\n}\n\nfunction initIframeListeners() {\n  if (typeof window === \"undefined\") return;\n  safeRenderIframe();\n  if (inIframe()) {\n    window.addEventListener(\"message\", initialEventListener);\n  }\n}\n\nexport async function initialEventListener(event: MessageEvent) {\n  let isMCrawl = event.data.isMCrawl;\n  if (isMCrawl && !alreadyReplied) {\n    window.parent.postMessage(\n      { isMReply: true, recordID: event.data.recordID },\n      \"*\",\n    );\n    alreadyReplied = true;\n    let waitForElement = event.data.hasOwnProperty(\"waitForElement\")\n      ? event.data.waitForElement\n      : \"none\";\n    let waitForElementTime = event.data.hasOwnProperty(\"waitForElementTime\")\n      ? parseInt(event.data.waitForElementTime)\n      : 0;\n    window.removeEventListener(\"message\", initialEventListener);\n\n    if (waitForElement === \"none\") {\n      Logger.log('waitForElement === \"none\"');\n      await initCrawl(event, true);\n    } else {\n      let safeEvalSelector = getSelectorInfo(waitForElement);\n      Logger.log(\n        \"[initialEventListener] : safeEvalSelector => \",\n        safeEvalSelector,\n      );\n      if (!safeEvalSelector) return;\n      waitForElementDynamicSelector(\n        safeEvalSelector.dSelectorToUse as DynamicSelector,\n        safeEvalSelector.selectorId,\n        safeEvalSelector.index,\n        80000,\n      )\n        .then(() => {\n          setTimeout(async () => {\n            await initCrawl(event, true);\n          }, waitForElementTime * 1000);\n        })\n        .catch(() => {\n          Logger.log(\"[DOM_getter] : waitForElement_ELEMENT => catch\");\n        });\n    }\n  }\n}\n","import { resetAfterCrawl } from \"../content-script/reset-crawl\";\nimport { CEREAL_FRAME_ID, DATA_ID_IFRAME } from \"../constants\";\nimport { hideBadgeIfShould } from \"../transparency/badge-settings\";\nimport { getSharedMemoryDOM } from \"../content-script/shared-memory\";\nimport { getIfCurrentlyActiveDOM } from \"../elements/elements-utils\";\nimport { getIdentifier } from \"../utils/identity-helpers\";\nimport { startConnectionWs } from \"../content-script/websocket\";\nimport {\n  preProcessCrawl,\n  proceedWithActivation,\n} from \"../content-script/execute-crawl\";\nimport { Logger } from \"../logger/logger\";\nimport { initCerealFrame } from \"../cereal/cereal-utils\";\nimport { CerealFrameMessage, CerealResponse } from \"../cereal/cereal-types\";\n\nexport async function setUpContentScriptListeners() {\n  // Global map to store pending request resolvers\n  const pendingCerealRequests = new Map();\n\n  // Single event listener for all cereal frame responses\n  window.addEventListener(\"message\", (event) => {\n    // check if event is the one we are listening for\n    Logger.log(\"[RECEIVED CEREAL? event.data] : \", event.data);\n    let eventType = event.data?.type;\n    if (eventType === \"CEREAL_RESPONSE\") {\n      let cerealFrame = document.getElementById(\n        CEREAL_FRAME_ID,\n      ) as HTMLIFrameElement;\n      if (!cerealFrame) return;\n      if (event.source === cerealFrame.contentWindow) {\n        const recordID = event.data.recordID;\n        const json = event.data.json;\n        if (recordID && pendingCerealRequests.has(recordID)) {\n          Logger.log(\"[RECEIVED CEREAL] with recordID : \", recordID);\n          const resolve = pendingCerealRequests.get(recordID);\n          resolve({ success: true, data: json });\n          pendingCerealRequests.delete(recordID);\n        }\n      }\n    }\n  });\n  chrome.runtime.onMessage.addListener(\n    function (request, sender, sendResponse) {\n      (function () {\n        if (request.target !== \"contentScriptM\") return false;\n        if (request.intent === \"deleteIframeM\") {\n          let recordID = request.recordID;\n          let iframe: HTMLElement | null = document.getElementById(recordID);\n          let dataId: string = iframe?.getAttribute(\"data-id\") || \"\";\n          let divIframe: HTMLElement | null = document.getElementById(\n            \"div-\" + recordID,\n          );\n          if (iframe) iframe.remove();\n          if (divIframe) divIframe.remove();\n          resetAfterCrawl(\n            recordID,\n            request.BATCH_execution,\n            request.delayBetweenExecutions,\n          ).then(async () => {\n            if (dataId === DATA_ID_IFRAME) {\n              await hideBadgeIfShould();\n            }\n          });\n        }\n        if (request.intent === \"getSharedMemoryDOM\") {\n          getSharedMemoryDOM(request.key).then(sendResponse);\n        }\n        if (request.intent === \"getIfCurrentlyActiveDOM\") {\n          getIfCurrentlyActiveDOM().then(sendResponse);\n        }\n        if (request.intent === \"startConnectionM\") {\n          getIdentifier().then((identifier: string) => {\n            startConnectionWs(identifier);\n          });\n        }\n        if (request.intent === \"handleHTMLVisualizer\") {\n          proceedWithActivation(\n            request.url,\n            request.recordID,\n            JSON.parse(request.eventData),\n            request.waitForElement,\n            request.shouldSandbox,\n            request.sandBoxAttributes,\n            request.BATCH_execution,\n            request.batch_id,\n            request.triggersDownload,\n            request.skipHeaders,\n            request.hostname,\n            true,\n            false,\n            request.screenWidth,\n            request.screenHeight,\n            request.POST_request,\n            request.GET_request,\n            request.method_endpoint,\n            request.method_payload,\n            request.method_headers,\n            request.actions,\n            request.delayBetweenExecutions,\n            request.openTab,\n            request.openTabOnlyIfMust,\n            request.pascoli,\n            request.cerealObject,\n            request.refPolicy,\n            true, // to break the loop\n          ).then(() => {\n            sendResponse(\"success\");\n          });\n        }\n        if (request.intent === \"handleHTMLContained\") {\n          proceedWithActivation(\n            request.url,\n            request.recordID,\n            JSON.parse(request.eventData),\n            request.waitForElement,\n            request.shouldSandbox,\n            request.sandBoxAttributes,\n            request.BATCH_execution,\n            request.batch_id,\n            request.triggersDownload,\n            request.skipHeaders,\n            request.hostname,\n            false,\n            true,\n            request.screenWidth,\n            request.screenHeight,\n            request.POST_request,\n            request.GET_request,\n            request.method_endpoint,\n            request.method_payload,\n            request.method_headers,\n            request.actions,\n            request.delayBetweenExecutions,\n            request.openTab,\n            request.openTabOnlyIfMust,\n            request.pascoli,\n            request.cerealObject,\n            request.refPolicy,\n            true, // to break the loop\n          ).then(() => {\n            sendResponse(\"success\");\n          });\n        }\n        if (request.intent === \"processCrawl\") {\n          processCrawl(\n            request.recordID,\n            false,\n            new MessageEvent(\"message\", { data: {} }),\n            0,\n            request.method_endpoint,\n            \"none\",\n            request.orgId,\n            request.fastLane,\n            \"false\",\n            request.removeCSSselectors,\n            JSON.parse(request.classNamesToBeRemoved),\n            request.html_string,\n            request.htmlVisualizer,\n            request.htmlContained,\n            request.removeImages.toString() === \"true\",\n            request.BATCH_execution.toString() === \"true\",\n            request.batch_id,\n            request.delayBetweenExecutions,\n            request.openTab,\n            request.openTabOnlyIfMust,\n            request.saveHtml,\n            request.saveMarkdown,\n            request.cerealObject,\n            request.refPolicy,\n          ).then(() => {\n            sendResponse(\"success\");\n          });\n        }\n        if (request.intent === \"preProcessCrawl\") {\n          sendResponse(\"success\");\n          Logger.log(\"[setUpContentScriptListeners] : preProcessCrawl\");\n          let data = JSON.parse(request.data);\n          let BATCH_execution = request.BATCH_execution;\n          let batch_id = request.batch_id;\n          let parallelExecutionsBatch: number = request.parallelExecutionsBatch;\n          let delayBetweenExecutions: number = request.delayBetweenExecutions;\n          preProcessCrawl(\n            data,\n            BATCH_execution,\n            batch_id,\n            parallelExecutionsBatch,\n            delayBetweenExecutions,\n          ).then(() => {\n            sendResponse(\"success\");\n          });\n        }\n        if (request.intent === \"ping\") {\n          Logger.log(\"[] : ping received, replying...\");\n          sendResponse({\n            status: \"ready\",\n          });\n        }\n        if (request.intent === \"triggerEventListener\") {\n          Logger.log(\"[] : triggerEventListener...\");\n          import(\"../iframe/mutation-observer\").then(\n            (initialEventListenerModule) => {\n              let event = new MessageEvent(\"message\", {\n                data: JSON.parse(request.data),\n              });\n              initialEventListenerModule\n                .initialEventListener(event)\n                .then(() => {\n                  sendResponse();\n                });\n            },\n          );\n        }\n        if (request.intent === \"resetAfterCrawl\") {\n          resetAfterCrawl(\n            request.recordID,\n            request.BATCH_execution,\n            request.delayBetweenExecutions,\n          ).then(() => {\n            sendResponse(\"success\");\n          });\n        }\n        if (request.intent === \"mllwtl_initCerealFrame\") {\n          Logger.log(\"[greeting] : \", \"mllwtl_initCerealFrame\");\n          initCerealFrame(request.cerealObject).then((result) => {\n            sendResponse(result);\n          });\n        }\n        if (request.intent === \"mllwtl_processCereal\") {\n          Logger.log(\"[greeting] : \", \"mllwtl_processCereal\");\n          let frame = document.getElementById(CEREAL_FRAME_ID);\n\n          const processFrame = (iframeElement: HTMLIFrameElement) => {\n            const { recordID, htmlString, cerealObject } = request;\n            Logger.log(\"[PROCESS_CEREAL => recordID] : \", recordID);\n\n            return new Promise<CerealResponse>((resolve) => {\n              pendingCerealRequests.set(recordID, resolve);\n\n              iframeElement.contentWindow?.postMessage(\n                {\n                  type: \"PROCESS_DOCUMENT\",\n                  recordID: recordID,\n                  htmlString: htmlString,\n                  cerealObject:\n                    typeof cerealObject === \"string\"\n                      ? cerealObject\n                      : JSON.stringify(cerealObject),\n                } as CerealFrameMessage,\n                \"*\",\n              );\n\n              Logger.log(\"[PROCESS_CEREAL => POSTED THE MESSAGE] : \", recordID);\n\n              setTimeout(() => {\n                if (pendingCerealRequests.has(recordID)) {\n                  pendingCerealRequests.delete(recordID);\n                  resolve({ success: false, error: \"timeout\" });\n                }\n              }, 10000);\n            });\n          };\n\n          if (!frame) {\n            Logger.log(\"[PROCESS_CEREAL] Frame not found, initializing\");\n            initCerealFrame(request.cerealObject).then(\n              (initResult: CerealResponse) => {\n                if (!initResult.success) {\n                  sendResponse({ success: false, error: \"frame_init_failed\" });\n                  return;\n                }\n\n                const newFrame = document.getElementById(CEREAL_FRAME_ID);\n                if (!newFrame) {\n                  sendResponse({ success: false, error: \"frame_not_found\" });\n                  return;\n                }\n\n                processFrame(newFrame as HTMLIFrameElement).then(sendResponse);\n              },\n            );\n          } else {\n            processFrame(frame as HTMLIFrameElement).then(sendResponse);\n          }\n        }\n        if (request.intent === \"mllwtl_refreshCerealFrame\") {\n          Logger.log(\"[greeting] : \", \"mllwtl_refreshCerealFrame\");\n          let frame = document.getElementById(CEREAL_FRAME_ID);\n\n          if (!frame) {\n            Logger.log(\"[REFRESH_CEREAL] Frame not found, nothing to refresh\");\n            sendResponse({ success: false, error: \"frame_not_found\" });\n          }\n\n          // Type assertion for iframe\n          const iframeElement = frame as HTMLIFrameElement;\n\n          iframeElement.src = iframeElement.src;\n\n          Logger.log(\"[REFRESH_CEREAL] Frame refreshed\");\n\n          sendResponse({ success: true });\n        }\n      })();\n      return true; // return true to indicate you want to send a response asynchronously\n    },\n  );\n}\n\nasync function processCrawl(\n  recordID: string,\n  isPDF: boolean,\n  event: MessageEvent,\n  numTries: number,\n  url_to_crawl: string,\n  htmlTransformer: string,\n  orgId: string,\n  fastLane: boolean,\n  saveText: string,\n  removeCSSselectors: string,\n  classNamesToBeRemoved: string[],\n  html_string: string,\n  htmlVisualizer: boolean,\n  htmlContained: boolean,\n  removeImages: boolean,\n  BATCH_execution: boolean,\n  batch_id: string,\n  delayBetweenExecutions: number,\n  openTab: boolean,\n  openTabOnlyIfMust: boolean,\n  saveHtml: boolean,\n  saveMarkdown: boolean,\n  cerealObject: string,\n  refPolicy: string,\n) {\n  const saveCrawlModule = await import(\"../iframe/save/save-crawl\");\n  const {\n    get_document_html,\n    removeElementsByClassNames,\n    removeImagesDOM,\n    removeSelectorsFromDocument,\n  } = await import(\"../iframe/dom-processing\");\n  const TurndownModule = await import(\"../turndown/turndown\");\n  const saveWithVisualizerModule = await import(\n    \"../iframe/save/save-with-visualizer\"\n  );\n  const saveWithContainedModule = await import(\n    \"../iframe/save/save-with-contained\"\n  );\n  const extractTextFromPDFModule = await import(\"../pdf/pdf-getter\");\n  let parser: DOMParser = new DOMParser();\n  let document_to_use: Document = parser.parseFromString(\n    html_string,\n    \"text/html\",\n  );\n  Logger.log(\"[processCrawl ] : document_to_use =>\");\n  Logger.log(document_to_use);\n  if (removeCSSselectors === \"default\") {\n    removeSelectorsFromDocument(document_to_use, []);\n  } else if (removeCSSselectors !== \"\" && removeCSSselectors !== \"none\") {\n    try {\n      let selectors = JSON.parse(removeCSSselectors);\n      removeSelectorsFromDocument(document_to_use, selectors);\n    } catch (e) {\n      Logger.log(\"[initCrawl ] : Error parsing removeCSSselectors =>\", e);\n    }\n  }\n\n  let second_document_string: string = \"\";\n  if (htmlVisualizer || htmlContained) {\n    let second_document = document_to_use.cloneNode(true) as Document;\n    removeSelectorsFromDocument(second_document, []);\n    second_document_string = get_document_html(\"\\n\", second_document);\n    second_document_string = second_document_string\n      .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n      .replace(/\\\\t/gm, \"\");\n  }\n\n  if (classNamesToBeRemoved.length > 0)\n    removeElementsByClassNames(classNamesToBeRemoved);\n  if (removeImages) removeImagesDOM(document_to_use);\n\n  let doc_string = get_document_html(\"\\n\", document_to_use);\n  doc_string = doc_string.replace(/(\\r\\n|\\n|\\r)/gm, \"\").replace(/\\\\t/gm, \"\");\n\n  Logger.log(\"[] : Sending data to server...\");\n  Logger.log(\"[] : recordID => \" + recordID);\n  let markDown;\n  if (!isPDF) {\n    let turnDownService = new (TurndownModule.TurndownService as any)({});\n    markDown = turnDownService.turndown(\n      document_to_use.documentElement.outerHTML,\n    );\n    Logger.log(\"[] : markDown => \" + markDown);\n\n    if ((markDown.trim() === \"\" || markDown === \"null\") && numTries < 4) {\n      Logger.log(\"[initCrawl ] : markDown is empty. RESETTING\");\n      setTimeout(() => {\n        //initCrawlHelper(event, numTries + 1);\n      }, 2000);\n    } else {\n      if (htmlVisualizer) {\n        // SPECIAL LOGIC FOR HTML VISUALIZER\n        await saveWithVisualizerModule.saveWithVisualizer(\n          recordID,\n          doc_string,\n          markDown,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          second_document_string,\n          delayBetweenExecutions,\n          openTabOnlyIfMust,\n        );\n      } else if (htmlContained) {\n        // SPECIAL LOGIC FOR HTML CONTAINED\n        await saveWithContainedModule.saveWithContained(\n          recordID,\n          doc_string,\n          markDown,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          second_document_string,\n          true,\n          delayBetweenExecutions,\n          openTabOnlyIfMust,\n        );\n      } else {\n        saveCrawlModule.saveCrawl(\n          recordID,\n          doc_string,\n          markDown,\n          fastLane,\n          url_to_crawl,\n          htmlTransformer,\n          orgId,\n          saveText,\n          saveHtml,\n          saveMarkdown,\n          BATCH_execution,\n          batch_id,\n          false,\n          delayBetweenExecutions,\n          openTabOnlyIfMust,\n          cerealObject,\n        );\n      }\n    }\n  } else {\n    Logger.log(\"[initCrawl ] : it's a PDF\");\n    let text: string =\n      await extractTextFromPDFModule.extractTextFromPDF(url_to_crawl);\n    Logger.log(\"[initCrawl ] : text => \" + text);\n    if (htmlVisualizer) {\n      // SPECIAL LOGIC FOR HTML VISUALIZER\n      await saveWithVisualizerModule.saveWithVisualizer(\n        recordID,\n        text,\n        text,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        second_document_string,\n        delayBetweenExecutions,\n        openTabOnlyIfMust,\n      );\n    } else if (htmlContained) {\n      // SPECIAL LOGIC FOR HTML CONTAINED\n      await saveWithContainedModule.saveWithContained(\n        recordID,\n        text,\n        text,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        second_document_string,\n        false,\n        delayBetweenExecutions,\n        openTabOnlyIfMust,\n      );\n    } else {\n      saveCrawlModule.saveCrawl(\n        recordID,\n        text,\n        text,\n        fastLane,\n        url_to_crawl,\n        htmlTransformer,\n        orgId,\n        saveText,\n        saveHtml,\n        saveMarkdown,\n        BATCH_execution,\n        batch_id,\n        false,\n        delayBetweenExecutions,\n        openTabOnlyIfMust,\n        cerealObject,\n      );\n    }\n  }\n}\n","import { Logger } from \"../logger/logger\";\nimport { detectBrowser } from \"../utils/utils\";\n\n// The following permissions have to be either in permissions or optional_permissions in manifest.json\n// declarativeNetRequest is the exception, as it can't be specified in optional_permissions:\n// it is replaced internally with declarativeNetRequestWithHostAccess in optional_permissions alongside\n// optional_host_permissions (https://*/*)\nexport let requiredPermissions: string[] = [\"storage\", \"declarativeNetRequest\"];\n\nexport function checkIfInPermissions(permission: string): Promise<boolean> {\n  return new Promise((resolve) => {\n    const manifest: chrome.runtime.Manifest = chrome.runtime.getManifest();\n    const permissions: string[] = manifest.permissions || [];\n    resolve(permissions.includes(permission));\n  });\n}\n\nexport function checkIfInOptionalPermissions(\n  permission: string,\n  callback: (isPresent: boolean) => void,\n): void {\n  const manifest: chrome.runtime.Manifest = chrome.runtime.getManifest();\n  const optionalPermissions: string[] = manifest.optional_permissions || [];\n  callback(optionalPermissions.includes(permission));\n}\n\nexport function checkHostPermissionsMV2_3(): Promise<boolean> {\n  return new Promise((resolve) => {\n    const manifest: chrome.runtime.Manifest = chrome.runtime.getManifest();\n\n    if (manifest.manifest_version === 2) {\n      const permissions = manifest.permissions || [];\n      const optionalPermissions = manifest.optional_permissions || [];\n\n      if (\n        !permissions.includes(\"<all_urls>\") &&\n        !permissions.includes(\"https://*/*\") &&\n        !optionalPermissions.includes(\"<all_urls>\") &&\n        !optionalPermissions.includes(\"https://*/*\")\n      ) {\n        throw new Error(\n          'Required permission \"https://*/*\" is not present in either permissions or optional_permissions in manifest version 2',\n        );\n      }\n    } else if (manifest.manifest_version === 3) {\n      const hostPermissions = manifest.host_permissions || [];\n      const optionalHostPermissions = manifest.optional_host_permissions || [];\n\n      if (\n        !hostPermissions.includes(\"<all_urls>\") &&\n        !hostPermissions.includes(\"https://*/*\") &&\n        !optionalHostPermissions.includes(\"<all_urls>\") &&\n        !optionalHostPermissions.includes(\"https://*/*\")\n      ) {\n        throw new Error(\n          'Required permission \"https://*/*\" is not present in either host_permissions or optional_host_permissions in manifest version 3',\n        );\n      }\n    }\n    Logger.log(\"[checkHostPermissionsMV2_3] Host permissions are present\");\n    resolve(true);\n  });\n}\n\nexport async function checkRequiredPermissions(\n  requestAfterChecking: boolean = false,\n): Promise<void> {\n  let permissionsToRequest: string[] = [];\n  let hostPermissions: string[] = [];\n  // if browser is safari, we can remove declarativeNetRequest from requiredPermissions\n  if (detectBrowser() === \"safari\") {\n    requiredPermissions.splice(\n      requiredPermissions.indexOf(\"declarativeNetRequest\"),\n      1,\n    );\n  }\n  for (let permission of requiredPermissions) {\n    Logger.log(\"[checkRequiredPermissions] Checking : \" + permission);\n    let isPermissionPresent = false;\n    let isPresent = await checkIfInPermissions(permission);\n    Logger.log(\n      \"[checkRequiredPermissions] Permission : \" +\n        permission +\n        \" is present : \" +\n        isPresent,\n    );\n    if (isPresent) {\n      isPermissionPresent = true;\n    } else if (\n      permission === \"declarativeNetRequest\" &&\n      (await checkHostPermissionsMV2_3())\n    ) {\n      Logger.log(\n        \"declarativeNetRequest is not present in permissions, checking for declarativeNetRequestWithHostAccess\",\n      );\n      let isHostPermissionPresent = await checkIfInPermissions(\n        \"declarativeNetRequestWithHostAccess\",\n      );\n      if (isHostPermissionPresent) {\n        Logger.log(\"declarativeNetRequestWithHostAccess is present\");\n        isPermissionPresent = true;\n      }\n    } else {\n      Logger.log(\n        \"checking for declarativeNetRequestWithHostAccess in optional_permissions\",\n      );\n      if (permission === \"declarativeNetRequest\") {\n        // declarativeNetRequest can't be specified in optional_permissions,\n        // so we check for declarativeNetRequestWithHostAccess and add it to permissionsToRequest,\n        // alongside optional_host_permissions\n        permission = \"declarativeNetRequestWithHostAccess\";\n      }\n      checkIfInOptionalPermissions(permission, (isPresent) => {\n        if (isPresent) {\n          permissionsToRequest.push(permission);\n          if (permission === \"declarativeNetRequestWithHostAccess\") {\n            hostPermissions = chrome.runtime.getManifest()\n              .optional_host_permissions || [\"https://*/*\"];\n          }\n        }\n      });\n    }\n\n    Logger.log(\n      \"PERMISSION : \" + permission + \" IS PRESENT : \" + isPermissionPresent,\n    );\n\n    if (!isPermissionPresent && !permissionsToRequest.includes(permission)) {\n      throw new Error(\n        `[init]: Required permission ${permission} is not present in the manifest`,\n      );\n    }\n  }\n\n  await checkHostPermissionsMV2_3();\n\n  if (requestAfterChecking && permissionsToRequest.length > 0) {\n    let alreadyGranted = await checkIfPermissionsGranted(permissionsToRequest);\n    if (!alreadyGranted) {\n      let granted = await requirePermissions(\n        permissionsToRequest,\n        hostPermissions,\n      );\n      if (!granted) {\n        throw new Error(\n          `Required permissions ${permissionsToRequest.join(\", \")} were not granted`,\n        );\n      }\n    }\n  }\n}\n\nexport async function requirePermissions(\n  permissions: string[],\n  hostPermissions: string[] = [],\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    chrome.permissions.request(\n      {\n        permissions: permissions,\n        origins: hostPermissions,\n      },\n      (granted) => {\n        resolve(granted);\n      },\n    );\n  });\n}\n\nexport async function checkIfPermissionsGranted(\n  permissions: string[],\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    chrome.permissions.contains(\n      {\n        permissions: permissions,\n      },\n      (granted) => {\n        resolve(granted);\n      },\n    );\n  });\n}\n","import { setLocalStorage } from \"../storage/storage-helpers\";\n\nconst optInKey: string = \"mellowtelOptIn\";\n\nexport async function getOptInStatus(): Promise<{\n  status: string;\n  boolean: boolean;\n}> {\n  return new Promise((resolve) => {\n    chrome.storage.local.get(optInKey, function (result) {\n      if (result !== undefined) {\n        if (result[optInKey] === \"true\") {\n          resolve({ status: \"opted_in\", boolean: true });\n        } else if (result[optInKey] === \"false\") {\n          resolve({ status: \"opted_out\", boolean: false });\n        } else {\n          resolve({ status: \"undefined\", boolean: false });\n        }\n      } else {\n        resolve({ status: \"undefined\", boolean: false });\n      }\n    });\n  });\n}\n\nexport async function optIn(): Promise<boolean> {\n  return new Promise((resolve) => {\n    setLocalStorage(optInKey, \"true\").then(() => {\n      resolve(true);\n    });\n  });\n}\n\nexport async function optOut(): Promise<boolean> {\n  return new Promise((resolve) => {\n    setLocalStorage(optInKey, \"false\").then(() => {\n      setLocalStorage(\"mStatus\", \"stop\").then(() => {\n        resolve(true);\n      });\n    });\n  });\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { SW_PING_INTERVAL } from \"../constants\";\nimport { isInSW } from \"../utils/utils\";\n\nconst KEEP_PING_STATUS = \"keep_ping_status\";\nlet keepAliveInterval: number | null = null;\n\nconst keepAlive = () => {\n  chrome.runtime.sendMessage(\"ping\").catch((error) => {\n    // Logger.log(\"[keepAlive] Error sending ping:\", error);\n  });\n};\n\nexport const startPing = async (): Promise<void> => {\n  try {\n    const inServiceWorker = await isInSW();\n\n    if (inServiceWorker) {\n      // Clear any existing interval first\n      await stopPing();\n\n      // Start new interval\n      keepAliveInterval = setInterval(keepAlive, SW_PING_INTERVAL);\n      await setLocalStorage(KEEP_PING_STATUS, true);\n      Logger.log(\"[startPing] Keep-alive started in Service Worker\");\n    } else {\n      // In content script - send message to SW to start ping\n      chrome.runtime.sendMessage({ intent: \"mllwtl_startPing\" });\n      Logger.log(\"[startPing] Requested Service Worker to start keep-alive\");\n    }\n  } catch (error) {\n    Logger.log(\"[startPing] Error starting keep-alive:\", error);\n  }\n};\n\nexport const stopPing = async (): Promise<void> => {\n  try {\n    const inServiceWorker = await isInSW();\n\n    if (inServiceWorker) {\n      if (keepAliveInterval) {\n        clearInterval(keepAliveInterval);\n        keepAliveInterval = null;\n      }\n      await setLocalStorage(KEEP_PING_STATUS, false);\n      Logger.log(\"[stopPing] Keep-alive stopped in Service Worker\");\n    } else {\n      // In content script - send message to SW to stop ping\n      chrome.runtime.sendMessage({ intent: \"mllwtl_stopPing\" });\n      Logger.log(\"[stopPing] Requested Service Worker to stop keep-alive\");\n    }\n  } catch (error) {\n    Logger.log(\"[stopPing] Error stopping keep-alive:\", error);\n  }\n};\n\nexport const isPingEnabled = async (): Promise<boolean> => {\n  try {\n    const status = await getLocalStorage(KEEP_PING_STATUS, true);\n    return status === true;\n  } catch (error) {\n    Logger.log(\"[isPingEnabled] Error checking ping status:\", error);\n    return false;\n  }\n};\n","import { isCSPEnabled } from \"../content-script/test-csp\";\nimport { setUpContentScriptListeners } from \"../listeners/listener-helpers-CS\";\nimport { getIdentifier } from \"./identity-helpers\";\nimport { executeFunctionIfOrWhenBodyExists } from \"./document-body-observer\";\nimport { DATA_ID_IFRAME } from \"../constants\";\nimport { checkRequiredPermissions } from \"../permissions/permission-helpers\";\nimport { setLocalStorage } from \"../storage/storage-helpers\";\nimport { getOptInStatus, optOut } from \"./opt-in-out-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { startPing, stopPing } from \"../background-script/keep-ping\";\n\nexport function start(metadata_id?: string | undefined): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    let optInStatus: boolean = (await getOptInStatus()).boolean;\n    if (!optInStatus) {\n      throw new Error(\n        \"User has not opted in yet. Request a disclaimer to the end-user and then call the optIn() method if they agree to join.\",\n      );\n    }\n    try {\n      await checkRequiredPermissions(true);\n      // note: in later version, metadata_id will be used to trace the #...\n      // ...of requests to this specific device, so you can give rewards, etc.\n      await startPing();\n      setLocalStorage(\"mStatus\", \"start\").then(() => {\n        resolve(true);\n      });\n    } catch (error) {\n      Logger.log(\"[start] : Error starting the extension\", error);\n      await optOut();\n      resolve(false);\n    }\n  });\n}\n\nexport function stop(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    await stopPing();\n    setLocalStorage(\"mStatus\", \"stop\").then(() => {\n      resolve(true);\n    });\n  });\n}\n\nexport function startWebsocket() {\n  executeFunctionIfOrWhenBodyExists(() => {\n    isCSPEnabled().then(async (cspEnabled: boolean) => {\n      if (!cspEnabled) {\n        await setUpContentScriptListeners();\n        const websocketModule = await import(\"../content-script/websocket\");\n        getIdentifier().then((identifier: string) => {\n          websocketModule.startConnectionWs(identifier);\n        });\n      }\n    });\n  });\n}\n\nexport function stopConnection() {\n  // todo: send message to background, and remove all iframes\n  let iframes: NodeListOf<Element> = document.querySelectorAll(\n    `[data-id=\"${DATA_ID_IFRAME}\"]`,\n  );\n  iframes.forEach((iframe) => {\n    iframe.remove();\n  });\n}\n\nexport function isStarted(): Promise<boolean> {\n  return new Promise((resolve) => {\n    chrome.storage.local.get(\"mStatus\", function (result) {\n      if (result !== undefined && result[\"mStatus\"] === \"start\") {\n        resolve(true);\n      } else {\n        resolve(false);\n      }\n    });\n  });\n}\n","import {\n  REFRESH_INTERVAL,\n  MAX_DAILY_RATE as DEFAULT_MAX_DAILY_RATE,\n} from \"../constants\";\nimport { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\n\nexport class RateLimiter {\n  static MAX_DAILY_RATE: number = DEFAULT_MAX_DAILY_RATE;\n\n  static async getRateLimitData(): Promise<{\n    timestamp: number;\n    count: number;\n  }> {\n    let timestamp = await getLocalStorage(\"timestamp_m\");\n    if (timestamp === undefined || !timestamp.hasOwnProperty(\"timestamp_m\")) {\n      timestamp = undefined;\n    } else {\n      timestamp = parseInt(timestamp.timestamp_m);\n    }\n    let count = await getLocalStorage(\"count_m\");\n    if (count === undefined || !count.hasOwnProperty(\"count_m\")) {\n      count = undefined;\n    } else {\n      count = parseInt(count.count_m);\n    }\n    return { timestamp, count };\n  }\n\n  static async setRateLimitData(\n    timestamp: number,\n    count: number,\n  ): Promise<void> {\n    await setLocalStorage(\"timestamp_m\", timestamp);\n    await setLocalStorage(\"count_m\", count);\n  }\n\n  static async getLifetimeTotalCount(): Promise<{\n    lifetime_total_count: number;\n  }> {\n    let lifetime_total_count = await getLocalStorage(\"lifetime_total_count_m\");\n    if (\n      lifetime_total_count === undefined ||\n      !lifetime_total_count.hasOwnProperty(\"lifetime_total_count_m\")\n    ) {\n      lifetime_total_count = 0;\n    } else {\n      lifetime_total_count = parseInt(\n        lifetime_total_count.lifetime_total_count_m,\n      );\n    }\n    return { lifetime_total_count };\n  }\n\n  static async setHistoricData(\n    initial_timestamp: number,\n    lifetime_total_count: number,\n  ): Promise<void> {\n    await setLocalStorage(\"initial_timestamp_m\", initial_timestamp);\n    await setLocalStorage(\"lifetime_total_count_m\", lifetime_total_count);\n  }\n\n  static calculateElapsedTime(now: number, timestamp: number): number {\n    return now - timestamp;\n  }\n\n  static async resetRateLimitData(\n    now: number,\n    add_to_count: boolean = false,\n  ): Promise<void> {\n    await this.setRateLimitData(now, add_to_count ? 1 : 0);\n  }\n\n  static async getIfRateLimitReached(): Promise<boolean> {\n    let mllwtl_rate_limit_object = await getLocalStorage(\n      \"mllwtl_rate_limit_reached\",\n    );\n    if (\n      mllwtl_rate_limit_object === undefined ||\n      !mllwtl_rate_limit_object.hasOwnProperty(\"mllwtl_rate_limit_reached\")\n    ) {\n      return false;\n    } else {\n      return (\n        mllwtl_rate_limit_object.mllwtl_rate_limit_reached.toString() === \"true\"\n      );\n    }\n  }\n\n  static async checkRateLimit(increase_count: boolean = true): Promise<{\n    shouldContinue: boolean;\n    isLastCount: boolean;\n    requestsCount: number;\n  }> {\n    const now = Date.now();\n    let { timestamp, count } = await this.getRateLimitData();\n    let { lifetime_total_count } = await this.getLifetimeTotalCount();\n\n    if (!timestamp) {\n      Logger.log(\n        `[]: NO_TIMESTAMP, setting timestamp, count, and historic data`,\n      );\n      await this.setRateLimitData(now, 1);\n      await this.setHistoricData(now, 1);\n      return {\n        shouldContinue: true,\n        isLastCount: false,\n        requestsCount: 0,\n      };\n    }\n\n    const elapsedTime: number = this.calculateElapsedTime(now, timestamp);\n    if (elapsedTime > REFRESH_INTERVAL) {\n      Logger.log(`[]: REFRESH_INTERVAL elapsed, resetting count`);\n      await this.resetRateLimitData(now, true);\n      await setLocalStorage(\"mllwtl_rate_limit_reached\", false);\n      return {\n        shouldContinue: true,\n        isLastCount: false,\n        requestsCount: 0,\n      };\n    }\n\n    if (increase_count) {\n      count++;\n      await setLocalStorage(\"count_m\", count);\n      lifetime_total_count++;\n      await setLocalStorage(\"lifetime_total_count_m\", lifetime_total_count);\n    }\n    Logger.log(\n      `[]: SHOULD CONTINUE? IF COUNT (${count}) <= ${this.MAX_DAILY_RATE} : ${count <= this.MAX_DAILY_RATE}`,\n    );\n    if (count <= this.MAX_DAILY_RATE) {\n      let isLastCount: boolean = count === this.MAX_DAILY_RATE;\n      return {\n        shouldContinue: true,\n        isLastCount,\n        requestsCount: count,\n      };\n    } else {\n      Logger.log(`[]: RATE LIMIT REACHED`);\n      return {\n        shouldContinue: false,\n        isLastCount: false,\n        requestsCount: count,\n      };\n    }\n  }\n}\n","import { getLocalStorage } from \"../storage/storage-helpers\";\nimport { Logger } from \"../logger/logger\";\n\ninterface WebAccessibleResourceV3 {\n  resources: string[];\n  matches: string[];\n}\n\ntype WebAccessibleResource = string | WebAccessibleResourceV3;\n\nexport function isPascoliEnabled(): Promise<boolean> {\n  return new Promise(async (resolve) => {\n    let htmlFileNamePath = await getLocalStorage(\"mllwtl_HTMLFileName\", true);\n    Logger.log(\"[pascoli]: htmlFileNamePath\", htmlFileNamePath);\n\n    if (!htmlFileNamePath) {\n      resolve(false);\n      return;\n    }\n\n    const manifest: chrome.runtime.Manifest = chrome.runtime.getManifest();\n    const webAccessibleResources = manifest.web_accessible_resources;\n    Logger.log(\"[pascoli]: webAccessibleResources\", webAccessibleResources);\n\n    if (!webAccessibleResources) {\n      resolve(false);\n      return;\n    }\n\n    let isPascoliEnabled = false;\n    webAccessibleResources.forEach((resource: WebAccessibleResource) => {\n      // Manifest V2 format (string)\n      if (typeof resource === \"string\") {\n        if (resource === htmlFileNamePath) {\n          isPascoliEnabled = true;\n        }\n      }\n      // Manifest V3 format (object)\n      else if (typeof resource === \"object\" && \"resources\" in resource) {\n        const resourceV3 = resource as WebAccessibleResourceV3;\n        if (\n          resourceV3.resources.includes(htmlFileNamePath) &&\n          resourceV3.matches.includes(\"<all_urls>\")\n        ) {\n          isPascoliEnabled = true;\n        }\n      }\n    });\n\n    resolve(isPascoliEnabled);\n  });\n}\n","import WebSocket from \"isomorphic-ws\";\nimport {\n  VERSION,\n  REFRESH_INTERVAL,\n  MAX_PARALLEL_EXECUTIONS_BATCH,\n  MAX_PARALLEL_EXECUTIONS_BATCH_FETCH,\n} from \"../constants\";\nimport { isStarted } from \"../utils/start-stop-helpers\";\nimport { RateLimiter } from \"../local-rate-limiting/rate-limiter\";\nimport { Logger } from \"../logger/logger\";\nimport { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { getExtensionIdentifier } from \"../utils/identity-helpers\";\nimport {\n  getEffectiveConnectionType,\n  MeasureConnectionSpeed,\n  HIGH_BANDWIDTH_CONNECTION_TYPES,\n} from \"../utils/measure-connection-speed\";\nimport { detectBrowser, getManifestVersion, isInSW } from \"../utils/utils\";\nimport {\n  sendMessageToBackground,\n  sendMessageToContentScript,\n} from \"../utils/messaging-helpers\";\nimport { addToRequestMessageStorage } from \"../request-message/request-message-helpers\";\nimport { isPascoliEnabled } from \"../pascoli/pascoli-utils\";\nimport { refreshCereal } from \"../cereal/cereal-index\";\n\nconst ws_url: string = \"wss://ws.mellow.tel\";\n\nlet is_websocket_connected: boolean = false;\n\nexport async function startConnectionWs(identifier: string): WebSocket {\n  // if mv2, we can send message to bg and start the ws there since there is a DOM\n  // in mv3, we need to start the ws here in the content script\n  let manifestVersion = getManifestVersion();\n  let isInServiceWorker: boolean = await isInSW();\n  Logger.log(\"############################################################\");\n  Logger.log(`[startConnectionWs]: Manifest version: ${manifestVersion}`);\n  Logger.log(`[startConnectionWs]: Is in service worker: ${isInServiceWorker}`);\n  if (!isInServiceWorker) {\n    Logger.log(\n      `[]: MV2/MV3 Sending message to background to start websocket...`,\n    );\n    await sendMessageToBackground({\n      intent: \"startWebsocket\",\n      identifier: identifier,\n    });\n  } else {\n    let effectiveConnectionType: string = await getEffectiveConnectionType();\n    Logger.log(`[]: Effective connection type: ${effectiveConnectionType}`);\n    if (!HIGH_BANDWIDTH_CONNECTION_TYPES.includes(effectiveConnectionType)) {\n      Logger.log(`[]: Not connecting to websocket to preserve bandwidth`);\n      return;\n    }\n    let webSocketConnected: boolean;\n    let isDeviceDisconnectSession: boolean = await getLocalStorage(\n      \"device_disconnect_session\",\n      true,\n    );\n    Logger.log(\"[]: Discon.Sess =>\", isDeviceDisconnectSession);\n    if (isDeviceDisconnectSession) {\n      Logger.log(\n        `[]: Device disconnect for session, not connecting to websocket`,\n      );\n      return;\n    }\n    if (manifestVersion.toString() === \"2\") {\n      Logger.log(`[]: MV2 Getting webSocketConnected from DOM MODEL...`);\n      webSocketConnected =\n        document.getElementById(\"webSocketConnected\") !== null;\n    } else {\n      Logger.log(`[]: MV3 Getting webSocketConnected from shared memory...`);\n      webSocketConnected = is_websocket_connected;\n      // webSocketConnected = await getSharedMemory(\"webSocketConnected\");\n    }\n    Logger.log(`[]: webSocketConnected: ${webSocketConnected}`);\n    if (!webSocketConnected) {\n      let LIMIT_REACHED: boolean = await RateLimiter.getIfRateLimitReached();\n      if (LIMIT_REACHED) {\n        Logger.log(`[]: Rate limit, not connecting to websocket`);\n        let { timestamp, count } = await RateLimiter.getRateLimitData();\n        let now: number = Date.now();\n        let timeElapsed = RateLimiter.calculateElapsedTime(now, timestamp);\n        Logger.log(`[]: Time elapsed since last request: ${timeElapsed}`);\n        if (timeElapsed > REFRESH_INTERVAL) {\n          Logger.log(\n            `[]: Time elapsed is greater than REFRESH_INTERVAL, resetting rate limit data`,\n          );\n          await setLocalStorage(\"mllwtl_rate_limit_reached\", false);\n          await RateLimiter.resetRateLimitData(now, false);\n          startConnectionWs(identifier);\n        }\n      } else {\n        const extension_identifier: string = await getExtensionIdentifier();\n        const speedMpbs: number = await MeasureConnectionSpeed();\n        Logger.log(`[]: Connection speed: ${speedMpbs} Mbps`);\n        const browser = detectBrowser();\n        Logger.log(`[]: Browser: ${browser}`);\n        const manifestVersion = getManifestVersion();\n        const isPascoli: boolean = await isPascoliEnabled();\n        Logger.log(`[]: Manifest version: ${manifestVersion}`);\n        Logger.log(`[]: Extension identifier: ${extension_identifier}`);\n        Logger.log(`[]: Is Pascoli enabled: ${isPascoli}`);\n        const ws = new WebSocket(\n          `${ws_url}?device_id=${identifier}&version=${VERSION}&plugin_id=${encodeURIComponent(extension_identifier)}&speed_download=${speedMpbs}&platform=${browser}&manifest_version=${manifestVersion}&pascoli=${isPascoli}&ws_client=new_ws`,\n        );\n\n        ws.onopen = function open() {\n          if (manifestVersion.toString() === \"2\") {\n            Logger.log(`[]: MV2 Setting webSocketConnected in DOM MODEL...`);\n            let hiddenInput: HTMLInputElement = document.createElement(\"input\");\n            hiddenInput.setAttribute(\"type\", \"hidden\");\n            hiddenInput.setAttribute(\"id\", \"webSocketConnected\");\n            hiddenInput.setAttribute(\"value\", \"true\");\n            document.body.appendChild(hiddenInput);\n          } else {\n            Logger.log(\n              `[]: MV3 Setting webSocketConnected in shared memory...`,\n            );\n            // setSharedMemory(\"webSocketConnected\", \"true\");\n            is_websocket_connected = true;\n          }\n          Logger.log(\n            `[]: connected with device_id= ${identifier} and version= ${VERSION}`,\n          );\n        };\n\n        ws.onclose = async function close() {\n          if (manifestVersion.toString() === \"3\") {\n            // removeSharedMemory(\"webSocketConnected\");\n            is_websocket_connected = false;\n          } else {\n            document.getElementById(\"webSocketConnected\")?.remove();\n          }\n          let isDeviceDisconnectSession: boolean = await getLocalStorage(\n            \"device_disconnect_session\",\n            true,\n          );\n          Logger.log(\"[]: Discon.Sess =>\", isDeviceDisconnectSession);\n          if ((await isStarted()) && !isDeviceDisconnectSession) {\n            startConnectionWs(identifier);\n          }\n        };\n\n        ws.onmessage = async function incoming(data: any) {\n          if (await isStarted()) {\n            data = JSON.parse(data.data);\n\n            if (\n              data.hasOwnProperty(\"type_event\") &&\n              data.type_event === \"heartbeat\"\n            ) {\n              return;\n            }\n\n            if (\n              data.hasOwnProperty(\"type_event\") &&\n              data.type_event === \"disconnect_device\"\n            ) {\n              Logger.log(`[]: Device disconnected, closing connection...`);\n              await setLocalStorage(\"device_disconnect_session\", true);\n              ws.close();\n              return;\n            }\n\n            if (\n              data.hasOwnProperty(\"type_event\") &&\n              data.type_event === \"refresh_cereal\"\n            ) {\n              Logger.log(`[]: Refreshing cereal frame...`);\n              await refreshCereal();\n              return;\n            }\n\n            // Check if the request is a POST request\n            // So we can override the rate limit for POST requests\n            let POST_request = false;\n            if (data.hasOwnProperty(\"method\") && data.method === \"POST\") {\n              POST_request = true;\n            }\n            let GET_request = false;\n            if (data.hasOwnProperty(\"method\") && data.method === \"GET\") {\n              GET_request = true;\n            }\n\n            let BATCH_execution: boolean = false;\n            let batch_id: string = \"\";\n            let parallelExecutionsBatch: number = 4;\n            let delayBetweenExecutions: number = 500; // in ms\n            if (\n              data.hasOwnProperty(\"type_event\") &&\n              data.type_event === \"batch\"\n            ) {\n              BATCH_execution = true;\n              batch_id = data.batch_id;\n              let type_batch: string = \"request\";\n              if (data.hasOwnProperty(\"type_batch\"))\n                type_batch = data.type_batch;\n              if (data.hasOwnProperty(\"parallel_executions_batch\")) {\n                parallelExecutionsBatch = Math.min(\n                  parseInt(data.parallel_executions_batch),\n                  type_batch === \"request\"\n                    ? MAX_PARALLEL_EXECUTIONS_BATCH\n                    : MAX_PARALLEL_EXECUTIONS_BATCH_FETCH,\n                );\n              }\n              if (data.hasOwnProperty(\"delay_between_executions\")) {\n                delayBetweenExecutions = parseInt(\n                  data.delay_between_executions,\n                );\n              }\n            }\n\n            let { shouldContinue, isLastCount } =\n              await RateLimiter.checkRateLimit();\n            if (\n              shouldContinue ||\n              POST_request ||\n              BATCH_execution ||\n              GET_request\n            ) {\n              if (\n                isLastCount &&\n                !POST_request &&\n                !BATCH_execution &&\n                !GET_request\n              ) {\n                Logger.log(`[]: Last count reached, closing connection...`);\n                await setLocalStorage(\"mllwtl_rate_limit_reached\", true);\n                ws.close();\n              }\n              if (data.hasOwnProperty(\"recordID\")) {\n                await addToRequestMessageStorage(data);\n              }\n\n              Logger.log(\n                \"[]: MV2/MV3 Sending message to a viable content script...\",\n              );\n              // send a message to a content script to execute the crawl\n              // first tab that replies will be the one to execute the crawl\n              let tabReply = false;\n              chrome.tabs.query({}, async (tabs) => {\n                for (let tab of tabs) {\n                  if (tabReply) {\n                    Logger.log(\"[]: Tab already replied, breaking...\");\n                    break;\n                  }\n                  await sendMessageToContentScript(tab.id!, {\n                    intent: \"preProcessCrawl\",\n                    data: JSON.stringify(data),\n                    BATCH_execution: BATCH_execution,\n                    batch_id: batch_id,\n                    parallelExecutionsBatch: parallelExecutionsBatch,\n                    delayBetweenExecutions: delayBetweenExecutions,\n                  }).then((response) => {\n                    if (response === \"success\") {\n                      Logger.log(\n                        \"[]: Tab replied success, setting tabReply to true...\",\n                      );\n                      tabReply = true;\n                    }\n                  });\n                }\n              });\n            } else {\n              Logger.log(\"[]: Rate limit reached, closing connection...\");\n              await setLocalStorage(\"mllwtl_rate_limit_reached\", true);\n              ws.close();\n            }\n          }\n        };\n        return ws;\n      }\n    }\n  }\n}\n","import {\n  disableXFrameHeaders,\n  enableXFrameHeaders,\n  fixImageRenderHTMLVisualizer,\n  resetImageRenderHTMLVisualizer,\n} from \"../dnr/dnr-helpers\";\nimport {\n  getSharedMemoryBCK,\n  setSharedMemoryBCK,\n} from \"../content-script/shared-memory\";\nimport {\n  resetTriggersDownload,\n  seeIfTriggersDownload,\n} from \"../utils/triggers-download-helpers\";\nimport { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { handlePostRequest } from \"../post-requests/post-helpers\";\nimport {\n  generateAndOpenFeedbackLink,\n  generateAndOpenOptInLink,\n  generateAndOpenUpdateLink,\n} from \"../elements/generate-links\";\nimport { MeasureConnectionSpeed } from \"../utils/measure-connection-speed\";\nimport {\n  putHTMLToSigned,\n  putMarkdownToSigned,\n  putHTMLVisualizerToSigned,\n  putHTMLContainedToSigned,\n} from \"../utils/put-to-signed\";\nimport { getIfCurrentlyActiveBCK } from \"../elements/elements-utils\";\nimport {\n  getBadgeProperties,\n  hideBadge,\n  restoreBadgeProperties,\n  showBadge,\n} from \"../transparency/badge-settings\";\nimport { handleGetRequest } from \"../get-requests/get-helpers\";\nimport { startConnectionWs } from \"../content-script/websocket\";\nimport { Logger } from \"../logger/logger\";\nimport { cerealMain } from \"../cereal/cereal-index\";\nimport { startPing, stopPing } from \"../background-script/keep-ping\";\n\nexport async function setUpBackgroundListeners() {\n  // Queue to store incoming messages to start websocket\n  const startWebsocketMessageQueue: { identifier: string }[] = [];\n\n  // Function to process messages from the queue\n  function processWebsocketQueue() {\n    if (startWebsocketMessageQueue.length > 0) {\n      const message = startWebsocketMessageQueue.shift();\n      if (message) {\n        Logger.log(\"Processing message from queue:\", message);\n        Logger.log(\"Content script requested to start websocket\");\n        // Logger.log(document.getElementById(\"webSocketConnected\"));\n        Logger.log(\"####################################\");\n        startConnectionWs(message.identifier);\n      }\n    }\n    setTimeout(processWebsocketQueue, 7000); // Process next message after 7 seconds\n  }\n\n  // Start processing the queue\n  processWebsocketQueue();\n\n  chrome.runtime.onMessage.addListener(\n    function (request, sender, sendResponse) {\n      if (request.intent == \"disableXFrameHeaders\") {\n        disableXFrameHeaders(request.hostname, request.skipHeaders).then(\n          sendResponse,\n        );\n      }\n      if (request.intent == \"enableXFrameHeaders\") {\n        enableXFrameHeaders(request.hostname).then(sendResponse);\n      }\n      if (request.intent == \"resetTriggersDownload\") {\n        resetTriggersDownload().then(sendResponse);\n      }\n      if (request.intent === \"setSharedMemoryBCK\") {\n        setSharedMemoryBCK(request.key, sender.tab?.id!).then(sendResponse);\n      }\n      if (request.intent === \"getSharedMemoryBCK\") {\n        getSharedMemoryBCK(request.key).then(sendResponse);\n      }\n      if (request.intent === \"seeIfTriggersDownload\") {\n        seeIfTriggersDownload(\n          request.url,\n          request.triggersDownload,\n          request.recordID,\n        ).then(sendResponse);\n      }\n      if (request.intent === \"deleteIframeM\") {\n        sendMessageToContentScript(sender.tab?.id!, {\n          intent: \"deleteIframeM\",\n          recordID: request.recordID,\n          BATCH_execution: request.BATCH_execution,\n          delayBetweenExecutions: request.delayBetweenExecutions,\n        }).then(sendResponse);\n      }\n      if (request.intent === \"handlePOSTRequest\") {\n        handlePostRequest(\n          request.method_endpoint,\n          request.method_payload,\n          request.method_headers,\n          request.fastLane,\n          request.orgId,\n          request.recordID,\n          request.htmlVisualizer,\n          request.htmlContained,\n          request.removeImages,\n          request.removeCSSselectors,\n          request.classNamesToBeRemoved,\n          request.htmlTransformer,\n          request.BATCH_execution,\n          request.batch_id,\n          request.actions,\n          request.delayBetweenExecutions,\n          request.openTab,\n          request.openTabOnlyIfMust,\n          request.saveHtml,\n          request.saveMarkdown,\n          request.cerealObject,\n          request.refPolicy,\n        ).then(sendResponse);\n      }\n      if (request.intent === \"handleGETRequest\") {\n        handleGetRequest(\n          request.method_endpoint,\n          request.method_headers,\n          request.fastLane,\n          request.orgId,\n          request.recordID,\n          request.htmlVisualizer,\n          request.htmlContained,\n          request.removeImages,\n          request.removeCSSselectors,\n          request.classNamesToBeRemoved,\n          request.htmlTransformer,\n          request.BATCH_execution,\n          request.batch_id,\n          request.actions,\n          request.delayBetweenExecutions,\n          request.openTab,\n          request.openTabOnlyIfMust,\n          request.saveHtml,\n          request.saveMarkdown,\n          request.cerealObject,\n          request.refPolicy,\n        ).then(sendResponse);\n      }\n      if (request.intent === \"openOptInLink\") {\n        generateAndOpenOptInLink().then((link) => {\n          sendResponse(link);\n        });\n      }\n      if (request.intent === \"openUpdateLink\") {\n        generateAndOpenUpdateLink().then((link) => {\n          sendResponse(link);\n        });\n      }\n      if (request.intent === \"removeCurrentTab\") {\n        let tabId = sender.tab?.id;\n        if (tabId !== null && tabId !== undefined) {\n          chrome.tabs.remove(tabId);\n        }\n        sendResponse(sender.tab?.id);\n      }\n      if (request.intent === \"measureConnectionSpeed\") {\n        MeasureConnectionSpeed().then((speedMbps) => {\n          sendResponse(speedMbps);\n        });\n      }\n      if (request.intent === \"handleHTMLVisualizer\") {\n        chrome.tabs.query(\n          { active: true, lastFocusedWindow: true },\n          function (tabs) {\n            if (tabs.length > 0) {\n              sendMessageToContentScript(tabs[0].id!, {\n                intent: \"handleHTMLVisualizer\",\n                url: request.url,\n                recordID: request.recordID,\n                eventData: request.eventData,\n                waitForElement: request.waitForElement,\n                shouldSandbox: request.shouldSandbox,\n                sandBoxAttributes: request.sandBoxAttributes,\n                BATCH_execution: request.BATCH_execution,\n                batch_id: request.batch_id,\n                triggersDownload: request.triggersDownload,\n                skipHeaders: request.skipHeaders,\n                hostname: request.hostname,\n                screenWidth: request.screenWidth,\n                screenHeight: request.screenHeight,\n                POST_request: request.POST_request,\n                GET_request: request.GET_request,\n                methodEndpoint: request.methodEndpoint,\n                methodPayload: request.methodPayload,\n                methodHeaders: request.methodHeaders,\n                actions: request.actions,\n                delayBetweenExecutions: request.delayBetweenExecutions,\n                openTab: request.openTab,\n                openTabOnlyIfMust: request.openTabOnlyIfMust,\n                pascoli: request.pascoli,\n                cerealObject: request.cerealObject,\n                refPolicy: request.refPolicy,\n              });\n            }\n          },\n        );\n      }\n      if (request.intent === \"handleHTMLContained\") {\n        chrome.tabs.query(\n          { active: true, lastFocusedWindow: true },\n          function (tabs) {\n            if (tabs.length > 0) {\n              sendMessageToContentScript(tabs[0].id!, {\n                intent: \"handleHTMLContained\",\n                url: request.url,\n                recordID: request.recordID,\n                eventData: request.eventData,\n                waitForElement: request.waitForElement,\n                shouldSandbox: request.shouldSandbox,\n                sandBoxAttributes: request.sandBoxAttributes,\n                BATCH_execution: request.BATCH_execution,\n                batch_id: request.batch_id,\n                triggersDownload: request.triggersDownload,\n                skipHeaders: request.skipHeaders,\n                hostname: request.hostname,\n                screenWidth: request.screenWidth,\n                screenHeight: request.screenHeight,\n                POST_request: request.POST_request,\n                GET_request: request.GET_request,\n                methodEndpoint: request.methodEndpoint,\n                methodPayload: request.methodPayload,\n                methodHeaders: request.methodHeaders,\n                actions: request.actions,\n                delayBetweenExecutions: request.delayBetweenExecutions,\n                openTab: request.openTab,\n                openTabOnlyIfMust: request.openTabOnlyIfMust,\n                pascoli: request.pascoli,\n                cerealObject: request.cerealObject,\n                refPolicy: request.refPolicy,\n              });\n            }\n          },\n        );\n      }\n      if (request.intent === \"putHTMLToSigned\") {\n        putHTMLToSigned(request.htmlURL_signed, request.content).then(\n          sendResponse,\n        );\n      }\n      if (request.intent === \"putMarkdownToSigned\") {\n        putMarkdownToSigned(request.markdownURL_signed, request.markDown).then(\n          sendResponse,\n        );\n      }\n      if (request.intent === \"putHTMLVisualizerToSigned\") {\n        putHTMLVisualizerToSigned(\n          request.htmlVisualizerURL_signed,\n          request.base64image,\n        ).then(sendResponse);\n      }\n      if (request.intent === \"putHTMLContainedToSigned\") {\n        putHTMLContainedToSigned(\n          request.htmlContainedURL_signed,\n          request.htmlContainedString,\n        ).then(sendResponse);\n      }\n      if (request.intent === \"fixImageRenderHTMLVisualizer\") {\n        fixImageRenderHTMLVisualizer().then(sendResponse);\n      }\n      if (request.intent === \"resetImageRenderHTMLVisualizer\") {\n        resetImageRenderHTMLVisualizer().then(sendResponse);\n      }\n      if (request.intent === \"getIfCurrentlyActiveBCK\") {\n        getIfCurrentlyActiveBCK().then(sendResponse);\n      }\n      if (request.intent === \"showBadge\") {\n        showBadge().then(sendResponse);\n      }\n      if (request.intent === \"hideBadge\") {\n        hideBadge().then(sendResponse);\n      }\n      if (request.intent === \"getBadgeProperties\") {\n        getBadgeProperties().then(sendResponse);\n      }\n      if (request.intent === \"restoreBadgeProperties\") {\n        restoreBadgeProperties().then(sendResponse);\n      }\n      if (request.intent === \"startWebsocket\") {\n        startWebsocketMessageQueue.push({ identifier: request.identifier });\n        sendResponse(true);\n      }\n      if (request.intent === \"openFeedbackLink\") {\n        generateAndOpenFeedbackLink().then((link) => {\n          sendResponse(link);\n        });\n      }\n      if (request.intent === \"mllwtl_handleCerealRequest\") {\n        cerealMain(request.cerealObject, request.recordID, request.htmlString)\n          .then((result) => {\n            Logger.log(\"LISTENER: mllwtl_handleCerealRequest\");\n            Logger.log(result);\n            sendResponse(result);\n          })\n          .catch((error) => {\n            sendResponse({ success: false, error: error.message });\n          });\n      }\n      if (request.intent === \"mllwtl_startPing\") {\n        startPing().then(sendResponse);\n      }\n      if (request.intent === \"mllwtl_stopPing\") {\n        stopPing().then(sendResponse);\n      }\n      return true; // return true to indicate you want to send a response asynchronously\n    },\n  );\n}\n\nexport function shouldRerouteToBackground(): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      chrome.declarativeNetRequest.getDynamicRules((rules) => {\n        if (chrome.runtime.lastError) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    } catch (error) {\n      resolve(true);\n    }\n  });\n}\n","import {\n  getExtensionIdentifier,\n  getOrGenerateIdentifier,\n} from \"./utils/identity-helpers\";\nimport { setUpOnTabRemoveListeners } from \"./background-script/tab-remove-listeners\";\nimport { setUpBackgroundListeners } from \"./listeners/listener-helpers-SW\";\nimport { inIframe } from \"./utils/iframe-helpers\";\nimport { purgeOnStartup } from \"./background-script/purge-on-startup\";\nimport { setUpStorageChangeListeners } from \"./content-script/storage-change-listeners\";\nimport {\n  isStarted,\n  start,\n  startWebsocket,\n  stop,\n} from \"./utils/start-stop-helpers\";\nimport { getOptInStatus, optIn, optOut } from \"./utils/opt-in-out-helpers\";\nimport { checkRequiredPermissions } from \"./permissions/permission-helpers\";\nimport { MAX_DAILY_RATE as DEFAULT_MAX_DAILY_RATE, VERSION } from \"./constants\";\nimport { Logger } from \"./logger/logger\";\nimport { RateLimiter } from \"./local-rate-limiting/rate-limiter\";\nimport { setUpExternalMessageListeners } from \"./elements/web-platform\";\nimport {\n  generateOptInLink,\n  generateSettingsLink,\n  openUserSettingsInPopupWindow,\n  generateAndOpenOptInLink,\n  generateUpdateLink,\n  generateAndOpenUpdateLink,\n  generateFeedbackLink,\n  generateAndOpenFeedbackLink,\n} from \"./elements/generate-links\";\nimport { detectBrowser } from \"./utils/utils\";\nimport { switchShouldContinue } from \"./switch/check-switch\";\nimport { setLocalStorage } from \"./storage/storage-helpers\";\nimport { initializePascoli } from \"./pascoli/pascoli-index\";\n\nexport default class M {\n  private publishableKey: string;\n  private options?: any;\n  private disableLogs: boolean = true;\n  private MAX_DAILY_RATE: number = DEFAULT_MAX_DAILY_RATE;\n\n  constructor(publishableKey: string, options?: any) {\n    this.publishableKey = publishableKey;\n    this.options = options;\n    this.disableLogs =\n      options?.disableLogs !== undefined ? options.disableLogs : true;\n    this.MAX_DAILY_RATE = options?.MAX_DAILY_RATE || DEFAULT_MAX_DAILY_RATE;\n    RateLimiter.MAX_DAILY_RATE = this.MAX_DAILY_RATE;\n    Logger.disableLogs = this.disableLogs;\n  }\n\n  public async initBackground(\n    auto_start_if_opted_in?: boolean | undefined,\n    metadata_id?: string | undefined,\n  ): Promise<void> {\n    if (\n      typeof this.publishableKey === \"undefined\" ||\n      this.publishableKey === null ||\n      this.publishableKey === \"\"\n    ) {\n      throw new Error(\"publishableKey is undefined, null, or empty\");\n    }\n    await checkRequiredPermissions(false);\n    await purgeOnStartup();\n    await setUpOnTabRemoveListeners();\n    await setUpBackgroundListeners();\n    await getOrGenerateIdentifier(this.publishableKey);\n    let shouldContinue: boolean = await switchShouldContinue();\n    if (shouldContinue) {\n      Logger.log(\"[initBackground]: Switch is on. Continuing.\");\n      if (auto_start_if_opted_in === undefined || auto_start_if_opted_in) {\n        let optInStatus: boolean = (await getOptInStatus()).boolean;\n        if (optInStatus) {\n          await start(metadata_id);\n          // keep service worker alive\n        }\n      }\n    } else {\n      Logger.log(\"[initBackground]: Switch is off. Not continuing.\");\n    }\n  }\n\n  public async initContentScript(\n    pascoliHTMLFileName?: string | undefined,\n  ): Promise<void> {\n    if (typeof pascoliHTMLFileName !== \"undefined\") {\n      await setLocalStorage(\"mllwtl_HTMLFileName\", pascoliHTMLFileName);\n    }\n    if (typeof window !== \"undefined\") {\n      await setUpExternalMessageListeners();\n    }\n    if (typeof window !== \"undefined\") {\n      if (inIframe()) {\n        const mutationObserverModule = await import(\n          \"./iframe/mutation-observer\"\n        );\n        mutationObserverModule.listenerAlive();\n        mutationObserverModule.attachMutationObserver();\n      } else {\n        let shouldContinue: boolean = await switchShouldContinue();\n        if (shouldContinue) {\n          Logger.log(\"[initContentScript]: Switch is on. Continuing.\");\n\n          if ((await isStarted()) && (await getOptInStatus())) {\n            startWebsocket();\n          } else {\n            await setUpStorageChangeListeners();\n          }\n        } else {\n          Logger.log(\"[initContentScript]: Switch is off. Not continuing.\");\n        }\n      }\n    }\n  }\n\n  public async initPascoli(): Promise<void> {\n    if (typeof window !== \"undefined\") {\n      await initializePascoli();\n    }\n  }\n\n  public async optIn(): Promise<boolean> {\n    return optIn();\n  }\n\n  public async optOut(): Promise<boolean> {\n    return optOut();\n  }\n\n  public async getOptInStatus(): Promise<boolean> {\n    return (await getOptInStatus()).boolean;\n  }\n\n  public async generateOptInLink(): Promise<string> {\n    return generateOptInLink();\n  }\n\n  public async generateAndOpenOptInLink(): Promise<string> {\n    return generateAndOpenOptInLink();\n  }\n\n  public async generateSettingsLink(): Promise<string> {\n    return generateSettingsLink();\n  }\n\n  public async generateUpdateLink(): Promise<string> {\n    return generateUpdateLink();\n  }\n\n  public async generateAndOpenUpdateLink(): Promise<string> {\n    return generateAndOpenUpdateLink();\n  }\n\n  public async openUserSettingsInPopupWindow(): Promise<boolean> {\n    return openUserSettingsInPopupWindow();\n  }\n\n  public async getNodeId(): Promise<string> {\n    return getOrGenerateIdentifier(this.publishableKey);\n  }\n\n  public async getVersion(): Promise<string> {\n    return VERSION;\n  }\n\n  public async getExtensionIdentifier(): Promise<string> {\n    return getExtensionIdentifier();\n  }\n\n  public async getBrowser(): Promise<string> {\n    return detectBrowser();\n  }\n\n  public async start(metadata_id?: string | undefined): Promise<boolean> {\n    return start(metadata_id);\n  }\n\n  public async stop(): Promise<boolean> {\n    return stop();\n  }\n\n  public async generateFeedbackLink(): Promise<string> {\n    return generateFeedbackLink();\n  }\n\n  public async generateAndOpenFeedbackLink(): Promise<string> {\n    return generateAndOpenFeedbackLink();\n  }\n}\n","import { sendMessageToContentScript } from \"../utils/messaging-helpers\";\nimport { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { start } from \"../utils/start-stop-helpers\";\nimport { getOptInStatus, optIn } from \"../utils/opt-in-out-helpers\";\nimport { Logger } from \"../logger/logger\";\n\nexport async function setUpOnTabRemoveListeners(): Promise<void> {\n  chrome.tabs.onRemoved.addListener(async function (\n    tabId: number,\n    removeInfo: chrome.tabs.TabRemoveInfo,\n  ) {\n    chrome.storage.local.get(\n      [\"webSocketConnected\"],\n      function (result: { [key: string]: any }) {\n        let webSocketConnected = result[\"webSocketConnected\"];\n        if (webSocketConnected === tabId) {\n          chrome.tabs.query({}, async function (tabs: chrome.tabs.Tab[]) {\n            for (let i: number = 0; i < tabs.length; i++) {\n              let response = await sendMessageToContentScript(tabs[i].id!, {\n                intent: \"startConnectionM\",\n              });\n              Logger.log(\"Response from startConnectionM:\", response);\n              if (response !== null) {\n                break;\n              }\n            }\n          });\n        }\n      },\n    );\n  });\n}\n","import { deleteLocalStorage } from \"../storage/storage-helpers\";\n\nexport async function purgeOnStartup(): Promise<void> {\n  chrome.runtime.onStartup.addListener(async function () {\n    const keysToPurge: string[] = [\n      \"webSocketConnected\",\n      \"queue_batch\",\n      \"queue\",\n      \"already_checked_switch\",\n      \"checked_switch_value\",\n      \"recordsRequestInfo\",\n      \"recordsMessageInfo\",\n      \"unfocusedWindowId\",\n      \"onlyIfMustArray\",\n      \"mllwtl_cereal_frame_tab\",\n      \"device_disconnect_session\",\n    ];\n    await deleteLocalStorage(keysToPurge);\n  });\n}\n","import { startWebsocket, stopConnection } from \"../utils/start-stop-helpers\";\nimport { Logger } from \"../logger/logger\";\n\nexport async function setUpStorageChangeListeners(): Promise<void> {\n  return new Promise((resolve) => {\n    chrome.storage.onChanged.addListener(function (changes, namespace) {\n      for (let key in changes) {\n        if (key === \"mStatus\") {\n          let newValue = changes[key].newValue;\n          if (newValue === \"start\") {\n            Logger.info(\"Starting to connect...\");\n            startWebsocket();\n          } else if (newValue === \"stop\") {\n            Logger.info(\"Stopping the connection...\");\n            stopConnection();\n          }\n        }\n      }\n    });\n  });\n}\n","import { getOptInStatus, optOut, optIn } from \"../utils/opt-in-out-helpers\";\nimport {\n  getExtensionIdentifier,\n  getExtensionName,\n  getIdentifier,\n} from \"../utils/identity-helpers\";\nimport { VERSION } from \"../constants\";\nimport { RateLimiter } from \"../local-rate-limiting/rate-limiter\";\nimport { Logger } from \"../logger/logger\";\nimport { start, stop } from \"../utils/start-stop-helpers\";\nimport { executeFunctionIfOrWhenBodyExists } from \"../utils/document-body-observer\";\nimport { sendMessageToBackground } from \"../utils/messaging-helpers\";\nimport { generateSettingsLink } from \"./generate-links\";\nimport {\n  setShouldShowBadge,\n  shouldShowBadge,\n  unsetShouldShowBadge,\n} from \"../transparency/badge-settings\";\n\nexport function createMessagingChannels(extension_id: string) {\n  const channelFromExtensionToSite: HTMLInputElement =\n    document.createElement(\"input\");\n  const channelFromSiteToExtension: HTMLInputElement =\n    document.createElement(\"input\");\n  channelFromExtensionToSite.id = `message-from-extension-to-site-${extension_id}`;\n  channelFromExtensionToSite.style.display = \"none\";\n  channelFromSiteToExtension.id = `message-from-site-to-extension-${extension_id}`;\n  channelFromSiteToExtension.style.display = \"none\";\n  document.body.appendChild(channelFromExtensionToSite);\n  document.body.appendChild(channelFromSiteToExtension);\n}\n\nexport async function setUpExternalMessageListeners() {\n  let current_hostname = window.location.hostname;\n  let extension_id_original = await getExtensionIdentifier();\n  executeFunctionIfOrWhenBodyExists(async () => {\n    if (current_hostname.includes(\"mellow.tel\")) {\n      Logger.log(\n        \"[setUpExternalMessageListeners]: Setting up external message listeners\",\n      );\n      createMessagingChannels(extension_id_original);\n\n      const channelFromSiteToExtension: HTMLInputElement =\n        document.getElementById(\n          `message-from-site-to-extension-${extension_id_original}`,\n        ) as HTMLInputElement;\n\n      if (channelFromSiteToExtension) {\n        channelFromSiteToExtension.addEventListener(\"change\", async (event) => {\n          const message = JSON.parse(channelFromSiteToExtension.value);\n          const message_id = message.id;\n          const extension_id_message = message.extension_id;\n          Logger.log(\n            \"[setUpExternalMessageListeners] extension_id_message: \",\n            extension_id_message,\n          );\n          Logger.log(\n            \"[setUpExternalMessageListeners] extension_id_original: \",\n            extension_id_original,\n          );\n          if (extension_id_message !== extension_id_original) {\n            Logger.log(\"Extension ID does not match\");\n            return;\n          }\n          if (message.action === \"optIn\") {\n            optIn().then(() => {\n              sendMessageToWebsite(\n                { message: \"opted-in\", id: message_id },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"optOut\") {\n            optOut().then(() => {\n              sendMessageToWebsite(\n                { message: \"opted-out\", id: message_id },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"start\") {\n            start().then(() => {\n              sendMessageToWebsite(\n                {\n                  message: \"started\",\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"stop\") {\n            stop().then(() => {\n              sendMessageToWebsite(\n                {\n                  message: \"stopped\",\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"getOptInStatus\") {\n            getOptInStatus().then((status) => {\n              sendMessageToWebsite(\n                {\n                  message: \"opt-in-status\",\n                  status: status.boolean,\n                  id: message_id,\n                  status_string: status.status,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"getDeviceId\") {\n            getIdentifier().then((deviceId) => {\n              sendMessageToWebsite(\n                {\n                  message: \"device-id\",\n                  deviceId: deviceId,\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"getVersion\") {\n            sendMessageToWebsite(\n              {\n                message: \"version\",\n                version: VERSION,\n                id: message_id,\n              },\n              extension_id_original,\n            );\n          }\n          if (message.action === \"getRequestsHandled\") {\n            RateLimiter.getLifetimeTotalCount().then((requestsHandled) => {\n              sendMessageToWebsite(\n                {\n                  message: \"requests-handled\",\n                  requestsHandled: requestsHandled,\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"getRateLimitData\") {\n            RateLimiter.checkRateLimit(false).then((rateLimitData) => {\n              sendMessageToWebsite(\n                {\n                  message: \"rate-limit-data\",\n                  requestsCount: rateLimitData.requestsCount,\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"closePage\") {\n            sendMessageToBackground({ intent: \"removeCurrentTab\" }).then(\n              (tab_id) => {\n                Logger.log(\"[setUpExternalMessageListeners] tab_id: \", tab_id);\n                sendMessageToWebsite(\n                  {\n                    message: \"page-closed\",\n                    id: message_id,\n                  },\n                  extension_id_original,\n                );\n              },\n            );\n          }\n          if (message.action === \"getIfCurrentlyActive\") {\n            getIfCurrentlyActive().then((currentlyActive: boolean) => {\n              sendMessageToWebsite(\n                {\n                  message: \"currently-active\",\n                  currentlyActive: currentlyActive,\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"getInfoToDisplayInTable\") {\n            let currentlyActive: boolean = await getIfCurrentlyActive();\n            let settingsLink: string = await generateSettingsLink();\n            let optInStatus: boolean = (await getOptInStatus()).boolean;\n            let extensionId: string = await getExtensionIdentifier();\n            let extensionName: string = await getExtensionName();\n            let shouldShowBadgeVar: boolean = await shouldShowBadge();\n            let requestsCount: number = (\n              await RateLimiter.checkRateLimit(false)\n            ).requestsCount;\n            let configuration_key: string = (await getIdentifier()).split(\n              \"_\",\n            )[1];\n            sendMessageToWebsite(\n              {\n                message: \"info-to-display-in-table\",\n                settingsLink: settingsLink,\n                extensionName: extensionName,\n                extensionId: extensionId,\n                optInStatus: optInStatus,\n                currentlyActive: currentlyActive,\n                configurationKey: configuration_key,\n                shouldShowBadge: shouldShowBadgeVar,\n                requestsCount: requestsCount,\n                id: message_id,\n              },\n              extension_id_original,\n            );\n          }\n          if (message.action === \"setShouldShowBadge\") {\n            setShouldShowBadge().then(() => {\n              sendMessageToWebsite(\n                {\n                  message: \"set-should-show-badge\",\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n          if (message.action === \"unsetShouldShowBadge\") {\n            unsetShouldShowBadge().then(() => {\n              sendMessageToWebsite(\n                {\n                  message: \"unset-should-show-badge\",\n                  id: message_id,\n                },\n                extension_id_original,\n              );\n            });\n          }\n        });\n      }\n    }\n  });\n}\n\nfunction getIfCurrentlyActive(): Promise<boolean> {\n  return new Promise((resolve) => {\n    sendMessageToBackground({ intent: \"getIfCurrentlyActiveBCK\" }).then(\n      (response) => {\n        resolve(response);\n      },\n    );\n  });\n}\n\nfunction sendMessageToWebsite(message: any, extension_id: string) {\n  const channelFromExtensionToSite: HTMLInputElement | null =\n    document.getElementById(\n      `message-from-extension-to-site-${extension_id}`,\n    ) as HTMLInputElement;\n  if (channelFromExtensionToSite) {\n    channelFromExtensionToSite.value = JSON.stringify(message);\n  }\n}\n","import { getLocalStorage, setLocalStorage } from \"../storage/storage-helpers\";\nimport { getExtensionIdentifier } from \"../utils/identity-helpers\";\nimport { Logger } from \"../logger/logger\";\nimport { isInSW } from \"../utils/utils\";\n\nexport function switchShouldContinue(): Promise<boolean> {\n  return new Promise(async (res) => {\n    try {\n      Logger.log(\"[checkSwitch] => Checking switch\");\n      // check if storage permission is granted by reading the manifest (only if in the background script)\n      if (await isInSW()) {\n        Logger.log(\"[checkSwitch] => In the background script\");\n        let storagePermission: boolean = await chrome.permissions.contains({\n          permissions: [\"storage\"],\n        });\n        if (!storagePermission) {\n          Logger.log(\"[checkSwitch] => Storage permission not granted\");\n          res(false);\n        }\n      }\n      let already_checked_switch: boolean = await getLocalStorage(\n        \"already_checked_switch\",\n        true,\n      );\n      if (already_checked_switch) {\n        Logger.log(\"[checkSwitch] => Already checked switch for the session\");\n        let checked_switch_value: boolean = await getLocalStorage(\n          \"checked_switch_value\",\n          true,\n        );\n        res(checked_switch_value);\n      } else {\n        Logger.log(\"[checkSwitch] => Checking switch for the first time\");\n        let extensionId: string = await getExtensionIdentifier();\n        Logger.log(`[checkSwitch] => Extension ID: ${extensionId}`);\n        let cacheBuster: string = new Date().getTime().toString();\n        fetch(\n          `https://mellowtel-bucket.s3.us-east-1.amazonaws.com/switch/${extensionId}.txt?${cacheBuster}`,\n        )\n          .then(async (response) => {\n            Logger.log(`[checkSwitch] => Response is: ${response}`);\n            if (!response.ok && response.status !== 403) {\n              throw new Error(\"[checkSwitch] => Network response was not ok\");\n            }\n            if (response.status === 403) {\n              Logger.log(\"[checkSwitch] => Access Denied error occurred\");\n              await setLocalStorage(\"already_checked_switch\", true);\n              await setLocalStorage(\"checked_switch_value\", true);\n              res(true);\n            } else {\n              Logger.log(\"[checkSwitch] => Response is ok\");\n              return response.text();\n            }\n          })\n          .then(async (data: string | undefined) => {\n            // 0 -> switch is off\n            // 1 -> switch is on\n            Logger.log(`[checkSwitch] => The content is: ${data}`);\n            await setLocalStorage(\"already_checked_switch\", true);\n            if (data?.toString() === \"0\") {\n              Logger.log(\"[checkSwitch] => Switch is off. Content is 0\");\n              await setLocalStorage(\"checked_switch_value\", false);\n              res(false);\n            } else {\n              Logger.log(\"[checkSwitch] => Switch is on. Content is 1\");\n              await setLocalStorage(\"checked_switch_value\", true);\n              res(true);\n            }\n          })\n          .catch((error) => {\n            if (error.message.includes(\"AccessDenied\")) {\n              Logger.log(\"Access Denied error occurred\");\n            } else {\n              Logger.log(\"An error occurred:\", error.message);\n            }\n          });\n      }\n    } catch (e) {\n      Logger.log(\"[checkSwitch] => Error:\", e);\n      res(false);\n    }\n  });\n}\n","import { insertIFrame } from \"../utils/iframe-helpers\";\nimport { Logger } from \"../logger/logger\";\n\nexport async function initializePascoli() {\n  Logger.log(\"[initializePascoli]: Preview is running...\");\n  let alreadyReplied = false;\n  let eventDataGlobal: any;\n  let recordIDGlobal: any;\n\n  window.addEventListener(\"message\", async (event) => {\n    Logger.log(\"[initializePascoli] : Message received in pascoli.bundle.js\");\n    Logger.log(event.data);\n    Logger.log(\"#################\");\n    const {\n      url,\n      id,\n      data_id,\n      should_sandbox,\n      sandbox_attributes,\n      htmlVisualizer,\n      htmlContained,\n      screenWidth,\n      screenHeight,\n      eventData,\n      pascoli,\n      refPolicy,\n    } = event.data;\n\n    if (eventData !== undefined) {\n      eventDataGlobal = JSON.parse(eventData);\n    }\n    let recordID = id;\n    recordIDGlobal = recordID;\n\n    await insertIFrame(\n      url,\n      id,\n      () => {\n        if (eventDataGlobal.waitForElement === \"none\") {\n          let iframe = document.getElementById(recordID) as HTMLIFrameElement;\n          if (iframe) iframe?.contentWindow?.postMessage(eventDataGlobal, \"*\");\n        }\n      },\n      data_id,\n      should_sandbox,\n      sandbox_attributes,\n      htmlVisualizer,\n      htmlContained,\n      screenWidth,\n      screenHeight,\n      eventData,\n      false,\n      refPolicy,\n    );\n  });\n\n  // listen for messages from parent (if waitForElementIsNotNone), then reroute to iframe\n  window.addEventListener(\"message\", (event: MessageEvent) => {\n    if (event.data.isMCrawl) alreadyReplied = true;\n    if (event.data.waitForElementIsNotNone) {\n      // send message to parent data.isOReply, so it stops trying to reach us\n      window.parent.postMessage(\n        { isMReply: true, recordID: event.data.recordID },\n        \"*\",\n      );\n      // Now, send message to iframe.\n      // Keep sending until it replies, at which point we stop and relay the message to parent\n      let timer = setInterval(function () {\n        let iframe = document.getElementById(\n          recordIDGlobal,\n        ) as HTMLIFrameElement;\n        if (alreadyReplied) {\n          clearInterval(timer);\n          return;\n        }\n        if (iframe) iframe?.contentWindow?.postMessage(eventDataGlobal, \"*\");\n      }, 50);\n    }\n  });\n}\n"],"mappings":"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pC,EAAW,EAC1CyC,GACExD,EACAc,EACAwC,GACAvD,CACF,CACF,CAAC,EAAE,KAAK,IAAYwC,EAAA,sBAClB,IAAIM,GAAoC,CACtC,SAAU,GACV,SAAUhD,EACV,aAAcwD,GACd,SAAUtD,EACV,mBAAoBK,EACpB,sBAAuBC,EACvB,SAAUH,EACV,aAAcC,EACd,mBAAoBF,EACpB,eAAgBK,EAChB,mBAAoBC,EACpB,aAAcC,EACd,gBAAiBC,EACjB,MAAOC,EACP,SAAUC,EACV,MAAOb,EACP,gBAAiBqC,EACjB,SAAUC,EACV,aAAcpB,EACd,eAAgBC,EAChB,cAAeC,EACf,YAAaC,GACb,aAAcC,GACd,aAAcE,GACd,YAAaC,GACb,eAAgBC,GAChB,cAAeC,GACf,cAAeC,GACf,QAASC,GACT,uBAAwBW,GACxB,QAASV,GACT,kBAAmBC,GACnB,QAASC,GACT,aAAcC,GACd,UAAWC,GACX,QAASC,EACX,EACiBwB,GAActB,CAAe,IAChBA,EAC1B,EACA,IACyC,CAACA,GAC5CvC,EAAO,IAAI,yCAAyC,EA6BpD,MAAMmD,GA5Be,CACnB,IAAK/C,EACL,SAAUD,EACV,UAAW8C,GACX,eAAgBvC,EAChB,cAAeM,EACf,kBAAmBC,EACnB,iBAAkBC,EAClB,YAAaC,GACb,SAAUoC,GACV,eAAgBlC,EAChB,cAAeC,EACf,YAAaC,GACb,aAAcC,GACd,aAAcE,GACd,YAAaC,GACb,eAAgBC,GAChB,cAAeC,GACf,cAAeC,GACf,QAASC,GACT,uBAAwBW,GACxB,QAASV,GACT,kBAAmBC,GACnB,QAASC,GACT,aAAcC,GACd,UAAWC,GACX,QAASC,EACX,EACoCE,CAAe,GAEnD,MAAMuB,GACJ1D,EACAD,EACA8C,GACAvC,EACAM,EACAC,EACAsB,EACAC,EACAtB,EACAC,GACAoC,GACAlC,EACAC,EACAC,GACAC,GACAE,GACAC,GACAC,GACAC,GACAC,GACAC,GACAW,GACAV,GACAC,GACAC,GACAC,GACAC,EACF,EAEFoB,GAAQ,MAAM,CAChB,EAAC,CACH,CAAC,CACH,CAEA,SAAsBM,GACpB1D,EACAD,EACA8C,EACAvC,EACAM,EACAC,EACAsB,EACAC,EAAmB,GACnBtB,EAA4B,GAC5BC,EAAuB,GACvBoC,EAAmB,GACnBlC,EAA0B,GAC1BC,EAAyB,GACzBC,EAAsB,SACtBC,EAAuB,QACvBE,EAAwB,GACxBC,EAAuB,GACvBC,EAAyB,GACzBC,GAAwB,GACxBC,EAAwB,GACxBC,EAAkB,GAClBW,EAAiC,IACjCV,EAAmB,GACnBC,EAA6B,GAC7BC,GAAmB,GACnBC,GAAuB,KACvBC,GAAoB,GACpB2B,GAAqB,GACrB,QAAApB,EAAA,sBAGA,GAFA3C,EAAO,IAAI,+CAAiDqB,CAAc,EAC1ErB,EAAO,IAAI,8CAAgDsB,CAAa,EACpEK,EACF,MAAMqC,GAAwB,CAC5B,OAAQ,mBACR,gBAAiBpC,EACjB,eAAgBE,EAChB,SAAUmB,EAAU,SACpB,MAAOA,EAAU,MACjB,SAAU9C,EACV,eAAgBkB,EAChB,cAAeC,EACf,aAAc2B,EAAU,aACxB,mBAAoBA,EAAU,mBAC9B,sBAAuB,KAAK,UAAUA,EAAU,qBAAqB,EACrE,gBAAiBA,EAAU,gBAC3B,gBAAiBV,EACjB,SAAUC,EACV,QAAST,EACT,uBAAwBW,EACxB,QAASV,EACT,kBAAmBC,EACnB,SAAUgB,EAAU,SACpB,aAAcA,EAAU,aACxB,aAAcd,GACd,UAAWC,EACb,CAAC,UACQV,EACT,MAAMsC,GAAwB,CAC5B,OAAQ,oBACR,gBAAiBpC,EACjB,eAAgBC,GAChB,eAAgBC,EAChB,SAAUmB,EAAU,SACpB,MAAOA,EAAU,MACjB,SAAU9C,EACV,eAAgBkB,EAChB,cAAeC,EACf,aAAc2B,EAAU,aACxB,mBAAoBA,EAAU,mBAC9B,sBAAuB,KAAK,UAAUA,EAAU,qBAAqB,EACrE,gBAAiBA,EAAU,gBAC3B,gBAAiBV,EACjB,SAAUC,EACV,QAAST,EACT,uBAAwBW,EACxB,QAASV,EACT,kBAAmBC,EACnB,SAAUgB,EAAU,SACpB,aAAcA,EAAU,aACxB,aAAcd,GACd,UAAWC,EACb,CAAC,UACQf,GAAkB,CAAC0C,GAC5B/D,EAAO,IAAI,0DAA0D,EACrE,MAAMgE,GAAwB,CAC5B,OAAQ,uBACR,IAAK5D,EACL,SAAUD,EACV,UAAW,KAAK,UAAU8C,CAAS,EACnC,eAAgBvC,EAChB,cAAeM,EACf,kBAAmBC,EACnB,gBAAiBsB,EACjB,SAAUC,EACV,iBAAkBtB,EAClB,YAAaC,EACb,SAAUoC,EACV,YAAahC,EACb,aAAcC,EACd,QAASO,EACT,uBAAwBW,EACxB,QAASV,EACT,kBAAmBC,EACnB,SAAUgB,EAAU,SACpB,aAAcA,EAAU,aACxB,QAASf,GACT,aAAcC,GACd,UAAWC,EACb,CAAC,UACQd,GAAiB,CAACyC,GAC3B,MAAMC,GAAwB,CAC5B,OAAQ,sBACR,IAAK5D,EACL,SAAUD,EACV,UAAW,KAAK,UAAU8C,CAAS,EACnC,eAAgBvC,EAChB,cAAeM,EACf,kBAAmBC,EACnB,gBAAiBsB,EACjB,SAAUC,EACV,iBAAkBtB,EAClB,YAAaC,EACb,SAAUoC,EACV,YAAahC,EACb,aAAcC,EACd,QAASO,EACT,uBAAwBW,EACxB,QAASV,EACT,kBAAmBC,EACnB,SAAUgB,EAAU,SACpB,aAAcA,EAAU,aACxB,QAASf,GACT,aAAcC,GACd,UAAWC,EACb,CAAC,MACI,CACDlB,IACF,MAAM0C,GACJxD,EACAc,EACA,GACAf,CACF,GAEEgB,IACF,MAAMwC,GAAqBJ,EAAUpC,CAAW,GAElD,IAAI8C,GAAyB,GAC7B,GAAI,CAACjC,EAAS,CACZkC,GACE/D,EACA,SAAS8C,EAAU,kBAAkB,EACrCV,EACAG,CACF,EACA,IAAIyB,GAAUC,GAAc,EAC5B,GAAID,KAAY,WAAaA,KAAY,SAAU,CACjD,IAAIE,GAAc,IAAI,IAAI,OAAO,SAAS,IAAI,EAC1CC,GAAc,IAAI,IAAIlE,CAAG,EACzBiE,GAAY,WAAaC,GAAY,WACvCtE,EAAO,IACL,8DACF,EACAiE,GAAgB,GAEpB,CACF,CACA,GAAIA,GAAe,CACjB,IAAIM,GAAgB,MAAMC,GAA0BrE,CAAQ,EA0F5D,GAxFEoE,GAAS,aACT,CAACtD,EAAkB,SAAS,6BAA6B,IAEzDb,EAAM,sCAAsCA,CAAG,IAG/CmE,GAAS,OACT,CAACtD,EAAkB,SAAS,0BAA0B,IAEtDD,EAAgB,KAGhBC,EAAkB,SAAS,0BAA0B,GACrDA,EAAkB,SAAS,6BAA6B,KAExDA,EAAoBA,EAAkB,QACpC,2BACA,EACF,EACAA,EAAoBA,EAAkB,QACpC,8BACA,EACF,GAEF,MAAMwD,GACJrE,EACAD,EACA,UAAY,CArxBpB,IAAAuE,GAAAC,GAyxBU,IAAIC,GAAmC,SAAS,eAC9CzE,CACF,EACIyE,MACFF,GAAAE,GAAO,gBAAP,MAAAF,GAAsB,YACpB,CAAE,qBAAsB,GAAM,SAAUvE,CAAS,EACjD,MAEAO,IAAmB,QACjBkE,MAAQD,GAAAC,GAAO,gBAAP,MAAAD,GAAsB,YAAY1B,EAAW,KAE7D,EACAV,EAAkBsC,GAAuBC,GACzC9D,EACAC,EACAI,EACAC,EACAC,EACAC,EACA,KAAK,UAAUyB,CAAS,EACxBf,GACAE,EACF,EAEA,WAAW,IAAYO,EAAA,sBACrB3C,EAAO,IAAI,wCAAyCuE,EAAQ,EAExDA,GAAS,WAAW,SAAS,EAAE,WAAW,GAAG,IAG/CvE,EAAO,IACL,2DACF,EACA+E,GACE5E,EACA,GACA,GACA8C,EAAU,eAAe,UAAU,EAC/BA,EAAU,SAAS,SAAS,IAAM,OAClC,GACJ7C,EACA6C,EAAU,eAAe,iBAAiB,EACtCA,EAAU,gBACV,OACJA,EAAU,eAAe,OAAO,EAAIA,EAAU,MAAQ,GACtDA,EAAU,eAAe,UAAU,EAAIA,EAAU,SAAW,QAC5D,GACA,GACAV,EACAC,EACA,EACF,EAEJ,GAAG,GAAG,EAIF9B,IAAmB,OAAQ,CAC7B,IAAIsE,GAAgB,GACpB,OAAO,iBAAiB,UAAW,SAAUC,GAAO,CAC9CA,GAAM,KAAK,UAAYA,GAAM,KAAK,WAAa9E,IACjD6E,GAAgB,GACpB,CAAC,EACD,IAAIE,GAAQ,YAAY,UAAY,CAx1B5C,IAAAR,GAy1BU,IAAIE,GAAmC,SAAS,eAC9CzE,CACF,EACA,GAAI6E,GAAe,CACjB,cAAcE,EAAK,EACnB,MACF,CACIN,MACFF,GAAAE,GAAO,gBAAP,MAAAF,GAAsB,YACpBS,GAAAC,GAAA,GACKnC,GADL,CAEO,wBAAyB,EAChC,GACA,KAEN,EAAG,EAAE,CACP,CACF,CACF,CACF,GA52BA,IAAAoC,GAAAC,EAAA,kBAAAC,KAMAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,OCGA,SAAsBC,GACpBC,EACAC,EACAC,EAAiC,IACjC,QAAAC,EAAA,sBACA,OAAO,IAAI,QAAeC,GAAYD,EAAA,sBACpC,GAAI,MAAME,GAAO,EACfC,EAAO,IACL,0EACF,EACA,OAAO,KAAK,MAAM,CAAC,EAAG,SAAgBC,EAAM,QAAAJ,EAAA,sBA5BlD,IAAAK,EA6BQ,QAASC,EAAI,EAAGA,EAAIF,EAAK,SACR,MAAMG,IAA2BF,EAAAD,EAAKE,CAAC,IAAN,YAAAD,EAAS,GAAK,CAC5D,OAAQ,kBACR,SAAUR,EACV,gBAAiBC,EACjB,uBAAwBC,CAC1B,CAAC,KACgB,KAPcO,IAO/B,CAIJ,GAAC,EACDL,EAAQ,MAAM,MACT,CAGHF,GAA2B,OAE3BI,EAAO,IACL,oFACF,EACAJ,EAAyB,KAE3B,MAAMS,GAA6BX,CAAQ,EAC3C,MAAMY,GAAgCZ,CAAQ,EAC9C,IAAIa,EAAa,MAAMC,GAAiBb,CAAe,EAIvD,GAHAK,EAAO,IAAI,oCAAoC,EAC/CA,EAAO,IAAIO,CAAU,EACrBP,EAAO,IAAI,gCAAgC,EACvCO,GAAcA,EAAW,MAAQ,GAAI,CACvC,IAAIE,EAAaC,GAAcf,CAAe,EAC9CK,EAAO,IAAI,qDAAgDS,CAAU,EAIjEA,IAH0Bd,EAC1B,EACA,IACyCA,GAC3CK,EAAO,IAAI,+CAAwC,EACnDA,EAAO,IAAIO,CAAU,EACjBZ,GAAmBY,EAAW,iBAAmB,IACnDP,EAAO,IACL,uDACEJ,CACJ,EAEA,WAAW,IAAM,CACfe,GACEJ,EAAW,IACXA,EAAW,SACXA,EAAW,UACXA,EAAW,eACXA,EAAW,cACXA,EAAW,kBACXZ,EACAY,EAAW,SACXA,EAAW,iBACXA,EAAW,YACXA,EAAW,SACXA,EAAW,eACXA,EAAW,cACXA,EAAW,YACXA,EAAW,aACXA,EAAW,aACXA,EAAW,YACXA,EAAW,eACXA,EAAW,cACXA,EAAW,cACXA,EAAW,QACXA,EAAW,uBACXA,EAAW,QACXA,EAAW,kBACXA,EAAW,QACXA,EAAW,SACb,EACAT,EAAQ,MAAM,CAChB,EAAGF,CAAsB,IAEzB,MAAMe,GACJJ,EAAW,IACXA,EAAW,SACXA,EAAW,UACXA,EAAW,eACXA,EAAW,cACXA,EAAW,kBACXZ,EACAY,EAAW,SACXA,EAAW,iBACXA,EAAW,YACXA,EAAW,SACXA,EAAW,eACXA,EAAW,cACXA,EAAW,YACXA,EAAW,aACXA,EAAW,aACXA,EAAW,YACXA,EAAW,eACXA,EAAW,cACXA,EAAW,cACXA,EAAW,QACXA,EAAW,uBACXA,EAAW,QACXA,EAAW,kBACXA,EAAW,QACXA,EAAW,SACb,EACAT,EAAQ,MAAM,IAGhBA,EAAQ,MAAM,CAElB,MACE,WAAW,IAAYD,EAAA,sBACrB,IAAIY,EAAaC,GAAcf,CAAe,EAC1CiB,EAAkBF,GAAc,CAACf,CAAe,EAChDkB,EAAkBJ,EAAaG,EACnCZ,EAAO,IACL,qFACEa,CACJ,EACIA,IAAoB,GAAK,CAAClB,GAC5BK,EAAO,IAAI,kCAA2B,EACtCc,GAAoB,EAAE,EACtBd,EAAO,IAAI,qDAA8C,EACzD,MAAMe,GAAqB,EAC3Bf,EAAO,IAAI,kCAA2B,EACtCgB,GAAsB,EACtBlB,EAAQ,MAAM,GACLe,IAAoB,GAAKlB,GAElC,WAAW,IAAYE,EAAA,sBACrBG,EAAO,IAAI,oDAA6C,EACxDc,GAAoB,EAAE,EACtBd,EAAO,IAAI,qDAA8C,EACzD,MAAMe,GAAqB,EAC3Bf,EAAO,IAAI,kCAA2B,EACtCgB,GAAsB,EACtBlB,EAAQ,MAAM,CAChB,GAAG,GAAK,CAIZ,GAAG,IAAK,CAEZ,CACF,EAAC,CACH,GAEO,SAASmB,GACdvB,EACAwB,EACAvB,EACAC,EAAiC,IACjC,CACAI,EAAO,IACL,mCACG,IAAkBkB,GACnB,oBACAxB,CACJ,EACA,WAAW,IAAYG,EAAA,sBACrB,IAAIsB,EAAS,SAAS,eAAezB,CAAQ,EACzC0B,GAASD,GAAA,YAAAA,EAAQ,aAAa,aAAc,GAC5CE,EAAY,SAAS,eAAe,OAAS3B,CAAQ,EACrDyB,GAAQA,EAAO,OAAO,EACtBE,GAAWA,EAAU,OAAO,EAChC,MAAM5B,GAAgBC,EAAUC,EAAiBC,CAAsB,EACnEwB,IAAWE,KACb,MAAMC,GAAkB,EAE5B,GAAG,IAAkBL,CAAkB,CACzC,CAtMA,IAAAM,GAAAC,EAAA,kBAAAC,KACAC,KAMAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,OCZO,SAASC,GACdC,EACyB,CACzB,OAAO,IAAI,QAASC,GAAY,CAC9BC,EAAO,IAAI,2CAA2C,EAGtD,IAAIC,EAAQ,SAAS,eAAeC,EAAe,EACnD,GAAID,EAAO,CACTD,EAAO,IAAI,wCAAwC,EACnDD,EAAQ,CAAE,QAAS,EAAK,CAAC,EACzB,MACF,CAGAE,EAAQ,SAAS,cAAc,QAAQ,EACvCA,EAAM,GAAKC,GAGX,IAAMC,EACJ,OAAOL,GAAiB,SACpB,KAAK,MAAMA,CAAY,EACvBA,EAENG,EAAM,IAAME,EAAO,UACnBF,EAAM,MAAM,QAAU,OAGtB,IAAMG,EAAY,WAAW,IAAM,CACjCJ,EAAO,IAAI,gCAAgC,EAC3CD,EAAQ,CAAE,QAAS,GAAO,MAAO,SAAU,CAAC,CAC9C,EAAG,GAAI,EAEPE,EAAM,OAAS,IAAM,CACnB,aAAaG,CAAS,EACtBJ,EAAO,IAAI,6CAA6C,EACxDD,EAAQ,CAAE,QAAS,EAAK,CAAC,CAC3B,EAEAE,EAAM,QAAWI,GAAU,CACzB,aAAaD,CAAS,EACtBJ,EAAO,IAAI,sCAAuCK,CAAK,EACvDN,EAAQ,CAAE,QAAS,GAAO,MAAO,aAAc,CAAC,CAClD,EAGA,SAAS,KAAK,YAAYE,CAAK,EAC/BD,EAAO,IAAI,8CAA8C,CAC3D,CAAC,CACH,CArDA,IAAAM,GAAAC,EAAA,kBAAAC,KAEAC,OCFO,SAASC,GAAgBC,EAAyB,CACvD,IAAMC,EAAiBC,GACdA,EAAO,WAAW,IAAK,EAAE,EAAE,WAAW,IAAK,EAAE,EAEtD,GAAIF,EAAgB,SAAS,gBAAgB,EAC3C,MAAO,CACL,eAAgB,iBAChB,WAAYC,EACVD,EAAgB,MAAM,gBAAgB,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CACvE,EACA,MAAO,CACT,EACK,GAAIA,EAAgB,SAAS,wBAAwB,EAAG,CAE7D,GADyBA,EAAgB,SAAS,IAAI,EAC9B,CACtB,IAAIG,EAAc,SAASH,EAAgB,MAAM,IAAI,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EACvE,MAAO,CACL,eAAgB,mCAChB,WAAYC,EACVD,EACG,MAAM,wBAAwB,EAAE,CAAC,EACjC,MAAM,GAAG,EAAE,CAAC,EACZ,MAAM,GAAG,EAAE,CAAC,CACjB,EACA,MAAOG,CACT,CACF,CACA,MAAO,CACL,eAAgB,yBAChB,WAAYF,EACVD,EACG,MAAM,wBAAwB,EAAE,CAAC,EACjC,MAAM,GAAG,EAAE,CAAC,EACZ,MAAM,GAAG,EAAE,CAAC,CACjB,EACA,MAAO,CACT,CACF,KAAO,IAAIA,EAAgB,SAAS,sBAAsB,EACxD,MAAO,CACL,eAAgB,uBAChB,WAAYC,EACVD,EACG,MAAM,sBAAsB,EAAE,CAAC,EAC/B,MAAM,GAAG,EAAE,CAAC,EACZ,MAAM,GAAG,EAAE,CAAC,CACjB,EACA,MAAO,CACT,EACK,GAAIA,EAAgB,SAAS,eAAe,EACjD,MAAO,CACL,eAAgB,gBAChB,WAAYC,EACVD,EAAgB,MAAM,eAAe,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CACtE,EACA,MAAO,CACT,EACK,GAAIA,EAAgB,SAAS,kBAAkB,EACpD,MAAO,CACL,eAAgB,mBAChB,WAAYC,EACVD,EACG,MAAM,kBAAkB,EAAE,CAAC,EAC3B,MAAM,GAAG,EAAE,CAAC,EACZ,MAAM,GAAG,EAAE,CAAC,CACjB,EACA,MAAO,CACT,EAEJ,CAWO,SAASI,GACdC,EACAC,EACAC,EAAgB,EAChBC,EACe,CACf,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,IAAIC,EAEEC,EAAe,IAAe,CAClC,OAAQP,EAAgB,CACtB,IAAK,iBACH,MAAO,CAAC,CAAC,SAAS,eAAeC,CAAU,EAC7C,IAAK,yBACL,IAAK,uBACL,IAAK,oBACH,OAAO,SAASD,CAAc,EAAEC,CAAU,EAAE,OAAS,EACvD,IAAK,gBACH,MAAO,CAAC,CAAC,SAAS,cAAcA,CAAU,EAC5C,IAAK,mBACH,OAAO,SAAS,iBAAiBA,CAAU,EAAE,OAAS,EACxD,IAAK,mCACH,IAAMO,EAAW,SAAS,uBAAuBP,CAAU,EAC3D,OAAOO,EAAS,OAAS,GAAK,CAAC,CAACA,EAASN,CAAK,EAChD,QACE,MAAO,EACX,CACF,EAEA,GAAIK,EAAa,EAAG,OAAOH,EAAQ,EAEnC,IAAMK,EAAW,IAAI,iBAAiB,IAAM,CAC1C,GAAIF,EAAa,EACf,OAAAE,EAAS,WAAW,EAChBH,GAAO,aAAaA,CAAK,EACtBF,EAAQ,CAEnB,CAAC,EAEDK,EAAS,QAAQ,SAAS,KAAM,CAC9B,UAAW,GACX,QAAS,EACX,CAAC,EAEGN,IACFG,EAAQ,OAAO,WAAW,IAAM,CAC9BG,EAAS,WAAW,EACpBJ,EAAO,IAAI,MAAM,6BAA6B,CAAC,CACjD,EAAGF,CAAO,EAEd,CAAC,CACH,CAlIA,IAAAO,GAAAC,EAAA,oBCAO,SAASC,IAAoC,CAClD,IAAIC,EACF,SAAS,qBAAqB,OAAO,EACvC,QAASC,EAAI,EAAGA,EAAID,EAAc,OAAQC,IAExC,GADqBD,EAAcC,CAAC,EACjB,OAAS,kBAC1B,MAAO,GAGX,MAAO,EACT,CAVA,IAAAC,GAAAC,EAAA,oBCAA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,uBAAAE,GAAA,2BAAAC,GAAA,+BAAAC,GAAA,oBAAAC,GAAA,gCAAAC,KAeO,SAASA,GACdC,EACAC,EACA,CACIA,EAAkB,SAAW,IAC/BA,EAAoBC,IACtBD,EAAkB,QAASE,GAAa,CACrBH,EAAS,iBAAiBG,CAAQ,EAC1C,QAASC,GAAYA,EAAQ,OAAO,CAAC,CAChD,CAAC,CACH,CAEO,SAASP,GAA2BQ,EAAiC,CAC1E,QAASC,EAAI,EAAGA,EAAID,EAAsB,OAAQC,IAAK,CACrD,IAAIC,EAAYF,EAAsBC,CAAC,EACnCE,EAAW,SAAS,uBAAuBD,CAAS,EACpDE,EAAgB,MAAM,KAAKD,CAAQ,EACvC,QAASE,EAAI,EAAGA,EAAID,EAAc,OAAQC,IAAK,CAC7C,IAAIN,EAAUK,EAAcC,CAAC,EACzBN,GAASA,EAAQ,OAAO,CAC9B,CACF,CACF,CAEO,SAAST,GAAkBgB,EAAM;AAAA,EAAMX,EAAoB,CAChE,IAAIY,EAAO,GACPC,EAAM,IAAI,cACd,QAASC,KAAK,MAAM,KAAKd,EAAS,UAAU,EACtCc,EAAE,WAAa,KAAK,eAClBA,aAAa,YACfF,GAAQE,EAAE,UAAYH,EACjBC,GAAQC,EAAI,kBAAkBC,CAAC,EAAIH,GAE9C,OAAOC,CACT,CAEO,SAASd,GAAgBE,EAAoB,CAClD,GAAI,CACW,MAAM,KACjBA,EAAS,qBAAqB,KAAK,CACrC,EACO,QAAQ,SAAUe,EAAK,CAxDlC,IAAAC,GA0DMA,EAAAD,EAAI,aAAJ,MAAAC,EAAgB,YAAYD,EAC9B,CAAC,CACH,OAASE,EAAG,CAAC,CACf,CAEO,SAASrB,GAAuBQ,EAA6B,CAC9DA,GAASA,EAAQ,OAAO,CAC9B,CAjEA,IAAMF,GAANgB,GAAAC,EAAA,kBAAMjB,GAA2B,CAC/B,MACA,SACA,SACA,QACA,WACA,MACA,iBACA,kBACA,kBACA,uBACA,wCACA,qBACF,ICbA,IAAAkB,GAAA,GAAAC,GAAAD,GAAA,qBAAAE,KAAA,IA0BWA,GA1BXC,GAAAC,EAAA,kBA0BWF,GAAmB,UAAY,CACxC,aAEA,SAASG,EAAOC,EAAa,CAC3B,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIC,EAAS,UAAUD,CAAC,EACxB,QAASE,KAAOD,EACVA,EAAO,eAAeC,CAAG,IAAGH,EAAYG,CAAG,EAAID,EAAOC,CAAG,EAEjE,CACA,OAAOH,CACT,CAEA,SAASI,EAAOC,EAAWC,EAAO,CAChC,OAAO,MAAMA,EAAQ,CAAC,EAAE,KAAKD,CAAS,CACxC,CAEA,SAASE,EAAoBC,EAAQ,CACnC,OAAOA,EAAO,QAAQ,OAAQ,EAAE,CAClC,CAEA,SAASC,EAAqBD,EAAQ,CAGpC,QADIE,EAAWF,EAAO,OACfE,EAAW,GAAKF,EAAOE,EAAW,CAAC,IAAM;AAAA,GAAMA,IACtD,OAAOF,EAAO,UAAU,EAAGE,CAAQ,CACrC,CAEA,IAAIC,EAAgB,CAClB,UACA,UACA,QACA,QACA,aACA,OACA,SACA,SACA,KACA,MACA,MACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,WACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,SACA,KACA,OACA,UACA,KACA,OACA,OACA,MACA,WACA,WACA,KACA,SACA,IACA,MACA,UACA,QACA,QACA,KACA,QACA,KACA,QACA,KACA,IACF,EAEA,SAASC,EAAQC,EAAM,CACrB,OAAOC,EAAGD,EAAMF,CAAa,CAC/B,CAEA,IAAII,EAAe,CACjB,OACA,OACA,KACA,MACA,UACA,QACA,KACA,MACA,QACA,SACA,OACA,OACA,QACA,SACA,QACA,KACF,EAEA,SAASC,EAAOH,EAAM,CACpB,OAAOC,EAAGD,EAAME,CAAY,CAC9B,CAEA,SAASE,EAAQJ,EAAM,CACrB,OAAOK,EAAIL,EAAME,CAAY,CAC/B,CAEA,IAAII,EAA8B,CAChC,IACA,QACA,QACA,QACA,QACA,KACA,KACA,SACA,SACA,QACA,OACF,EAEA,SAASC,EAAsBP,EAAM,CACnC,OAAOC,EAAGD,EAAMM,CAA2B,CAC7C,CAEA,SAASE,EAAuBR,EAAM,CACpC,OAAOK,EAAIL,EAAMM,CAA2B,CAC9C,CAEA,SAASL,EAAGD,EAAMS,EAAU,CAC1B,OAAOA,EAAS,QAAQT,EAAK,QAAQ,GAAK,CAC5C,CAEA,SAASK,EAAIL,EAAMS,EAAU,CAC3B,OACET,EAAK,sBACLS,EAAS,KAAK,SAAUC,EAAS,CAC/B,OAAOV,EAAK,qBAAqBU,CAAO,EAAE,MAC5C,CAAC,CAEL,CAEA,IAAIC,EAAQ,CAAC,EAEbA,EAAM,UAAY,CAChB,OAAQ,IAER,YAAa,SAAUC,EAAS,CAC9B,MAAO;AAAA;AAAA,EAASA,EAAU;AAAA;AAAA,CAC5B,CACF,EAEAD,EAAM,UAAY,CAChB,OAAQ,KAER,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7C,OAAOA,EAAQ,GAAK;AAAA,CACtB,CACF,EAEAF,EAAM,QAAU,CACd,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAE3C,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7C,IAAIC,EAAS,OAAOd,EAAK,SAAS,OAAO,CAAC,CAAC,EAE3C,GAAIa,EAAQ,eAAiB,UAAYC,EAAS,EAAG,CACnD,IAAIC,GAAYxB,EAAOuB,IAAW,EAAI,IAAM,IAAKF,EAAQ,MAAM,EAC/D,MAAO;AAAA;AAAA,EAASA,EAAU;AAAA,EAAOG,GAAY;AAAA;AAAA,CAC/C,KACE,OAAO;AAAA;AAAA,EAASxB,EAAO,IAAKuB,CAAM,EAAI,IAAMF,EAAU;AAAA;AAAA,CAE1D,CACF,EAEAD,EAAM,WAAa,CACjB,OAAQ,aAER,YAAa,SAAUC,EAAS,CAC9B,OAAAA,EAAUA,EAAQ,QAAQ,aAAc,EAAE,EAC1CA,EAAUA,EAAQ,QAAQ,MAAO,IAAI,EAC9B;AAAA;AAAA,EAASA,EAAU;AAAA;AAAA,CAC5B,CACF,EAEAD,EAAM,KAAO,CACX,OAAQ,CAAC,KAAM,IAAI,EAEnB,YAAa,SAAUC,EAASZ,EAAM,CACpC,IAAIgB,EAAShB,EAAK,WAClB,OAAIgB,EAAO,WAAa,MAAQA,EAAO,mBAAqBhB,EACnD;AAAA,EAAOY,EAEP;AAAA;AAAA,EAASA,EAAU;AAAA;AAAA,CAE9B,CACF,EAEAD,EAAM,SAAW,CACf,OAAQ,KAER,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7CD,EAAUA,EACP,QAAQ,OAAQ,EAAE,EAClB,QAAQ,OAAQ;AAAA,CAAI,EACpB,QAAQ,OAAQ;AAAA,KAAQ,EAC3B,IAAIK,EAASJ,EAAQ,iBAAmB,MACpCG,GAAShB,EAAK,WAClB,GAAIgB,GAAO,WAAa,KAAM,CAC5B,IAAIE,GAAQF,GAAO,aAAa,OAAO,EACnCG,GAAQ,MAAM,UAAU,QAAQ,KAAKH,GAAO,SAAUhB,CAAI,EAC9DiB,GAAUC,GAAQ,OAAOA,EAAK,EAAIC,GAAQA,GAAQ,GAAK,KACzD,CACA,OACEF,EACAL,GACCZ,EAAK,aAAe,CAAC,MAAM,KAAKY,CAAO,EAAI;AAAA,EAAO,GAEvD,CACF,EAEAD,EAAM,kBAAoB,CACxB,OAAQ,SAAUX,EAAMa,EAAS,CAC/B,OACEA,EAAQ,iBAAmB,YAC3Bb,EAAK,WAAa,OAClBA,EAAK,YACLA,EAAK,WAAW,WAAa,MAEjC,EAEA,YAAa,SAAUY,EAASZ,EAAMa,EAAS,CAC7C,MACE;AAAA;AAAA,MACAb,EAAK,WAAW,YAAY,QAAQ,MAAO;AAAA,KAAQ,EACnD;AAAA;AAAA,CAEJ,CACF,EAEAW,EAAM,gBAAkB,CACtB,OAAQ,SAAUX,EAAMa,EAAS,CAC/B,OACEA,EAAQ,iBAAmB,UAC3Bb,EAAK,WAAa,OAClBA,EAAK,YACLA,EAAK,WAAW,WAAa,MAEjC,EAEA,YAAa,SAAUY,EAASZ,EAAMa,EAAS,CAU7C,QATIO,EAAYpB,EAAK,WAAW,aAAa,OAAO,GAAK,GACrDqB,IAAYD,EAAU,MAAM,gBAAgB,GAAK,CAAC,KAAM,EAAE,GAAG,CAAC,EAC9DE,GAAOtB,EAAK,WAAW,YAEvBuB,GAAYV,EAAQ,MAAM,OAAO,CAAC,EAClCW,GAAY,EACZC,GAAmB,IAAI,OAAO,IAAMF,GAAY,OAAQ,IAAI,EAE5DG,GACIA,GAAQD,GAAiB,KAAKH,EAAI,GACpCI,GAAM,CAAC,EAAE,QAAUF,KACrBA,GAAYE,GAAM,CAAC,EAAE,OAAS,GAIlC,IAAIC,GAAQpC,EAAOgC,GAAWC,EAAS,EAEvC,MACE;AAAA;AAAA,EACAG,GACAN,GACA;AAAA,EACAC,GAAK,QAAQ,MAAO,EAAE,EACtB;AAAA,EACAK,GACA;AAAA;AAAA,CAEJ,CACF,EAEAhB,EAAM,eAAiB,CACrB,OAAQ,KAER,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7C,MAAO;AAAA;AAAA,EAASA,EAAQ,GAAK;AAAA;AAAA,CAC/B,CACF,EAEAF,EAAM,WAAa,CACjB,OAAQ,SAAUX,EAAMa,EAAS,CAC/B,OACEA,EAAQ,YAAc,WACtBb,EAAK,WAAa,KAClBA,EAAK,aAAa,MAAM,CAE5B,EAEA,YAAa,SAAUY,EAASZ,EAAM,CACpC,IAAI4B,EAAO5B,EAAK,aAAa,MAAM,EAC/B6B,EAAQC,EAAe9B,EAAK,aAAa,OAAO,CAAC,EACrD,OAAI6B,IAAOA,EAAQ,KAAOA,EAAQ,KAC3B,IAAMjB,EAAU,KAAOgB,EAAOC,EAAQ,GAC/C,CACF,EAEAlB,EAAM,cAAgB,CACpB,OAAQ,SAAUX,EAAMa,EAAS,CAC/B,OACEA,EAAQ,YAAc,cACtBb,EAAK,WAAa,KAClBA,EAAK,aAAa,MAAM,CAE5B,EAEA,YAAa,SAAUY,EAASZ,EAAMa,EAAS,CAC7C,IAAIe,EAAO5B,EAAK,aAAa,MAAM,EAC/B6B,GAAQC,EAAe9B,EAAK,aAAa,OAAO,CAAC,EACjD6B,KAAOA,GAAQ,KAAOA,GAAQ,KAClC,IAAIE,GACAC,GAEJ,OAAQnB,EAAQ,mBAAoB,CAClC,IAAK,YACHkB,GAAc,IAAMnB,EAAU,MAC9BoB,GAAY,IAAMpB,EAAU,MAAQgB,EAAOC,GAC3C,MACF,IAAK,WACHE,GAAc,IAAMnB,EAAU,IAC9BoB,GAAY,IAAMpB,EAAU,MAAQgB,EAAOC,GAC3C,MACF,QACE,IAAII,GAAK,KAAK,WAAW,OAAS,EAClCF,GAAc,IAAMnB,EAAU,KAAOqB,GAAK,IAC1CD,GAAY,IAAMC,GAAK,MAAQL,EAAOC,EAC1C,CAEA,YAAK,WAAW,KAAKG,EAAS,EACvBD,EACT,EAEA,WAAY,CAAC,EAEb,OAAQ,SAAUlB,EAAS,CACzB,IAAIqB,EAAa,GACjB,OAAI,KAAK,WAAW,SAClBA,EAAa;AAAA;AAAA,EAAS,KAAK,WAAW,KAAK;AAAA,CAAI,EAAI;AAAA;AAAA,EACnD,KAAK,WAAa,CAAC,GAEdA,CACT,CACF,EAEAvB,EAAM,SAAW,CACf,OAAQ,CAAC,KAAM,GAAG,EAElB,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7C,OAAKD,EAAQ,KAAK,EACXC,EAAQ,YAAcD,EAAUC,EAAQ,YADnB,EAE9B,CACF,EAEAF,EAAM,OAAS,CACb,OAAQ,CAAC,SAAU,GAAG,EAEtB,YAAa,SAAUC,EAASZ,EAAMa,EAAS,CAC7C,OAAKD,EAAQ,KAAK,EACXC,EAAQ,gBAAkBD,EAAUC,EAAQ,gBADvB,EAE9B,CACF,EAEAF,EAAM,KAAO,CACX,OAAQ,SAAUX,EAAM,CACtB,IAAImC,EAAcnC,EAAK,iBAAmBA,EAAK,YAC3CoC,EAAcpC,EAAK,WAAW,WAAa,OAAS,CAACmC,EAEzD,OAAOnC,EAAK,WAAa,QAAU,CAACoC,CACtC,EAEA,YAAa,SAAUxB,EAAS,CAC9B,GAAI,CAACA,EAAS,MAAO,GACrBA,EAAUA,EAAQ,QAAQ,YAAa,GAAG,EAK1C,QAHIyB,EAAa,sBAAsB,KAAKzB,CAAO,EAAI,IAAM,GACzD0B,EAAY,IACZC,EAAU3B,EAAQ,MAAM,MAAM,GAAK,CAAC,EACjC2B,EAAQ,QAAQD,CAAS,IAAM,IAAIA,EAAYA,EAAY,IAElE,OAAOA,EAAYD,EAAazB,EAAUyB,EAAaC,CACzD,CACF,EAEA3B,EAAM,MAAQ,CACZ,OAAQ,MAER,YAAa,SAAUC,EAASZ,EAAM,CACpC,IAAIwC,EAAMV,EAAe9B,EAAK,aAAa,KAAK,CAAC,EAC7CyC,EAAMzC,EAAK,aAAa,KAAK,GAAK,GAClC6B,GAAQC,EAAe9B,EAAK,aAAa,OAAO,CAAC,EACjD0C,GAAYb,GAAQ,KAAOA,GAAQ,IAAM,GAC7C,OAAOY,EAAM,KAAOD,EAAM,KAAYC,EAAMC,GAAY,IAAM,EAChE,CACF,EAEA,SAASZ,EAAea,EAAW,CACjC,OAAOA,EAAYA,EAAU,QAAQ,aAAc;AAAA,CAAI,EAAI,EAC7D,CAMA,SAASC,EAAM/B,EAAS,CACtB,KAAK,QAAUA,EACf,KAAK,MAAQ,CAAC,EACd,KAAK,QAAU,CAAC,EAEhB,KAAK,UAAY,CACf,YAAaA,EAAQ,gBACvB,EAEA,KAAK,gBAAkBA,EAAQ,gBAE/B,KAAK,YAAc,CACjB,YAAaA,EAAQ,kBACvB,EAEA,KAAK,MAAQ,CAAC,EACd,QAASvB,KAAOuB,EAAQ,MAAO,KAAK,MAAM,KAAKA,EAAQ,MAAMvB,CAAG,CAAC,CACnE,CAEAsD,EAAM,UAAY,CAChB,IAAK,SAAUtD,EAAKuD,EAAM,CACxB,KAAK,MAAM,QAAQA,CAAI,CACzB,EAEA,KAAM,SAAUC,EAAQ,CACtB,KAAK,MAAM,QAAQ,CACjB,OAAQA,EACR,YAAa,KAAK,eACpB,CAAC,CACH,EAEA,OAAQ,SAAUA,EAAQ,CACxB,KAAK,QAAQ,QAAQ,CACnB,OAAQA,EACR,YAAa,UAAY,CACvB,MAAO,EACT,CACF,CAAC,CACH,EAEA,QAAS,SAAU9C,EAAM,CACvB,GAAIA,EAAK,QAAS,OAAO,KAAK,UAC9B,IAAI6C,EAIJ,OAFKA,EAAOE,EAAS,KAAK,MAAO/C,EAAM,KAAK,OAAO,KAC9C6C,EAAOE,EAAS,KAAK,MAAO/C,EAAM,KAAK,OAAO,KAC9C6C,EAAOE,EAAS,KAAK,QAAS/C,EAAM,KAAK,OAAO,GAAW6C,EAEzD,KAAK,WACd,EAEA,QAAS,SAAUG,EAAI,CACrB,QAAS5D,EAAI,EAAGA,EAAI,KAAK,MAAM,OAAQA,IAAK4D,EAAG,KAAK,MAAM5D,CAAC,EAAGA,CAAC,CACjE,CACF,EAEA,SAAS2D,EAASpC,EAAOX,EAAMa,EAAS,CACtC,QAASzB,EAAI,EAAGA,EAAIuB,EAAM,OAAQvB,IAAK,CACrC,IAAIyD,GAAOlC,EAAMvB,CAAC,EAClB,GAAI6D,GAAYJ,GAAM7C,EAAMa,CAAO,EAAG,OAAOgC,EAC/C,CAEF,CAEA,SAASI,GAAYJ,EAAM7C,EAAMa,EAAS,CACxC,IAAIiC,EAASD,EAAK,OAClB,GAAI,OAAOC,GAAW,UACpB,GAAIA,IAAW9C,EAAK,SAAS,YAAY,EAAG,MAAO,WAC1C,MAAM,QAAQ8C,CAAM,GAC7B,GAAIA,EAAO,QAAQ9C,EAAK,SAAS,YAAY,CAAC,EAAI,GAAI,MAAO,WACpD,OAAO8C,GAAW,YAC3B,GAAIA,EAAO,KAAKD,EAAM7C,EAAMa,CAAO,EAAG,MAAO,OAE7C,OAAM,IAAI,UAAU,mDAAmD,CAE3E,CAkCA,SAASqC,EAAmBrC,EAAS,CACnC,IAAIsC,EAAUtC,EAAQ,QAClBd,EAAUc,EAAQ,QAClBV,EAASU,EAAQ,OACjBuC,GACFvC,EAAQ,OACR,SAAUb,GAAM,CACd,OAAOA,GAAK,WAAa,KAC3B,EAEF,GAAI,GAACmD,EAAQ,YAAcC,GAAMD,CAAO,GAQxC,SANIE,GAAW,KACXC,GAAgB,GAEhBC,GAAO,KACPvD,GAAOwD,EAAKD,GAAMJ,EAASC,EAAK,EAE7BpD,KAASmD,GAAS,CACvB,GAAInD,GAAK,WAAa,GAAKA,GAAK,WAAa,EAAG,CAE9C,IAAIyD,GAAOzD,GAAK,KAAK,QAAQ,cAAe,GAAG,EAW/C,IARG,CAACqD,IAAY,KAAK,KAAKA,GAAS,IAAI,IACrC,CAACC,IACDG,GAAK,CAAC,IAAM,MAEZA,GAAOA,GAAK,OAAO,CAAC,GAIlB,CAACA,GAAM,CACTzD,GAAO0D,EAAO1D,EAAI,EAClB,QACF,CAEAA,GAAK,KAAOyD,GAEZJ,GAAWrD,EACb,SAAWA,GAAK,WAAa,EAEvBD,EAAQC,EAAI,GAAKA,GAAK,WAAa,MACjCqD,KACFA,GAAS,KAAOA,GAAS,KAAK,QAAQ,KAAM,EAAE,GAGhDA,GAAW,KACXC,GAAgB,IACPnD,EAAOH,EAAI,GAAKoD,GAAMpD,EAAI,GAEnCqD,GAAW,KACXC,GAAgB,IACPD,KAETC,GAAgB,QAEb,CACLtD,GAAO0D,EAAO1D,EAAI,EAClB,QACF,CAEA,IAAI2D,GAAWH,EAAKD,GAAMvD,GAAMoD,EAAK,EACrCG,GAAOvD,GACPA,GAAO2D,EACT,CAEIN,KACFA,GAAS,KAAOA,GAAS,KAAK,QAAQ,KAAM,EAAE,EACzCA,GAAS,MACZK,EAAOL,EAAQ,GAGrB,CASA,SAASK,EAAO1D,EAAM,CACpB,IAAIwD,EAAOxD,EAAK,aAAeA,EAAK,WAEpC,OAAAA,EAAK,WAAW,YAAYA,CAAI,EAEzBwD,CACT,CAWA,SAASA,EAAKD,EAAMK,EAASR,EAAO,CAClC,OAAKG,GAAQA,EAAK,aAAeK,GAAYR,EAAMQ,CAAO,EACjDA,EAAQ,aAAeA,EAAQ,WAGjCA,EAAQ,YAAcA,EAAQ,aAAeA,EAAQ,UAC9D,CAMA,IAAIC,EAAO,OAAO,QAAW,YAAc,OAAS,CAAC,EAMrD,SAASC,GAAuB,CAC9B,IAAIC,EAASF,EAAK,UACdG,EAAW,GAIf,GAAI,CAEE,IAAID,EAAO,EAAE,gBAAgB,GAAI,WAAW,IAC9CC,EAAW,GAEf,OAASC,EAAG,CAAC,CAEb,OAAOD,CACT,CAEA,SAASE,IAAmB,CAC1B,IAAIH,EAAS,UAAY,CAAC,EAGxB,OAAII,GAAiB,EACnBJ,EAAO,UAAU,gBAAkB,SAAUpE,EAAQ,CACnD,IAAIyE,EAAM,IAAI,OAAO,cAAc,UAAU,EAC7C,OAAAA,EAAI,WAAa,KACjBA,EAAI,KAAK,EACTA,EAAI,MAAMzE,CAAM,EAChByE,EAAI,MAAM,EACHA,CACT,EAEAL,EAAO,UAAU,gBAAkB,SAAUpE,EAAQ,CACnD,IAAIyE,EAAM,SAAS,eAAe,mBAAmB,EAAE,EACvD,OAAAA,EAAI,KAAK,EACTA,EAAI,MAAMzE,CAAM,EAChByE,EAAI,MAAM,EACHA,CACT,EAGGL,CACT,CAEA,SAASI,IAAmB,CAC1B,IAAIE,EAAa,GACjB,GAAI,CACF,SAAS,eAAe,mBAAmB,EAAE,EAAE,KAAK,CACtD,OAASJ,EAAG,CACN,OAAO,gBAAeI,EAAa,GACzC,CACA,OAAOA,CACT,CAEA,IAAIC,GAAaR,EAAqB,EAAID,EAAK,UAAYK,GAAiB,EAE5E,SAASK,GAASC,EAAO3D,EAAS,CAChC,IAAIgD,EACJ,GAAI,OAAOW,GAAU,SAAU,CAC7B,IAAIJ,EAAMK,GAAW,EAAE,gBAIrB,kCAAoCD,EAAQ,gBAC5C,WACF,EACAX,EAAOO,EAAI,eAAe,eAAe,CAC3C,MACEP,EAAOW,EAAM,UAAU,EAAI,EAE7B,OAAAtB,EAAmB,CACjB,QAASW,EACT,QAAS9D,EACT,OAAQI,EACR,MAAOU,EAAQ,iBAAmB6D,GAAc,IAClD,CAAC,EAEMb,CACT,CAEA,IAAIc,GACJ,SAASF,IAAa,CACpB,OAAAE,GAAcA,IAAe,IAAIL,GAC1BK,EACT,CAEA,SAASD,GAAY1E,EAAM,CACzB,OAAOA,EAAK,WAAa,OAASA,EAAK,WAAa,MACtD,CAEA,SAAS4E,GAAK5E,EAAMa,EAAS,CAC3B,OAAAb,EAAK,QAAUD,EAAQC,CAAI,EAC3BA,EAAK,OAASA,EAAK,WAAa,QAAUA,EAAK,WAAW,OAC1DA,EAAK,QAAU6E,GAAQ7E,CAAI,EAC3BA,EAAK,mBAAqB8E,GAAmB9E,EAAMa,CAAO,EACnDb,CACT,CAEA,SAAS6E,GAAQ7E,EAAM,CACrB,MACE,CAACG,EAAOH,CAAI,GACZ,CAACO,EAAsBP,CAAI,GAC3B,SAAS,KAAKA,EAAK,WAAW,GAC9B,CAACI,EAAQJ,CAAI,GACb,CAACQ,EAAuBR,CAAI,CAEhC,CAEA,SAAS8E,GAAmB9E,EAAMa,EAAS,CACzC,GAAIb,EAAK,SAAYa,EAAQ,kBAAoBb,EAAK,OACpD,MAAO,CAAE,QAAS,GAAI,SAAU,EAAG,EAGrC,IAAI+E,EAAQC,GAAehF,EAAK,WAAW,EAG3C,OAAI+E,EAAM,cAAgBE,GAAsB,OAAQjF,EAAMa,CAAO,IACnEkE,EAAM,QAAUA,EAAM,iBAIpBA,EAAM,eAAiBE,GAAsB,QAASjF,EAAMa,CAAO,IACrEkE,EAAM,SAAWA,EAAM,kBAGlB,CAAE,QAASA,EAAM,QAAS,SAAUA,EAAM,QAAS,CAC5D,CAEA,SAASC,GAAerF,EAAQ,CAC9B,IAAIuF,EAAIvF,EAAO,MACb,+DACF,EACA,MAAO,CACL,QAASuF,EAAE,CAAC,EACZ,aAAcA,EAAE,CAAC,EACjB,gBAAiBA,EAAE,CAAC,EACpB,SAAUA,EAAE,CAAC,EACb,iBAAkBA,EAAE,CAAC,EACrB,cAAeA,EAAE,CAAC,CACpB,CACF,CAEA,SAASD,GAAsBE,EAAMnF,EAAMa,EAAS,CAClD,IAAIuE,EACAC,GACAC,GAEJ,OAAIH,IAAS,QACXC,EAAUpF,EAAK,gBACfqF,GAAS,OAETD,EAAUpF,EAAK,YACfqF,GAAS,MAGPD,IACEA,EAAQ,WAAa,EACvBE,GAAYD,GAAO,KAAKD,EAAQ,SAAS,EAChCvE,EAAQ,kBAAoBuE,EAAQ,WAAa,OAC1DE,GAAY,GACHF,EAAQ,WAAa,GAAK,CAACrF,EAAQqF,CAAO,IACnDE,GAAYD,GAAO,KAAKD,EAAQ,WAAW,IAGxCE,EACT,CAEA,IAAIC,GAAS,MAAM,UAAU,OACzBC,GAAU,CACZ,CAAC,MAAO,MAAM,EACd,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,QAAS,MAAM,EAChB,CAAC,SAAU,MAAM,EACjB,CAAC,cAAe,OAAO,EACvB,CAAC,KAAM,KAAK,EACZ,CAAC,QAAS,OAAO,EACjB,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,KAAM,KAAK,EACZ,CAAC,aAAc,QAAQ,CACzB,EAEA,SAASzG,GAAgB8B,EAAS,CAChC,GAAI,EAAE,gBAAgB9B,IAAkB,OAAO,IAAIA,GAAgB8B,CAAO,EAE1E,IAAI4E,EAAW,CACb,MAAO9E,EACP,aAAc,SACd,GAAI,QACJ,iBAAkB,IAClB,eAAgB,WAChB,MAAO,MACP,YAAa,IACb,gBAAiB,KACjB,UAAW,UACX,mBAAoB,OACpB,GAAI,KACJ,iBAAkB,GAClB,iBAAkB,SAAUC,EAASZ,EAAM,CACzC,OAAOA,EAAK,QAAU;AAAA;AAAA,EAAS,EACjC,EACA,gBAAiB,SAAUY,EAASZ,EAAM,CACxC,OAAOA,EAAK,QAAU;AAAA;AAAA,EAASA,EAAK,UAAY;AAAA;AAAA,EAASA,EAAK,SAChE,EACA,mBAAoB,SAAUY,EAASZ,EAAM,CAC3C,OAAOA,EAAK,QAAU;AAAA;AAAA,EAASY,EAAU;AAAA;AAAA,EAASA,CACpD,CACF,EACA,KAAK,QAAU1B,EAAO,CAAC,EAAGuG,EAAU5E,CAAO,EAC3C,KAAK,MAAQ,IAAI+B,EAAM,KAAK,OAAO,CACrC,CAEA7D,GAAgB,UAAY,CAS1B,SAAU,SAAUyF,EAAO,CACzB,GAAI,CAACkB,GAAWlB,CAAK,EACnB,MAAM,IAAI,UACRA,EAAQ,yDACV,EAGF,GAAIA,IAAU,GAAI,MAAO,GAEzB,IAAImB,EAASC,GAAQ,KAAK,KAAM,IAAIrB,GAASC,EAAO,KAAK,OAAO,CAAC,EACjE,OAAOqB,GAAY,KAAK,KAAMF,CAAM,CACtC,EAUA,IAAK,SAAUG,EAAQ,CACrB,GAAI,MAAM,QAAQA,CAAM,EACtB,QAAS1G,EAAI,EAAGA,EAAI0G,EAAO,OAAQ1G,IAAK,KAAK,IAAI0G,EAAO1G,CAAC,CAAC,UACjD,OAAO0G,GAAW,WAC3BA,EAAO,IAAI,MAEX,OAAM,IAAI,UACR,oDACF,EAEF,OAAO,IACT,EAWA,QAAS,SAAUxG,EAAKuD,EAAM,CAC5B,YAAK,MAAM,IAAIvD,EAAKuD,CAAI,EACjB,IACT,EAUA,KAAM,SAAUC,EAAQ,CACtB,YAAK,MAAM,KAAKA,CAAM,EACf,IACT,EAUA,OAAQ,SAAUA,EAAQ,CACxB,YAAK,MAAM,OAAOA,CAAM,EACjB,IACT,EAUA,OAAQ,SAAUnD,EAAQ,CACxB,OAAO6F,GAAQ,OAAO,SAAUO,EAAaC,EAAQ,CACnD,OAAOD,EAAY,QAAQC,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CACjD,EAAGrG,CAAM,CACX,CACF,EAUA,SAASiG,GAAQK,EAAY,CAC3B,IAAIC,EAAO,KACX,OAAOX,GAAO,KACZU,EAAW,WACX,SAAUN,EAAQ3F,EAAM,CACtBA,EAAO,IAAI4E,GAAK5E,EAAMkG,EAAK,OAAO,EAElC,IAAInE,GAAc,GAClB,OAAI/B,EAAK,WAAa,EACpB+B,GAAc/B,EAAK,OACfA,EAAK,UACLkG,EAAK,OAAOlG,EAAK,SAAS,EACrBA,EAAK,WAAa,IAC3B+B,GAAcoE,GAAmB,KAAKD,EAAMlG,CAAI,GAG3CoG,GAAKT,EAAQ5D,EAAW,CACjC,EACA,EACF,CACF,CAUA,SAAS8D,GAAYF,EAAQ,CAC3B,IAAIO,EAAO,KACX,YAAK,MAAM,QAAQ,SAAUrD,EAAM,CAC7B,OAAOA,EAAK,QAAW,aACzB8C,EAASS,GAAKT,EAAQ9C,EAAK,OAAOqD,EAAK,OAAO,CAAC,EAEnD,CAAC,EAEMP,EAAO,QAAQ,aAAc,EAAE,EAAE,QAAQ,eAAgB,EAAE,CACpE,CAUA,SAASQ,GAAmBnG,EAAM,CAChC,IAAI6C,EAAO,KAAK,MAAM,QAAQ7C,CAAI,EAC9BY,EAAUgF,GAAQ,KAAK,KAAM5F,CAAI,EACjCqG,EAAarG,EAAK,mBACtB,OAAIqG,EAAW,SAAWA,EAAW,YAAUzF,EAAUA,EAAQ,KAAK,GAEpEyF,EAAW,QACXxD,EAAK,YAAYjC,EAASZ,EAAM,KAAK,OAAO,EAC5CqG,EAAW,QAEf,CAWA,SAASD,GAAKT,EAAQ5D,EAAa,CACjC,IAAIuE,EAAK1G,EAAqB+F,CAAM,EAChCY,EAAK7G,EAAoBqC,CAAW,EACpCyE,GAAM,KAAK,IACbb,EAAO,OAASW,EAAG,OACnBvE,EAAY,OAASwE,EAAG,MAC1B,EACIE,GAAY;AAAA;AAAA,EAAO,UAAU,EAAGD,EAAG,EAEvC,OAAOF,EAAKG,GAAYF,CAC1B,CAUA,SAASb,GAAWlB,EAAO,CACzB,OACEA,GAAS,OACR,OAAOA,GAAU,UACfA,EAAM,WACJA,EAAM,WAAa,GAClBA,EAAM,WAAa,GACnBA,EAAM,WAAa,IAE7B,CAEA,OAAOzF,EACT,EAAG,IChkCH,IAAA2H,GAAA,GAAAC,GAAAD,GAAA,wBAAAE,KAGO,SAASA,GACdC,EACAC,EAAmB,GACF,CACjB,OAAO,IAAI,QAAQ,CAAOC,EAASC,IAAWC,EAAA,sBACxCH,EACF,MAAMD,CAAM,EACT,KAAMK,GAAaA,EAAS,YAAY,CAAC,EACzC,KAAMC,GAAgB,CACrB,IAAMC,EAAQ,IAAI,WAAWD,CAAW,EACpCE,EAAS,GACb,QAASC,EAAI,EAAGA,EAAIF,EAAM,OAAQE,IAChCD,GAAU,OAAO,aAAaD,EAAME,CAAC,CAAC,EAExC,IAAMC,EAAe,KAAKF,CAAM,EAChCN,EAAQQ,CAAY,CACtB,CAAC,EACA,MAAMP,CAAM,GAET,uBAAoB,UAAYQ,GAChC,eAAYX,CAAM,EACrB,QAAQ,KAAK,SAAUY,EAAU,CAChC,IAAMC,EAAsB,CAAC,EAE7B,SAASC,EAAYC,EAAiB,CACpC,GAAIA,EAAUH,EAAI,SAAU,CAC1B,IAAII,EAAkB;AAAA,EAAeH,EAAU,CAAC,EAAI;AAAA,EACpD,QAASJ,EAAI,EAAGA,EAAII,EAAU,OAAQJ,IACpCO,GACE,WAAaP,EAAI,GAAK;AAAA,EAAOI,EAAUJ,CAAC,EAAI;AAAA,EAEhDP,EAAQc,CAAe,EACvB,MACF,CACAJ,EACG,QAAQG,CAAO,EACf,KAAK,SAAUE,EAAW,CACzB,OAAOA,EAAK,eAAe,CAC7B,CAAC,EACA,KAAK,SAAUC,EAA2C,CACzDL,EAAU,KACRK,EAAY,MAAM,IAAKC,GAASA,EAAK,GAAG,EAAE,KAAK,GAAG,CACpD,EACAL,EAAYC,EAAU,CAAC,CACzB,CAAC,EACA,MAAM,SAAUK,EAAY,CAC3BC,EAAO,IAAI,gCAAkCD,CAAK,EAClDlB,EAAQ,EAAE,CACZ,CAAC,CACL,CAEAY,EAAY,CAAC,CACf,CAAC,EACA,MAAMX,CAAM,EAEnB,EAAC,CACH,CA3DA,IAAAmB,GACAX,GADAY,GAAAC,EAAA,kBAAAF,GAAuB,uCACvBX,GAA6B,8CAC7Bc,OCFA,IAKWC,GALXC,GAAAC,EAAA,kBAKWF,GAAkB,UAAY,CACvC,aAkBA,IAAIG,EAAgB,SAAUC,EAAGC,EAAG,CAClC,OAAAF,EACE,OAAO,gBACN,CAAE,UAAW,CAAC,CAAE,YAAa,OAC5B,SAAUC,EAAGC,EAAG,CACdD,EAAE,UAAYC,CAChB,GACF,SAAUD,EAAGC,EAAG,CACd,QAASC,KAAKD,EACR,OAAO,UAAU,eAAe,KAAKA,EAAGC,CAAC,IAAGF,EAAEE,CAAC,EAAID,EAAEC,CAAC,EAC9D,EACKH,EAAcC,EAAGC,CAAC,CAC3B,EAEA,SAASE,EAAUH,EAAGC,EAAG,CACvB,GAAI,OAAOA,GAAM,YAAcA,IAAM,KACnC,MAAM,IAAI,UACR,uBAAyB,OAAOA,CAAC,EAAI,+BACvC,EACFF,EAAcC,EAAGC,CAAC,EAClB,SAASG,GAAK,CACZ,KAAK,YAAcJ,CACrB,CACAA,EAAE,UACAC,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAMG,EAAG,UAAYH,EAAE,UAAY,IAAIG,EACvE,CAEA,IAAIC,EAAW,UAAY,CACzB,OAAAA,EACE,OAAO,QACP,SAAkBC,EAAG,CACnB,QAASC,EAAGC,EAAI,EAAGC,EAAI,UAAU,OAAQD,EAAIC,EAAGD,IAAK,CACnDD,EAAI,UAAUC,CAAC,EACf,QAASN,KAAKK,EACR,OAAO,UAAU,eAAe,KAAKA,EAAGL,CAAC,IAAGI,EAAEJ,CAAC,EAAIK,EAAEL,CAAC,EAC9D,CACA,OAAOI,CACT,EACKD,EAAS,MAAM,KAAM,SAAS,CACvC,EAEA,SAASK,EAAUC,EAASC,EAAYC,EAAGC,EAAW,CACpD,SAASC,EAAMC,EAAO,CACpB,OAAOA,aAAiBH,EACpBG,EACA,IAAIH,EAAE,SAAUI,EAAS,CACvBA,EAAQD,CAAK,CACf,CAAC,CACP,CACA,OAAO,IAAKH,IAAMA,EAAI,UAAU,SAAUI,EAASC,EAAQ,CACzD,SAASC,EAAUH,EAAO,CACxB,GAAI,CACFI,EAAKN,EAAU,KAAKE,CAAK,CAAC,CAC5B,OAASK,EAAG,CACVH,EAAOG,CAAC,CACV,CACF,CACA,SAASC,EAASN,EAAO,CACvB,GAAI,CACFI,EAAKN,EAAU,MAASE,CAAK,CAAC,CAChC,OAASK,EAAG,CACVH,EAAOG,CAAC,CACV,CACF,CACA,SAASD,EAAKG,EAAQ,CACpBA,EAAO,KACHN,EAAQM,EAAO,KAAK,EACpBR,EAAMQ,EAAO,KAAK,EAAE,KAAKJ,EAAWG,CAAQ,CAClD,CACAF,GAAMN,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAC,CAAC,GAAG,KAAK,CAAC,CACtE,CAAC,CACH,CAEA,SAASY,EAAYb,EAASc,EAAM,CAClC,IAAIC,EAAI,CACJ,MAAO,EACP,KAAM,UAAY,CAChB,GAAIpB,EAAE,CAAC,EAAI,EAAG,MAAMA,EAAE,CAAC,EACvB,OAAOA,EAAE,CAAC,CACZ,EACA,KAAM,CAAC,EACP,IAAK,CAAC,CACR,EACAqB,EACAC,EACAtB,EACAuB,EACF,OACGA,EAAI,CAAE,KAAMC,EAAK,CAAC,EAAG,MAAOA,EAAK,CAAC,EAAG,OAAQA,EAAK,CAAC,CAAE,EACtD,OAAO,QAAW,aACfD,EAAE,OAAO,QAAQ,EAAI,UAAY,CAChC,OAAO,IACT,GACFA,EAEF,SAASC,EAAKrB,EAAG,CACf,OAAO,SAAUsB,EAAG,CAClB,OAAOX,EAAK,CAACX,EAAGsB,CAAC,CAAC,CACpB,CACF,CACA,SAASX,EAAKY,EAAI,CAChB,GAAIL,EAAG,MAAM,IAAI,UAAU,iCAAiC,EAC5D,KAAOD,GACL,GAAI,CACF,GACIC,EAAI,EACNC,IACGtB,EACC0B,EAAG,CAAC,EAAI,EACJJ,EAAE,OACFI,EAAG,CAAC,EACFJ,EAAE,SAActB,EAAIsB,EAAE,SAActB,EAAE,KAAKsB,CAAC,EAAG,GAC/CA,EAAE,OACV,EAAEtB,EAAIA,EAAE,KAAKsB,EAAGI,EAAG,CAAC,CAAC,GAAG,KAE1B,OAAO1B,EAET,OADMsB,EAAI,EAAItB,IAAI0B,EAAK,CAACA,EAAG,CAAC,EAAI,EAAG1B,EAAE,KAAK,GAClC0B,EAAG,CAAC,EAAG,CACb,IAAK,GACL,IAAK,GACH1B,EAAI0B,EACJ,MACF,IAAK,GACH,OAAAN,EAAE,QACK,CAAE,MAAOM,EAAG,CAAC,EAAG,KAAM,EAAM,EACrC,IAAK,GACHN,EAAE,QACFE,EAAII,EAAG,CAAC,EACRA,EAAK,CAAC,CAAC,EACP,SACF,IAAK,GACHA,EAAKN,EAAE,IAAI,IAAI,EACfA,EAAE,KAAK,IAAI,EACX,SACF,QACE,GACKpB,EAAIoB,EAAE,KAAQ,EAAApB,EAAIA,EAAE,OAAS,GAAKA,EAAEA,EAAE,OAAS,CAAC,KAClD0B,EAAG,CAAC,IAAM,GAAKA,EAAG,CAAC,IAAM,GAC1B,CACAN,EAAI,EACJ,QACF,CACA,GAAIM,EAAG,CAAC,IAAM,IAAM,CAAC1B,GAAM0B,EAAG,CAAC,EAAI1B,EAAE,CAAC,GAAK0B,EAAG,CAAC,EAAI1B,EAAE,CAAC,GAAK,CACzDoB,EAAE,MAAQM,EAAG,CAAC,EACd,KACF,CACA,GAAIA,EAAG,CAAC,IAAM,GAAKN,EAAE,MAAQpB,EAAE,CAAC,EAAG,CACjCoB,EAAE,MAAQpB,EAAE,CAAC,EACbA,EAAI0B,EACJ,KACF,CACA,GAAI1B,GAAKoB,EAAE,MAAQpB,EAAE,CAAC,EAAG,CACvBoB,EAAE,MAAQpB,EAAE,CAAC,EACboB,EAAE,IAAI,KAAKM,CAAE,EACb,KACF,CACI1B,EAAE,CAAC,GAAGoB,EAAE,IAAI,IAAI,EACpBA,EAAE,KAAK,IAAI,EACX,QACJ,CACAM,EAAKP,EAAK,KAAKd,EAASe,CAAC,CAC3B,OAASL,EAAG,CACVW,EAAK,CAAC,EAAGX,CAAC,EACVO,EAAI,CACN,QAAE,CACAD,EAAIrB,EAAI,CACV,CACF,GAAI0B,EAAG,CAAC,EAAI,EAAG,MAAMA,EAAG,CAAC,EACzB,MAAO,CAAE,MAAOA,EAAG,CAAC,EAAIA,EAAG,CAAC,EAAI,OAAQ,KAAM,EAAK,CACrD,CACF,CAEA,SAASC,EAAcC,EAAIC,EAAMC,EAAM,CACrC,GAAIA,GAAQ,UAAU,SAAW,EAC/B,QAAS5B,EAAI,EAAG6B,EAAIF,EAAK,OAAQG,EAAI9B,EAAI6B,EAAG7B,KACtC8B,GAAM,EAAE9B,KAAK2B,MACVG,IAAIA,EAAK,MAAM,UAAU,MAAM,KAAKH,EAAM,EAAG3B,CAAC,GACnD8B,EAAG9B,CAAC,EAAI2B,EAAK3B,CAAC,GAGpB,OAAO0B,EAAG,OAAOI,GAAMH,CAAI,CAC7B,CA6HA,QA3HII,EAAwB,UAAY,CACtC,SAASA,EAAOC,EAAMC,EAAKC,EAAOC,EAAQ,CACxC,KAAK,KAAOH,EACZ,KAAK,IAAMC,EACX,KAAK,MAAQC,EACb,KAAK,OAASC,CAChB,CACA,OAAAJ,EAAO,UAAU,IAAM,SAAUK,EAAGhB,EAAGiB,EAAGC,EAAG,CAC3C,OAAO,IAAIP,EACT,KAAK,KAAOK,EACZ,KAAK,IAAMhB,EACX,KAAK,MAAQiB,EACb,KAAK,OAASC,CAChB,CACF,EACAP,EAAO,eAAiB,SAAUQ,EAASC,EAAY,CACrD,OAAO,IAAIT,EACTS,EAAW,KAAOD,EAAQ,aAAa,KACvCC,EAAW,IAAMD,EAAQ,aAAa,IACtCC,EAAW,MACXA,EAAW,MACb,CACF,EACAT,EAAO,gBAAkB,SAAUQ,EAASE,EAAa,CACvD,IAAIC,EAAU,MAAM,KAAKD,CAAW,EAAE,KAAK,SAAUE,EAAM,CACzD,OAAOA,EAAK,QAAU,CACxB,CAAC,EACD,OAAOD,EACH,IAAIX,EACFW,EAAQ,KAAOH,EAAQ,aAAa,KACpCG,EAAQ,IAAMH,EAAQ,aAAa,IACnCG,EAAQ,MACRA,EAAQ,MACV,EACAX,EAAO,KACb,EACAA,EAAO,MAAQ,IAAIA,EAAO,EAAG,EAAG,EAAG,CAAC,EAC7BA,CACT,EAAG,EACCa,EAAc,SAAUL,EAASM,EAAM,CACzC,OAAOd,EAAO,eAAeQ,EAASM,EAAK,sBAAsB,CAAC,CACpE,EACIC,EAAoB,SAAUC,EAAU,CAC1C,IAAI9B,EAAO8B,EAAS,KAChBC,EAAkBD,EAAS,gBAC/B,GAAI,CAAC9B,GAAQ,CAAC+B,EACZ,MAAM,IAAI,MAAM,6BAA6B,EAE/C,IAAId,EAAQ,KAAK,IACf,KAAK,IAAIjB,EAAK,YAAa+B,EAAgB,WAAW,EACtD,KAAK,IAAI/B,EAAK,YAAa+B,EAAgB,WAAW,EACtD,KAAK,IAAI/B,EAAK,YAAa+B,EAAgB,WAAW,CACxD,EACIb,EAAS,KAAK,IAChB,KAAK,IAAIlB,EAAK,aAAc+B,EAAgB,YAAY,EACxD,KAAK,IAAI/B,EAAK,aAAc+B,EAAgB,YAAY,EACxD,KAAK,IAAI/B,EAAK,aAAc+B,EAAgB,YAAY,CAC1D,EACA,OAAO,IAAIjB,EAAO,EAAG,EAAGG,EAAOC,CAAM,CACvC,EAOIc,EAAiB,SAAUC,EAAK,CAIlC,QAHIC,EAAa,CAAC,EACdnD,EAAI,EACJoD,EAASF,EAAI,OACVlD,EAAIoD,GAAQ,CACjB,IAAI5C,EAAQ0C,EAAI,WAAWlD,GAAG,EAC9B,GAAIQ,GAAS,OAAUA,GAAS,OAAUR,EAAIoD,EAAQ,CACpD,IAAIC,EAAQH,EAAI,WAAWlD,GAAG,GACzBqD,EAAQ,SAAY,MACvBF,EAAW,OAAO3C,EAAQ,OAAU,KAAO6C,EAAQ,MAAS,KAAO,GAEnEF,EAAW,KAAK3C,CAAK,EACrBR,IAEJ,MACEmD,EAAW,KAAK3C,CAAK,CAEzB,CACA,OAAO2C,CACT,EACIG,EAAkB,UAAY,CAEhC,QADIH,EAAa,CAAC,EACTI,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACtCJ,EAAWI,CAAE,EAAI,UAAUA,CAAE,EAE/B,GAAI,OAAO,cACT,OAAO,OAAO,cAAc,MAAM,OAAQJ,CAAU,EAEtD,IAAIC,EAASD,EAAW,OACxB,GAAI,CAACC,EACH,MAAO,GAKT,QAHII,EAAY,CAAC,EACbC,EAAQ,GACR1C,EAAS,GACN,EAAE0C,EAAQL,GAAQ,CACvB,IAAIM,EAAYP,EAAWM,CAAK,EAC5BC,GAAa,MACfF,EAAU,KAAKE,CAAS,GAExBA,GAAa,MACbF,EAAU,MACPE,GAAa,IAAM,MACnBA,EAAY,KAAS,KACxB,IAEED,EAAQ,IAAML,GAAUI,EAAU,OAAS,SAC7CzC,GAAU,OAAO,aAAa,MAAM,OAAQyC,CAAS,EACrDA,EAAU,OAAS,EAEvB,CACA,OAAOzC,CACT,EACI4C,EACF,mEAEEC,EAAW,OAAO,YAAe,YAAc,CAAC,EAAI,IAAI,WAAW,GAAG,EACjEC,EAAM,EAAGA,EAAMF,EAAQ,OAAQE,IACtCD,EAASD,EAAQ,WAAWE,CAAG,CAAC,EAAIA,EAYtC,QAJIC,EACF,mEAEEC,EAAa,OAAO,YAAe,YAAc,CAAC,EAAI,IAAI,WAAW,GAAG,EACnEC,EAAQ,EAAGA,EAAQF,EAAU,OAAQE,IAC5CD,EAAWD,EAAU,WAAWE,CAAK,CAAC,EAAIA,EAoO5C,QAlOIC,EAAW,SAAUC,EAAQ,CAC/B,IAAIC,EAAeD,EAAO,OAAS,IACjCE,EAAMF,EAAO,OACblE,EACAN,EAAI,EACJ2E,EACAC,EACAC,EACAC,EACEN,EAAOA,EAAO,OAAS,CAAC,IAAM,MAChCC,IACID,EAAOA,EAAO,OAAS,CAAC,IAAM,KAChCC,KAGJ,IAAIM,EACF,OAAO,aAAgB,aACvB,OAAO,YAAe,aACtB,OAAO,WAAW,UAAU,OAAU,YAClC,IAAI,YAAYN,CAAY,EAC5B,IAAI,MAAMA,CAAY,EACxBO,EAAQ,MAAM,QAAQD,CAAM,EAAIA,EAAS,IAAI,WAAWA,CAAM,EAClE,IAAKzE,EAAI,EAAGA,EAAIoE,EAAKpE,GAAK,EACxBqE,EAAWN,EAAWG,EAAO,WAAWlE,CAAC,CAAC,EAC1CsE,EAAWP,EAAWG,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC9CuE,EAAWR,EAAWG,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC9CwE,EAAWT,EAAWG,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC9C0E,EAAMhF,GAAG,EAAK2E,GAAY,EAAMC,GAAY,EAC5CI,EAAMhF,GAAG,GAAM4E,EAAW,KAAO,EAAMC,GAAY,EACnDG,EAAMhF,GAAG,GAAM6E,EAAW,IAAM,EAAMC,EAAW,GAEnD,OAAOC,CACT,EACIE,GAAoB,SAAUF,EAAQ,CAGxC,QAFIrB,EAASqB,EAAO,OAChBC,EAAQ,CAAC,EACJ1E,EAAI,EAAGA,EAAIoD,EAAQpD,GAAK,EAC/B0E,EAAM,KAAMD,EAAOzE,EAAI,CAAC,GAAK,EAAKyE,EAAOzE,CAAC,CAAC,EAE7C,OAAO0E,CACT,EACIE,EAAoB,SAAUH,EAAQ,CAGxC,QAFIrB,EAASqB,EAAO,OAChBC,EAAQ,CAAC,EACJ1E,EAAI,EAAGA,EAAIoD,EAAQpD,GAAK,EAC/B0E,EAAM,KACHD,EAAOzE,EAAI,CAAC,GAAK,GACfyE,EAAOzE,EAAI,CAAC,GAAK,GACjByE,EAAOzE,EAAI,CAAC,GAAK,EAClByE,EAAOzE,CAAC,CACZ,EAEF,OAAO0E,CACT,EAGIG,EAAmB,EAEnBC,EAAmB,GAOnBC,EAAuB,EAKvBC,EAAqBF,EAAmBD,EAOxCI,GAA+B,OAAWJ,EAE1CK,GAA6B,GAAKL,EAElCM,GAAqBD,GAA6B,EAClDE,GAA+B,MAASP,EAExCQ,GACFJ,GAA+BG,GAK7BE,GAAkCD,GAClCE,GACF,GAaEC,GACFF,GAAkCC,GAKhCE,GAAsC,OAAWX,EAEjDY,GAAgC,GAAKV,EAErCW,GAAwBD,GAAgC,EACxDE,GAAY,SAAUC,EAAMC,EAAOC,EAAK,CAC1C,OAAIF,EAAK,MACAA,EAAK,MAAMC,EAAOC,CAAG,EAEvB,IAAI,YAAY,MAAM,UAAU,MAAM,KAAKF,EAAMC,EAAOC,CAAG,CAAC,CACrE,EACIC,GAAY,SAAUH,EAAMC,EAAOC,EAAK,CAC1C,OAAIF,EAAK,MACAA,EAAK,MAAMC,EAAOC,CAAG,EAEvB,IAAI,YAAY,MAAM,UAAU,MAAM,KAAKF,EAAMC,EAAOC,CAAG,CAAC,CACrE,EACIE,GAAyB,SAAU/B,EAAQgC,EAAa,CAC1D,IAAIzB,EAASR,EAASC,CAAM,EACxBiC,EAAS,MAAM,QAAQ1B,CAAM,EAC7BG,EAAkBH,CAAM,EACxB,IAAI,YAAYA,CAAM,EACtB2B,EAAS,MAAM,QAAQ3B,CAAM,EAC7BE,GAAkBF,CAAM,EACxB,IAAI,YAAYA,CAAM,EACtB4B,EAAe,GACf5C,EAAQmC,GAAUQ,EAAQC,EAAe,EAAGF,EAAO,CAAC,EAAI,CAAC,EACzDG,EACFH,EAAO,CAAC,IAAM,EACVP,GAAUQ,GAASC,EAAeF,EAAO,CAAC,GAAK,CAAC,EAChDH,GAAUG,EAAQ,KAAK,MAAME,EAAeF,EAAO,CAAC,GAAK,CAAC,CAAC,EACjE,OAAO,IAAII,GAAOJ,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG1C,EAAO6C,CAAI,CAC3E,EACIC,GAAwB,UAAY,CACtC,SAASC,EACPC,EACAC,EACAC,EACAC,EACAnD,EACA6C,EACA,CACA,KAAK,aAAeG,EACpB,KAAK,WAAaC,EAClB,KAAK,UAAYC,EACjB,KAAK,eAAiBC,EACtB,KAAK,MAAQnD,EACb,KAAK,KAAO6C,CACd,CAOA,OAAAE,EAAK,UAAU,IAAM,SAAU9C,EAAW,CACxC,IAAImD,EACJ,GAAInD,GAAa,EAAG,CAClB,GACEA,EAAY,OACXA,EAAY,OAAWA,GAAa,MAKrC,OAAAmD,EAAK,KAAK,MAAMnD,GAAamB,CAAgB,EAC7CgC,GAAMA,GAAM9B,IAAyBrB,EAAYyB,IAC1C,KAAK,KAAK0B,CAAE,EAErB,GAAInD,GAAa,MAOf,OAAAmD,EACE,KAAK,MACH5B,IACIvB,EAAY,OAAWmB,EAC7B,EACFgC,GAAMA,GAAM9B,IAAyBrB,EAAYyB,IAC1C,KAAK,KAAK0B,CAAE,EAErB,GAAInD,EAAY,KAAK,UAEnB,OAAAmD,EACErB,GACAC,IACC/B,GAAaoB,GAChB+B,EAAK,KAAK,MAAMA,CAAE,EAClBA,GAAOnD,GAAamB,EAAoBc,GACxCkB,EAAK,KAAK,MAAMA,CAAE,EAClBA,GAAMA,GAAM9B,IAAyBrB,EAAYyB,IAC1C,KAAK,KAAK0B,CAAE,EAErB,GAAInD,GAAa,QACf,OAAO,KAAK,KAAK,KAAK,cAAc,CAExC,CAEA,OAAO,KAAK,UACd,EACO8C,CACT,EAAG,EAOCM,GACF,mEAEEC,GAAW,OAAO,YAAe,YAAc,CAAC,EAAI,IAAI,WAAW,GAAG,EACjEC,GAAM,EAAGA,GAAMF,GAAQ,OAAQE,KACtCD,GAASD,GAAQ,WAAWE,EAAG,CAAC,EAAIA,GAGtC,IAAIC,GACF,2pnDAEEC,GAAyB,GAEzBC,EAAK,EACLC,EAAO,EACPC,EAAO,EACPC,EAAK,EACLC,GAAK,EACLC,GAAK,EACLC,GAAK,EACLC,GAAK,EACLC,GAAK,GACLC,GAAQ,GAERC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GAELC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GAELC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GAELC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAO,GACPC,GAAK,GACLC,GAAK,GACLC,GAAQ,CAAC,KAAQ,KAAM,EACvBC,GAAkB,IAClBC,GAAsB,OACtBC,GAAkB,OAClBC,GAAgBhE,GAAuBgB,EAAQ,EAC/CiD,GAAc,CAACnB,GAAIM,EAAE,EACrBc,GAAmB,CAAChD,EAAIC,EAAMC,EAAME,EAAE,EACtC6C,GAAU,CAACzC,GAAIF,EAAE,EACjB4C,GAAiB,CAACzB,GAAID,EAAE,EACxB2B,GAAcH,GAAiB,OAAOC,EAAO,EAC7CG,GAAwB,CAAChB,GAAIC,GAAIC,GAAIN,GAAIC,EAAE,EAC3CoB,GAAS,CAACxC,GAAIF,EAAE,EAChB2C,GAA+B,SAAUtH,EAAYuH,EAAW,CAC9DA,IAAc,SAChBA,EAAY,UAEd,IAAIC,EAAQ,CAAC,EACTC,EAAU,CAAC,EACXC,EAAa,CAAC,EAClB,OAAA1H,EAAW,QAAQ,SAAUO,EAAWD,EAAO,CAC7C,IAAIqH,EAAYb,GAAc,IAAIvG,CAAS,EAO3C,GANIoH,EAAY5D,IACd2D,EAAW,KAAK,EAAI,EACpBC,GAAa5D,IAEb2D,EAAW,KAAK,EAAK,EAEnB,CAAC,SAAU,OAAQ,OAAO,EAAE,QAAQH,CAAS,IAAM,IAEjD,CAAC,KAAQ,KAAQ,MAAQ,KAAM,EAAE,QAAQhH,CAAS,IAAM,GAC1D,OAAAkH,EAAQ,KAAKnH,CAAK,EACXkH,EAAM,KAAK1C,EAAE,EAGxB,GAAI6C,IAAcxD,GAAMwD,IAAclD,GAAO,CAE3C,GAAInE,IAAU,EACZ,OAAAmH,EAAQ,KAAKnH,CAAK,EACXkH,EAAM,KAAK5B,EAAE,EAItB,IAAIgC,EAAOJ,EAAMlH,EAAQ,CAAC,EAC1B,OAAI6G,GAAY,QAAQS,CAAI,IAAM,IAChCH,EAAQ,KAAKA,EAAQnH,EAAQ,CAAC,CAAC,EACxBkH,EAAM,KAAKI,CAAI,IAExBH,EAAQ,KAAKnH,CAAK,EACXkH,EAAM,KAAK5B,EAAE,EACtB,CAEA,GADA6B,EAAQ,KAAKnH,CAAK,EACdqH,IAAc9B,GAChB,OAAO2B,EAAM,KAAKD,IAAc,SAAWpC,GAAKgB,EAAE,EAKpD,GAHIwB,IAAcnB,IAGdmB,IAAchC,GAChB,OAAO6B,EAAM,KAAK5B,EAAE,EAKtB,GAAI+B,IAAclB,GAChB,OACGlG,GAAa,QAAWA,GAAa,QACrCA,GAAa,QAAWA,GAAa,OAE/BiH,EAAM,KAAKrB,EAAE,EAEbqB,EAAM,KAAK5B,EAAE,EAGxB4B,EAAM,KAAKG,CAAS,CACtB,CAAC,EACM,CAACF,EAASD,EAAOE,CAAU,CACpC,EACIG,GAA6B,SAAUC,EAAGxL,EAAGyL,EAAcC,EAAY,CACzE,IAAIC,EAAUD,EAAWD,CAAY,EACrC,GAAI,MAAM,QAAQD,CAAC,EAAIA,EAAE,QAAQG,CAAO,IAAM,GAAKH,IAAMG,EAEvD,QADIpL,EAAIkL,EACDlL,GAAKmL,EAAW,QAAQ,CAC7BnL,IACA,IAAIqL,EAAOF,EAAWnL,CAAC,EACvB,GAAIqL,IAAS5L,EACX,MAAO,GAET,GAAI4L,IAAS1D,GACX,KAEJ,CAEF,GAAIyD,IAAYzD,GAEd,QADI3H,EAAIkL,EACDlL,EAAI,GAAG,CACZA,IACA,IAAI+K,EAAOI,EAAWnL,CAAC,EACvB,GAAI,MAAM,QAAQiL,CAAC,EAAIA,EAAE,QAAQF,CAAI,IAAM,GAAKE,IAAMF,EAEpD,QADI9K,EAAIiL,EACDjL,GAAKkL,EAAW,QAAQ,CAC7BlL,IACA,IAAIoL,EAAOF,EAAWlL,CAAC,EACvB,GAAIoL,IAAS5L,EACX,MAAO,GAET,GAAI4L,IAAS1D,GACX,KAEJ,CAEF,GAAIoD,IAASpD,GACX,KAEJ,CAEF,MAAO,EACT,EACI2D,GAA4B,SAAUJ,EAAcC,EAAY,CAElE,QADInL,EAAIkL,EACDlL,GAAK,GAAG,CACb,IAAIuL,EAAOJ,EAAWnL,CAAC,EACvB,GAAIuL,IAAS5D,GACX3H,QAEA,QAAOuL,CAEX,CACA,MAAO,EACT,EACIC,GAAoB,SACtBrI,EACAgI,EACAM,EACAhI,EACAiI,EACA,CACA,GAAID,EAAShI,CAAK,IAAM,EACtB,OAAOsG,GAET,IAAImB,EAAezH,EAAQ,EAC3B,GACE,MAAM,QAAQiI,CAAe,GAC7BA,EAAgBR,CAAY,IAAM,GAElC,OAAOnB,GAET,IAAI4B,EAAcT,EAAe,EAC7BU,EAAaV,EAAe,EAC5BE,EAAUD,EAAWD,CAAY,EAGjCW,EAASF,GAAe,EAAIR,EAAWQ,CAAW,EAAI,EACtDN,EAAOF,EAAWS,CAAU,EAChC,GAAIR,IAAYhE,GAAQiE,IAAShE,EAC/B,OAAO0C,GAET,GAAII,GAAiB,QAAQiB,CAAO,IAAM,GACxC,OAAOtB,GAOT,GAJIK,GAAiB,QAAQkB,CAAI,IAAM,IAInCjB,GAAQ,QAAQiB,CAAI,IAAM,GAC5B,OAAOtB,GAGT,GAAIuB,GAA0BJ,EAAcC,CAAU,IAAM1D,GAC1D,OAAOuC,GA0CT,GAvCIC,GAAc,IAAI9G,EAAW+H,CAAY,CAAC,IAAMtD,KAKjDwD,IAAYnC,IAAMmC,IAAYlC,KAC/Be,GAAc,IAAI9G,EAAWyI,CAAU,CAAC,IAAMhE,IAK5CwD,IAAY5D,IAAM6D,IAAS7D,IAI3B4D,IAAY1D,IAIZ,CAACC,GAAIG,GAAIE,EAAE,EAAE,QAAQoD,CAAO,IAAM,IAAMC,IAAS3D,IAIjD,CAACQ,GAAIC,GAAIC,GAAIK,GAAII,EAAE,EAAE,QAAQwC,CAAI,IAAM,IAIvCC,GAA0BJ,EAAcC,CAAU,IAAM5C,IAIxDyC,GAA2BxC,GAAID,GAAI2C,EAAcC,CAAU,GAI3DH,GAA2B,CAAC9C,GAAIC,EAAE,EAAGG,GAAI4C,EAAcC,CAAU,GAIjEH,GAA2BnD,GAAIA,GAAIqD,EAAcC,CAAU,EAC7D,OAAOpB,GAGT,GAAIqB,IAAYzD,GACd,OAAOqC,GAGT,GAAIoB,IAAY5C,IAAM6C,IAAS7C,GAC7B,OAAOuB,GAGT,GAAIsB,IAASpD,IAAMmD,IAAYnD,GAC7B,OAAO+B,GA0CT,GAvCI,CAAClC,GAAIE,GAAIM,EAAE,EAAE,QAAQ+C,CAAI,IAAM,IAAMD,IAAYrD,IAIjD8D,IAAWxC,IAAMmB,GAAO,QAAQY,CAAO,IAAM,IAI7CA,IAAYvC,IAAMwC,IAAShC,IAI3BgC,IAAShD,IAKV6B,GAAY,QAAQmB,CAAI,IAAM,IAAMD,IAAY1C,IAChDwB,GAAY,QAAQkB,CAAO,IAAM,IAAMC,IAAS3C,IAMhD0C,IAAYxC,IAAM,CAACU,GAAIL,GAAIC,EAAE,EAAE,QAAQmC,CAAI,IAAM,IACjD,CAAC/B,GAAIL,GAAIC,EAAE,EAAE,QAAQkC,CAAO,IAAM,IAAMC,IAAS1C,IAMjDuB,GAAY,QAAQkB,CAAO,IAAM,IAChCf,GAAe,QAAQgB,CAAI,IAAM,IAClChB,GAAe,QAAQe,CAAO,IAAM,IACnClB,GAAY,QAAQmB,CAAI,IAAM,IAO/B,CAACzC,GAAID,EAAE,EAAE,QAAQyC,CAAO,IAAM,KAC5BC,IAAS3C,IACP,CAACH,GAAIP,EAAE,EAAE,QAAQqD,CAAI,IAAM,IAC1BF,EAAWS,EAAa,CAAC,IAAMlD,KAEpC,CAACH,GAAIP,EAAE,EAAE,QAAQoD,CAAO,IAAM,IAAMC,IAAS3C,IAE7C0C,IAAY1C,IAAM,CAACA,GAAIG,GAAIJ,EAAE,EAAE,QAAQ4C,CAAI,IAAM,GAElD,OAAOtB,GAGT,GAAI,CAACrB,GAAIG,GAAIJ,GAAIP,GAAIC,EAAE,EAAE,QAAQkD,CAAI,IAAM,GAEzC,QADIS,EAAYZ,EACTY,GAAa,GAAG,CACrB,IAAIP,EAAOJ,EAAWW,CAAS,EAC/B,GAAIP,IAAS7C,GACX,OAAOqB,GACF,GAAI,CAAClB,GAAIJ,EAAE,EAAE,QAAQ8C,CAAI,IAAM,GACpCO,QAEA,MAEJ,CAGF,GAAI,CAAClD,GAAID,EAAE,EAAE,QAAQ0C,CAAI,IAAM,GAG7B,QAFIS,EACF,CAAC5D,GAAIC,EAAE,EAAE,QAAQiD,CAAO,IAAM,GAAKO,EAAcT,EAC5CY,GAAa,GAAG,CACrB,IAAIP,EAAOJ,EAAWW,CAAS,EAC/B,GAAIP,IAAS7C,GACX,OAAOqB,GACF,GAAI,CAAClB,GAAIJ,EAAE,EAAE,QAAQ8C,CAAI,IAAM,GACpCO,QAEA,MAEJ,CA8BF,GA1BGvC,KAAO6B,GAAW,CAAC7B,GAAIC,GAAIL,GAAIC,EAAE,EAAE,QAAQiC,CAAI,IAAM,IACrD,CAAC7B,GAAIL,EAAE,EAAE,QAAQiC,CAAO,IAAM,IAAM,CAAC5B,GAAIC,EAAE,EAAE,QAAQ4B,CAAI,IAAM,IAC/D,CAAC5B,GAAIL,EAAE,EAAE,QAAQgC,CAAO,IAAM,IAAMC,IAAS5B,IAM7Cc,GAAsB,QAAQa,CAAO,IAAM,IAC1C,CAAC/C,GAAIM,EAAE,EAAE,QAAQ0C,CAAI,IAAM,IAC5Bd,GAAsB,QAAQc,CAAI,IAAM,IAAMD,IAAYxC,IAM3DsB,GAAY,QAAQkB,CAAO,IAAM,IACjClB,GAAY,QAAQmB,CAAI,IAAM,IAK5BD,IAAY3C,IAAMyB,GAAY,QAAQmB,CAAI,IAAM,IAKjDnB,GAAY,OAAOxB,EAAE,EAAE,QAAQ0C,CAAO,IAAM,IAC3CC,IAAS9C,IACTsB,GAAM,QAAQ1G,EAAWyI,CAAU,CAAC,IAAM,IAC3C1B,GAAY,OAAOxB,EAAE,EAAE,QAAQ2C,CAAI,IAAM,IAAMD,IAAYjD,GAE5D,OAAO4B,GAIT,GAAIqB,IAAY1B,IAAQ2B,IAAS3B,GAAM,CAGrC,QAFI1J,EAAIyL,EAASP,CAAY,EACzBa,EAAQ,EACL/L,EAAI,IACTA,IACImL,EAAWnL,CAAC,IAAM0J,KACpBqC,IAKJ,GAAIA,EAAQ,IAAM,EAChB,OAAOhC,EAEX,CAEA,OAAIqB,IAAYnC,IAAMoC,IAASnC,GACtBa,GAEFC,EACT,EACIgC,GAAsB,SAAU7I,EAAY8I,EAAS,CAClDA,IACHA,EAAU,CAAE,UAAW,SAAU,UAAW,QAAS,GAEvD,IAAIC,EAAKzB,GAA6BtH,EAAY8I,EAAQ,SAAS,EACjER,EAAWS,EAAG,CAAC,EACff,EAAae,EAAG,CAAC,EACjBC,EAAiBD,EAAG,CAAC,GAErBD,EAAQ,YAAc,aACtBA,EAAQ,YAAc,gBAEtBd,EAAaA,EAAW,IAAI,SAAUI,EAAM,CAC1C,MAAO,CAAC7C,GAAIK,GAAIY,EAAE,EAAE,QAAQ4B,CAAI,IAAM,GAAKjC,GAAKiC,CAClD,CAAC,GAEH,IAAIa,EACFH,EAAQ,YAAc,WAClBE,EAAe,IAAI,SAAUE,EAAcrM,EAAG,CAC5C,OACEqM,GAAgBlJ,EAAWnD,CAAC,GAAK,OAAUmD,EAAWnD,CAAC,GAAK,KAEhE,CAAC,EACD,OACN,MAAO,CAACyL,EAAUN,EAAYiB,CAAoB,CACpD,EACIE,GAAuB,UAAY,CACrC,SAASA,EAAMnJ,EAAYuH,EAAW5E,EAAOC,EAAK,CAChD,KAAK,WAAa5C,EAClB,KAAK,SAAWuH,IAAcZ,GAC9B,KAAK,MAAQhE,EACb,KAAK,IAAMC,CACb,CACA,OAAAuG,EAAM,UAAU,MAAQ,UAAY,CAClC,OAAOhJ,EAAgB,MACrB,OACA,KAAK,WAAW,MAAM,KAAK,MAAO,KAAK,GAAG,CAC5C,CACF,EACOgJ,CACT,EAAG,EACCC,GAAc,SAAUrJ,EAAK+I,EAAS,CACxC,IAAI9I,EAAaF,EAAeC,CAAG,EAC/BgJ,EAAKF,GAAoB7I,EAAY8I,CAAO,EAC9CR,EAAWS,EAAG,CAAC,EACff,EAAae,EAAG,CAAC,EACjBE,EAAuBF,EAAG,CAAC,EACzB9I,EAASD,EAAW,OACpBqJ,EAAU,EACVC,EAAY,EAChB,MAAO,CACL,KAAM,UAAY,CAChB,GAAIA,GAAarJ,EACf,MAAO,CAAE,KAAM,GAAM,MAAO,IAAK,EAGnC,QADIsH,EAAYX,GAEd0C,EAAYrJ,IACXsH,EAAYc,GACXrI,EACAgI,EACAM,EACA,EAAEgB,EACFL,CACF,KAAOrC,IACP,CACF,GAAIW,IAAcX,IAAuB0C,IAAcrJ,EAAQ,CAC7D,IAAI5C,EAAQ,IAAI8L,GAAMnJ,EAAYuH,EAAW8B,EAASC,CAAS,EAC/D,OAAAD,EAAUC,EACH,CAAE,MAAOjM,EAAO,KAAM,EAAM,CACrC,CACA,MAAO,CAAE,KAAM,GAAM,MAAO,IAAK,CACnC,CACF,CACF,EAGIkM,GAAoB,EACpBC,GAAU,EACVC,GAAe,EACfC,GAAc,EACdC,GAAY,GACZC,GAAU,GACVC,GAAkB,GAClBC,GAAuB,EACvBC,GAAQ,GACRC,GAAiB,GACjBC,GAAc,GACdC,GAAc,GACdC,GAAc,GACdC,GAAkB,GAClBC,GAAa,GACbC,GAAmB,GACnBC,GAAoB,GACpBC,GAAW,GACXC,GAAe,GACfC,GAAmB,GACnBC,GAAiB,GACjBC,GAAoB,GACpBC,GAAgB,GAChBC,GAAsB,GACtBC,GAAuB,GACvBC,GAAoB,GACpBC,GAAqB,IACrBC,GAAgB,GAChBC,GAAsB,IACtBC,GAAgB,IAChBC,GAAQ,IACRC,GAAU,IACVC,GAAwB,MACxBC,GAAW,GACXC,GAAY,GACZC,GAAQ,GACRC,GAAQ,GACRC,GAAY,GACZC,GAAY,GACZC,GAAO,EACPC,GAAY,EACZC,GAAkB,GAClBC,GAAY,GACZC,GAA4B,GAC5BC,GAAS,IACTC,GAAM,GACNC,GAAO,GACPvE,GAAI,GACJpK,GAAI,IACJM,GAAI,IACJsO,GAAI,IACJC,GAAI,IACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAU,SAAUtM,EAAW,CACjC,OAAOA,GAAa8L,IAAQ9L,GAAa,EAC3C,EACIuM,GAAuB,SAAUvM,EAAW,CAC9C,OAAOA,GAAa,OAAUA,GAAa,KAC7C,EACIwM,GAAQ,SAAUxM,EAAW,CAC/B,OACEsM,GAAQtM,CAAS,GAChBA,GAAaiM,IAAKjM,GAAamM,IAC/BnM,GAAauH,IAAKvH,GAAavC,EAEpC,EACIgP,GAAoB,SAAUzM,EAAW,CAC3C,OAAOA,GAAauH,IAAKvH,GAAagM,EACxC,EACIU,GAAoB,SAAU1M,EAAW,CAC3C,OAAOA,GAAaiM,IAAKjM,GAAaqM,EACxC,EACIM,GAAW,SAAU3M,EAAW,CAClC,OAAOyM,GAAkBzM,CAAS,GAAK0M,GAAkB1M,CAAS,CACpE,EACI4M,GAAsB,SAAU5M,EAAW,CAC7C,OAAOA,GAAa+K,EACtB,EACI8B,GAAe,SAAU7M,EAAW,CACtC,OACEA,IAAcoJ,IACdpJ,IAAcuJ,IACdvJ,IAAcwJ,EAElB,EACIsD,GAAuB,SAAU9M,EAAW,CAC9C,OACE2M,GAAS3M,CAAS,GAClB4M,GAAoB5M,CAAS,GAC7BA,IAAciK,EAElB,EACI8C,GAAkB,SAAU/M,EAAW,CACzC,OACE8M,GAAqB9M,CAAS,GAC9BsM,GAAQtM,CAAS,GACjBA,IAAckK,EAElB,EACI8C,GAA0B,SAAUhN,EAAW,CACjD,OACGA,GAAauL,IAAQvL,GAAawL,IACnCxL,IAAcyL,IACbzL,GAAa0L,IAAa1L,GAAa2L,IACxC3L,IAAc4L,EAElB,EACIqB,GAAgB,SAAUC,EAAIC,EAAI,CACpC,OAAID,IAAO5D,GACF,GAEF6D,IAAO/D,EAChB,EACIgE,GAAoB,SAAUF,EAAIC,EAAIE,EAAI,CAC5C,OAAIH,IAAOhD,GACF4C,GAAqBK,CAAE,GAAKF,GAAcE,EAAIE,CAAE,EAC9CP,GAAqBI,CAAE,EACzB,GACE,GAAAA,IAAO5D,IAAmB2D,GAAcC,EAAIC,CAAE,EAI3D,EACIG,GAAgB,SAAUJ,EAAIC,EAAIE,EAAI,CACxC,OAAIH,IAAOhC,IAAagC,IAAOhD,GACzBoC,GAAQa,CAAE,EACL,GAEFA,IAAO7B,IAAagB,GAAQe,CAAE,EAG9Bf,GADLY,IAAO5B,GACM6B,EAEFD,CAFI,CAGrB,EACIK,GAAiB,SAAU9N,EAAY,CACzC,IAAI+N,EAAI,EACJC,EAAO,GACPhO,EAAW+N,CAAC,IAAMtC,IAAazL,EAAW+N,CAAC,IAAMtD,MAC/CzK,EAAW+N,CAAC,IAAMtD,KACpBuD,EAAO,IAETD,KAGF,QADIE,EAAW,CAAC,EACTpB,GAAQ7M,EAAW+N,CAAC,CAAC,GAC1BE,EAAS,KAAKjO,EAAW+N,GAAG,CAAC,EAE/B,IAAIG,EAAMD,EAAS,OACf,SAAS9N,EAAgB,MAAM,OAAQ8N,CAAQ,EAAG,EAAE,EACpD,EACAjO,EAAW+N,CAAC,IAAMlC,IACpBkC,IAGF,QADII,EAAW,CAAC,EACTtB,GAAQ7M,EAAW+N,CAAC,CAAC,GAC1BI,EAAS,KAAKnO,EAAW+N,GAAG,CAAC,EAE/B,IAAIK,EAAQD,EAAS,OACjBE,EAAOD,EACP,SAASjO,EAAgB,MAAM,OAAQgO,CAAQ,EAAG,EAAE,EACpD,GACAnO,EAAW+N,CAAC,IAAMtB,IAAKzM,EAAW+N,CAAC,IAAMrQ,KAC3CqQ,IAEF,IAAIO,EAAU,GACVtO,EAAW+N,CAAC,IAAMtC,IAAazL,EAAW+N,CAAC,IAAMtD,MAC/CzK,EAAW+N,CAAC,IAAMtD,KACpB6D,EAAU,IAEZP,KAGF,QADIQ,EAAW,CAAC,EACT1B,GAAQ7M,EAAW+N,CAAC,CAAC,GAC1BQ,EAAS,KAAKvO,EAAW+N,GAAG,CAAC,EAE/B,IAAIS,EAAMD,EAAS,OACf,SAASpO,EAAgB,MAAM,OAAQoO,CAAQ,EAAG,EAAE,EACpD,EACJ,OACEP,GAAQE,EAAMG,EAAO,KAAK,IAAI,GAAI,CAACD,CAAK,GAAK,KAAK,IAAI,GAAIE,EAAUE,CAAG,CAE3E,EACIC,GAAyB,CAC3B,KAAM,CACR,EACIC,GAA0B,CAC5B,KAAM,CACR,EACIC,GAAc,CAAE,KAAM,CAAoB,EAC1CC,GAAqB,CAAE,KAAM,EAA4B,EACzDC,GAAqB,CAAE,KAAM,CAA2B,EACxDC,GAAe,CAAE,KAAM,EAAsB,EAC7CC,GAAmB,CAAE,KAAM,CAAyB,EACpDC,GAAsB,CAAE,KAAM,EAA6B,EAC3DC,GAA2B,CAC7B,KAAM,EACR,EACIC,GAA4B,CAC9B,KAAM,EACR,EACIC,GAAwB,CAAE,KAAM,EAA+B,EAC/DC,GAAgB,CAAE,KAAM,EAAuB,EAC/CC,GAAmB,CAAE,KAAM,CAAyB,EACpDC,GAAY,CAAE,KAAM,EAAmB,EACvCC,GAAY,CAAE,KAAM,EAAmB,EACvCC,GAAc,CAAE,KAAM,EAAqB,EAC3CC,GAAkB,CAAE,KAAM,EAAyB,EACnDC,GAA4B,CAC9B,KAAM,EACR,EACIC,GAA6B,CAC/B,KAAM,EACR,EACIC,GAAmB,CAAE,KAAM,EAA0B,EACrDC,GAAY,CAAE,KAAM,EAAmB,EACvCC,GAA2B,UAAY,CACzC,SAASA,GAAY,CACnB,KAAK,OAAS,CAAC,CACjB,CACA,OAAAA,EAAU,UAAU,MAAQ,SAAUC,EAAO,CAC3C,KAAK,OAAS,KAAK,OAAO,OAAOjQ,EAAeiQ,CAAK,CAAC,CACxD,EACAD,EAAU,UAAU,KAAO,UAAY,CAGrC,QAFIE,EAAS,CAAC,EACVC,EAAQ,KAAK,aAAa,EACvBA,IAAUJ,IACfG,EAAO,KAAKC,CAAK,EACjBA,EAAQ,KAAK,aAAa,EAE5B,OAAOD,CACT,EACAF,EAAU,UAAU,aAAe,UAAY,CAC7C,IAAIvP,EAAY,KAAK,iBAAiB,EACtC,OAAQA,EAAW,CACjB,KAAKyJ,GACH,OAAO,KAAK,mBAAmBA,EAAc,EAC/C,KAAKE,GACH,IAAIuD,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EACzBE,EAAK,KAAK,cAAc,CAAC,EAC7B,GAAIN,GAAgBG,CAAE,GAAKD,GAAcE,EAAIE,CAAE,EAAG,CAChD,IAAIsC,EAAQvC,GAAkBF,EAAIC,EAAIE,CAAE,EACpCpE,GACAD,GACAlM,EAAQ,KAAK,YAAY,EAC7B,MAAO,CAAE,KAAM,EAAoB,MAAOA,EAAO,MAAO6S,CAAM,CAChE,CACA,MACF,KAAK/F,GACH,GAAI,KAAK,cAAc,CAAC,IAAMF,GAC5B,YAAK,iBAAiB,EACf2E,GAET,MACF,KAAKvE,GACH,OAAO,KAAK,mBAAmBA,EAAU,EAC3C,KAAKC,GACH,OAAOmE,GACT,KAAKlE,GACH,OAAOmE,GACT,KAAKlD,GACH,GAAI,KAAK,cAAc,CAAC,IAAMvB,GAC5B,YAAK,iBAAiB,EACfkF,GAET,MACF,KAAK1D,GACH,GACEoC,GACEtN,EACA,KAAK,cAAc,CAAC,EACpB,KAAK,cAAc,CAAC,CACtB,EAEA,YAAK,mBAAmBA,CAAS,EAC1B,KAAK,oBAAoB,EAElC,MACF,KAAKmL,GACH,OAAOiD,GACT,KAAKlE,GACH,IAAI0F,EAAK5P,EACL6P,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EAC7B,GAAIxC,GAAcsC,EAAIC,EAAIC,CAAE,EAC1B,YAAK,mBAAmB9P,CAAS,EAC1B,KAAK,oBAAoB,EAElC,GAAIoN,GAAkBwC,EAAIC,EAAIC,CAAE,EAC9B,YAAK,mBAAmB9P,CAAS,EAC1B,KAAK,sBAAsB,EAEpC,GAAI6P,IAAO3F,IAAgB4F,IAAOzF,GAChC,YAAK,iBAAiB,EACtB,KAAK,iBAAiB,EACf2E,GAET,MACF,KAAK1D,GACH,GACEgC,GACEtN,EACA,KAAK,cAAc,CAAC,EACpB,KAAK,cAAc,CAAC,CACtB,EAEA,YAAK,mBAAmBA,CAAS,EAC1B,KAAK,oBAAoB,EAElC,MACF,KAAKqJ,GACH,GAAI,KAAK,cAAc,CAAC,IAAM4B,GAE5B,IADA,KAAK,iBAAiB,IACT,CACX,IAAIuC,EAAI,KAAK,iBAAiB,EAC9B,GAAIA,IAAMvC,KACRuC,EAAI,KAAK,iBAAiB,EACtBA,IAAMnE,IACR,OAAO,KAAK,aAAa,EAG7B,GAAImE,IAAM3B,GACR,OAAO,KAAK,aAAa,CAE7B,CAEF,MACF,KAAKT,GACH,OAAO6D,GACT,KAAK5D,GACH,OAAO6D,GACT,KAAK9E,GACH,GACE,KAAK,cAAc,CAAC,IAAMD,IAC1B,KAAK,cAAc,CAAC,IAAMD,IAC1B,KAAK,cAAc,CAAC,IAAMA,GAE1B,YAAK,iBAAiB,EACtB,KAAK,iBAAiB,EACf6E,GAET,MACF,KAAKzE,GACH,IAAIyF,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EAC7B,GAAI7C,GAAkB2C,EAAIC,EAAIC,CAAE,EAAG,CACjC,IAAInT,EAAQ,KAAK,YAAY,EAC7B,MAAO,CAAE,KAAM,EAA0B,MAAOA,CAAM,CACxD,CACA,MACF,KAAKyN,GACH,OAAO4E,GACT,KAAK7F,GACH,GAAI2D,GAAcjN,EAAW,KAAK,cAAc,CAAC,CAAC,EAChD,YAAK,mBAAmBA,CAAS,EAC1B,KAAK,sBAAsB,EAEpC,MACF,KAAKwK,GACH,OAAO4E,GACT,KAAK3E,GACH,GAAI,KAAK,cAAc,CAAC,IAAMf,GAC5B,YAAK,iBAAiB,EACf4E,GAET,MACF,KAAK5D,GACH,OAAOgE,GACT,KAAK9D,GACH,OAAO+D,GACT,KAAK5C,GACL,KAAKK,GACH,IAAI8D,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EAC7B,OAAID,IAAOhF,KAAcsB,GAAM2D,CAAE,GAAKA,IAAOxF,MAC3C,KAAK,iBAAiB,EACtB,KAAK,yBAAyB,GAEhC,KAAK,mBAAmB3K,CAAS,EAC1B,KAAK,sBAAsB,EACpC,KAAK6K,GACH,GAAI,KAAK,cAAc,CAAC,IAAMnB,GAC5B,YAAK,iBAAiB,EACf8E,GAET,GAAI,KAAK,cAAc,CAAC,IAAM3D,GAC5B,YAAK,iBAAiB,EACf0D,GAET,MACF,KAAKzD,GACH,GAAI,KAAK,cAAc,CAAC,IAAMpB,GAC5B,YAAK,iBAAiB,EACf+E,GAET,MACF,KAAK5C,GACH,OAAOyD,EACX,CACA,OAAIzC,GAAa7M,CAAS,GACxB,KAAK,kBAAkB,EAChBqP,IAEL/C,GAAQtM,CAAS,GACnB,KAAK,mBAAmBA,CAAS,EAC1B,KAAK,oBAAoB,GAE9B8M,GAAqB9M,CAAS,GAChC,KAAK,mBAAmBA,CAAS,EAC1B,KAAK,sBAAsB,GAE7B,CAAE,KAAM,EAAqB,MAAOJ,EAAgBI,CAAS,CAAE,CACxE,EACAuP,EAAU,UAAU,iBAAmB,UAAY,CACjD,IAAIzS,EAAQ,KAAK,OAAO,MAAM,EAC9B,OAAO,OAAOA,GAAU,YAAc,GAAKA,CAC7C,EACAyS,EAAU,UAAU,mBAAqB,SAAUvP,EAAW,CAC5D,KAAK,OAAO,QAAQA,CAAS,CAC/B,EACAuP,EAAU,UAAU,cAAgB,SAAUa,EAAO,CACnD,OAAIA,GAAS,KAAK,OAAO,OAChB,GAEF,KAAK,OAAOA,CAAK,CAC1B,EACAb,EAAU,UAAU,yBAA2B,UAAY,CAGzD,QAFIc,EAAS,CAAC,EACVrQ,EAAY,KAAK,iBAAiB,EAC/BwM,GAAMxM,CAAS,GAAKqQ,EAAO,OAAS,GACzCA,EAAO,KAAKrQ,CAAS,EACrBA,EAAY,KAAK,iBAAiB,EAGpC,QADIsQ,EAAgB,GACbtQ,IAAc2K,IAAiB0F,EAAO,OAAS,GACpDA,EAAO,KAAKrQ,CAAS,EACrBA,EAAY,KAAK,iBAAiB,EAClCsQ,EAAgB,GAElB,GAAIA,EAAe,CACjB,IAAIC,EAAU,SACZ3Q,EAAgB,MACd,OACAyQ,EAAO,IAAI,SAAUG,EAAO,CAC1B,OAAOA,IAAU7F,GAAgBmB,GAAO0E,CAC1C,CAAC,CACH,EACA,EACF,EACInO,EAAM,SACRzC,EAAgB,MACd,OACAyQ,EAAO,IAAI,SAAUG,EAAO,CAC1B,OAAOA,IAAU7F,GAAgBwB,GAAIqE,CACvC,CAAC,CACH,EACA,EACF,EACA,MAAO,CAAE,KAAM,GAA8B,MAAOD,EAAS,IAAKlO,CAAI,CACxE,CACA,IAAID,EAAQ,SAASxC,EAAgB,MAAM,OAAQyQ,CAAM,EAAG,EAAE,EAC9D,GACE,KAAK,cAAc,CAAC,IAAMnG,IAC1BsC,GAAM,KAAK,cAAc,CAAC,CAAC,EAC3B,CACA,KAAK,iBAAiB,EACtBxM,EAAY,KAAK,iBAAiB,EAElC,QADIyQ,EAAY,CAAC,EACVjE,GAAMxM,CAAS,GAAKyQ,EAAU,OAAS,GAC5CA,EAAU,KAAKzQ,CAAS,EACxBA,EAAY,KAAK,iBAAiB,EAEpC,IAAIqC,EAAM,SAASzC,EAAgB,MAAM,OAAQ6Q,CAAS,EAAG,EAAE,EAC/D,MAAO,CAAE,KAAM,GAA8B,MAAOrO,EAAO,IAAKC,CAAI,CACtE,KACE,OAAO,CAAE,KAAM,GAA8B,MAAOD,EAAO,IAAKA,CAAM,CAE1E,EACAmN,EAAU,UAAU,sBAAwB,UAAY,CACtD,IAAIzS,EAAQ,KAAK,YAAY,EAC7B,OACEA,EAAM,YAAY,IAAM,OACxB,KAAK,cAAc,CAAC,IAAMiN,IAE1B,KAAK,iBAAiB,EACf,KAAK,gBAAgB,GACnB,KAAK,cAAc,CAAC,IAAMA,IACnC,KAAK,iBAAiB,EACf,CAAE,KAAM,GAAyB,MAAOjN,CAAM,GAEhD,CAAE,KAAM,GAAsB,MAAOA,CAAM,CACpD,EACAyS,EAAU,UAAU,gBAAkB,UAAY,CAChD,IAAIzS,EAAQ,CAAC,EAEb,GADA,KAAK,kBAAkB,EACnB,KAAK,cAAc,CAAC,IAAM+O,GAC5B,MAAO,CAAE,KAAM,GAAoB,MAAO,EAAG,EAE/C,IAAIlE,EAAO,KAAK,cAAc,CAAC,EAC/B,GAAIA,IAASmC,IAAcnC,IAAS8B,GAAgB,CAClD,IAAIiH,EAAc,KAAK,mBAAmB,KAAK,iBAAiB,CAAC,EACjE,OAAIA,EAAY,OAAS,IACvB,KAAK,kBAAkB,EAErB,KAAK,cAAc,CAAC,IAAM7E,IAC1B,KAAK,cAAc,CAAC,IAAM7B,KAE1B,KAAK,iBAAiB,EACf,CAAE,KAAM,GAAoB,MAAO0G,EAAY,KAAM,IAGhE,KAAK,sBAAsB,EACpB7B,GACT,CACA,OAAa,CACX,IAAI7O,EAAY,KAAK,iBAAiB,EACtC,GAAIA,IAAc6L,IAAO7L,IAAcgK,GACrC,MAAO,CACL,KAAM,GACN,MAAOpK,EAAgB,MAAM,OAAQ9C,CAAK,CAC5C,EACK,GAAI+P,GAAa7M,CAAS,EAE/B,OADA,KAAK,kBAAkB,EAErB,KAAK,cAAc,CAAC,IAAM6L,IAC1B,KAAK,cAAc,CAAC,IAAM7B,IAE1B,KAAK,iBAAiB,EACf,CACL,KAAM,GACN,MAAOpK,EAAgB,MAAM,OAAQ9C,CAAK,CAC5C,IAEF,KAAK,sBAAsB,EACpB+R,IACF,GACL7O,IAAcyJ,IACdzJ,IAAc8J,IACd9J,IAAc+J,IACdiD,GAAwBhN,CAAS,EAEjC,YAAK,sBAAsB,EACpB6O,GACF,GAAI7O,IAAcsJ,GACvB,GAAI2D,GAAcjN,EAAW,KAAK,cAAc,CAAC,CAAC,EAChDlD,EAAM,KAAK,KAAK,wBAAwB,CAAC,MAEzC,aAAK,sBAAsB,EACpB+R,QAGT/R,EAAM,KAAKkD,CAAS,CAExB,CACF,EACAuP,EAAU,UAAU,kBAAoB,UAAY,CAClD,KAAO1C,GAAa,KAAK,cAAc,CAAC,CAAC,GACvC,KAAK,iBAAiB,CAE1B,EACA0C,EAAU,UAAU,sBAAwB,UAAY,CACtD,OAAa,CACX,IAAIvP,EAAY,KAAK,iBAAiB,EACtC,GAAIA,IAAcgK,IAAqBhK,IAAc6L,GACnD,OAEEoB,GAAcjN,EAAW,KAAK,cAAc,CAAC,CAAC,GAChD,KAAK,wBAAwB,CAEjC,CACF,EACAuP,EAAU,UAAU,mBAAqB,SAAUlH,EAAO,CAGxD,QAFIsI,EAAmB,IACnB7T,EAAQ,GACLuL,EAAQ,GAAG,CAChB,IAAIuI,EAAS,KAAK,IAAID,EAAkBtI,CAAK,EAC7CvL,GAAS8C,EAAgB,MAAM,OAAQ,KAAK,OAAO,OAAO,EAAGgR,CAAM,CAAC,EACpEvI,GAASuI,CACX,CACA,YAAK,OAAO,MAAM,EACX9T,CACT,EACAyS,EAAU,UAAU,mBAAqB,SAAUsB,EAAiB,CAClE,IAAI/T,EAAQ,GACRR,EAAI,EACR,EAAG,CACD,IAAI0D,EAAY,KAAK,OAAO1D,CAAC,EAC7B,GACE0D,IAAc6L,IACd7L,IAAc,QACdA,IAAc6Q,EAEd,OAAA/T,GAAS,KAAK,mBAAmBR,CAAC,EAC3B,CAAE,KAAM,EAAsB,MAAOQ,CAAM,EAEpD,GAAIkD,IAAcoJ,GAChB,YAAK,OAAO,OAAO,EAAG9M,CAAC,EAChBwS,GAET,GAAI9O,IAAcsJ,GAAiB,CACjC,IAAI3B,EAAO,KAAK,OAAOrL,EAAI,CAAC,EACxBqL,IAASkE,IAAOlE,IAAS,SACvBA,IAASyB,IACXtM,GAAS,KAAK,mBAAmBR,CAAC,EAClCA,EAAI,GACJ,KAAK,OAAO,MAAM,GACT2Q,GAAcjN,EAAW2H,CAAI,IACtC7K,GAAS,KAAK,mBAAmBR,CAAC,EAClCQ,GAAS8C,EAAgB,KAAK,wBAAwB,CAAC,EACvDtD,EAAI,IAGV,CACAA,GACF,OAAS,GACX,EACAiT,EAAU,UAAU,cAAgB,UAAY,CAC9C,IAAIuB,EAAO,CAAC,EACRjJ,EAAOqB,GACPgE,EAAK,KAAK,cAAc,CAAC,EAI7B,KAHIA,IAAOhC,IAAagC,IAAOhD,KAC7B4G,EAAK,KAAK,KAAK,iBAAiB,CAAC,EAE5BxE,GAAQ,KAAK,cAAc,CAAC,CAAC,GAClCwE,EAAK,KAAK,KAAK,iBAAiB,CAAC,EAEnC5D,EAAK,KAAK,cAAc,CAAC,EACzB,IAAIC,EAAK,KAAK,cAAc,CAAC,EAC7B,GAAID,IAAO5B,IAAagB,GAAQa,CAAE,EAGhC,IAFA2D,EAAK,KAAK,KAAK,iBAAiB,EAAG,KAAK,iBAAiB,CAAC,EAC1DjJ,EAAOsB,GACAmD,GAAQ,KAAK,cAAc,CAAC,CAAC,GAClCwE,EAAK,KAAK,KAAK,iBAAiB,CAAC,EAGrC5D,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EACzB,IAAIE,EAAK,KAAK,cAAc,CAAC,EAC7B,IACGH,IAAOhB,IAAKgB,IAAO/P,OACjBgQ,IAAOjC,IAAaiC,IAAOjD,KAAiBoC,GAAQe,CAAE,GACvDf,GAAQa,CAAE,GAIZ,IAFA2D,EAAK,KAAK,KAAK,iBAAiB,EAAG,KAAK,iBAAiB,CAAC,EAC1DjJ,EAAOsB,GACAmD,GAAQ,KAAK,cAAc,CAAC,CAAC,GAClCwE,EAAK,KAAK,KAAK,iBAAiB,CAAC,EAGrC,MAAO,CAACvD,GAAeuD,CAAI,EAAGjJ,CAAI,CACpC,EACA0H,EAAU,UAAU,oBAAsB,UAAY,CACpD,IAAI/G,EAAK,KAAK,cAAc,EAC1BuI,EAASvI,EAAG,CAAC,EACbmH,EAAQnH,EAAG,CAAC,EACV0E,EAAK,KAAK,cAAc,CAAC,EACzBC,EAAK,KAAK,cAAc,CAAC,EACzBE,EAAK,KAAK,cAAc,CAAC,EAC7B,GAAID,GAAkBF,EAAIC,EAAIE,CAAE,EAAG,CACjC,IAAI2D,EAAO,KAAK,YAAY,EAC5B,MAAO,CACL,KAAM,GACN,OAAQD,EACR,MAAOpB,EACP,KAAMqB,CACR,CACF,CACA,OAAI9D,IAAOrD,IACT,KAAK,iBAAiB,EACf,CACL,KAAM,GACN,OAAQkH,EACR,MAAOpB,CACT,GAEK,CAAE,KAAM,GAAuB,OAAQoB,EAAQ,MAAOpB,CAAM,CACrE,EACAJ,EAAU,UAAU,wBAA0B,UAAY,CACxD,IAAIvP,EAAY,KAAK,iBAAiB,EACtC,GAAIwM,GAAMxM,CAAS,EAAG,CAEpB,QADIiR,EAAMrR,EAAgBI,CAAS,EAC5BwM,GAAM,KAAK,cAAc,CAAC,CAAC,GAAKyE,EAAI,OAAS,GAClDA,GAAOrR,EAAgB,KAAK,iBAAiB,CAAC,EAE5CiN,GAAa,KAAK,cAAc,CAAC,CAAC,GACpC,KAAK,iBAAiB,EAExB,IAAIqE,EAAe,SAASD,EAAK,EAAE,EACnC,OACEC,IAAiB,GACjB3E,GAAqB2E,CAAY,GACjCA,EAAe,QAERlG,GAEFkG,CACT,CACA,OAAIlR,IAAc6L,GACTb,GAEFhL,CACT,EACAuP,EAAU,UAAU,YAAc,UAAY,CAE5C,QADIlS,EAAS,KACA,CACX,IAAI2C,EAAY,KAAK,iBAAiB,EACtC,GAAI+M,GAAgB/M,CAAS,EAC3B3C,GAAUuC,EAAgBI,CAAS,UAC1BiN,GAAcjN,EAAW,KAAK,cAAc,CAAC,CAAC,EACvD3C,GAAUuC,EAAgB,KAAK,wBAAwB,CAAC,MAExD,aAAK,mBAAmBI,CAAS,EAC1B3C,CAEX,CACF,EACOkS,CACT,EAAG,EAEC4B,GAAwB,UAAY,CACtC,SAASA,EAAO1B,EAAQ,CACtB,KAAK,QAAUA,CACjB,CACA,OAAA0B,EAAO,OAAS,SAAUrU,EAAO,CAC/B,IAAIsU,EAAY,IAAI7B,GACpB,OAAA6B,EAAU,MAAMtU,CAAK,EACd,IAAIqU,EAAOC,EAAU,KAAK,CAAC,CACpC,EACAD,EAAO,WAAa,SAAUrU,EAAO,CACnC,OAAOqU,EAAO,OAAOrU,CAAK,EAAE,oBAAoB,CAClD,EACAqU,EAAO,YAAc,SAAUrU,EAAO,CACpC,OAAOqU,EAAO,OAAOrU,CAAK,EAAE,qBAAqB,CACnD,EACAqU,EAAO,UAAU,oBAAsB,UAAY,CAEjD,QADIzB,EAAQ,KAAK,aAAa,EACvBA,EAAM,OAAS,IACpBA,EAAQ,KAAK,aAAa,EAE5B,GAAIA,EAAM,OAAS,GACjB,MAAM,IAAI,YACR,mDACF,EAEF,KAAK,eAAeA,CAAK,EACzB,IAAI5S,EAAQ,KAAK,sBAAsB,EACvC,GACE4S,EAAQ,KAAK,aAAa,QACnBA,EAAM,OAAS,IACxB,GAAIA,EAAM,OAAS,GACjB,OAAO5S,EAET,MAAM,IAAI,YACR,kFACF,CACF,EACAqU,EAAO,UAAU,qBAAuB,UAAY,CAElD,QADIE,EAAS,CAAC,IACD,CACX,IAAIvU,EAAQ,KAAK,sBAAsB,EACvC,GAAIA,EAAM,OAAS,GACjB,OAAOuU,EAETA,EAAO,KAAKvU,CAAK,EACjBuU,EAAO,KAAK,CACd,CACF,EACAF,EAAO,UAAU,sBAAwB,UAAY,CACnD,IAAIzB,EAAQ,KAAK,aAAa,EAC9B,OAAQA,EAAM,KAAM,CAClB,IAAK,IACL,IAAK,IACL,IAAK,GACH,OAAO,KAAK,mBAAmBA,EAAM,IAAI,EAC3C,IAAK,IACH,OAAO,KAAK,gBAAgBA,CAAK,CACrC,CACA,OAAOA,CACT,EACAyB,EAAO,UAAU,mBAAqB,SAAUtJ,EAAM,CAGpD,QAFIyJ,EAAQ,CAAE,KAAMzJ,EAAM,OAAQ,CAAC,CAAE,EACjC6H,EAAQ,KAAK,aAAa,IACjB,CACX,GACEA,EAAM,OAAS,IACf6B,GAAiB7B,EAAO7H,CAAI,EAE5B,OAAOyJ,EAET,KAAK,eAAe5B,CAAK,EACzB4B,EAAM,OAAO,KAAK,KAAK,sBAAsB,CAAC,EAC9C5B,EAAQ,KAAK,aAAa,CAC5B,CACF,EACAyB,EAAO,UAAU,gBAAkB,SAAUK,EAAe,CAM1D,QALIC,EAAc,CAChB,KAAMD,EAAc,MACpB,OAAQ,CAAC,EACT,KAAM,EACR,IACa,CACX,IAAI9B,EAAQ,KAAK,aAAa,EAC9B,GACEA,EAAM,OAAS,IACfA,EAAM,OAAS,EAEf,OAAO+B,EAET,KAAK,eAAe/B,CAAK,EACzB+B,EAAY,OAAO,KAAK,KAAK,sBAAsB,CAAC,CACtD,CACF,EACAN,EAAO,UAAU,aAAe,UAAY,CAC1C,IAAIzB,EAAQ,KAAK,QAAQ,MAAM,EAC/B,OAAO,OAAOA,GAAU,YAAcJ,GAAYI,CACpD,EACAyB,EAAO,UAAU,eAAiB,SAAUzB,EAAO,CACjD,KAAK,QAAQ,QAAQA,CAAK,CAC5B,EACOyB,CACT,EAAG,EACCO,GAAmB,SAAUhC,EAAO,CACtC,OAAOA,EAAM,OAAS,EACxB,EACIiC,GAAgB,SAAUjC,EAAO,CACnC,OAAOA,EAAM,OAAS,EACxB,EACIkC,GAAe,SAAUlC,EAAO,CAClC,OAAOA,EAAM,OAAS,EACxB,EACImC,GAAgB,SAAUnC,EAAO,CACnC,OAAOA,EAAM,OAAS,CACxB,EACIoC,GAAmB,SAAUpC,EAAO5S,EAAO,CAC7C,OAAO8U,GAAalC,CAAK,GAAKA,EAAM,QAAU5S,CAChD,EACIiV,GAAgB,SAAUrC,EAAO,CACnC,OAAOA,EAAM,OAAS,EACxB,EACIsC,GAA0B,SAAUtC,EAAO,CAC7C,OACEA,EAAM,OAAS,IACfA,EAAM,OAAS,CAEnB,EACIuC,GAAoB,SAAUxC,EAAQ,CACxC,IAAIyC,EAAO,CAAC,EACRC,EAAM,CAAC,EACX,OAAA1C,EAAO,QAAQ,SAAUC,EAAO,CAC9B,GAAIA,EAAM,OAAS,EAAqB,CACtC,GAAIyC,EAAI,SAAW,EACjB,MAAM,IAAI,MAAM,kDAAkD,EAEpED,EAAK,KAAKC,CAAG,EACbA,EAAM,CAAC,EACP,MACF,CACIzC,EAAM,OAAS,IACjByC,EAAI,KAAKzC,CAAK,CAElB,CAAC,EACGyC,EAAI,QACND,EAAK,KAAKC,CAAG,EAERD,CACT,EACIX,GAAmB,SAAU7B,EAAO7H,EAAM,CAO5C,OALEA,IAAS,IACT6H,EAAM,OAAS,IAKf7H,IAAS,IACT6H,EAAM,OAAS,GAER,GAGP7H,IAAS,GACT6H,EAAM,OAAS,CAEnB,EAEI0C,GAAW,SAAU1C,EAAO,CAC9B,OACEA,EAAM,OAAS,IACfA,EAAM,OAAS,EAEnB,EAEI2C,GAAqB,SAAU3C,EAAO,CACxC,OAAOA,EAAM,OAAS,IAA6B0C,GAAS1C,CAAK,CACnE,EACI4C,GAA6B,SAAU7C,EAAQ,CACjD,OAAOA,EAAO,OAAS,EAAI,CAACA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAAI,CAACA,EAAO,CAAC,CAAC,CAChE,EACI8C,GAAc,CAChB,KAAM,GACN,OAAQ,EACR,MAAOrJ,EACT,EACIsJ,GAAgB,CAClB,KAAM,GACN,OAAQ,GACR,MAAOtJ,EACT,EACIuJ,GAAkB,CACpB,KAAM,GACN,OAAQ,IACR,MAAOvJ,EACT,EACIwJ,GAA2B,SAAUC,EAAOnU,EAAOC,EAAQ,CAC7D,IAAIC,EAAIiU,EAAM,CAAC,EACbjV,EAAIiV,EAAM,CAAC,EACb,MAAO,CACLC,GAAiBlU,EAAGF,CAAK,EACzBoU,GAAiB,OAAOlV,GAAM,YAAcA,EAAIgB,EAAGD,CAAM,CAC3D,CACF,EACImU,GAAmB,SAAUlD,EAAOmD,EAAQ,CAC9C,GAAInD,EAAM,OAAS,GACjB,OAAQA,EAAM,OAAS,IAAOmD,EAEhC,GAAInB,GAAiBhC,CAAK,EACxB,OAAQA,EAAM,KAAM,CAClB,IAAK,MACL,IAAK,KACH,MAAO,IAAKA,EAAM,OACpB,IAAK,KACL,QACE,OAAOA,EAAM,MACjB,CAEF,OAAOA,EAAM,MACf,EAEIoD,GAAM,MACNC,GAAO,OACPC,GAAM,MACNC,GAAO,OACPC,GAAQ,CACV,KAAM,QACN,MAAO,SAAUC,EAAUrW,EAAO,CAChC,GAAIA,EAAM,OAAS,GACjB,OAAQA,EAAM,KAAM,CAClB,KAAKgW,GACH,OAAQ,KAAK,GAAKhW,EAAM,OAAU,IACpC,KAAKiW,GACH,OAAQ,KAAK,GAAK,IAAOjW,EAAM,OACjC,KAAKkW,GACH,OAAOlW,EAAM,OACf,KAAKmW,GACH,OAAO,KAAK,GAAK,EAAInW,EAAM,MAC/B,CAEF,MAAM,IAAI,MAAM,wBAAwB,CAC1C,CACF,EACIsW,GAAU,SAAUtW,EAAO,CAC7B,OAAIA,EAAM,OAAS,KAEfA,EAAM,OAASgW,IACfhW,EAAM,OAASiW,IACfjW,EAAM,OAASkW,IACflW,EAAM,OAASmW,GAMrB,EACII,GAAiB,SAAU5D,EAAQ,CACrC,IAAI6D,EAAe7D,EAChB,OAAOmC,EAAY,EACnB,IAAI,SAAU2B,EAAO,CACpB,OAAOA,EAAM,KACf,CAAC,EACA,KAAK,GAAG,EACX,OAAQD,EAAc,CACpB,IAAK,kBACL,IAAK,kBACL,IAAK,WACL,IAAK,WACH,MAAO,CAACf,GAAaA,EAAW,EAClC,IAAK,SACL,IAAK,SACH,OAAOiB,GAAI,CAAC,EACd,IAAK,iBACL,IAAK,iBACL,IAAK,YACL,IAAK,YACH,MAAO,CAACjB,GAAaE,EAAe,EACtC,IAAK,WACL,IAAK,OACH,OAAOe,GAAI,EAAE,EACf,IAAK,cACL,IAAK,cACL,IAAK,eACL,IAAK,eACH,MAAO,CAACf,GAAiBA,EAAe,EAC1C,IAAK,YACL,IAAK,MACH,OAAOe,GAAI,GAAG,EAChB,IAAK,eACL,IAAK,eACL,IAAK,cACL,IAAK,cACH,MAAO,CAACf,GAAiBF,EAAW,EACtC,IAAK,UACL,IAAK,QACH,OAAOiB,GAAI,GAAG,CAClB,CACA,MAAO,EACT,EACIA,GAAM,SAAUA,EAAK,CACvB,OAAQ,KAAK,GAAKA,EAAO,GAC3B,EAEIC,GAAU,CACZ,KAAM,QACN,MAAO,SAAU5U,EAAS/B,EAAO,CAC/B,GAAIA,EAAM,OAAS,GAAmB,CACpC,IAAI4W,EAAgBC,GAA0B7W,EAAM,IAAI,EACxD,GAAI,OAAO4W,GAAkB,YAC3B,MAAM,IAAI,MACR,sDACE5W,EAAM,KACN,GACJ,EAEF,OAAO4W,EAAc7U,EAAS/B,EAAM,MAAM,CAC5C,CACA,GAAIA,EAAM,OAAS,EAAoB,CACrC,GAAIA,EAAM,MAAM,SAAW,EAAG,CAC5B,IAAI8W,EAAI9W,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Ba,EAAIb,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Bf,EAAIe,EAAM,MAAM,UAAU,EAAG,CAAC,EAClC,OAAOoB,GACL,SAAS0V,EAAIA,EAAG,EAAE,EAClB,SAASjW,EAAIA,EAAG,EAAE,EAClB,SAAS5B,EAAIA,EAAG,EAAE,EAClB,CACF,CACF,CACA,GAAIe,EAAM,MAAM,SAAW,EAAG,CAC5B,IAAI8W,EAAI9W,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Ba,EAAIb,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Bf,EAAIe,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9ByK,EAAIzK,EAAM,MAAM,UAAU,EAAG,CAAC,EAClC,OAAOoB,GACL,SAAS0V,EAAIA,EAAG,EAAE,EAClB,SAASjW,EAAIA,EAAG,EAAE,EAClB,SAAS5B,EAAIA,EAAG,EAAE,EAClB,SAASwL,EAAIA,EAAG,EAAE,EAAI,GACxB,CACF,CACA,GAAIzK,EAAM,MAAM,SAAW,EAAG,CAC5B,IAAI8W,EAAI9W,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Ba,EAAIb,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Bf,EAAIe,EAAM,MAAM,UAAU,EAAG,CAAC,EAClC,OAAOoB,GAAK,SAAS0V,EAAG,EAAE,EAAG,SAASjW,EAAG,EAAE,EAAG,SAAS5B,EAAG,EAAE,EAAG,CAAC,CAClE,CACA,GAAIe,EAAM,MAAM,SAAW,EAAG,CAC5B,IAAI8W,EAAI9W,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Ba,EAAIb,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9Bf,EAAIe,EAAM,MAAM,UAAU,EAAG,CAAC,EAC9ByK,EAAIzK,EAAM,MAAM,UAAU,EAAG,CAAC,EAClC,OAAOoB,GACL,SAAS0V,EAAG,EAAE,EACd,SAASjW,EAAG,EAAE,EACd,SAAS5B,EAAG,EAAE,EACd,SAASwL,EAAG,EAAE,EAAI,GACpB,CACF,CACF,CACA,GAAIzK,EAAM,OAAS,GAAsB,CACvC,IAAI+W,EAAaC,GAAOhX,EAAM,MAAM,YAAY,CAAC,EACjD,GAAI,OAAO+W,GAAe,YACxB,OAAOA,CAEX,CACA,OAAOC,GAAO,WAChB,CACF,EACIC,GAAgB,SAAUC,EAAO,CACnC,OAAQ,IAAOA,KAAW,CAC5B,EACIC,GAAW,SAAUD,EAAO,CAC9B,IAAIE,EAAQ,IAAOF,EACfG,EAAO,IAAQH,GAAS,EACxBI,EAAQ,IAAQJ,GAAS,GACzBK,EAAM,IAAQL,GAAS,GAC3B,OAAOE,EAAQ,IACX,QAAUG,EAAM,IAAMD,EAAQ,IAAMD,EAAO,IAAMD,EAAQ,IAAM,IAC/D,OAASG,EAAM,IAAMD,EAAQ,IAAMD,EAAO,GAChD,EACIjW,GAAO,SAAU0V,EAAGjW,EAAG5B,EAAGwL,EAAG,CAC/B,OACIqM,GAAK,GAAOjW,GAAK,GAAO5B,GAAK,EAAM,KAAK,MAAMwL,EAAI,GAAG,GAAK,KAAQ,CAExE,EACI+M,GAAqB,SAAU5E,EAAOpT,EAAG,CAC3C,GAAIoT,EAAM,OAAS,GACjB,OAAOA,EAAM,OAEf,GAAIA,EAAM,OAAS,GAA2B,CAC5C,IAAI6E,EAAMjY,IAAM,EAAI,EAAI,IACxB,OAAOA,IAAM,EACRoT,EAAM,OAAS,IAAO6E,EACvB,KAAK,MAAO7E,EAAM,OAAS,IAAO6E,CAAG,CAC3C,CACA,MAAO,EACT,EACIC,GAAM,SAAUrB,EAAUjB,EAAM,CAClC,IAAIzC,EAASyC,EAAK,OAAOF,EAAuB,EAChD,GAAIvC,EAAO,SAAW,EAAG,CACvB,IAAIjH,EAAKiH,EAAO,IAAI6E,EAAkB,EACpCV,EAAIpL,EAAG,CAAC,EACR7K,EAAI6K,EAAG,CAAC,EACRzM,EAAIyM,EAAG,CAAC,EACV,OAAOtK,GAAK0V,EAAGjW,EAAG5B,EAAG,CAAC,CACxB,CACA,GAAI0T,EAAO,SAAW,EAAG,CACvB,IAAIgF,EAAKhF,EAAO,IAAI6E,EAAkB,EACpCV,EAAIa,EAAG,CAAC,EACR9W,EAAI8W,EAAG,CAAC,EACR1Y,EAAI0Y,EAAG,CAAC,EACRlN,EAAIkN,EAAG,CAAC,EACV,OAAOvW,GAAK0V,EAAGjW,EAAG5B,EAAGwL,CAAC,CACxB,CACA,MAAO,EACT,EACA,SAASmN,GAAQC,EAAIC,EAAIC,EAAK,CAO5B,OANIA,EAAM,IACRA,GAAO,GAELA,GAAO,IACTA,GAAO,GAELA,EAAM,oBACAD,EAAKD,GAAME,EAAM,EAAIF,EACpBE,EAAM,GACRD,EACEC,EAAM,mBACPD,EAAKD,GAAM,GAAK,kBAAQE,GAAOF,EAEhCA,CAEX,CACA,IAAIG,GAAM,SAAUjW,EAASqT,EAAM,CACjC,IAAIzC,EAASyC,EAAK,OAAOF,EAAuB,EAC5C6C,EAAMpF,EAAO,CAAC,EAChBsF,EAAatF,EAAO,CAAC,EACrBuF,EAAYvF,EAAO,CAAC,EACpByE,EAAQzE,EAAO,CAAC,EACd7Q,GACDiW,EAAI,OAAS,GACVrB,GAAIqB,EAAI,MAAM,EACd3B,GAAM,MAAMrU,EAASgW,CAAG,IAC3B,KAAK,GAAK,GACTxY,EAAIgW,GAAmB0C,CAAU,EAAIA,EAAW,OAAS,IAAM,EAC/D5W,EAAIkU,GAAmB2C,CAAS,EAAIA,EAAU,OAAS,IAAM,EAC7DzN,EACF,OAAO2M,GAAU,aAAe7B,GAAmB6B,CAAK,EACpDtB,GAAiBsB,EAAO,CAAC,EACzB,EACN,GAAI7X,IAAM,EACR,OAAO6B,GAAKC,EAAI,IAAKA,EAAI,IAAKA,EAAI,IAAK,CAAC,EAE1C,IAAIyW,EAAKzW,GAAK,GAAMA,GAAK9B,EAAI,GAAK8B,EAAI9B,EAAI8B,EAAI9B,EAC1CsY,EAAKxW,EAAI,EAAIyW,EACbhB,EAAIc,GAAQC,EAAIC,EAAIhW,EAAI,EAAI,CAAC,EAC7BjB,EAAI+W,GAAQC,EAAIC,EAAIhW,CAAC,EACrB7C,EAAI2Y,GAAQC,EAAIC,EAAIhW,EAAI,EAAI,CAAC,EACjC,OAAOV,GAAK0V,EAAI,IAAKjW,EAAI,IAAK5B,EAAI,IAAKwL,CAAC,CAC1C,EACIoM,GAA4B,CAC9B,IAAKmB,GACL,KAAMA,GACN,IAAKN,GACL,KAAMA,EACR,EACIS,GAAa,SAAUpW,EAAS/B,EAAO,CACzC,OAAO2W,GAAQ,MAAM5U,EAASsS,GAAO,OAAOrU,CAAK,EAAE,oBAAoB,CAAC,CAC1E,EACIgX,GAAS,CACX,UAAW,WACX,aAAc,WACd,KAAM,SACN,WAAY,WACZ,MAAO,WACP,MAAO,WACP,OAAQ,WACR,MAAO,IACP,eAAgB,WAChB,KAAM,MACN,WAAY,WACZ,MAAO,WACP,UAAW,WACX,UAAW,WACX,WAAY,WACZ,UAAW,WACX,MAAO,WACP,eAAgB,WAChB,SAAU,WACV,QAAS,WACT,KAAM,SACN,SAAU,MACV,SAAU,QACV,cAAe,WACf,SAAU,WACV,UAAW,QACX,SAAU,WACV,UAAW,WACX,YAAa,WACb,eAAgB,WAChB,WAAY,WACZ,WAAY,WACZ,QAAS,WACT,WAAY,WACZ,aAAc,WACd,cAAe,WACf,cAAe,UACf,cAAe,UACf,cAAe,SACf,WAAY,WACZ,SAAU,WACV,YAAa,SACb,QAAS,WACT,QAAS,WACT,WAAY,UACZ,UAAW,WACX,YAAa,WACb,YAAa,UACb,QAAS,WACT,UAAW,WACX,WAAY,WACZ,KAAM,WACN,UAAW,WACX,KAAM,WACN,MAAO,QACP,YAAa,WACb,KAAM,WACN,SAAU,WACV,QAAS,WACT,UAAW,WACX,OAAQ,WACR,MAAO,WACP,MAAO,WACP,SAAU,WACV,cAAe,WACf,UAAW,WACX,aAAc,WACd,UAAW,WACX,WAAY,WACZ,UAAW,WACX,qBAAsB,WACtB,UAAW,WACX,WAAY,WACZ,UAAW,WACX,UAAW,WACX,YAAa,WACb,cAAe,UACf,aAAc,WACd,eAAgB,WAChB,eAAgB,WAChB,eAAgB,WAChB,YAAa,WACb,KAAM,SACN,UAAW,UACX,MAAO,WACP,QAAS,WACT,OAAQ,WACR,iBAAkB,WAClB,WAAY,MACZ,aAAc,WACd,aAAc,WACd,eAAgB,WAChB,gBAAiB,WACjB,kBAAmB,SACnB,gBAAiB,WACjB,gBAAiB,WACjB,aAAc,UACd,UAAW,WACX,UAAW,WACX,SAAU,WACV,YAAa,WACb,KAAM,MACN,QAAS,WACT,MAAO,WACP,UAAW,WACX,OAAQ,WACR,UAAW,WACX,OAAQ,WACR,cAAe,WACf,UAAW,WACX,cAAe,WACf,cAAe,WACf,WAAY,WACZ,UAAW,WACX,KAAM,WACN,KAAM,WACN,KAAM,WACN,WAAY,WACZ,OAAQ,WACR,cAAe,WACf,IAAK,WACL,UAAW,WACX,UAAW,WACX,YAAa,WACb,OAAQ,WACR,WAAY,WACZ,SAAU,UACV,SAAU,WACV,OAAQ,WACR,OAAQ,WACR,QAAS,WACT,UAAW,WACX,UAAW,WACX,UAAW,WACX,KAAM,WACN,YAAa,SACb,UAAW,WACX,IAAK,WACL,KAAM,QACN,QAAS,WACT,OAAQ,WACR,YAAa,EACb,UAAW,WACX,OAAQ,WACR,MAAO,WACP,MAAO,WACP,WAAY,WACZ,OAAQ,WACR,YAAa,UACf,EAEIoB,GAAiB,CACnB,KAAM,kBACN,aAAc,aACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/B,EAAU1D,EAAQ,CACjC,OAAOA,EAAO,IAAI,SAAUC,EAAO,CACjC,GAAIkC,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,EACX,CAEF,MAAO,EACT,CAAC,CACH,CACF,EAEIyF,GAAkB,CACpB,KAAM,mBACN,aAAc,cACd,OAAQ,GACR,KAAM,EACN,OAAQ,OACV,EAEIC,GAAiB,SAAUvW,EAASqT,EAAM,CAC5C,IAAI8B,EAAQP,GAAQ,MAAM5U,EAASqT,EAAK,CAAC,CAAC,EACtCmD,EAAOnD,EAAK,CAAC,EACjB,OAAOmD,GAAQhD,GAAmBgD,CAAI,EAClC,CAAE,MAAOrB,EAAO,KAAMqB,CAAK,EAC3B,CAAE,MAAOrB,EAAO,KAAM,IAAK,CACjC,EACIsB,GAAoB,SAAUC,EAAOC,EAAY,CACnD,IAAIC,EAAQF,EAAM,CAAC,EACfG,EAAOH,EAAMA,EAAM,OAAS,CAAC,EAC7BE,EAAM,OAAS,OACjBA,EAAM,KAAOlD,IAEXmD,EAAK,OAAS,OAChBA,EAAK,KAAOjD,IAId,QAFIkD,EAAe,CAAC,EAChBC,EAAW,EACNtZ,EAAI,EAAGA,EAAIiZ,EAAM,OAAQjZ,IAAK,CACrC,IAAIuZ,EAASN,EAAMjZ,CAAC,EAAE,KACtB,GAAIuZ,IAAW,KAAM,CACnB,IAAIC,EAAgBlD,GAAiBiD,EAAQL,CAAU,EACnDM,EAAgBF,EAClBD,EAAa,KAAKG,CAAa,EAE/BH,EAAa,KAAKC,CAAQ,EAE5BA,EAAWE,CACb,MACEH,EAAa,KAAK,IAAI,CAE1B,CAEA,QADII,EAAW,KACNzZ,EAAI,EAAGA,EAAIqZ,EAAa,OAAQrZ,IAAK,CAC5C,IAAI0Z,EAASL,EAAarZ,CAAC,EAC3B,GAAI0Z,IAAW,KACTD,IAAa,OACfA,EAAWzZ,WAEJyZ,IAAa,KAAM,CAI5B,QAHIE,EAAY3Z,EAAIyZ,EAChBG,EAAYP,EAAaI,EAAW,CAAC,EACrCI,GAAYH,EAASE,IAAcD,EAAY,GAC1CtY,EAAI,EAAGA,GAAKsY,EAAWtY,IAC9BgY,EAAaI,EAAWpY,EAAI,CAAC,EAAIwY,EAAWxY,EAE9CoY,EAAW,IACb,CACF,CACA,OAAOR,EAAM,IAAI,SAAU/M,EAAIlM,GAAG,CAChC,IAAI0X,EAAQxL,EAAG,MACf,MAAO,CACL,MAAOwL,EACP,KAAM,KAAK,IAAI,KAAK,IAAI,EAAG2B,EAAarZ,EAAC,EAAIkZ,CAAU,EAAG,CAAC,CAC7D,CACF,CAAC,CACH,EACIY,GAAqB,SAAUC,EAAQ7X,EAAOC,EAAQ,CACxD,IAAI6X,EAAU9X,EAAQ,EAClB+X,EAAU9X,EAAS,EACnBC,EAAIkU,GAAiByD,EAAO,CAAC,EAAG7X,CAAK,EAAI8X,EACzC5Y,EAAI6Y,EAAU3D,GAAiByD,EAAO,CAAC,EAAG5X,CAAM,EACpD,OAAQ,KAAK,MAAMf,EAAGgB,CAAC,EAAI,KAAK,GAAK,IAAM,KAAK,GAAK,EACvD,EACI8X,GAA6B,SAAUtD,EAAO1U,EAAOC,EAAQ,CAC/D,IAAIgY,EACF,OAAOvD,GAAU,SACbA,EACAkD,GAAmBlD,EAAO1U,EAAOC,CAAM,EACzC+W,EACF,KAAK,IAAIhX,EAAQ,KAAK,IAAIiY,CAAM,CAAC,EAAI,KAAK,IAAIhY,EAAS,KAAK,IAAIgY,CAAM,CAAC,EACrEC,EAAYlY,EAAQ,EACpBmY,EAAalY,EAAS,EACtBmY,EAAiBpB,EAAa,EAC9BqB,EAAQ,KAAK,IAAIJ,EAAS,KAAK,GAAK,CAAC,EAAIG,EACzCE,EAAQ,KAAK,IAAIL,EAAS,KAAK,GAAK,CAAC,EAAIG,EAC7C,MAAO,CACLpB,EACAkB,EAAYI,EACZJ,EAAYI,EACZH,EAAaE,EACbF,EAAaE,CACf,CACF,EACIE,GAAW,SAAUxP,EAAGxL,EAAG,CAC7B,OAAO,KAAK,KAAKwL,EAAIA,EAAIxL,EAAIA,CAAC,CAChC,EACIib,GAAa,SAAUxY,EAAOC,EAAQC,EAAGhB,EAAGuZ,EAAS,CACvD,IAAIC,EAAU,CACZ,CAAC,EAAG,CAAC,EACL,CAAC,EAAGzY,CAAM,EACV,CAACD,EAAO,CAAC,EACT,CAACA,EAAOC,CAAM,CAChB,EACA,OAAOyY,EAAQ,OACb,SAAUC,EAAMd,EAAQ,CACtB,IAAIe,EAAKf,EAAO,CAAC,EACfgB,EAAKhB,EAAO,CAAC,EACXva,EAAIib,GAASrY,EAAI0Y,EAAI1Z,EAAI2Z,CAAE,EAC/B,OAAIJ,EAAUnb,EAAIqb,EAAK,gBAAkBrb,EAAIqb,EAAK,iBACzC,CACL,cAAed,EACf,gBAAiBva,CACnB,EAEKqb,CACT,EACA,CACE,gBAAiBF,EAAU,IAAW,KACtC,cAAe,IACjB,CACF,EAAE,aACJ,EACIK,GAAkB,SAAUC,EAAU7Y,EAAGhB,EAAGc,EAAOC,EAAQ,CAC7D,IAAI+Y,EAAK,EACLC,EAAK,EACT,OAAQF,EAAS,KAAM,CACrB,IAAK,GAGCA,EAAS,QAAU,EACrBC,EAAKC,EAAK,KAAK,IACb,KAAK,IAAI/Y,CAAC,EACV,KAAK,IAAIA,EAAIF,CAAK,EAClB,KAAK,IAAId,CAAC,EACV,KAAK,IAAIA,EAAIe,CAAM,CACrB,EACS8Y,EAAS,QAAU,IAC5BC,EAAK,KAAK,IAAI,KAAK,IAAI9Y,CAAC,EAAG,KAAK,IAAIA,EAAIF,CAAK,CAAC,EAC9CiZ,EAAK,KAAK,IAAI,KAAK,IAAI/Z,CAAC,EAAG,KAAK,IAAIA,EAAIe,CAAM,CAAC,GAEjD,MACF,IAAK,GAGH,GAAI8Y,EAAS,QAAU,EACrBC,EAAKC,EAAK,KAAK,IACbV,GAASrY,EAAGhB,CAAC,EACbqZ,GAASrY,EAAGhB,EAAIe,CAAM,EACtBsY,GAASrY,EAAIF,EAAOd,CAAC,EACrBqZ,GAASrY,EAAIF,EAAOd,EAAIe,CAAM,CAChC,UACS8Y,EAAS,QAAU,EAAiB,CAE7C,IAAI/J,EACF,KAAK,IAAI,KAAK,IAAI9P,CAAC,EAAG,KAAK,IAAIA,EAAIe,CAAM,CAAC,EAC1C,KAAK,IAAI,KAAK,IAAIC,CAAC,EAAG,KAAK,IAAIA,EAAIF,CAAK,CAAC,EACvCgK,EAAKwO,GAAWxY,EAAOC,EAAQC,EAAGhB,EAAG,EAAI,EAC3C0Z,EAAK5O,EAAG,CAAC,EACT6O,EAAK7O,EAAG,CAAC,EACXgP,EAAKT,GAASK,EAAK1Y,GAAI2Y,EAAK3Z,GAAK8P,CAAC,EAClCiK,EAAKjK,EAAIgK,CACX,CACA,MACF,IAAK,GAECD,EAAS,QAAU,EACrBC,EAAKC,EAAK,KAAK,IACb,KAAK,IAAI/Y,CAAC,EACV,KAAK,IAAIA,EAAIF,CAAK,EAClB,KAAK,IAAId,CAAC,EACV,KAAK,IAAIA,EAAIe,CAAM,CACrB,EACS8Y,EAAS,QAAU,IAC5BC,EAAK,KAAK,IAAI,KAAK,IAAI9Y,CAAC,EAAG,KAAK,IAAIA,EAAIF,CAAK,CAAC,EAC9CiZ,EAAK,KAAK,IAAI,KAAK,IAAI/Z,CAAC,EAAG,KAAK,IAAIA,EAAIe,CAAM,CAAC,GAEjD,MACF,IAAK,GAGH,GAAI8Y,EAAS,QAAU,EACrBC,EAAKC,EAAK,KAAK,IACbV,GAASrY,EAAGhB,CAAC,EACbqZ,GAASrY,EAAGhB,EAAIe,CAAM,EACtBsY,GAASrY,EAAIF,EAAOd,CAAC,EACrBqZ,GAASrY,EAAIF,EAAOd,EAAIe,CAAM,CAChC,UACS8Y,EAAS,QAAU,EAAiB,CAE7C,IAAI/J,EACF,KAAK,IAAI,KAAK,IAAI9P,CAAC,EAAG,KAAK,IAAIA,EAAIe,CAAM,CAAC,EAC1C,KAAK,IAAI,KAAK,IAAIC,CAAC,EAAG,KAAK,IAAIA,EAAIF,CAAK,CAAC,EACvCiW,EAAKuC,GAAWxY,EAAOC,EAAQC,EAAGhB,EAAG,EAAK,EAC5C0Z,EAAK3C,EAAG,CAAC,EACT4C,EAAK5C,EAAG,CAAC,EACX+C,EAAKT,GAASK,EAAK1Y,GAAI2Y,EAAK3Z,GAAK8P,CAAC,EAClCiK,EAAKjK,EAAIgK,CACX,CACA,KACJ,CACA,OAAI,MAAM,QAAQD,EAAS,IAAI,IAC7BC,EAAK5E,GAAiB2E,EAAS,KAAK,CAAC,EAAG/Y,CAAK,EAC7CiZ,EACEF,EAAS,KAAK,SAAW,EACrB3E,GAAiB2E,EAAS,KAAK,CAAC,EAAG9Y,CAAM,EACzC+Y,GAED,CAACA,EAAIC,CAAE,CAChB,EAEIC,GAAiB,SAAU7Y,EAAS4Q,EAAQ,CAC9C,IAAIkI,EAAUnE,GAAI,GAAG,EACjB+B,EAAQ,CAAC,EACb,OAAAtD,GAAkBxC,CAAM,EAAE,QAAQ,SAAU0C,EAAK7V,EAAG,CAClD,GAAIA,IAAM,EAAG,CACX,IAAIsb,EAAazF,EAAI,CAAC,EACtB,GACEyF,EAAW,OAAS,IACpBA,EAAW,QAAU,KACrB,CACAD,EAAUtE,GAAelB,CAAG,EAC5B,MACF,SAAWiB,GAAQwE,CAAU,EAAG,CAC9BD,EAAUzE,GAAM,MAAMrU,EAAS+Y,CAAU,EACzC,MACF,CACF,CACA,IAAIC,EAAYzC,GAAevW,EAASsT,CAAG,EAC3CoD,EAAM,KAAKsC,CAAS,CACtB,CAAC,EACM,CAAE,MAAOF,EAAS,MAAOpC,EAAO,KAAM,CAAwB,CACvE,EAEIuC,GAAuB,SAAUjZ,EAAS4Q,EAAQ,CACpD,IAAIkI,EAAUnE,GAAI,GAAG,EACjB+B,EAAQ,CAAC,EACb,OAAAtD,GAAkBxC,CAAM,EAAE,QAAQ,SAAU0C,EAAK7V,EAAG,CAClD,GAAIA,IAAM,EAAG,CACX,IAAIsb,EAAazF,EAAI,CAAC,EACtB,GACEyF,EAAW,OAAS,IACpB,CAAC,MAAO,OAAQ,QAAS,QAAQ,EAAE,QAAQA,EAAW,KAAK,IAAM,GACjE,CACAD,EAAUtE,GAAelB,CAAG,EAC5B,MACF,SAAWiB,GAAQwE,CAAU,EAAG,CAC9BD,GAAWzE,GAAM,MAAMrU,EAAS+Y,CAAU,EAAIpE,GAAI,GAAG,GAAKA,GAAI,GAAG,EACjE,MACF,CACF,CACA,IAAIqE,EAAYzC,GAAevW,EAASsT,CAAG,EAC3CoD,EAAM,KAAKsC,CAAS,CACtB,CAAC,EACM,CACL,MAAOF,EACP,MAAOpC,EACP,KAAM,CACR,CACF,EAEIwC,GAAiB,SAAUlZ,EAAS4Q,EAAQ,CAC9C,IAAIyD,EAAQM,GAAI,GAAG,EACf+B,EAAQ,CAAC,EACT1N,EAAO,EACPmQ,EAAQ,EACRC,EAAO,EACPC,EAAW,CAAC,EAChB,OAAAjG,GAAkBxC,CAAM,EAAE,QAAQ,SAAU0C,EAAK7V,EAAG,CAClD,IAAIsb,EAAazF,EAAI,CAAC,EACtB,GAAI7V,IAAM,GACR,GAAIsV,GAAagG,CAAU,GAAKA,EAAW,QAAU,SAAU,CAC7D/P,EAAO,EACP,MACF,SAAW+J,GAAagG,CAAU,GAAKA,EAAW,QAAU,SAAU,CACpE/P,EAAO,EACP,MACF,EAEF,GAAI+P,EAAW,OAAS,IACtB,GAAIA,EAAW,OAAS,OAAQ,CAC9B,IAAI5D,EAAQP,GAAQ,MAAM5U,EAAS+Y,EAAW,OAAO,CAAC,CAAC,EACvDrC,EAAM,KAAK,CAAE,KAAMhD,GAAa,MAAOyB,CAAM,CAAC,CAChD,SAAW4D,EAAW,OAAS,KAAM,CACnC,IAAI5D,EAAQP,GAAQ,MAAM5U,EAAS+Y,EAAW,OAAO,CAAC,CAAC,EACvDrC,EAAM,KAAK,CAAE,KAAM9C,GAAiB,MAAOuB,CAAM,CAAC,CACpD,SAAW4D,EAAW,OAAS,aAAc,CAC3C,IAAIvG,EAASuG,EAAW,OAAO,OAAO5F,EAAuB,EAC7D,GAAIX,EAAO,SAAW,EAAG,CACvB,IAAI2C,EAAQP,GAAQ,MAAM5U,EAASwS,EAAO,CAAC,CAAC,EACxCwE,EAASxE,EAAO,CAAC,EACjBM,GAAckE,CAAM,GACtBN,EAAM,KAAK,CACT,KAAM,CACJ,KAAM,GACN,OAAQM,EAAO,OAAS,IACxB,MAAOA,EAAO,KAChB,EACA,MAAO7B,CACT,CAAC,CAEL,CACF,EAEJ,CAAC,EACMnM,IAAS,EACZ,CACE,OAAQqL,EAAQM,GAAI,GAAG,GAAKA,GAAI,GAAG,EACnC,MAAO+B,EACP,KAAM1N,CACR,EACA,CACE,KAAMoQ,EACN,MAAOD,EACP,MAAOzC,EACP,SAAU2C,EACV,KAAMrQ,CACR,CACN,EAEIsQ,GAAe,eACfC,GAAgB,gBAChBC,GAAiB,iBACjBC,GAAkB,kBAClBC,GAAS,SACTC,GAAU,UACVC,GAAQ,QACRC,GAAU,UACVC,GAAiB,SAAU9Z,EAAS4Q,EAAQ,CAC9C,IAAIuI,EAAQ,EACRC,EAAO,EACP1C,EAAQ,CAAC,EACT2C,EAAW,CAAC,EAChB,OAAAjG,GAAkBxC,CAAM,EAAE,QAAQ,SAAU0C,EAAK7V,EAAG,CAClD,IAAIsc,EAAc,GAClB,GAAItc,IAAM,EAAG,CACX,IAAIuc,EAAiB,GACrBD,EAAczG,EAAI,OAAO,SAAU2G,EAAKpJ,EAAO,CAC7C,GAAImJ,EACF,GAAIjH,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,SACH,OAAAwI,EAAS,KAAK1F,EAAa,EACpBsG,EACT,IAAK,MACL,IAAK,OACH,OAAAZ,EAAS,KAAK3F,EAAW,EAClBuG,EACT,IAAK,QACL,IAAK,SACH,OAAAZ,EAAS,KAAKzF,EAAe,EACtBqG,CACX,MACSzG,GAAmB3C,CAAK,GAAK0C,GAAS1C,CAAK,IACpDwI,EAAS,KAAKxI,CAAK,UAEZkC,GAAalC,CAAK,EAC3B,OAAQA,EAAM,MAAO,CACnB,KAAK6I,GACH,OAAAP,EAAQ,EACD,GACT,KAAKQ,GACH,OAAAR,EAAQ,EACD,GACT,IAAK,KACH,OAAAa,EAAiB,GACV,GACT,KAAKV,GACH,OAAAF,EAAO,EACA,GACT,KAAKQ,GACL,KAAKL,GACH,OAAAH,EAAO,EACA,GACT,KAAKS,GACL,KAAKL,GACH,OAAAJ,EAAO,EACA,GACT,KAAKK,GACH,OAAAL,EAAO,EACA,EACX,SACS7F,GAAS1C,CAAK,GAAK2C,GAAmB3C,CAAK,EACpD,OAAK,MAAM,QAAQuI,CAAI,IACrBA,EAAO,CAAC,GAEVA,EAAK,KAAKvI,CAAK,EACR,GAET,OAAOoJ,CACT,EAAGF,CAAW,CAChB,CACA,GAAIA,EAAa,CACf,IAAIf,EAAYzC,GAAevW,EAASsT,CAAG,EAC3CoD,EAAM,KAAKsC,CAAS,CACtB,CACF,CAAC,EACM,CACL,KAAMI,EACN,MAAOD,EACP,MAAOzC,EACP,SAAU2C,EACV,KAAM,CACR,CACF,EAEIa,GAAuB,SAAUla,EAAS4Q,EAAQ,CACpD,IAAIuI,EAAQ,EACRC,EAAO,EACP1C,EAAQ,CAAC,EACT2C,EAAW,CAAC,EAChB,OAAAjG,GAAkBxC,CAAM,EAAE,QAAQ,SAAU0C,EAAK7V,EAAG,CAClD,IAAIsc,EAAc,GA0DlB,GAzDItc,IAAM,EACRsc,EAAczG,EAAI,OAAO,SAAU2G,EAAKpJ,EAAO,CAC7C,GAAIkC,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,SACH,OAAAwI,EAAS,KAAK1F,EAAa,EACpB,GACT,IAAK,MACL,IAAK,OACH,OAAA0F,EAAS,KAAK3F,EAAW,EAClB,GACT,IAAK,QACL,IAAK,SACH,OAAA2F,EAAS,KAAKzF,EAAe,EACtB,EACX,SACSJ,GAAmB3C,CAAK,GAAK0C,GAAS1C,CAAK,EACpD,OAAAwI,EAAS,KAAKxI,CAAK,EACZ,GAET,OAAOoJ,CACT,EAAGF,CAAW,EACLtc,IAAM,IACfsc,EAAczG,EAAI,OAAO,SAAU2G,EAAKpJ,EAAO,CAC7C,GAAIkC,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,KAAK6I,GACH,OAAAP,EAAQ,EACD,GACT,KAAKQ,GACH,OAAAR,EAAQ,EACD,GACT,KAAKU,GACL,KAAKP,GACH,OAAAF,EAAO,EACA,GACT,KAAKG,GACH,OAAAH,EAAO,EACA,GACT,KAAKI,GACH,OAAAJ,EAAO,EACA,GACT,KAAKQ,GACL,KAAKH,GACH,OAAAL,EAAO,EACA,EACX,SACS7F,GAAS1C,CAAK,GAAK2C,GAAmB3C,CAAK,EACpD,OAAK,MAAM,QAAQuI,CAAI,IACrBA,EAAO,CAAC,GAEVA,EAAK,KAAKvI,CAAK,EACR,GAET,OAAOoJ,CACT,EAAGF,CAAW,GAEZA,EAAa,CACf,IAAIf,EAAYzC,GAAevW,EAASsT,CAAG,EAC3CoD,EAAM,KAAKsC,CAAS,CACtB,CACF,CAAC,EACM,CACL,KAAMI,EACN,MAAOD,EACP,MAAOzC,EACP,SAAU2C,EACV,KAAM,CACR,CACF,EAEIc,GAAmB,SAAUC,EAAY,CAC3C,OAAOA,EAAW,OAAS,CAC7B,EACIC,GAAmB,SAAUD,EAAY,CAC3C,OAAOA,EAAW,OAAS,CAC7B,EACIE,GAAQ,CACV,KAAM,QACN,MAAO,SAAUta,EAAS/B,EAAO,CAC/B,GAAIA,EAAM,OAAS,GAAoB,CACrC,IAAIsc,EAAU,CAAE,IAAKtc,EAAM,MAAO,KAAM,CAAY,EACpD,OAAA+B,EAAQ,MAAM,SAAS/B,EAAM,KAAK,EAC3Bsc,CACT,CACA,GAAItc,EAAM,OAAS,GAAmB,CACpC,IAAIuc,EAAgBC,GAA0Bxc,EAAM,IAAI,EACxD,GAAI,OAAOuc,GAAkB,YAC3B,MAAM,IAAI,MACR,sDACEvc,EAAM,KACN,GACJ,EAEF,OAAOuc,EAAcxa,EAAS/B,EAAM,MAAM,CAC5C,CACA,MAAM,IAAI,MAAM,0BAA4BA,EAAM,IAAI,CACxD,CACF,EACA,SAASyc,GAAiBzc,EAAO,CAC/B,MACE,EAAEA,EAAM,OAAS,IAAwBA,EAAM,QAAU,UACxDA,EAAM,OAAS,IACd,CAAC,CAACwc,GAA0Bxc,EAAM,IAAI,EAE5C,CACA,IAAIwc,GAA4B,CAC9B,kBAAmB5B,GACnB,uBAAwBI,GACxB,sBAAuBA,GACvB,qBAAsBA,GACtB,0BAA2BA,GAC3B,kBAAmBa,GACnB,uBAAwBI,GACxB,sBAAuBA,GACvB,qBAAsBA,GACtB,0BAA2BA,GAC3B,mBAAoBhB,EACtB,EAEIyB,GAAkB,CACpB,KAAM,mBACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAU3a,EAAS4Q,EAAQ,CAChC,GAAIA,EAAO,SAAW,EACpB,MAAO,CAAC,EAEV,IAAIgG,EAAQhG,EAAO,CAAC,EACpB,OAAIgG,EAAM,OAAS,IAAwBA,EAAM,QAAU,OAClD,CAAC,EAEHhG,EACJ,OAAO,SAAU3S,EAAO,CACvB,OAAOkV,GAAwBlV,CAAK,GAAKyc,GAAiBzc,CAAK,CACjE,CAAC,EACA,IAAI,SAAUA,EAAO,CACpB,OAAOqc,GAAM,MAAMta,EAAS/B,CAAK,CACnC,CAAC,CACL,CACF,EAEI2c,GAAmB,CACrB,KAAM,oBACN,aAAc,aACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUtG,EAAU1D,EAAQ,CACjC,OAAOA,EAAO,IAAI,SAAUC,EAAO,CACjC,GAAIkC,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,EACX,CAEF,MAAO,EACT,CAAC,CACH,CACF,EAEIgK,GAAqB,CACvB,KAAM,sBACN,aAAc,QACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUvG,EAAU1D,EAAQ,CACjC,OAAOwC,GAAkBxC,CAAM,EAC5B,IAAI,SAAU4B,EAAQ,CACrB,OAAOA,EAAO,OAAOgB,EAAkB,CACzC,CAAC,EACA,IAAIC,EAA0B,CACnC,CACF,EAEIqH,GAAmB,CACrB,KAAM,oBACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUxG,EAAU1D,EAAQ,CACjC,OAAOwC,GAAkBxC,CAAM,EAC5B,IAAI,SAAU4B,EAAQ,CACrB,OAAOA,EACJ,OAAOO,EAAY,EACnB,IAAI,SAAUlC,EAAO,CACpB,OAAOA,EAAM,KACf,CAAC,EACA,KAAK,GAAG,CACb,CAAC,EACA,IAAIkK,EAAqB,CAC9B,CACF,EACIA,GAAwB,SAAU9c,EAAO,CAC3C,OAAQA,EAAO,CACb,IAAK,YACH,MAAO,GACT,IAAK,WACL,IAAK,mBACH,MAAO,GACT,IAAK,WACL,IAAK,mBACH,MAAO,GACT,IAAK,SACL,QACE,MAAO,EACX,CACF,EAEI+c,IACH,SAAUA,EAAiB,CAC1BA,EAAgB,KAAU,OAC1BA,EAAgB,QAAa,UAC7BA,EAAgB,MAAW,OAC7B,GAAGA,KAAoBA,GAAkB,CAAC,EAAE,EAC5C,IAAIC,GAAiB,CACnB,KAAM,kBACN,aAAc,IACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU3G,EAAU1D,EAAQ,CACjC,OAAOwC,GAAkBxC,CAAM,EAAE,IAAI,SAAU4B,EAAQ,CACrD,OAAOA,EAAO,OAAO0I,EAAyB,CAChD,CAAC,CACH,CACF,EACIA,GAA4B,SAAUjd,EAAO,CAC/C,OAAO8U,GAAa9U,CAAK,GAAKuV,GAAmBvV,CAAK,CACxD,EAEIkd,GAAqB,SAAUC,EAAM,CACvC,MAAO,CACL,KAAM,UAAYA,EAAO,SACzB,aAAc,cACd,OAAQ,GACR,KAAM,EACN,OAAQ,OACV,CACF,EACIC,GAAiBF,GAAmB,KAAK,EACzCG,GAAmBH,GAAmB,OAAO,EAC7CI,GAAoBJ,GAAmB,QAAQ,EAC/CK,GAAkBL,GAAmB,MAAM,EAE3CM,GAAsB,SAAUL,EAAM,CACxC,MAAO,CACL,KAAM,iBAAmBA,EACzB,aAAc,MACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU9G,EAAU1D,EAAQ,CACjC,OAAO6C,GAA2B7C,EAAO,OAAO4C,EAAkB,CAAC,CACrE,CACF,CACF,EACIkI,GAAsBD,GAAoB,UAAU,EACpDE,GAAuBF,GAAoB,WAAW,EACtDG,GAA0BH,GAAoB,cAAc,EAC5DI,GAAyBJ,GAAoB,aAAa,EAE1DK,GAAqB,SAAUV,EAAM,CACvC,MAAO,CACL,KAAM,UAAYA,EAAO,SACzB,aAAc,QACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU9G,EAAUyH,EAAO,CAChC,OAAQA,EAAO,CACb,IAAK,OACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,SACH,MAAO,EACX,CACA,MAAO,EACT,CACF,CACF,EACIC,GAAiBF,GAAmB,KAAK,EACzCG,GAAmBH,GAAmB,OAAO,EAC7CI,GAAoBJ,GAAmB,QAAQ,EAC/CK,GAAkBL,GAAmB,MAAM,EAE3CM,GAAqB,SAAUhB,EAAM,CACvC,MAAO,CACL,KAAM,UAAYA,EAAO,SACzB,aAAc,IACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAU9G,EAAUzD,EAAO,CAChC,OAAIgC,GAAiBhC,CAAK,EACjBA,EAAM,OAER,CACT,CACF,CACF,EACIwL,GAAiBD,GAAmB,KAAK,EACzCE,GAAmBF,GAAmB,OAAO,EAC7CG,GAAoBH,GAAmB,QAAQ,EAC/CI,GAAkBJ,GAAmB,MAAM,EAE3CjH,GAAQ,CACV,KAAM,QACN,aAAc,cACd,OAAQ,GACR,KAAM,EACN,OAAQ,OACV,EAEIsH,GAAY,CACd,KAAM,YACN,aAAc,MACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUnI,EAAUmI,EAAW,CACpC,OAAQA,EAAW,CACjB,IAAK,MACH,MAAO,GACT,IAAK,MACL,QACE,MAAO,EACX,CACF,CACF,EAEIC,GAAU,CACZ,KAAM,UACN,aAAc,eACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUpI,EAAU1D,EAAQ,CACjC,OAAOA,EAAO,OAAOmC,EAAY,EAAE,OAAO,SAAU4J,EAAK9L,EAAO,CAC9D,OAAO8L,EAAMC,GAAkB/L,EAAM,KAAK,CAC5C,EAAG,CAAY,CACjB,CACF,EACI+L,GAAoB,SAAUF,EAAS,CACzC,OAAQA,EAAS,CACf,IAAK,QACL,IAAK,cACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,OACH,MAAO,IACT,IAAK,YACH,MAAO,IACT,IAAK,QACH,MAAO,IACT,IAAK,OACL,IAAK,eACH,MAAO,KACT,IAAK,OACL,IAAK,WACH,MAAO,KACT,IAAK,OACH,MAAO,KACT,IAAK,UACH,MAAO,MACT,IAAK,YACH,MAAO,MACT,IAAK,kBACH,MAAO,MACT,IAAK,qBACH,MAAO,MACT,IAAK,qBACH,MAAO,OACT,IAAK,YACH,MAAO,OACT,IAAK,aACH,MAAO,OACT,IAAK,qBACH,MAAO,QACT,IAAK,eACH,MAAO,QACT,IAAK,gBACH,MAAO,QACT,IAAK,YACH,MAAO,SACT,IAAK,YACH,MAAO,SACT,IAAK,sBACH,MAAO,SACT,IAAK,sBACH,MAAO,SACT,IAAK,WACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,mBACH,MAAO,UACT,IAAK,eACH,MAAO,WACT,IAAK,cACH,MAAO,WACT,IAAK,cACH,MAAO,UACX,CACA,MAAO,EACT,EAEIG,GAAQ,CACV,KAAM,QACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUvI,EAAUuI,EAAO,CAChC,OAAQA,EAAO,CACb,IAAK,OACH,MAAO,GACT,IAAK,QACH,MAAO,GACT,IAAK,eACH,MAAO,GACT,IAAK,aACH,MAAO,EACX,CACA,MAAO,EACT,CACF,EAEIC,GAAgB,CAClB,KAAM,iBACN,aAAc,IACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUxI,EAAUzD,EAAO,CAChC,OAAIA,EAAM,OAAS,IAAwBA,EAAM,QAAU,SAClD,EAELA,EAAM,OAAS,IAGfA,EAAM,OAAS,GACVA,EAAM,OAER,CACT,CACF,EAEIkM,IACH,SAAUA,EAAY,CACrBA,EAAW,OAAY,SACvBA,EAAW,OAAY,QACzB,GAAGA,KAAeA,GAAa,CAAC,EAAE,EAClC,IAAI5U,GAAY,CACd,KAAM,aACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUmM,EAAUnM,EAAW,CACpC,OAAQA,EAAW,CACjB,IAAK,SACH,OAAO4U,GAAW,OACpB,IAAK,SACL,QACE,OAAOA,GAAW,MACtB,CACF,CACF,EAEIC,GAAa,CACf,KAAM,cACN,aAAc,SACd,OAAQ,GACR,KAAM,CACR,EACIC,GAAoB,SAAUpM,EAAOqM,EAAU,CACjD,OAAInK,GAAalC,CAAK,GAAKA,EAAM,QAAU,SAClC,IAAMqM,EACJrM,EAAM,OAAS,GACjBqM,EAAWrM,EAAM,OACf2C,GAAmB3C,CAAK,EAC1BkD,GAAiBlD,EAAOqM,CAAQ,EAElCA,CACT,EAEIC,GAAiB,CACnB,KAAM,mBACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUnd,EAAS6Q,EAAO,CAC/B,OAAIA,EAAM,OAAS,IAAwBA,EAAM,QAAU,OAClD,KAEFyJ,GAAM,MAAMta,EAAS6Q,CAAK,CACnC,CACF,EAEIuM,GAAoB,CACtB,KAAM,sBACN,aAAc,UACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU9I,EAAU+E,EAAU,CACnC,OAAQA,EAAU,CAChB,IAAK,SACH,MAAO,GACT,IAAK,UACL,QACE,MAAO,EACX,CACF,CACF,EAEIgE,GAAgB,CAClB,KAAM,kBACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/I,EAAUtL,EAAM,CAC/B,OAAQA,EAAM,CACZ,IAAK,OACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,UACH,MAAO,GACT,IAAK,cACH,MAAO,GACT,IAAK,uBACH,MAAO,GACT,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,GACT,IAAK,cACH,MAAO,IACT,IAAK,eACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,YACH,MAAO,IACT,IAAK,qBACH,MAAO,IACT,IAAK,oBACH,MAAO,IACT,IAAK,kBACH,MAAO,IACT,IAAK,aACH,MAAO,IACT,IAAK,mBACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,SACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,iBACH,MAAO,IACT,IAAK,kBACH,MAAO,IACT,IAAK,oBACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,WACH,MAAO,IACT,IAAK,iBACH,MAAO,IACT,IAAK,QACH,MAAO,IACT,IAAK,uBACH,MAAO,IACT,IAAK,sBACH,MAAO,IACT,IAAK,wBACH,MAAO,IACT,IAAK,MACH,MAAO,IACT,IAAK,iBACH,MAAO,IACT,IAAK,YACH,MAAO,IACT,IAAK,YACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,QACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,sBACH,MAAO,IACT,IAAK,wBACH,MAAO,IACT,IAAK,QACH,MAAO,IACT,IAAK,SACH,MAAO,IACT,IAAK,OACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,sBACH,MAAO,IACT,IAAK,wBACH,MAAO,IACT,IAAK,iBACH,MAAO,IACT,IAAK,kBACH,MAAO,IACT,IAAK,oBACH,MAAO,IACT,IAAK,OACL,QACE,MAAO,EACX,CACF,CACF,EAEIsU,GAAgB,SAAUlC,EAAM,CAClC,MAAO,CACL,KAAM,UAAYA,EAClB,aAAc,IACd,OAAQ,GACR,KAAM,CACR,CACF,EACImC,GAAYD,GAAc,KAAK,EAC/BE,GAAcF,GAAc,OAAO,EACnCG,GAAeH,GAAc,QAAQ,EACrCI,GAAaJ,GAAc,MAAM,EAEjCK,GAAW,CACb,KAAM,WACN,aAAc,UACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUrJ,EAAU1D,EAAQ,CACjC,OAAOA,EAAO,OAAOmC,EAAY,EAAE,IAAI,SAAU4K,EAAU,CACzD,OAAQA,EAAS,MAAO,CACtB,IAAK,SACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,OACH,MAAO,GACT,IAAK,OACH,MAAO,GACT,IAAK,UACL,QACE,MAAO,EACX,CACF,CAAC,CACH,CACF,EAEIC,GAAe,CACjB,KAAM,gBACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUtJ,EAAUqJ,EAAU,CACnC,OAAQA,EAAU,CAChB,IAAK,aACH,MAAO,aACT,IAAK,SACL,QACE,MAAO,QACX,CACF,CACF,EAEIE,GAAiB,SAAUzC,EAAM,CACnC,MAAO,CACL,KAAM,WAAaA,EACnB,aAAc,IACd,OAAQ,GACR,KAAM,EACN,OAAQ,mBACV,CACF,EACI0C,GAAaD,GAAe,KAAK,EACjCE,GAAeF,GAAe,OAAO,EACrCG,GAAgBH,GAAe,QAAQ,EACvCI,GAAcJ,GAAe,MAAM,EAEnCK,GAAY,CACd,KAAM,aACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU5J,EAAU4J,EAAW,CACpC,OAAQA,EAAW,CACjB,IAAK,QACH,MAAO,GACT,IAAK,SACL,IAAK,UACH,MAAO,GACT,IAAK,OACL,QACE,MAAO,EACX,CACF,CACF,EAEI7E,GAAW,CACb,KAAM,WACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/E,EAAU+E,EAAU,CACnC,OAAQA,EAAU,CAChB,IAAK,WACH,MAAO,GACT,IAAK,WACH,MAAO,GACT,IAAK,QACH,MAAO,GACT,IAAK,SACH,MAAO,EACX,CACA,MAAO,EACT,CACF,EAEI8E,GAAa,CACf,KAAM,cACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUne,EAAS4Q,EAAQ,CAChC,OAAIA,EAAO,SAAW,GAAKqC,GAAiBrC,EAAO,CAAC,EAAG,MAAM,EACpD,CAAC,EAEHwC,GAAkBxC,CAAM,EAAE,IAAI,SAAU4B,EAAQ,CAQrD,QAPI4L,EAAS,CACX,MAAOnJ,GAAO,YACd,QAASvB,GACT,QAASA,GACT,KAAMA,EACR,EACI/E,EAAI,EACClR,EAAI,EAAGA,EAAI+U,EAAO,OAAQ/U,IAAK,CACtC,IAAIoT,EAAQ2B,EAAO/U,CAAC,EAChB8V,GAAS1C,CAAK,GACZlC,IAAM,EACRyP,EAAO,QAAUvN,EACRlC,IAAM,EACfyP,EAAO,QAAUvN,EAEjBuN,EAAO,KAAOvN,EAEhBlC,KAEAyP,EAAO,MAAQxJ,GAAQ,MAAM5U,EAAS6Q,CAAK,CAE/C,CACA,OAAOuN,CACT,CAAC,CACH,CACF,EAEIC,GAAgB,CAClB,KAAM,iBACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/J,EAAU+J,EAAe,CACxC,OAAQA,EAAe,CACrB,IAAK,YACH,MAAO,GACT,IAAK,YACH,MAAO,GACT,IAAK,aACH,MAAO,EACX,CACA,MAAO,EACT,CACF,EAEIC,GAAc,CAChB,KAAM,YACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUhK,EAAUzD,EAAO,CAChC,GAAIA,EAAM,OAAS,IAAwBA,EAAM,QAAU,OACzD,OAAO,KAET,GAAIA,EAAM,OAAS,GAAmB,CACpC,IAAI0N,EAAoBC,GAA8B3N,EAAM,IAAI,EAChE,GAAI,OAAO0N,GAAsB,YAC/B,MAAM,IAAI,MACR,0DACE1N,EAAM,KACN,GACJ,EAEF,OAAO0N,EAAkB1N,EAAM,MAAM,CACvC,CACA,OAAO,IACT,CACF,EACI4N,GAAS,SAAUpL,EAAM,CAC3B,IAAIb,EAASa,EACV,OAAO,SAAUC,EAAK,CACrB,OAAOA,EAAI,OAAS,EACtB,CAAC,EACA,IAAI,SAAUA,EAAK,CAClB,OAAOA,EAAI,MACb,CAAC,EACH,OAAOd,EAAO,SAAW,EAAIA,EAAS,IACxC,EAEIkM,GAAW,SAAUrL,EAAM,CAC7B,IAAIb,EAASa,EACV,OAAO,SAAUC,EAAK,CACrB,OAAOA,EAAI,OAAS,EACtB,CAAC,EACA,IAAI,SAAUA,EAAK,CAClB,OAAOA,EAAI,MACb,CAAC,EACCpC,EAAKsB,EAAO,CAAC,EACfmM,EAAKnM,EAAO,CAAC,EACfA,EAAO,CAAC,EACRA,EAAO,CAAC,EACR,IAAIrB,EAAKqB,EAAO,CAAC,EACfoM,EAAKpM,EAAO,CAAC,EACfA,EAAO,CAAC,EACRA,EAAO,CAAC,EACRA,EAAO,CAAC,EACRA,EAAO,CAAC,EACRA,EAAO,EAAE,EACTA,EAAO,EAAE,EACT,IAAIqM,EAAKrM,EAAO,EAAE,EAChBsM,EAAKtM,EAAO,EAAE,EAChB,OAAAA,EAAO,EAAE,EACTA,EAAO,EAAE,EACFA,EAAO,SAAW,GAAK,CAACtB,EAAIyN,EAAIxN,EAAIyN,EAAIC,EAAIC,CAAE,EAAI,IAC3D,EACIN,GAAgC,CAClC,OAAQC,GACR,SAAUC,EACZ,EAEIK,GAAgB,CAClB,KAAM,GACN,OAAQ,GACR,MAAO1U,EACT,EACI2U,GAAU,CAACD,GAAeA,EAAa,EACvCE,GAAkB,CACpB,KAAM,mBACN,aAAc,UACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU3K,EAAU1D,EAAQ,CACjC,IAAIsO,EAAUtO,EAAO,OAAO4C,EAAkB,EAC9C,OAAI0L,EAAQ,SAAW,EACdF,GAEF,CAACE,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,CAChC,CACF,EAEIC,GAAa,CACf,KAAM,UACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU7K,EAAU6K,EAAY,CACrC,OAAQA,EAAY,CAClB,IAAK,SACH,MAAO,GACT,IAAK,WACH,MAAO,GACT,IAAK,UACL,QACE,MAAO,EACX,CACF,CACF,EAEIC,IACH,SAAUA,EAAY,CACrBA,EAAW,OAAY,SACvBA,EAAW,UAAe,YAC1BA,EAAW,SAAc,UAC3B,GAAGA,KAAeA,GAAa,CAAC,EAAE,EAkyBlC,QAjyBIC,GAAY,CACd,KAAM,aACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/K,EAAU+K,EAAW,CACpC,OAAQA,EAAW,CACjB,IAAK,YACH,OAAOD,GAAW,UACpB,IAAK,WACH,OAAOA,GAAW,SACpB,IAAK,SACL,QACE,OAAOA,GAAW,MACtB,CACF,CACF,EAEIE,GAAS,CACX,KAAM,UACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUhL,EAAUzD,EAAO,CAChC,GAAIA,EAAM,OAAS,GACjB,MAAO,CAAE,KAAM,GAAM,MAAO,CAAE,EAEhC,GAAIiC,GAAcjC,CAAK,EACrB,MAAO,CAAE,KAAM,GAAO,MAAOA,EAAM,MAAO,EAE5C,MAAM,IAAI,MAAM,+BAA+B,CACjD,CACF,EAEI0O,GAAO,CACT,KAAM,OACN,MAAO,SAAUjL,EAAUrW,EAAO,CAChC,GAAIA,EAAM,OAAS,GACjB,OAAQA,EAAM,KAAK,YAAY,EAAG,CAChC,IAAK,IACH,MAAO,KAAOA,EAAM,OACtB,IAAK,KACH,OAAOA,EAAM,MACjB,CAEF,MAAM,IAAI,MAAM,uBAAuB,CACzC,CACF,EAEIuhB,GAAU,CACZ,KAAM,UACN,aAAc,IACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUlL,EAAUzD,EAAO,CAChC,OAAIiC,GAAcjC,CAAK,EACdA,EAAM,OAER,CACT,CACF,EAEI4O,GAAsB,CACxB,KAAM,wBACN,aAAc,cACd,OAAQ,GACR,KAAM,EACN,OAAQ,OACV,EAEIC,GAAqB,CACvB,KAAM,uBACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUpL,EAAU1D,EAAQ,CACjC,OAAOA,EACJ,OAAOmC,EAAY,EACnB,IAAI,SAAUlC,EAAO,CACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,YACH,MAAO,GACT,IAAK,WACH,MAAO,GACT,IAAK,eACH,MAAO,GACT,IAAK,OACH,MAAO,EACX,CACA,MAAO,EACT,CAAC,EACA,OAAO,SAAU8O,EAAM,CACtB,OAAOA,IAAS,CAClB,CAAC,CACL,CACF,EAEIC,GAAa,CACf,KAAM,cACN,aAAc,GACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUtL,EAAU1D,EAAQ,CACjC,IAAIiP,EAAc,CAAC,EACfC,EAAU,CAAC,EACf,OAAAlP,EAAO,QAAQ,SAAUC,EAAO,CAC9B,OAAQA,EAAM,KAAM,CAClB,IAAK,IACL,IAAK,GACHgP,EAAY,KAAKhP,EAAM,KAAK,EAC5B,MACF,IAAK,IACHgP,EAAY,KAAKhP,EAAM,OAAO,SAAS,CAAC,EACxC,MACF,IAAK,GACHiP,EAAQ,KAAKD,EAAY,KAAK,GAAG,CAAC,EAClCA,EAAY,OAAS,EACrB,KACJ,CACF,CAAC,EACGA,EAAY,QACdC,EAAQ,KAAKD,EAAY,KAAK,GAAG,CAAC,EAE7BC,EAAQ,IAAI,SAAUthB,EAAQ,CACnC,OAAOA,EAAO,QAAQ,GAAG,IAAM,GAAKA,EAAS,IAAMA,EAAS,GAC9D,CAAC,CACH,CACF,EAEI0e,GAAW,CACb,KAAM,YACN,aAAc,IACd,OAAQ,GACR,KAAM,EACN,OAAQ,QACV,EAEI6C,GAAa,CACf,KAAM,cACN,aAAc,SACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUzL,EAAUzD,EAAO,CAChC,GAAIiC,GAAcjC,CAAK,EACrB,OAAOA,EAAM,OAEf,GAAIkC,GAAalC,CAAK,EACpB,OAAQA,EAAM,MAAO,CACnB,IAAK,OACH,MAAO,KACT,IAAK,SACL,QACE,MAAO,IACX,CAEF,MAAO,IACT,CACF,EAEImP,GAAc,CAChB,KAAM,eACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAU1L,EAAU1D,EAAQ,CACjC,OAAOA,EAAO,OAAOmC,EAAY,EAAE,IAAI,SAAUlC,EAAO,CACtD,OAAOA,EAAM,KACf,CAAC,CACH,CACF,EAEIoP,GAAY,CACd,KAAM,aACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU3L,EAAUqJ,EAAU,CACnC,OAAQA,EAAU,CAChB,IAAK,UACH,MAAO,UACT,IAAK,SACH,MAAO,SACT,IAAK,SACL,QACE,MAAO,QACX,CACF,CACF,EAEIuC,GAAW,SAAUvD,EAAK1e,EAAO,CACnC,OAAQ0e,EAAM1e,KAAW,CAC3B,EAEIkiB,GAAU,CACZ,KAAM,UACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAU7L,EAAU1D,EAAQ,CACjC,GAAIA,EAAO,SAAW,EACpB,MAAO,CAAC,EAEV,IAAIgG,EAAQhG,EAAO,CAAC,EACpB,OAAIgG,EAAM,OAAS,IAAwBA,EAAM,QAAU,OAClD,CAAC,EAEHhG,CACT,CACF,EAEIwP,GAAmB,CACrB,KAAM,oBACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU9L,EAAU1D,EAAQ,CACjC,GAAIA,EAAO,SAAW,EACpB,OAAO,KAET,IAAIgG,EAAQhG,EAAO,CAAC,EACpB,GAAIgG,EAAM,OAAS,IAAwBA,EAAM,QAAU,OACzD,OAAO,KAIT,QAFIyJ,EAAa,CAAC,EACdC,EAAW1P,EAAO,OAAOsC,EAAa,EACjCzV,EAAI,EAAGA,EAAI6iB,EAAS,OAAQ7iB,IAAK,CACxC,IAAI8iB,EAAUD,EAAS7iB,CAAC,EACpBqL,EAAOwX,EAAS7iB,EAAI,CAAC,EACzB,GAAI8iB,EAAQ,OAAS,GAAsB,CACzC,IAAIC,EAAY1X,GAAQgK,GAAchK,CAAI,EAAIA,EAAK,OAAS,EAC5DuX,EAAW,KAAK,CAAE,QAASE,EAAQ,MAAO,UAAWC,CAAU,CAAC,CAClE,CACF,CACA,OAAOH,CACT,CACF,EAEII,GAAe,CACjB,KAAM,gBACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUnM,EAAU1D,EAAQ,CACjC,GAAIA,EAAO,SAAW,EACpB,MAAO,CAAC,EAIV,QAFI8P,EAAS,CAAC,EACVJ,EAAW1P,EAAO,OAAOsC,EAAa,EACjCzV,EAAI,EAAGA,EAAI6iB,EAAS,OAAQ7iB,IAAK,CACxC,IAAI8iB,EAAUD,EAAS7iB,CAAC,EACpBqL,EAAOwX,EAAS7iB,EAAI,CAAC,EACzB,GAAIsV,GAAawN,CAAO,GAAKA,EAAQ,QAAU,OAAQ,CACrD,IAAII,EAAQ7X,GAAQgK,GAAchK,CAAI,EAAIA,EAAK,OAAS,EACxD4X,EAAO,KAAK,CAAE,QAASH,EAAQ,MAAO,MAAOI,CAAM,CAAC,CACtD,CACF,CACA,OAAOD,CACT,CACF,EAEIE,GAAW,CACb,KAAM,WACN,aAAc,KACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU5gB,EAAS4Q,EAAQ,CAChC,OAAOA,EAAO,OAAOiC,EAAgB,EAAE,IAAI,SAAUhC,EAAO,CAC1D,OAAO0O,GAAK,MAAMvf,EAAS6Q,CAAK,CAClC,CAAC,CACH,CACF,EAEIgQ,GAAS,CACX,KAAM,SACN,aAAc,OACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAUvM,EAAU1D,EAAQ,CACjC,GAAIA,EAAO,SAAW,EACpB,OAAO,KAET,IAAIgG,EAAQhG,EAAO,CAAC,EACpB,GAAIgG,EAAM,OAAS,IAAwBA,EAAM,QAAU,OACzD,OAAO,KAET,IAAIiK,EAAS,CAAC,EACVP,EAAW1P,EAAO,OAAOoC,EAAa,EAC1C,GAAIsN,EAAS,OAAS,IAAM,EAC1B,OAAO,KAET,QAAS7iB,EAAI,EAAGA,EAAI6iB,EAAS,OAAQ7iB,GAAK,EAAG,CAC3C,IAAIqjB,EAASR,EAAS7iB,CAAC,EAAE,MACrBsjB,EAAUT,EAAS7iB,EAAI,CAAC,EAAE,MAC9BojB,EAAO,KAAK,CAAE,KAAMC,EAAQ,MAAOC,CAAQ,CAAC,CAC9C,CACA,OAAOF,CACT,CACF,EACIG,GAAW,SAAUH,EAAQI,EAAOC,EAAM,CAC5C,GAAI,CAACL,EACH,MAAO,GAET,IAAIM,EAAQN,EAAO,KAAK,IAAII,EAAOJ,EAAO,OAAS,CAAC,CAAC,EACrD,OAAKM,EAGED,EAAOC,EAAM,KAAOA,EAAM,MAFxB,EAGX,EAEIC,GAAY,CACd,KAAM,aACN,aAAc,OACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUphB,EAAS4Q,EAAQ,CAChC,OAAIA,EAAO,SAAW,GAAKqC,GAAiBrC,EAAO,CAAC,EAAG,MAAM,EACpD,CAAC,EAEHwC,GAAkBxC,CAAM,EAAE,IAAI,SAAU4B,EAAQ,CAUrD,QATI4L,EAAS,CACX,MAAO,IACP,QAAS1K,GACT,QAASA,GACT,KAAMA,GACN,OAAQA,GACR,MAAO,EACT,EACI/E,EAAI,EACClR,EAAI,EAAGA,EAAI+U,EAAO,OAAQ/U,IAAK,CACtC,IAAIoT,EAAQ2B,EAAO/U,CAAC,EAChBwV,GAAiBpC,EAAO,OAAO,EACjCuN,EAAO,MAAQ,GACN7K,GAAS1C,CAAK,GACnBlC,IAAM,EACRyP,EAAO,QAAUvN,EACRlC,IAAM,EACfyP,EAAO,QAAUvN,EACRlC,IAAM,EACfyP,EAAO,KAAOvN,EAEduN,EAAO,OAASvN,EAElBlC,KAEAyP,EAAO,MAAQxJ,GAAQ,MAAM5U,EAAS6Q,CAAK,CAE/C,CACA,OAAOuN,CACT,CAAC,CACH,CACF,EAEIiD,GAAa,CACf,KAAM,cACN,aAAc,SACd,OAAQ,GACR,KAAM,EACN,MAAO,SAAU/M,EAAU1D,EAAQ,CACjC,IAAImO,EAAgB,CAAC,EAAc,EAAgB,CAAe,EAC9DuC,EAAS,CAAC,EACd,OAAA1Q,EAAO,OAAOmC,EAAY,EAAE,QAAQ,SAAUlC,EAAO,CACnD,OAAQA,EAAM,MAAO,CACnB,IAAK,SACHyQ,EAAO,KAAK,CAAc,EAC1B,MACF,IAAK,OACHA,EAAO,KAAK,CAAY,EACxB,MACF,IAAK,UACHA,EAAO,KAAK,CAAe,EAC3B,KACJ,CACF,CAAC,EACDvC,EAAc,QAAQ,SAAU9gB,EAAO,CACjCqjB,EAAO,QAAQrjB,CAAK,IAAM,IAC5BqjB,EAAO,KAAKrjB,CAAK,CAErB,CAAC,EACMqjB,CACT,CACF,EAEIC,GAAwB,CAC1B,KAAM,4BACN,aAAc,eACd,OAAQ,GACR,KAAM,EACN,OAAQ,OACV,EAEIC,GAAwB,CAC1B,KAAM,4BACN,aAAc,IACd,KAAM,EACN,OAAQ,GACR,MAAO,SAAUlN,EAAUzD,EAAO,CAChC,OAAIgC,GAAiBhC,CAAK,EACjBA,EAAM,OAER,CACT,CACF,EAEI4Q,GAAsC,UAAY,CACpD,SAASA,EAAqBzhB,EAAS0hB,EAAa,CAClD,IAAI/X,EAAIiM,EACR,KAAK,kBAAoB+L,EACvB3hB,EACA4gB,GACAc,EAAY,iBACd,EACA,KAAK,eAAiBC,EACpB3hB,EACAqW,GACAqL,EAAY,cACd,EACA,KAAK,gBAAkBC,EACrB3hB,EACAsW,GACAoL,EAAY,eACd,EACA,KAAK,gBAAkBC,EACrB3hB,EACA2a,GACA+G,EAAY,eACd,EACA,KAAK,iBAAmBC,EACtB3hB,EACA4a,GACA8G,EAAY,gBACd,EACA,KAAK,mBAAqBC,EACxB3hB,EACA6a,GACA6G,EAAY,kBACd,EACA,KAAK,iBAAmBC,EACtB3hB,EACA8a,GACA4G,EAAY,gBACd,EACA,KAAK,eAAiBC,EACpB3hB,EACAib,GACAyG,EAAY,cACd,EACA,KAAK,eAAiBC,EACpB3hB,EACAqb,GACAqG,EAAY,cACd,EACA,KAAK,iBAAmBC,EACtB3hB,EACAsb,GACAoG,EAAY,gBACd,EACA,KAAK,kBAAoBC,EACvB3hB,EACAub,GACAmG,EAAY,iBACd,EACA,KAAK,gBAAkBC,EACrB3hB,EACAwb,GACAkG,EAAY,eACd,EACA,KAAK,oBAAsBC,EACzB3hB,EACA0b,GACAgG,EAAY,mBACd,EACA,KAAK,qBAAuBC,EAC1B3hB,EACA2b,GACA+F,EAAY,oBACd,EACA,KAAK,wBAA0BC,EAC7B3hB,EACA4b,GACA8F,EAAY,uBACd,EACA,KAAK,uBAAyBC,EAC5B3hB,EACA6b,GACA6F,EAAY,sBACd,EACA,KAAK,eAAiBC,EACpB3hB,EACAgc,GACA0F,EAAY,cACd,EACA,KAAK,iBAAmBC,EACtB3hB,EACAic,GACAyF,EAAY,gBACd,EACA,KAAK,kBAAoBC,EACvB3hB,EACAkc,GACAwF,EAAY,iBACd,EACA,KAAK,gBAAkBC,EACrB3hB,EACAmc,GACAuF,EAAY,eACd,EACA,KAAK,eAAiBC,EACpB3hB,EACAqc,GACAqF,EAAY,cACd,EACA,KAAK,iBAAmBC,EACtB3hB,EACAsc,GACAoF,EAAY,gBACd,EACA,KAAK,kBAAoBC,EACvB3hB,EACAuc,GACAmF,EAAY,iBACd,EACA,KAAK,gBAAkBC,EACrB3hB,EACAwc,GACAkF,EAAY,eACd,EACA,KAAK,UAAYC,EAAM3hB,EAASohB,GAAWM,EAAY,SAAS,EAChE,KAAK,MAAQC,EAAM3hB,EAASmV,GAAOuM,EAAY,KAAK,EACpD,KAAK,UAAYC,EAAM3hB,EAASyc,GAAWiF,EAAY,SAAS,EAChE,KAAK,QAAUC,EAAM3hB,EAAS0c,GAASgF,EAAY,OAAO,EAC1D,KAAK,MAAQC,EAAM3hB,EAAS6c,GAAO6E,EAAY,QAAQ,EACvD,KAAK,WAAaC,EAAM3hB,EAAS4f,GAAY8B,EAAY,UAAU,EACnE,KAAK,SAAWC,EAAM3hB,EAASkd,GAAUwE,EAAY,QAAQ,EAC7D,KAAK,UAAYC,EAAM3hB,EAASigB,GAAWyB,EAAY,SAAS,EAChE,KAAK,YAAcC,EAAM3hB,EAASggB,GAAa0B,EAAY,WAAW,EACtE,KAAK,WAAaC,EAAM3hB,EAAS+f,GAAY2B,EAAY,UAAU,EACnE,KAAK,cAAgBC,EACnB3hB,EACA8c,GACA4E,EAAY,aACd,EACA,KAAK,UAAYC,EAAM3hB,EAASmI,GAAWuZ,EAAY,SAAS,EAChE,KAAK,WAAaC,EAAM3hB,EAASgd,GAAY0E,EAAY,UAAU,EACnE,KAAK,eAAiBC,EACpB3hB,EACAmd,GACAuE,EAAY,cACd,EACA,KAAK,kBAAoBC,EACvB3hB,EACAod,GACAsE,EAAY,iBACd,EACA,KAAK,cAAgBC,EACnB3hB,EACAqd,GACAqE,EAAY,aACd,EACA,KAAK,UAAYC,EAAM3hB,EAASud,GAAWmE,EAAY,SAAS,EAChE,KAAK,YAAcC,EAAM3hB,EAASwd,GAAakE,EAAY,WAAW,EACtE,KAAK,aAAeC,EAClB3hB,EACAyd,GACAiE,EAAY,YACd,EACA,KAAK,WAAaC,EAAM3hB,EAAS0d,GAAYgE,EAAY,UAAU,EACnE,KAAK,QAAUC,EAAM3hB,EAASwf,GAASkC,EAAY,OAAO,EAC1D,IAAIE,EAAgBD,EAAM3hB,EAAS2d,GAAU+D,EAAY,QAAQ,EACjE,KAAK,UAAYE,EAAc,CAAC,EAChC,KAAK,UAAYA,EAAcA,EAAc,OAAS,EAAI,EAAI,CAAC,EAC/D,KAAK,aAAeD,EAClB3hB,EACA4d,GACA8D,EAAY,YACd,EACA,KAAK,WAAaC,EAAM3hB,EAAS8d,GAAY4D,EAAY,UAAU,EACnE,KAAK,aAAeC,EAClB3hB,EACA+d,GACA2D,EAAY,YACd,EACA,KAAK,cAAgBC,EACnB3hB,EACAge,GACA0D,EAAY,aACd,EACA,KAAK,YAAcC,EAAM3hB,EAASie,GAAayD,EAAY,WAAW,EACtE,KAAK,WAAaC,EAAM3hB,EAASqhB,GAAYK,EAAY,UAAU,EACnE,KAAK,SAAWC,EAAM3hB,EAASqZ,GAAUqI,EAAY,QAAQ,EAC7D,KAAK,UAAYC,EAAM3hB,EAASke,GAAWwD,EAAY,SAAS,EAChE,KAAK,oBAAsBC,EACzB3hB,EACAyf,IACC9V,EAAK+X,EAAY,uBAAyB,MAAQ/X,IAAO,OACtDA,EACA+X,EAAY,KAClB,EACA,KAAK,mBAAqBC,EACxB3hB,EACA0f,IACC9J,EAAK8L,EAAY,sBAAwB,MAAQ9L,IAAO,OACrDA,EACA8L,EAAY,cAClB,EACA,KAAK,WAAaC,EAAM3hB,EAASme,GAAYuD,EAAY,UAAU,EACnE,KAAK,cAAgBC,EACnB3hB,EACAqe,GACAqD,EAAY,aACd,EACA,KAAK,UAAYC,EAAM3hB,EAASse,GAAaoD,EAAY,SAAS,EAClE,KAAK,gBAAkBC,EACrB3hB,EACAif,GACAyC,EAAY,eACd,EACA,KAAK,WAAaC,EAAM3hB,EAASmf,GAAYuC,EAAY,UAAU,EACnE,KAAK,sBAAwBC,EAC3B3hB,EACAuhB,GACAG,EAAY,qBACd,EACA,KAAK,sBAAwBC,EAC3B3hB,EACAwhB,GACAE,EAAY,qBACd,EACA,KAAK,UAAYC,EAAM3hB,EAASqf,GAAWqC,EAAY,SAAS,EAChE,KAAK,OAASC,EAAM3hB,EAASsf,GAAQoC,EAAY,MAAM,CACzD,CACA,OAAAD,EAAqB,UAAU,UAAY,UAAY,CACrD,OACE,KAAK,QAAU,GACf,KAAK,QAAU,GACf,KAAK,aAAe,CAExB,EACAA,EAAqB,UAAU,cAAgB,UAAY,CACzD,OAAOvM,GAAc,KAAK,eAAe,CAC3C,EACAuM,EAAqB,UAAU,cAAgB,UAAY,CACzD,OAAO,KAAK,YAAc,IAC5B,EACAA,EAAqB,UAAU,aAAe,UAAY,CACxD,OAAO,KAAK,WAAa,CAC3B,EACAA,EAAqB,UAAU,uBAAyB,UAAY,CAClE,OAAO,KAAK,aAAa,GAAK,CAAC,KAAK,OAAO,IAC7C,EACAA,EAAqB,UAAU,WAAa,UAAY,CACtD,OAAO,KAAK,QAAU,CACxB,EACAA,EAAqB,UAAU,cAAgB,UAAY,CACzD,OACEvB,GAAS,KAAK,QAAS,CAAc,GACrCA,GAAS,KAAK,QAAS,QAA2B,GAClDA,GAAS,KAAK,QAAS,SAA2B,GAClDA,GAAS,KAAK,QAAS,SAA2B,GAClDA,GAAS,KAAK,QAAS,QAA+B,GACtDA,GAAS,KAAK,QAAS,SAA4B,CAEvD,EACOuB,CACT,EAAG,EACCI,GAA4C,UAAY,CAC1D,SAASA,EAA2B7hB,EAAS0hB,EAAa,CACxD,KAAK,QAAUC,EAAM3hB,EAASmgB,GAASuB,EAAY,OAAO,EAC1D,KAAK,OAASC,EAAM3hB,EAAS6gB,GAAQa,EAAY,MAAM,CACzD,CACA,OAAOG,CACT,EAAG,EACCC,GAA6C,UAAY,CAC3D,SAASA,EAA4B9hB,EAAS0hB,EAAa,CACzD,KAAK,iBAAmBC,EACtB3hB,EACAogB,GACAsB,EAAY,gBACd,EACA,KAAK,aAAeC,EAClB3hB,EACAygB,GACAiB,EAAY,YACd,CACF,CACA,OAAOI,CACT,EAAG,EAECH,EAAQ,SAAU3hB,EAAS+hB,EAAYhG,EAAO,CAChD,IAAIxJ,EAAY,IAAI7B,GAChBzS,EACF8d,IAAU,MAAQ,OAAOA,GAAU,YAC/BA,EAAM,SAAS,EACfgG,EAAW,aACjBxP,EAAU,MAAMtU,CAAK,EACrB,IAAI+jB,EAAS,IAAI1P,GAAOC,EAAU,KAAK,CAAC,EACxC,OAAQwP,EAAW,KAAM,CACvB,IAAK,GACH,IAAIlR,EAAQmR,EAAO,oBAAoB,EACvC,OAAOD,EAAW,MAChB/hB,EACA+S,GAAalC,CAAK,EAAIA,EAAM,MAAQkR,EAAW,YACjD,EACF,IAAK,GACH,OAAOA,EAAW,MAAM/hB,EAASgiB,EAAO,oBAAoB,CAAC,EAC/D,IAAK,GACH,OAAOD,EAAW,MAAM/hB,EAASgiB,EAAO,qBAAqB,CAAC,EAChE,IAAK,GACH,OAAOA,EAAO,oBAAoB,EACpC,IAAK,GACH,OAAQD,EAAW,OAAQ,CACzB,IAAK,QACH,OAAO1N,GAAM,MAAMrU,EAASgiB,EAAO,oBAAoB,CAAC,EAC1D,IAAK,QACH,OAAOpN,GAAQ,MAAM5U,EAASgiB,EAAO,oBAAoB,CAAC,EAC5D,IAAK,QACH,OAAO1H,GAAM,MAAMta,EAASgiB,EAAO,oBAAoB,CAAC,EAC1D,IAAK,SACH,IAAIC,EAAWD,EAAO,oBAAoB,EAC1C,OAAOzO,GAAS0O,CAAQ,EAAIA,EAAWvO,GACzC,IAAK,oBACH,IAAIwO,EAAUF,EAAO,oBAAoB,EACzC,OAAOxO,GAAmB0O,CAAO,EAAIA,EAAUxO,GACjD,IAAK,OACH,OAAO6L,GAAK,MAAMvf,EAASgiB,EAAO,oBAAoB,CAAC,CAC3D,CACA,KACJ,CACF,EAEIG,GAA2B,4BAC3BC,GAAsB,SAAUC,EAAS,CAC3C,IAAIC,EAAYD,EAAQ,aAAaF,EAAwB,EAC7D,OAAQG,EAAW,CACjB,IAAK,MACH,MAAO,GACT,IAAK,QACH,MAAO,GACT,IAAK,QACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,QACE,MAAO,EACX,CACF,EACIC,GAAc,SAAUF,EAASrZ,EAAM,CACzC,IAAIwZ,EAAcJ,GAAoBC,CAAO,EAC7C,OAAOG,IAAgB,GAAexZ,IAASwZ,CACjD,EAEIC,GAAkC,UAAY,CAChD,SAASA,EAAiBziB,EAASqiB,EAAS,CAK1C,GAJA,KAAK,QAAUriB,EACf,KAAK,UAAY,CAAC,EAClB,KAAK,SAAW,CAAC,EACjB,KAAK,MAAQ,EACTuiB,GAAYF,EAAS,CAAa,EACpC,SAEF,KAAK,OAAS,IAAIZ,GAChBzhB,EACA,OAAO,iBAAiBqiB,EAAS,IAAI,CACvC,EACIK,GAAkBL,CAAO,IAEzB,KAAK,OAAO,kBAAkB,KAAK,SAAUzB,EAAU,CACrD,OAAOA,EAAW,CACpB,CAAC,IAEDyB,EAAQ,MAAM,kBAAoB,MAEhC,KAAK,OAAO,YAAc,OAE5BA,EAAQ,MAAM,UAAY,SAG9B,KAAK,OAAShiB,EAAY,KAAK,QAASgiB,CAAO,EAC3CE,GAAYF,EAAS,CAAc,IACrC,KAAK,OAAS,GAElB,CACA,OAAOI,CACT,EAAG,EAOC9gB,GACF,+izBAOEghB,GACF,mEAEEC,GAAW,OAAO,YAAe,YAAc,CAAC,EAAI,IAAI,WAAW,GAAG,EACjEC,GAAM,EAAGA,GAAMF,GAAQ,OAAQE,KACtCD,GAASD,GAAQ,WAAWE,EAAG,CAAC,EAAIA,GAoOtC,QAlOIC,GAAS,SAAUnhB,EAAQ,CAC7B,IAAIC,EAAeD,EAAO,OAAS,IACjCE,EAAMF,EAAO,OACblE,EACAN,EAAI,EACJ2E,EACAC,EACAC,EACAC,EACEN,EAAOA,EAAO,OAAS,CAAC,IAAM,MAChCC,IACID,EAAOA,EAAO,OAAS,CAAC,IAAM,KAChCC,KAGJ,IAAIM,EACF,OAAO,aAAgB,aACvB,OAAO,YAAe,aACtB,OAAO,WAAW,UAAU,OAAU,YAClC,IAAI,YAAYN,CAAY,EAC5B,IAAI,MAAMA,CAAY,EACxBO,EAAQ,MAAM,QAAQD,CAAM,EAAIA,EAAS,IAAI,WAAWA,CAAM,EAClE,IAAKzE,EAAI,EAAGA,EAAIoE,EAAKpE,GAAK,EACxBqE,EAAW8gB,GAASjhB,EAAO,WAAWlE,CAAC,CAAC,EACxCsE,EAAW6gB,GAASjhB,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC5CuE,EAAW4gB,GAASjhB,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC5CwE,EAAW2gB,GAASjhB,EAAO,WAAWlE,EAAI,CAAC,CAAC,EAC5C0E,EAAMhF,GAAG,EAAK2E,GAAY,EAAMC,GAAY,EAC5CI,EAAMhF,GAAG,GAAM4E,EAAW,KAAO,EAAMC,GAAY,EACnDG,EAAMhF,GAAG,GAAM6E,EAAW,IAAM,EAAMC,EAAW,GAEnD,OAAOC,CACT,EACI6gB,GAAkB,SAAU7gB,EAAQ,CAGtC,QAFIrB,EAASqB,EAAO,OAChBC,EAAQ,CAAC,EACJ1E,EAAI,EAAGA,EAAIoD,EAAQpD,GAAK,EAC/B0E,EAAM,KAAMD,EAAOzE,EAAI,CAAC,GAAK,EAAKyE,EAAOzE,CAAC,CAAC,EAE7C,OAAO0E,CACT,EACI6gB,GAAkB,SAAU9gB,EAAQ,CAGtC,QAFIrB,EAASqB,EAAO,OAChBC,EAAQ,CAAC,EACJ1E,EAAI,EAAGA,EAAIoD,EAAQpD,GAAK,EAC/B0E,EAAM,KACHD,EAAOzE,EAAI,CAAC,GAAK,GACfyE,EAAOzE,EAAI,CAAC,GAAK,GACjByE,EAAOzE,EAAI,CAAC,GAAK,EAClByE,EAAOzE,CAAC,CACZ,EAEF,OAAO0E,CACT,EAGI8gB,GAAiB,EAEjBC,GAAiB,GAOjBC,GAAqB,EAKrBC,GAAmBF,GAAiBD,GAOpCI,GAA6B,OAAWJ,GAExCK,GAA2B,GAAKL,GAEhCM,GAAmBD,GAA2B,EAC9CE,GAA6B,MAASP,GAEtCQ,GACFJ,GAA6BG,GAK3BE,GAAgCD,GAChCE,GACF,GAaEC,GACFF,GAAgCC,GAK9BE,GAAoC,OAAWX,GAE/CY,GAA8B,GAAKV,GAEnCW,GAAsBD,GAA8B,EACpDE,GAAU,SAAU1gB,EAAMC,EAAOC,EAAK,CACxC,OAAIF,EAAK,MACAA,EAAK,MAAMC,EAAOC,CAAG,EAEvB,IAAI,YAAY,MAAM,UAAU,MAAM,KAAKF,EAAMC,EAAOC,CAAG,CAAC,CACrE,EACIygB,GAAU,SAAU3gB,EAAMC,EAAOC,EAAK,CACxC,OAAIF,EAAK,MACAA,EAAK,MAAMC,EAAOC,CAAG,EAEvB,IAAI,YAAY,MAAM,UAAU,MAAM,KAAKF,EAAMC,EAAOC,CAAG,CAAC,CACrE,EACI0gB,GAAuB,SAAUviB,EAAQgC,EAAa,CACxD,IAAIzB,EAAS4gB,GAAOnhB,CAAM,EACtBiC,EAAS,MAAM,QAAQ1B,CAAM,EAC7B8gB,GAAgB9gB,CAAM,EACtB,IAAI,YAAYA,CAAM,EACtB2B,EAAS,MAAM,QAAQ3B,CAAM,EAC7B6gB,GAAgB7gB,CAAM,EACtB,IAAI,YAAYA,CAAM,EACtB4B,EAAe,GACf5C,EAAQ8iB,GAAQngB,EAAQC,EAAe,EAAGF,EAAO,CAAC,EAAI,CAAC,EACvDG,EACFH,EAAO,CAAC,IAAM,EACVogB,GAAQngB,GAASC,EAAeF,EAAO,CAAC,GAAK,CAAC,EAC9CqgB,GAAQrgB,EAAQ,KAAK,MAAME,EAAeF,EAAO,CAAC,GAAK,CAAC,CAAC,EAC/D,OAAO,IAAIK,GAAKL,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG1C,EAAO6C,CAAI,CACzE,EACIE,GAAsB,UAAY,CACpC,SAASA,EACPC,EACAC,EACAC,EACAC,EACAnD,EACA6C,EACA,CACA,KAAK,aAAeG,EACpB,KAAK,WAAaC,EAClB,KAAK,UAAYC,EACjB,KAAK,eAAiBC,EACtB,KAAK,MAAQnD,EACb,KAAK,KAAO6C,CACd,CAOA,OAAAE,EAAK,UAAU,IAAM,SAAU9C,EAAW,CACxC,IAAImD,EACJ,GAAInD,GAAa,EAAG,CAClB,GACEA,EAAY,OACXA,EAAY,OAAWA,GAAa,MAKrC,OAAAmD,EAAK,KAAK,MAAMnD,GAAa8hB,EAAc,EAC3C3e,GAAMA,GAAM6e,KAAuBhiB,EAAYoiB,IACxC,KAAK,KAAKjf,CAAE,EAErB,GAAInD,GAAa,MAOf,OAAAmD,EACE,KAAK,MACH+e,IACIliB,EAAY,OAAW8hB,GAC7B,EACF3e,GAAMA,GAAM6e,KAAuBhiB,EAAYoiB,IACxC,KAAK,KAAKjf,CAAE,EAErB,GAAInD,EAAY,KAAK,UAEnB,OAAAmD,EACEsf,GACAC,IACC1iB,GAAa+hB,IAChB5e,EAAK,KAAK,MAAMA,CAAE,EAClBA,GAAOnD,GAAa8hB,GAAkBc,GACtCzf,EAAK,KAAK,MAAMA,CAAE,EAClBA,GAAMA,GAAM6e,KAAuBhiB,EAAYoiB,IACxC,KAAK,KAAKjf,CAAE,EAErB,GAAInD,GAAa,QACf,OAAO,KAAK,KAAK,KAAK,cAAc,CAExC,CAEA,OAAO,KAAK,UACd,EACO8C,CACT,EAAG,EAOCkgB,GACF,mEAEEC,GAAS,OAAO,YAAe,YAAc,CAAC,EAAI,IAAI,WAAW,GAAG,EAC/D3mB,GAAI,EAAGA,GAAI0mB,GAAM,OAAQ1mB,KAChC2mB,GAAOD,GAAM,WAAW1mB,EAAC,CAAC,EAAIA,GAGhC,IAAI4mB,GAAU,EACVC,GAAK,EACLC,GAAK,EACLC,GAAU,EACVC,GAAS,EACTC,GAAc,EACdC,GAAI,EACJC,GAAI,EACJC,GAAI,GACJC,GAAK,GACLC,GAAM,GACNC,GAAM,GACNC,GAAwB,GACxBC,GAAK,GACLC,GAAe,SAAUxkB,EAAK,CAIhC,QAHIC,EAAa,CAAC,EACdnD,EAAI,EACJoD,EAASF,EAAI,OACVlD,EAAIoD,GAAQ,CACjB,IAAI5C,EAAQ0C,EAAI,WAAWlD,GAAG,EAC9B,GAAIQ,GAAS,OAAUA,GAAS,OAAUR,EAAIoD,EAAQ,CACpD,IAAIC,EAAQH,EAAI,WAAWlD,GAAG,GACzBqD,EAAQ,SAAY,MACvBF,EAAW,OAAO3C,EAAQ,OAAU,KAAO6C,EAAQ,MAAS,KAAO,GAEnEF,EAAW,KAAK3C,CAAK,EACrBR,IAEJ,MACEmD,EAAW,KAAK3C,CAAK,CAEzB,CACA,OAAO2C,CACT,EACIwkB,GAAgB,UAAY,CAE9B,QADIxkB,EAAa,CAAC,EACTI,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACtCJ,EAAWI,CAAE,EAAI,UAAUA,CAAE,EAE/B,GAAI,OAAO,cACT,OAAO,OAAO,cAAc,MAAM,OAAQJ,CAAU,EAEtD,IAAIC,EAASD,EAAW,OACxB,GAAI,CAACC,EACH,MAAO,GAKT,QAHII,EAAY,CAAC,EACbC,EAAQ,GACR1C,EAAS,GACN,EAAE0C,EAAQL,GAAQ,CACvB,IAAIM,EAAYP,EAAWM,CAAK,EAC5BC,GAAa,MACfF,EAAU,KAAKE,CAAS,GAExBA,GAAa,MACbF,EAAU,MACPE,GAAa,IAAM,MACnBA,EAAY,KAAS,KACxB,IAEED,EAAQ,IAAML,GAAUI,EAAU,OAAS,SAC7CzC,GAAU,OAAO,aAAa,MAAM,OAAQyC,CAAS,EACrDA,EAAU,OAAS,EAEvB,CACA,OAAOzC,CACT,EACI6mB,GAAcnB,GAAqBviB,EAAM,EACzC2jB,GAAoB,OACpBC,GAAgB,OAChBC,GAAmB,SAAUrkB,EAAW,CAC1C,OAAOkkB,GAAY,IAAIlkB,CAAS,CAClC,EACIskB,GAAwB,SAAUC,EAAa9c,EAAY1H,EAAO,CACpE,IAAIqI,EAAYrI,EAAQ,EACpBsH,EAAOI,EAAWW,CAAS,EAC3BV,EAAUD,EAAW1H,EAAQ,CAAC,EAC9B4H,EAAOF,EAAW1H,CAAK,EAE3B,GAAI2H,IAAYyb,IAAMxb,IAASyb,GAC7B,OAAOe,GAOT,GAJIzc,IAAYyb,IAAMzb,IAAY0b,IAAM1b,IAAY2b,IAIhD1b,IAASwb,IAAMxb,IAASyb,IAAMzb,IAAS0b,GACzC,OAAOe,GAyBT,GArBI1c,IAAY8b,IAAK,CAACA,GAAGC,GAAGE,GAAIC,EAAG,EAAE,QAAQjc,CAAI,IAAM,KAIlDD,IAAYic,IAAMjc,IAAY+b,MAAO9b,IAAS8b,IAAK9b,IAAS+b,MAI5Dhc,IAAYkc,IAAOlc,IAAYgc,KAAM/b,IAAS+b,IAI/C/b,IAASkc,IAAOlc,IAAS2b,IAKzB3b,IAAS4b,IAIT7b,IAAYwb,GACd,OAAOiB,GAGT,GAAIzc,IAAYmc,IAAOlc,IAASmc,GAAuB,CACrD,KAAOzc,IAASic,IACdjc,EAAOI,EAAW,EAAEW,CAAS,EAE/B,GAAIf,IAASyc,GACX,OAAOK,EAEX,CAIA,GAAIzc,IAAYqc,IAAMpc,IAASoc,GAAI,CAEjC,QADIS,EAAU,EACPnd,IAAS0c,IACdS,IACAnd,EAAOI,EAAW,EAAEW,CAAS,EAE/B,GAAIoc,EAAU,IAAM,EAClB,OAAOL,EAEX,CACA,OAAOC,EACT,EACIK,GAAkB,SAAUjlB,EAAK,CACnC,IAAIC,EAAaukB,GAAaxkB,CAAG,EAC7BE,EAASD,EAAW,OACpBM,EAAQ,EACR+I,EAAU,EACVrB,EAAahI,EAAW,IAAI4kB,EAAgB,EAChD,MAAO,CACL,KAAM,UAAY,CAChB,GAAItkB,GAASL,EACX,MAAO,CAAE,KAAM,GAAM,MAAO,IAAK,EAGnC,QADIglB,EAAgBP,GAElBpkB,EAAQL,IACPglB,EAAgBJ,GACf7kB,EACAgI,EACA,EAAE1H,CACJ,KAAOokB,IACP,CACF,GAAIO,IAAkBP,IAAqBpkB,IAAUL,EAAQ,CAC3D,IAAI5C,EAAQmnB,GAAc,MACxB,KACAxkB,EAAW,MAAMqJ,EAAS/I,CAAK,CACjC,EACA,OAAA+I,EAAU/I,EACH,CAAE,MAAOjD,EAAO,KAAM,EAAM,CACrC,CACA,MAAO,CAAE,KAAM,GAAM,MAAO,IAAK,CACnC,CACF,CACF,EACI6nB,GAAiB,SAAUnlB,EAAK,CAIlC,QAHIolB,EAAUH,GAAgBjlB,CAAG,EAC7BqlB,EAAY,CAAC,EACbC,EACG,EAAEA,EAAKF,EAAQ,KAAK,GAAG,MACxBE,EAAG,OACLD,EAAU,KAAKC,EAAG,MAAM,MAAM,CAAC,EAGnC,OAAOD,CACT,EAEIE,GAAkB,SAAU1lB,EAAU,CACxC,IAAI2lB,EAAc,IAClB,GAAI3lB,EAAS,YAAa,CACxB,IAAI4lB,EAAQ5lB,EAAS,YAAY,EACjC,GAAI4lB,EAAM,sBAAuB,CAC/B,IAAIC,EAAc7lB,EAAS,cAAc,WAAW,EACpD6lB,EAAY,MAAM,OAASF,EAAc,KACzCE,EAAY,MAAM,QAAU,QAC5B7lB,EAAS,KAAK,YAAY6lB,CAAW,EACrCD,EAAM,WAAWC,CAAW,EAC5B,IAAIC,EAAcF,EAAM,sBAAsB,EAC1CG,EAAc,KAAK,MAAMD,EAAY,MAAM,EAE/C,GADA9lB,EAAS,KAAK,YAAY6lB,CAAW,EACjCE,IAAgBJ,EAClB,MAAO,EAEX,CACF,CACA,MAAO,EACT,EACIK,GAAmB,SAAUhmB,EAAU,CACzC,IAAI6lB,EAAc7lB,EAAS,cAAc,WAAW,EACpD6lB,EAAY,MAAM,MAAQ,OAC1BA,EAAY,MAAM,QAAU,QAC5BA,EAAY,MAAM,SAAW,OAC7BA,EAAY,MAAM,cAAgB,MAClCA,EAAY,MAAM,YAAc,MAChC7lB,EAAS,KAAK,YAAY6lB,CAAW,EACrC,IAAID,EAAQ5lB,EAAS,YAAY,EACjC6lB,EAAY,UACV,MAAO,GAAG,QAAW,WAAa,YAAY,OAAO,EAAE,EAAI,GAC7D,IAAI/lB,EAAO+lB,EAAY,WACnBI,EAAW/lB,EAAeJ,EAAK,IAAI,EAAE,IAAI,SAAU7C,EAAG,CACxD,OAAOsD,EAAgBtD,CAAC,CAC1B,CAAC,EACGipB,EAAS,EACTle,EAAO,CAAC,EAERme,EAAWF,EAAS,MAAM,SAAUG,EAAMnpB,EAAG,CAC/C2oB,EAAM,SAAS9lB,EAAMomB,CAAM,EAC3BN,EAAM,OAAO9lB,EAAMomB,EAASE,EAAK,MAAM,EACvC,IAAIxmB,EAAOgmB,EAAM,sBAAsB,EACvCM,GAAUE,EAAK,OACf,IAAIC,EAAazmB,EAAK,EAAIoI,EAAK,GAAKpI,EAAK,EAAIoI,EAAK,EAElD,OADAA,EAAOpI,EACH3C,IAAM,EACD,GAEFopB,CACT,CAAC,EACD,OAAArmB,EAAS,KAAK,YAAY6lB,CAAW,EAC9BM,CACT,EACIG,GAAW,UAAY,CACzB,OAAO,OAAO,IAAI,MAAM,EAAE,aAAgB,WAC5C,EACIC,GAAmB,UAAY,CACjC,OAAO,OAAO,IAAI,eAAe,EAAE,cAAiB,QACtD,EACIC,GAAU,SAAUxmB,EAAU,CAChC,IAAIymB,EAAM,IAAI,MACVC,EAAS1mB,EAAS,cAAc,QAAQ,EACxC2mB,EAAMD,EAAO,WAAW,IAAI,EAChC,GAAI,CAACC,EACH,MAAO,GAETF,EAAI,IACF,oEACF,GAAI,CACFE,EAAI,UAAUF,EAAK,EAAG,CAAC,EACvBC,EAAO,UAAU,CACnB,OAAS5oB,EAAG,CACV,MAAO,EACT,CACA,MAAO,EACT,EACI8oB,GAAe,SAAUrjB,EAAM,CACjC,OAAOA,EAAK,CAAC,IAAM,GAAKA,EAAK,CAAC,IAAM,KAAOA,EAAK,CAAC,IAAM,GAAKA,EAAK,CAAC,IAAM,GAC1E,EACIsjB,GAAoB,SAAU7mB,EAAU,CAC1C,IAAI0mB,EAAS1mB,EAAS,cAAc,QAAQ,EACxC4Y,EAAO,IACX8N,EAAO,MAAQ9N,EACf8N,EAAO,OAAS9N,EAChB,IAAI+N,EAAMD,EAAO,WAAW,IAAI,EAChC,GAAI,CAACC,EACH,OAAO,QAAQ,OAAO,EAAK,EAE7BA,EAAI,UAAY,iBAChBA,EAAI,SAAS,EAAG,EAAG/N,EAAMA,CAAI,EAC7B,IAAI6N,EAAM,IAAI,MACVK,EAAgBJ,EAAO,UAAU,EACrCD,EAAI,IAAMK,EACV,IAAIC,EAAMC,GAAuBpO,EAAMA,EAAM,EAAG,EAAG6N,CAAG,EACtD,OAAAE,EAAI,UAAY,MAChBA,EAAI,SAAS,EAAG,EAAG/N,EAAMA,CAAI,EACtBqO,GAAoBF,CAAG,EAC3B,KAAK,SAAUN,EAAK,CACnBE,EAAI,UAAUF,EAAK,EAAG,CAAC,EACvB,IAAIljB,EAAOojB,EAAI,aAAa,EAAG,EAAG/N,EAAMA,CAAI,EAAE,KAC9C+N,EAAI,UAAY,MAChBA,EAAI,SAAS,EAAG,EAAG/N,EAAMA,CAAI,EAC7B,IAAI9Y,EAAOE,EAAS,cAAc,KAAK,EACvC,OAAAF,EAAK,MAAM,gBAAkB,OAASgnB,EAAgB,IACtDhnB,EAAK,MAAM,OAAS8Y,EAAO,KAEpBgO,GAAarjB,CAAI,EACpB0jB,GAAoBD,GAAuBpO,EAAMA,EAAM,EAAG,EAAG9Y,CAAI,CAAC,EAClE,QAAQ,OAAO,EAAK,CAC1B,CAAC,EACA,KAAK,SAAU2mB,EAAK,CACnB,OAAAE,EAAI,UAAUF,EAAK,EAAG,CAAC,EAEhBG,GAAaD,EAAI,aAAa,EAAG,EAAG/N,EAAMA,CAAI,EAAE,IAAI,CAC7D,CAAC,EACA,MAAM,UAAY,CACjB,MAAO,EACT,CAAC,CACL,EACIoO,GAAyB,SAAU7nB,EAAOC,EAAQC,EAAGhB,EAAGyB,EAAM,CAChE,IAAIonB,EAAQ,6BACRH,EAAM,SAAS,gBAAgBG,EAAO,KAAK,EAC3CC,EAAgB,SAAS,gBAAgBD,EAAO,eAAe,EACnE,OAAAH,EAAI,eAAe,KAAM,QAAS5nB,EAAM,SAAS,CAAC,EAClD4nB,EAAI,eAAe,KAAM,SAAU3nB,EAAO,SAAS,CAAC,EACpD+nB,EAAc,eAAe,KAAM,QAAS,MAAM,EAClDA,EAAc,eAAe,KAAM,SAAU,MAAM,EACnDA,EAAc,eAAe,KAAM,IAAK9nB,EAAE,SAAS,CAAC,EACpD8nB,EAAc,eAAe,KAAM,IAAK9oB,EAAE,SAAS,CAAC,EACpD8oB,EAAc,eAAe,KAAM,4BAA6B,MAAM,EACtEJ,EAAI,YAAYI,CAAa,EAC7BA,EAAc,YAAYrnB,CAAI,EACvBinB,CACT,EACIE,GAAsB,SAAUF,EAAK,CACvC,OAAO,IAAI,QAAQ,SAAUrpB,EAASC,EAAQ,CAC5C,IAAI8oB,EAAM,IAAI,MACdA,EAAI,OAAS,UAAY,CACvB,OAAO/oB,EAAQ+oB,CAAG,CACpB,EACAA,EAAI,QAAU9oB,EACd8oB,EAAI,IACF,oCACA,mBAAmB,IAAI,cAAc,EAAE,kBAAkBM,CAAG,CAAC,CACjE,CAAC,CACH,EACIK,GAAW,CACb,IAAI,sBAAuB,CACzB,IAAI3pB,EAAQioB,GAAgB,QAAQ,EACpC,cAAO,eAAe0B,GAAU,uBAAwB,CAAE,MAAO3pB,CAAM,CAAC,EACjEA,CACT,EACA,IAAI,uBAAwB,CAC1B,IAAIA,EAAQ2pB,GAAS,sBAAwBpB,GAAiB,QAAQ,EACtE,cAAO,eAAeoB,GAAU,wBAAyB,CACvD,MAAO3pB,CACT,CAAC,EACMA,CACT,EACA,IAAI,qBAAsB,CACxB,IAAIA,EAAQ+oB,GAAQ,QAAQ,EAC5B,cAAO,eAAeY,GAAU,sBAAuB,CAAE,MAAO3pB,CAAM,CAAC,EAChEA,CACT,EACA,IAAI,+BAAgC,CAClC,IAAIA,EACF,OAAO,MAAM,MAAS,YAAc,OAAO,OAAO,OAAU,WACxDopB,GAAkB,QAAQ,EAC1B,QAAQ,QAAQ,EAAK,EAC3B,cAAO,eAAeO,GAAU,gCAAiC,CAC/D,MAAO3pB,CACT,CAAC,EACMA,CACT,EACA,IAAI,qBAAsB,CACxB,IAAIA,EAAQ6oB,GAAS,EACrB,cAAO,eAAec,GAAU,sBAAuB,CAAE,MAAO3pB,CAAM,CAAC,EAChEA,CACT,EACA,IAAI,uBAAwB,CAC1B,IAAIA,EAAQ8oB,GAAiB,EAC7B,cAAO,eAAea,GAAU,wBAAyB,CACvD,MAAO3pB,CACT,CAAC,EACMA,CACT,EACA,IAAI,kBAAmB,CACrB,IAAIA,EAAQ,oBAAqB,IAAI,eACrC,cAAO,eAAe2pB,GAAU,mBAAoB,CAAE,MAAO3pB,CAAM,CAAC,EAC7DA,CACT,EACA,IAAI,kCAAmC,CAErC,IAAIA,EAAQ,CAAC,EAAE,OAAO,MAAS,aAAe,KAAK,WACnD,cAAO,eAAe2pB,GAAU,mCAAoC,CAClE,MAAO3pB,CACT,CAAC,EACMA,CACT,CACF,EAEI4pB,GAA4B,UAAY,CAC1C,SAASA,EAAWjB,EAAMkB,EAAQ,CAChC,KAAK,KAAOlB,EACZ,KAAK,OAASkB,CAChB,CACA,OAAOD,CACT,EAAG,EACCE,GAAkB,SAAU/nB,EAAS/B,EAAO+pB,EAAQ1nB,EAAM,CAC5D,IAAImmB,EAAWwB,GAAUhqB,EAAO+pB,CAAM,EAClCE,EAAa,CAAC,EACdxB,EAAS,EACb,OAAAD,EAAS,QAAQ,SAAUG,EAAM,CAC/B,GAAIoB,EAAO,mBAAmB,QAAUpB,EAAK,KAAK,EAAE,OAAS,EAC3D,GAAIgB,GAAS,qBAAsB,CACjC,IAAIO,EAAcC,GAChB9nB,EACAomB,EACAE,EAAK,MACP,EAAE,eAAe,EACjB,GAAIuB,EAAY,OAAS,EAAG,CAC1B,IAAIE,EAAcC,GAAiB1B,CAAI,EACnC2B,EAAc,EAClBF,EAAY,QAAQ,SAAUG,EAAY,CACxCN,EAAW,KACT,IAAIL,GACFW,EACAhpB,EAAO,gBACLQ,EACAooB,GACE9nB,EACAioB,EAAc7B,EACd8B,EAAW,MACb,EAAE,eAAe,CACnB,CACF,CACF,EACAD,GAAeC,EAAW,MAC5B,CAAC,CACH,MACEN,EAAW,KACT,IAAIL,GACFjB,EACApnB,EAAO,gBAAgBQ,EAASmoB,CAAW,CAC7C,CACF,CAEJ,KAAO,CACL,IAAIM,EAAkBnoB,EAAK,UAAUsmB,EAAK,MAAM,EAChDsB,EAAW,KACT,IAAIL,GAAWjB,EAAM8B,GAAiB1oB,EAASM,CAAI,CAAC,CACtD,EACAA,EAAOmoB,CACT,MACUb,GAAS,uBACnBtnB,EAAOA,EAAK,UAAUsmB,EAAK,MAAM,GAEnCF,GAAUE,EAAK,MACjB,CAAC,EACMsB,CACT,EACIQ,GAAmB,SAAU1oB,EAASM,EAAM,CAC9C,IAAIqoB,EAAgBroB,EAAK,cACzB,GAAIqoB,EAAe,CACjB,IAAIC,EAAUD,EAAc,cAAc,uBAAuB,EACjEC,EAAQ,YAAYtoB,EAAK,UAAU,EAAI,CAAC,EACxC,IAAIuoB,EAAavoB,EAAK,WACtB,GAAIuoB,EAAY,CACdA,EAAW,aAAaD,EAAStoB,CAAI,EACrC,IAAIwnB,EAASznB,EAAYL,EAAS4oB,CAAO,EACzC,OAAIA,EAAQ,YACVC,EAAW,aAAaD,EAAQ,WAAYA,CAAO,EAE9Cd,CACT,CACF,CACA,OAAOtoB,EAAO,KAChB,EACI4oB,GAAc,SAAU9nB,EAAMomB,EAAQ7lB,EAAQ,CAChD,IAAI8nB,EAAgBroB,EAAK,cACzB,GAAI,CAACqoB,EACH,MAAM,IAAI,MAAM,4BAA4B,EAE9C,IAAIvC,EAAQuC,EAAc,YAAY,EACtC,OAAAvC,EAAM,SAAS9lB,EAAMomB,CAAM,EAC3BN,EAAM,OAAO9lB,EAAMomB,EAAS7lB,CAAM,EAC3BulB,CACT,EACIkC,GAAmB,SAAUrqB,EAAO,CACtC,GAAI2pB,GAAS,iCAAkC,CAE7C,IAAIkB,EAAY,IAAI,KAAK,UAAU,OAAQ,CAAE,YAAa,UAAW,CAAC,EAEtE,OAAO,MAAM,KAAKA,EAAU,QAAQ7qB,CAAK,CAAC,EAAE,IAAI,SAAU8qB,EAAS,CACjE,OAAOA,EAAQ,OACjB,CAAC,CACH,CACA,OAAOjD,GAAe7nB,CAAK,CAC7B,EACI+qB,GAAe,SAAU/qB,EAAO+pB,EAAQ,CAC1C,GAAIJ,GAAS,iCAAkC,CAE7C,IAAIkB,EAAY,IAAI,KAAK,UAAU,OAAQ,CACzC,YAAa,MACf,CAAC,EAED,OAAO,MAAM,KAAKA,EAAU,QAAQ7qB,CAAK,CAAC,EAAE,IAAI,SAAU8qB,EAAS,CACjE,OAAOA,EAAQ,OACjB,CAAC,CACH,CACA,OAAOE,GAAWhrB,EAAO+pB,CAAM,CACjC,EACIC,GAAY,SAAUhqB,EAAO+pB,EAAQ,CACvC,OAAOA,EAAO,gBAAkB,EAC5BM,GAAiBrqB,CAAK,EACtB+qB,GAAa/qB,EAAO+pB,CAAM,CAChC,EAEIkB,GAAiB,CACnB,GAAQ,IAAQ,KAAQ,MAAS,MAAS,KAAQ,IACpD,EACID,GAAa,SAAUtoB,EAAKqnB,EAAQ,CA+BtC,QA9BIjC,EAAU/b,GAAYrJ,EAAK,CAC7B,UAAWqnB,EAAO,UAClB,UACEA,EAAO,eAAiB,aACpB,aACAA,EAAO,SACf,CAAC,EACGmB,EAAQ,CAAC,EACTlD,EACAmD,EAAU,UAAY,CACxB,GAAInD,EAAG,MAAO,CACZ,IAAIhoB,EAAQgoB,EAAG,MAAM,MAAM,EACvBrlB,EAAaF,EAAezC,CAAK,EACjCorB,EAAS,GACbzoB,EAAW,QAAQ,SAAUO,EAAW,CAClC+nB,GAAe,QAAQ/nB,CAAS,IAAM,GACxCkoB,GAAUtoB,EAAgBI,CAAS,GAE/BkoB,EAAO,QACTF,EAAM,KAAKE,CAAM,EAEnBF,EAAM,KAAKpoB,EAAgBI,CAAS,CAAC,EACrCkoB,EAAS,GAEb,CAAC,EACGA,EAAO,QACTF,EAAM,KAAKE,CAAM,CAErB,CACF,EACO,EAAEpD,EAAKF,EAAQ,KAAK,GAAG,MAC5BqD,EAAQ,EAEV,OAAOD,CACT,EAEIG,GAA+B,UAAY,CAC7C,SAASA,EAActpB,EAASM,EAAM0nB,EAAQ,CAC5C,KAAK,KAAOuB,GAAUjpB,EAAK,KAAM0nB,EAAO,aAAa,EACrD,KAAK,WAAaD,GAAgB/nB,EAAS,KAAK,KAAMgoB,EAAQ1nB,CAAI,CACpE,CACA,OAAOgpB,CACT,EAAG,EACCC,GAAY,SAAU3C,EAAM2C,EAAW,CACzC,OAAQA,EAAW,CACjB,IAAK,GACH,OAAO3C,EAAK,YAAY,EAC1B,IAAK,GACH,OAAOA,EAAK,QAAQ4C,GAAYC,EAAU,EAC5C,IAAK,GACH,OAAO7C,EAAK,YAAY,EAC1B,QACE,OAAOA,CACX,CACF,EACI4C,GAAa,2BACbC,GAAa,SAAUC,EAAGC,EAAIC,EAAI,CACpC,OAAIF,EAAE,OAAS,EACNC,EAAKC,EAAG,YAAY,EAEtBF,CACT,EAEIG,GAAuC,SAAUC,EAAQ,CAC3D1sB,EAAUysB,EAAuBC,CAAM,EACvC,SAASD,EAAsB7pB,EAASinB,EAAK,CAC3C,IAAI8C,EAAQD,EAAO,KAAK,KAAM9pB,EAASinB,CAAG,GAAK,KAC/C,OAAA8C,EAAM,IAAM9C,EAAI,YAAcA,EAAI,IAClC8C,EAAM,eAAiB9C,EAAI,aAC3B8C,EAAM,gBAAkB9C,EAAI,cAC5B8C,EAAM,QAAQ,MAAM,SAASA,EAAM,GAAG,EAC/BA,CACT,CACA,OAAOF,CACT,EAAGpH,EAAgB,EAEfuH,GAAwC,SAAUF,EAAQ,CAC5D1sB,EAAU4sB,EAAwBF,CAAM,EACxC,SAASE,EAAuBhqB,EAASknB,EAAQ,CAC/C,IAAI6C,EAAQD,EAAO,KAAK,KAAM9pB,EAASknB,CAAM,GAAK,KAClD,OAAA6C,EAAM,OAAS7C,EACf6C,EAAM,eAAiB7C,EAAO,MAC9B6C,EAAM,gBAAkB7C,EAAO,OACxB6C,CACT,CACA,OAAOC,CACT,EAAGvH,EAAgB,EAEfwH,GAAqC,SAAUH,EAAQ,CACzD1sB,EAAU6sB,EAAqBH,CAAM,EACrC,SAASG,EAAoBjqB,EAASinB,EAAK,CACzC,IAAI8C,EAAQD,EAAO,KAAK,KAAM9pB,EAASinB,CAAG,GAAK,KAC3CzpB,EAAI,IAAI,cACRsqB,EAASznB,EAAYL,EAASinB,CAAG,EACrC,OAAAA,EAAI,aAAa,QAASa,EAAO,MAAQ,IAAI,EAC7Cb,EAAI,aAAa,SAAUa,EAAO,OAAS,IAAI,EAC/CiC,EAAM,IACJ,sBAAwB,mBAAmBvsB,EAAE,kBAAkBypB,CAAG,CAAC,EACrE8C,EAAM,eAAiB9C,EAAI,MAAM,QAAQ,MACzC8C,EAAM,gBAAkB9C,EAAI,OAAO,QAAQ,MAC3C8C,EAAM,QAAQ,MAAM,SAASA,EAAM,GAAG,EAC/BA,CACT,CACA,OAAOE,CACT,EAAGxH,EAAgB,EAEfyH,GAAoC,SAAUJ,EAAQ,CACxD1sB,EAAU8sB,EAAoBJ,CAAM,EACpC,SAASI,EAAmBlqB,EAASqiB,EAAS,CAC5C,IAAI0H,EAAQD,EAAO,KAAK,KAAM9pB,EAASqiB,CAAO,GAAK,KACnD,OAAA0H,EAAM,MAAQ1H,EAAQ,MACf0H,CACT,CACA,OAAOG,CACT,EAAGzH,EAAgB,EAEf0H,GAAoC,SAAUL,EAAQ,CACxD1sB,EAAU+sB,EAAoBL,CAAM,EACpC,SAASK,EAAmBnqB,EAASqiB,EAAS,CAC5C,IAAI0H,EAAQD,EAAO,KAAK,KAAM9pB,EAASqiB,CAAO,GAAK,KACnD,OAAA0H,EAAM,MAAQ1H,EAAQ,MACtB0H,EAAM,SACJ,OAAO1H,EAAQ,UAAa,WAAaA,EAAQ,WAAa,GACzD0H,CACT,CACA,OAAOI,CACT,EAAG1H,EAAgB,EAEf2H,GAAyB,CAC3B,CACE,KAAM,GACN,MAAO,EACP,KAAM,KACN,OAAQ,CACV,CACF,EACIC,GAAsB,CACxB,CACE,KAAM,GACN,MAAO,EACP,OAAQ,EACV,CACF,EACIC,GAAsB,SAAUxC,EAAQ,CAC1C,OAAIA,EAAO,MAAQA,EAAO,OACjB,IAAItoB,EACTsoB,EAAO,MAAQA,EAAO,MAAQA,EAAO,QAAU,EAC/CA,EAAO,IACPA,EAAO,OACPA,EAAO,MACT,EACSA,EAAO,MAAQA,EAAO,OACxB,IAAItoB,EACTsoB,EAAO,KACPA,EAAO,KAAOA,EAAO,OAASA,EAAO,OAAS,EAC9CA,EAAO,MACPA,EAAO,KACT,EAEKA,CACT,EACIyC,GAAgB,SAAUjqB,EAAM,CAClC,IAAIrC,EACFqC,EAAK,OAASkqB,GACV,IAAI,MAAMlqB,EAAK,MAAM,OAAS,CAAC,EAAE,KAAK,QAAQ,EAC9CA,EAAK,MACX,OAAOrC,EAAM,SAAW,EAAIqC,EAAK,aAAe,GAAKrC,CACvD,EACIwsB,GAAW,WACXC,GAAQ,QACRF,GAAW,WACXG,GAAc,UACdC,GAAuC,SAAUd,EAAQ,CAC3D1sB,EAAUwtB,EAAuBd,CAAM,EACvC,SAASc,EAAsB5qB,EAAS6qB,EAAO,CAC7C,IAAId,EAAQD,EAAO,KAAK,KAAM9pB,EAAS6qB,CAAK,GAAK,KAyBjD,OAxBAd,EAAM,KAAOc,EAAM,KAAK,YAAY,EACpCd,EAAM,QAAUc,EAAM,QACtBd,EAAM,MAAQQ,GAAcM,CAAK,GAC7Bd,EAAM,OAASU,IAAYV,EAAM,OAASW,MAC5CX,EAAM,OAAO,gBAAkB,WAC/BA,EAAM,OAAO,eACXA,EAAM,OAAO,iBACbA,EAAM,OAAO,kBACbA,EAAM,OAAO,gBACX,WACJA,EAAM,OAAO,eACXA,EAAM,OAAO,iBACbA,EAAM,OAAO,kBACbA,EAAM,OAAO,gBACX,EACJA,EAAM,OAAO,eACXA,EAAM,OAAO,iBACbA,EAAM,OAAO,kBACbA,EAAM,OAAO,gBACX,EACJA,EAAM,OAAO,eAAiB,CAAC,CAAkB,EACjDA,EAAM,OAAO,iBAAmB,CAAC,CAAkB,EACnDA,EAAM,OAASO,GAAoBP,EAAM,MAAM,GAEzCA,EAAM,KAAM,CAClB,KAAKU,GACHV,EAAM,OAAO,qBACXA,EAAM,OAAO,oBACbA,EAAM,OAAO,wBACbA,EAAM,OAAO,uBACXK,GACJ,MACF,KAAKM,GACHX,EAAM,OAAO,qBACXA,EAAM,OAAO,oBACbA,EAAM,OAAO,wBACbA,EAAM,OAAO,uBACXM,GACJ,KACJ,CACA,OAAON,CACT,CACA,OAAOa,CACT,EAAGnI,EAAgB,EAEfqI,GAAwC,SAAUhB,EAAQ,CAC5D1sB,EAAU0tB,EAAwBhB,CAAM,EACxC,SAASgB,EAAuB9qB,EAASqiB,EAAS,CAChD,IAAI0H,EAAQD,EAAO,KAAK,KAAM9pB,EAASqiB,CAAO,GAAK,KAC/C0I,EAAS1I,EAAQ,QAAQA,EAAQ,eAAiB,CAAC,EACvD,OAAA0H,EAAM,MAAQgB,GAASA,EAAO,MAAQ,GAC/BhB,CACT,CACA,OAAOe,CACT,EAAGrI,EAAgB,EAEfuI,GAA0C,SAAUlB,EAAQ,CAC9D1sB,EAAU4tB,EAA0BlB,CAAM,EAC1C,SAASkB,EAAyBhrB,EAASqiB,EAAS,CAClD,IAAI0H,EAAQD,EAAO,KAAK,KAAM9pB,EAASqiB,CAAO,GAAK,KACnD,OAAA0H,EAAM,MAAQ1H,EAAQ,MACf0H,CACT,CACA,OAAOiB,CACT,EAAGvI,EAAgB,EAEfwI,GAAwC,SAAUnB,EAAQ,CAC5D1sB,EAAU6tB,EAAwBnB,CAAM,EACxC,SAASmB,EAAuBjrB,EAASkrB,EAAQ,CAC/C,IAAInB,EAAQD,EAAO,KAAK,KAAM9pB,EAASkrB,CAAM,GAAK,KAClDnB,EAAM,IAAMmB,EAAO,IACnBnB,EAAM,MAAQ,SAASmB,EAAO,MAAO,EAAE,GAAK,EAC5CnB,EAAM,OAAS,SAASmB,EAAO,OAAQ,EAAE,GAAK,EAC9CnB,EAAM,gBAAkBA,EAAM,OAAO,gBACrC,GAAI,CACF,GACEmB,EAAO,eACPA,EAAO,cAAc,UACrBA,EAAO,cAAc,SAAS,gBAC9B,CACAnB,EAAM,KAAOoB,GACXnrB,EACAkrB,EAAO,cAAc,SAAS,eAChC,EAEA,IAAIE,EAA0BF,EAAO,cAAc,SAChD,gBACC9U,GACEpW,EACA,iBAAiBkrB,EAAO,cAAc,SAAS,eAAe,EAC3D,eACL,EACAjW,GAAO,YACPoW,EAAsBH,EAAO,cAAc,SAAS,KACpD9U,GACEpW,EACA,iBAAiBkrB,EAAO,cAAc,SAAS,IAAI,EAChD,eACL,EACAjW,GAAO,YACX8U,EAAM,gBAAkB7U,GAAckW,CAAuB,EACzDlW,GAAcmW,CAAmB,EAC/BtB,EAAM,OAAO,gBACbsB,EACFD,CACN,CACF,OAAS9sB,EAAG,CAAC,CACb,OAAOyrB,CACT,CACA,OAAOkB,CACT,EAAGxI,EAAgB,EAEf6I,GAAc,CAAC,KAAM,KAAM,MAAM,EACjCC,GAAgB,SAAUvrB,EAASM,EAAM0T,EAAQwX,EAAM,CACzD,QACMC,EAAYnrB,EAAK,WAAYorB,EAAW,OAC5CD,EACAA,EAAYC,EAGZ,GADAA,EAAWD,EAAU,YACjBE,GAAWF,CAAS,GAAKA,EAAU,KAAK,KAAK,EAAE,OAAS,EAC1DzX,EAAO,UAAU,KACf,IAAIsV,GAActpB,EAASyrB,EAAWzX,EAAO,MAAM,CACrD,UACS4X,GAAcH,CAAS,EAChC,GAAII,GAAcJ,CAAS,GAAKA,EAAU,cACxCA,EAAU,cAAc,EAAE,QAAQ,SAAUA,EAAW,CACrD,OAAOF,GAAcvrB,EAASyrB,EAAWzX,EAAQwX,CAAI,CACvD,CAAC,MACI,CACL,IAAIM,EAAYC,GAAgB/rB,EAASyrB,CAAS,EAC9CK,EAAU,OAAO,UAAU,IACzBE,GAA2BP,EAAWK,EAAWN,CAAI,EACvDM,EAAU,OAAS,EACVG,GAAuBH,EAAU,MAAM,IAChDA,EAAU,OAAS,GAEjBR,GAAY,QAAQG,EAAU,OAAO,IAAM,KAC7CK,EAAU,OAAS,GAErB9X,EAAO,SAAS,KAAK8X,CAAS,EAC9BL,EAAU,KACNA,EAAU,WACZF,GAAcvrB,EAASyrB,EAAU,WAAYK,EAAWN,CAAI,EAE5D,CAACU,GAAkBT,CAAS,GAC5B,CAACU,GAAaV,CAAS,GACvB,CAACW,GAAgBX,CAAS,GAE1BF,GAAcvrB,EAASyrB,EAAWK,EAAWN,CAAI,EAGvD,CAGN,EACIO,GAAkB,SAAU/rB,EAASqiB,EAAS,CAChD,OAAIgK,GAAehK,CAAO,EACjB,IAAIwH,GAAsB7pB,EAASqiB,CAAO,EAE/CiK,GAAgBjK,CAAO,EAClB,IAAI2H,GAAuBhqB,EAASqiB,CAAO,EAEhD8J,GAAa9J,CAAO,EACf,IAAI4H,GAAoBjqB,EAASqiB,CAAO,EAE7CkK,GAAYlK,CAAO,EACd,IAAI6H,GAAmBlqB,EAASqiB,CAAO,EAE5CmK,GAAYnK,CAAO,EACd,IAAI8H,GAAmBnqB,EAASqiB,CAAO,EAE5CoK,GAAepK,CAAO,EACjB,IAAIuI,GAAsB5qB,EAASqiB,CAAO,EAE/C+J,GAAgB/J,CAAO,EAClB,IAAIyI,GAAuB9qB,EAASqiB,CAAO,EAEhD6J,GAAkB7J,CAAO,EACpB,IAAI2I,GAAyBhrB,EAASqiB,CAAO,EAElDqK,GAAgBrK,CAAO,EAClB,IAAI4I,GAAuBjrB,EAASqiB,CAAO,EAE7C,IAAII,GAAiBziB,EAASqiB,CAAO,CAC9C,EACI8I,GAAY,SAAUnrB,EAASqiB,EAAS,CAC1C,IAAIyJ,EAAYC,GAAgB/rB,EAASqiB,CAAO,EAChD,OAAAyJ,EAAU,OAAS,EACnBP,GAAcvrB,EAASqiB,EAASyJ,EAAWA,CAAS,EAC7CA,CACT,EACIE,GAA6B,SAAU1rB,EAAMwrB,EAAWN,EAAM,CAChE,OACEM,EAAU,OAAO,uBAAuB,GACxCA,EAAU,OAAO,QAAU,GAC3BA,EAAU,OAAO,cAAc,GAC9Ba,GAAcrsB,CAAI,GAAKkrB,EAAK,OAAO,cAAc,CAEtD,EACIS,GAAyB,SAAUjE,EAAQ,CAC7C,OAAOA,EAAO,aAAa,GAAKA,EAAO,WAAW,CACpD,EACI2D,GAAa,SAAUrrB,EAAM,CAC/B,OAAOA,EAAK,WAAa,KAAK,SAChC,EACIsrB,GAAgB,SAAUtrB,EAAM,CAClC,OAAOA,EAAK,WAAa,KAAK,YAChC,EACIoiB,GAAoB,SAAUpiB,EAAM,CACtC,OACEsrB,GAActrB,CAAI,GAClB,OAAOA,EAAK,OAAU,aACtB,CAACssB,GAAiBtsB,CAAI,CAE1B,EACIssB,GAAmB,SAAUvK,EAAS,CACxC,OAAO,OAAOA,EAAQ,WAAc,QACtC,EACIkK,GAAc,SAAUjsB,EAAM,CAChC,OAAOA,EAAK,UAAY,IAC1B,EACIksB,GAAc,SAAUlsB,EAAM,CAChC,OAAOA,EAAK,UAAY,IAC1B,EACImsB,GAAiB,SAAUnsB,EAAM,CACnC,OAAOA,EAAK,UAAY,OAC1B,EACIusB,GAAgB,SAAUvsB,EAAM,CAClC,OAAOA,EAAK,UAAY,MAC1B,EACI6rB,GAAe,SAAU7rB,EAAM,CACjC,OAAOA,EAAK,UAAY,KAC1B,EACIqsB,GAAgB,SAAUrsB,EAAM,CAClC,OAAOA,EAAK,UAAY,MAC1B,EACIgsB,GAAkB,SAAUhsB,EAAM,CACpC,OAAOA,EAAK,UAAY,QAC1B,EACIwsB,GAAiB,SAAUxsB,EAAM,CACnC,OAAOA,EAAK,UAAY,OAC1B,EACI+rB,GAAiB,SAAU/rB,EAAM,CACnC,OAAOA,EAAK,UAAY,KAC1B,EACIosB,GAAkB,SAAUpsB,EAAM,CACpC,OAAOA,EAAK,UAAY,QAC1B,EACIysB,GAAiB,SAAUzsB,EAAM,CACnC,OAAOA,EAAK,UAAY,OAC1B,EACI0sB,GAAkB,SAAU1sB,EAAM,CACpC,OAAOA,EAAK,UAAY,QAC1B,EACI4rB,GAAoB,SAAU5rB,EAAM,CACtC,OAAOA,EAAK,UAAY,UAC1B,EACI8rB,GAAkB,SAAU9rB,EAAM,CACpC,OAAOA,EAAK,UAAY,QAC1B,EACIurB,GAAgB,SAAUvrB,EAAM,CAClC,OAAOA,EAAK,UAAY,MAC1B,EAEI2sB,GAAkB,SAAU3sB,EAAM,CACpC,OAAOA,EAAK,QAAQ,QAAQ,GAAG,EAAI,CACrC,EAEI4sB,GAA8B,UAAY,CAC5C,SAASA,GAAe,CACtB,KAAK,SAAW,CAAC,CACnB,CACA,OAAAA,EAAa,UAAU,gBAAkB,SAAUC,EAAM,CACvD,IAAI5M,EAAU,KAAK,SAAS4M,CAAI,EAChC,OAAI5M,GAAWA,EAAQ,OACdA,EAAQA,EAAQ,OAAS,CAAC,EAE5B,CACT,EACA2M,EAAa,UAAU,iBAAmB,SAAUC,EAAM,CACxD,IAAI5M,EAAU,KAAK,SAAS4M,CAAI,EAChC,OAAO5M,GAAoB,CAAC,CAC9B,EACA2M,EAAa,UAAU,IAAM,SAAUE,EAAU,CAC/C,IAAIrD,EAAQ,KACZqD,EAAS,QAAQ,SAAU7M,EAAS,CAClC,OAAOwJ,EAAM,SAASxJ,CAAO,EAAE,IAAI,CACrC,CAAC,CACH,EACA2M,EAAa,UAAU,MAAQ,SAAUnR,EAAO,CAC9C,IAAIgO,EAAQ,KACR3J,EAAmBrE,EAAM,iBACzB0E,EAAe1E,EAAM,aACrBsR,EAAW,GACXjN,IAAqB,MACvBA,EAAiB,QAAQ,SAAUkN,EAAO,CACxC,IAAI/M,EAAUwJ,EAAM,SAASuD,EAAM,OAAO,EACtC/M,GAAW+M,EAAM,YAAc,IACjCD,EAAW,GACN9M,EAAQ,QACXA,EAAQ,KAAK,CAAC,EAEhBA,EAAQ,KAAK,IAAI,EAAGA,EAAQ,OAAS,CAAC,CAAC,GAAK+M,EAAM,UAEtD,CAAC,EAEH,IAAIC,EAAe,CAAC,EACpB,OAAIF,GACF5M,EAAa,QAAQ,SAAU6M,EAAO,CACpC,IAAI/M,EAAUwJ,EAAM,SAASuD,EAAM,OAAO,EAC1CC,EAAa,KAAKD,EAAM,OAAO,EAC1B/M,IACHA,EAAUwJ,EAAM,SAASuD,EAAM,OAAO,EAAI,CAAC,GAE7C/M,EAAQ,KAAK+M,EAAM,KAAK,CAC1B,CAAC,EAEIC,CACT,EACOL,CACT,EAAG,EACCM,GAAc,CAChB,SAAU,CAAC,IAAM,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,CAAC,EAC/D,OAAQ,CACN,IACA,KACA,IACA,KACA,IACA,KACA,IACA,KACA,IACA,KACA,IACA,KACA,GACF,CACF,EACIC,GAAW,CACb,SAAU,CACR,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAK,IAAK,IAAK,IACrE,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EACtE,EAAG,EAAG,EAAG,EAAG,CACd,EACA,OAAQ,CACN,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACF,CACF,EACIC,GAAS,CACX,SAAU,CACR,IAAO,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAK,IAClE,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EACxE,EAAG,EAAG,EAAG,EAAG,EAAG,CACjB,EACA,OAAQ,CACN,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACF,CACF,EACIC,GAAW,CACb,SAAU,CACR,IAAO,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAK,IAClE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EACvE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CACvB,EACA,OAAQ,CACN,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACF,CACF,EACIC,GAAwB,SAC1B3vB,EACA4vB,EACAnY,EACAoY,EACAC,EACAC,EACA,CACA,OAAI/vB,EAAQ4vB,GAAO5vB,EAAQyX,EAClBuY,GAAkBhwB,EAAO8vB,EAAUC,EAAO,OAAS,CAAC,EAG3DF,EAAQ,SAAS,OAAO,SAAUI,EAAQC,EAASjtB,EAAO,CACxD,KAAOjD,GAASkwB,GACdlwB,GAASkwB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A,GACA0xB,CACF,EACF,IAAK,IACL,IAAK,IACH,OAAO/B,GACL3vB,EACA,EACA,KACAwvB,GACA,EACAkC,CACF,EACF,IAAK,IACH,OAAO/B,GACL3vB,EACA,EACA,KACAwvB,GACA,EACAkC,CACF,EAAE,YAAY,EAChB,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACL,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOhB,GACL1wB,EACA,2EACA2xB,CACF,EACF,IAAK,IACH,OAAOjB,GACL1wB,EACA,+DACA2xB,CACF,EACF,IAAK,IACL,IAAK,IACH,OAAOZ,GACL/wB,EACA,+DACAqxB,GACA,SACAM,EACAf,GACEC,GACAC,EACJ,EACF,IAAK,IACH,OAAOC,GACL/wB,EACA,+DACAsxB,GACA,SACAK,EACAhB,GACEC,GACAC,GACAC,EACJ,EACF,IAAK,IACH,OAAOC,GACL/wB,EACA,+DACAqxB,GACA,SACAM,EACAf,GACEC,GACAC,EACJ,EACF,IAAK,IACH,OAAOC,GACL/wB,EACA,+DACAsxB,GACA,SACAK,EACAhB,GACEC,GACAC,GACAC,EACJ,EACF,IAAK,IACH,OAAOC,GACL/wB,EACA,+DACA,2BACAuxB,GACAI,EACA,CACF,EACF,IAAK,IACH,OAAOZ,GACL/wB,EACA,+DACA,2BACAuxB,GACAI,EACAhB,GAAYC,GAAuBC,EACrC,EACF,IAAK,IACH,OAAOE,GACL/wB,EACA,+DACA,2BACAwxB,GACAI,EACAjB,GAAYC,GAAuBC,EACrC,EACF,IAAK,IACH,OAAOE,GACL/wB,EACA,+DACA,2BACAwxB,GACAI,EACA,CACF,EACF,IAAK,IACH,OAAOb,GACL/wB,EACA,+DACA,qBACAwxB,GACAI,EACAjB,GAAYC,GAAuBC,EACrC,EACF,IAAK,IACH,OAAON,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAO/B,GACL3vB,EACA,EACA,MACA0vB,GACA,EACAgC,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAO/B,GACL3vB,EACA,EACA,MACAyvB,GACA,EACAiC,CACF,EACF,IAAK,IACH,OAAOhB,GACL1wB,EACA,kSACF,EACF,IAAK,IACH,OAAO0wB,GACL1wB,EACA,4RACF,EACF,IAAK,IACH,OAAOuwB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOhB,GACL1wB,EACA,mSACA2xB,CACF,EACF,IAAK,IACH,OAAOjB,GACL1wB,EACA,6RACA2xB,CACF,EACF,IAAK,IACH,OAAOpB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,IACH,OAAOnB,GACLvwB,EACA,KACA,KACA,GACA0xB,CACF,EACF,IAAK,GACL,QACE,OAAOnB,GAA4BvwB,EAAO,GAAI,GAAI,GAAM0xB,CAAa,CACzE,CACF,EAEII,GAAmB,6BACnBC,GAAgC,UAAY,CAC9C,SAASA,EAAehwB,EAASqiB,EAAS3Y,EAAS,CAOjD,GANA,KAAK,QAAU1J,EACf,KAAK,QAAU0J,EACf,KAAK,iBAAmB,CAAC,EACzB,KAAK,iBAAmB2Y,EACxB,KAAK,S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","names":["getLocalStorage","key","extract_key","resolve","result","setLocalStorage","value","deleteLocalStorage","keys","init_storage_helpers","__esmMin","getOrGenerateIdentifier","configuration_key","__async","resolve","getLocalStorage","result","generateIdentifier","identifier","just_update_key","previous_identifier","random_string","generateRandomString","setLocalStorage","length","getIdentifier","getExtensionIdentifier","error","getExtensionName","init_identity_helpers","__esmMin","init_storage_helpers","sendMessageToContentScript","tabId","message","__async","resolve","response","e","sendMessageToBackground","init_messaging_helpers","__esmMin","Logger","init_logger","__esmMin","message","optionalParams","VERSION","DATA_ID_IFRAME","DATA_ID_IFRAME_BATCH","DATA_ID_STRING","CEREAL_FRAME_ID","MAX_DAILY_RATE","BADGE_COLOR","SW_PING_INTERVAL","REFRESH_INTERVAL","SPEED_REFRESH_INTERVAL","init_constants","__esmMin","disableXFrameHeaders","hostname","skipHeaders","res","ruleId","getRuleIdFromHostname","shouldDelegateDNR","delegate","sendMessageToBackground","enableXFrameHeaders","fixImageRenderHTMLVisualizer","rule","Logger","resetImageRenderHTMLVisualizer","disableHeadersForPOST","enableHeadersForPOST","resolve","rules","error","init_dnr_helpers","__esmMin","init_messaging_helpers","init_constants","init_logger","getSharedMemoryDOM","key","resolve","hiddenInput","setSharedMemoryBCK","tabId","__async","res","getSharedMemoryBCK","tabs","numTabs","numTabsChecked","mllwtlFramePresent","i","sendMessageToContentScript","response","init_shared_memory","__esmMin","init_messaging_helpers","addToRequestInfoStorage","record","res","result","records","recordExists","i","Logger","e","deleteFromRequestInfoStorage","recordID","newRecords","getFromRequestInfoStorage","init_request_info_helpers","__esmMin","init_logger","saveTriggerTimestamp","__async","timestamp","saved","setLocalStorage","TRIGGER_TIMESTAMP_KEY","Logger","error","getTriggerTimestamp","getLocalStorage","shouldResetTriggers","lastTimestamp","elapsed","shouldReset","MINIMUM_RESET_INTERVAL","waitForResetInterval","resolve","checkAndResolve","RETRY_INTERVAL","init_trigger_storage","__esmMin","init_logger","init_storage_helpers","sendToBackgroundToSeeIfTriggersDownload","url","triggersDownload","skipCheck","requestID","__async","res","sendMessageToBackground","response","seeIfTriggersDownload","recordID","rulesToApply","urlCondition","fetchAndProcessHeaders","result","Logger","isPDF","statusCode","isOfficeDoc","addToRequestInfoStorage","saveTriggerTimestamp","error","resetTriggersDownload","shouldDelegateDNR","delegate","_a","contentType","isOfficeDocument","removeContentDisposition","modifyContentType","valueToModifyContentTypeTo","contentDisposition","contentDispositionLower","fileType","skipTypes","fixApplication","fixImage","type","init_triggers_download_helpers","__esmMin","init_logger","init_constants","init_dnr_helpers","init_messaging_helpers","init_request_info_helpers","init_trigger_storage","getFrameCount","BATCH_execution","DATA_ID_IFRAME_BATCH","DATA_ID_IFRAME","openPopupWindow","url","title","w","h","resolve","left","top","detectBrowser","userAgent","isInSW","rules","error","getManifestVersion","init_utils","__esmMin","init_constants","tellToDeleteIframe","recordID","BATCH_execution","delayBetweenExecutions","resolve","__async","Logger","isInSW","tabs","_a","i","sendMessageToContentScript","sendMessageToBackground","response","e","init_message_background","__esmMin","init_messaging_helpers","init_logger","init_utils","handlePostRequest","method_endpoint","method_payload","method_headers","fastLane","orgId","recordID","htmlVisualizer","htmlContained","removeImages","removeCSSselectors","classNamesToBeRemoved","htmlTransformer","BATCH_execution","batch_id","actions","delayBetweenExecutions","openTab","openTabOnlyIfMust","saveHtml","saveMarkdown","cerealObject","refPolicy","res","__async","disableHeadersForPOST","requestOptions","e","statusCode","response","html_or_json","saveJSON","tellToDeleteIframe","_","Logger","addToRequestInfoStorage","tabs","i","sendMessageToContentScript","error","json","endpoint","targetUrl","enableHeadersForPOST","data","init_post_helpers","__esmMin","init_logger","init_dnr_helpers","init_messaging_helpers","init_request_info_helpers","init_message_background","shouldDelegateTabsAPI","resolve","tabs","error","Logger","init_tabs_helpers","__esmMin","init_logger","setAlreadyOpened","optInOrUpdate","__async","resolve","setLocalStorage","optInOpenedKey","updateOpenedKey","getAlreadyOpened","optIn","getLocalStorage","result","opened","generateAndOpenOptInLink","shouldDelegateTabsAPI","link","sendMessageToBackground","extension_id","getExtensionIdentifier","getIdentifier","deviceId","configuration_key","BASE_LINK_OPT_IN","detectBrowser","generateAndOpenUpdateLink","BASE_LINK_UPDATE","tab","generateOptInLink","generateUpdateLink","generateSettingsLink","BASE_LINK_SETTING","openUserSettingsInPopupWindow","userSettingsLink","Logger","openPopupWindow","generateAndOpenFeedbackLink","BASE_LINK_FEEDBACK","generateFeedbackLink","BASE_DOMAIN","init_generate_links","__esmMin","init_identity_helpers","init_storage_helpers","init_tabs_helpers","init_messaging_helpers","init_utils","init_logger","MeasureConnectionSpeed","resolve","__async","savedSpeedTestResults","getSavedSpeedTestResults","speedMbps","speedTestTimestamp","didSpeedTestExpire","Logger","shouldRerouteToBackground","reroute","sendMessageToBackground","response","saveSpeedTestResults","speedTest","SpeedTest","results","bandwidth","timestamp","setLocalStorage","getLocalStorage","SPEED_REFRESH_INTERVAL","getEffectiveConnectionType","error","import_speedtest","HIGH_BANDWIDTH_CONNECTION_TYPES","init_measure_connection_speed","__esmMin","init_logger","init_messaging_helpers","init_listener_helpers_SW","init_storage_helpers","init_constants","putHTMLToSigned","htmlURL_signed","content","resolve","response","data","Logger","putMarkdownToSigned","markdownURL_signed","markDown","putHTMLVisualizerToSigned","htmlVisualizerURL_signed","base64image","byteCharacters","byteNumbers","i","byteArray","putHTMLContainedToSigned","htmlContainedURL_signed","htmlContainedString","init_put_to_signed","__esmMin","init_logger","getIfCurrentlyActiveBCK","__async","res","tabs","numTabs","numTabsChecked","mllwtlFramePresent","i","sendMessageToContentScript","response","getIfCurrentlyActiveDOM","resolve","frame","DATA_ID_STRING","init_elements_utils","__esmMin","init_messaging_helpers","init_constants","getBadgeProperties","resolve","sendMessageToBackground","response","text","textColor","backgroundColor","Logger","restoreBadgeProperties","getLocalStorage","error","showBadge","__async","setLocalStorage","BADGE_COLOR","hideBadge","shouldShowBadge","result","showBadgeIfShould","hideBadgeIfShould","setShouldShowBadge","unsetShouldShowBadge","init_badge_settings","__esmMin","init_storage_helpers","init_logger","init_constants","init_messaging_helpers","handleGetRequest","method_endpoint","method_headers","fastLane","orgId","recordID","htmlVisualizer","htmlContained","removeImages","removeCSSselectors","classNamesToBeRemoved","htmlTransformer","BATCH_execution","batch_id","actions","delayBetweenExecutions","openTab","openTabOnlyIfMust","saveHtml","saveMarkdown","cerealObject","refPolicy","res","__async","disableHeadersForPOST","requestOptions","e","statusCode","response","html_or_json","saveJSON","tellToDeleteIframe","_","Logger","addToRequestInfoStorage","tabs","i","sendMessageToContentScript","enableHeadersForPOST","error","init_get_helpers","__esmMin","init_logger","init_dnr_helpers","init_messaging_helpers","init_post_helpers","init_request_info_helpers","init_message_background","testCSP","onload_callback","img","removeCSPTestImage","isCSPEnabled","resolve","e","init_test_csp","__esmMin","insertInQueue","dataPacket","BATCH_execution","__async","resolve","queueKey","getLocalStorage","result","queue","Logger","setLocalStorage","getLastFromQueue","last","init_queue_crawl","__esmMin","init_storage_helpers","init_logger","init_constants","insertIFrame","url","id","onload","data_id","should_sandbox","sandbox_attributes","htmlVisualizer","htmlContained","screenWidth","screenHeight","eventData","pascoli","refPolicy","__async","iframe","pascoliIframe","htmlFileNamePath","getLocalStorage","Logger","contentWindow","div","DATA_ID_IFRAME","showBadgeIfShould","inIframe","e","init_iframe_helpers","__esmMin","init_badge_settings","init_constants","init_storage_helpers","init_logger","addToRequestMessageStorage","record","res","result","records","recordExists","i","e","Logger","deleteFromRequestMessageStorage","recordID","newRecords","getFromRequestMessageStorage","init_request_message_helpers","__esmMin","init_logger","cerealMain","cerealObject","recordID","htmlString","resolve","__async","Logger","maxTimeout","timeoutPromise","timeoutResolve","mainLogic","_a","inSW","isInSW","storedTab","getLocalStorage","targetTabId","currentTabId","tabExists","tab","e","tabs","response","sendMessageToContentScript","setLocalStorage","resultReceived","innerResolve","result","refreshCereal","res","init_cereal_index","__esmMin","init_storage_helpers","init_logger","init_utils","init_messaging_helpers","save_crawl_exports","__export","saveCrawl","recordID","content","markDown","fastLane","url","htmlTransformer","orgId","saveText","saveHtml","saveMarkdown","BATCH_execution","batch_id","website_unreachable","delayBetweenExecutions","openTabOnlyIfMust","cerealObject","__async","Logger","cereal_result","cerealMain","e","getIdentifier","node_identifier","requestMessageInfo","getFromRequestMessageStorage","endpoint","moreInfo","getFromRequestInfoStorage","bodyData","requestOptions","response","data","tellToDeleteIframe","error","init_save_crawl","__esmMin","init_message_background","init_identity_helpers","init_logger","init_request_info_helpers","init_request_message_helpers","init_cereal_index","fromDataPacketToNecessaryElements","dataPacket","Logger","fastLane","orgId","recordID","url","waitBeforeScraping","saveHtml","saveMarkdown","removeCSSselectors","classNamesToBeRemoved","waitForElement","waitForElementTime","removeImages","htmlTransformer","isPDF","saveText","shouldSandbox","sandBoxAttributes","triggersDownload","skipHeaders","fetchInstead","htmlVisualizer","htmlContained","screenWidth","screenHeight","method","POST_request","GET_request","methodEndpoint","methodPayload","methodHeaders","actions","openTab","openTabOnlyIfMust","pascoli","cerealObject","refPolicy","rawData","preProcessCrawl","BATCH_execution","batch_id","parallelExecutionsBatch","delayBetweenExecutions","__async","promiseArray","dataPacketArray","index_to_arrive","i","crawlP2P","eventData","dataToBeQueued","insertInQueue","preProcessUrl","urlObj","params","hostname","resolve","url_to_crawl","skipCheck","disableXFrameHeaders","sendToBackgroundToSeeIfTriggersDownload","getFrameCount","proceedWithActivation","breakLoop","sendMessageToBackground","safeToProceed","setLifespanForIframe","browser","detectBrowser","current_url","url_to_load","moreInfo","getFromRequestInfoStorage","insertIFrame","_a","_b","iframe","DATA_ID_IFRAME_BATCH","DATA_ID_IFRAME","saveCrawl","iFrameReplied","event","timer","__spreadProps","__spreadValues","init_execute_crawl","__esmMin","init_constants","init_queue_crawl","init_reset_crawl","init_dnr_helpers","init_utils","init_iframe_helpers","init_triggers_download_helpers","init_logger","init_messaging_helpers","init_save_crawl","init_request_info_helpers","resetAfterCrawl","recordID","BATCH_execution","delayBetweenExecutions","__async","resolve","isInSW","Logger","tabs","_a","i","sendMessageToContentScript","deleteFromRequestInfoStorage","deleteFromRequestMessageStorage","dataPacket","getLastFromQueue","frameCount","getFrameCount","proceedWithActivation","frameCountOther","frameCountTotal","enableXFrameHeaders","waitForResetInterval","resetTriggersDownload","setLifespanForIframe","waitBeforeScraping","iframe","dataId","divIframe","DATA_ID_IFRAME","hideBadgeIfShould","init_reset_crawl","__esmMin","init_queue_crawl","init_constants","init_execute_crawl","init_utils","init_dnr_helpers","init_logger","init_triggers_download_helpers","init_badge_settings","init_request_info_helpers","init_request_message_helpers","init_messaging_helpers","init_trigger_storage","initCerealFrame","cerealObject","resolve","Logger","frame","CEREAL_FRAME_ID","config","timeoutId","error","init_cereal_utils","__esmMin","init_logger","init_constants","getSelectorInfo","string_selector","replaceQuotes","string","classNumber","waitForElementDynamicSelector","dSelectorToUse","selectorId","index","timeout","resolve","reject","timer","checkElement","elements","observer","init_evaluate_selector","__esmMin","isPdfEmbedElementPresent","embedElements","i","init_check_pdf","__esmMin","dom_processing_exports","__export","get_document_html","removeElementIfPresent","removeElementsByClassNames","removeImagesDOM","removeSelectorsFromDocument","document","selectorsToRemove","defaultSelectorsToRemove","selector","element","classNamesToBeRemoved","i","className","elements","elementsArray","j","sep","html","xml","n","img","_a","e","init_dom_processing","__esmMin","turndown_exports","__export","TurndownService","init_turndown","__esmMin","extend","destination","i","source","key","repeat","character","count","trimLeadingNewlines","string","trimTrailingNewlines","indexEnd","blockElements","isBlock","node","is","voidElements","isVoid","hasVoid","has","meaningfulWhenBlankElements","isMeaningfulWhenBlank","hasMeaningfulWhenBlank","tagNames","tagName","rules","content","options","hLevel","underline","parent","prefix","start","index","className","language","code","fenceChar","fenceSize","fenceInCodeRegex","match","fence","href","title","cleanAttribute","replacement","reference","id","references","hasSiblings","isCodeBlock","extraSpace","delimiter","matches","alt","src","titlePart","attribute","Rules","rule","filter","findRule","fn","filterValue","collapseWhitespace","element","isPre","prevText","keepLeadingWs","prev","next","text","remove","nextNode","current","root","canParseHTMLNatively","Parser","canParse","e","createHTMLParser","shouldUseActiveX","doc","useActiveX","HTMLParser","RootNode","input","htmlParser","isPreOrCode","_htmlParser","Node","isBlank","flankingWhitespace","edges","edgeWhitespace","isFlankedByWhitespace","m","side","sibling","regExp","isFlanked","reduce","escapes","defaults","canConvert","output","process","postProcess","plugin","accumulator","escape","parentNode","self","replacementForNode","join","whitespace","s1","s2","nls","separator","pdf_getter_exports","__export","extractTextFromPDF","pdfUrl","rawData","resolve","reject","__async","response","arrayBuffer","bytes","binary","i","base64String","PDFJSWorker","pdf","textArray","processPage","pageNum","stringToResolve","page","textContent","item","error","Logger","PDFJS","init_pdf_getter","__esmMin","init_logger","htmlVisualizer","init_htmlVisualizer","__esmMin","extendStatics","d","b","p","__extends","__","__assign","t","s","i","n","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","f","y","g","verb","v","op","__spreadArray","to","from","pack","l","ar","Bounds","left","top","width","height","x","w","h","context","clientRect","domRectList","domRect","rect","parseBounds","node","parseDocumentSize","document","documentElement","toCodePoints$1","str","codePoints","length","extra","fromCodePoint$1","_i","codeUnits","index","codePoint","chars$2","lookup$2","i$2","chars$1$1","lookup$1$1","i$1$1","decode$1","base64","bufferLength","len","encoded1","encoded2","encoded3","encoded4","buffer","bytes","polyUint16Array$1","polyUint32Array$1","UTRIE2_SHIFT_2$1","UTRIE2_SHIFT_1$1","UTRIE2_INDEX_SHIFT$1","UTRIE2_SHIFT_1_2$1","UTRIE2_LSCP_INDEX_2_OFFSET$1","UTRIE2_DATA_BLOCK_LENGTH$1","UTRIE2_DATA_MASK$1","UTRIE2_LSCP_INDEX_2_LENGTH$1","UTRIE2_INDEX_2_BMP_LENGTH$1","UTRIE2_UTF8_2B_INDEX_2_OFFSET$1","UTRIE2_UTF8_2B_INDEX_2_LENGTH$1","UTRIE2_INDEX_1_OFFSET$1","UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1","UTRIE2_INDEX_2_BLOCK_LENGTH$1","UTRIE2_INDEX_2_MASK$1","slice16$1","view","start","end","slice32$1","createTrieFromBase64$1","_byteLength","view32","view16","headerLength","data","Trie$1","Trie","initialValue","errorValue","highStart","highValueIndex","ix","chars$3","lookup$3","i$3","base64$1","LETTER_NUMBER_MODIFIER","BK","CR$1","LF$1","CM","NL","WJ","ZW","GL","SP","ZWJ$1","B2","BA","BB","HY","CB","CL","CP","EX","IN","NS","OP","QU","IS","NU","PO","PR","SY","AI","AL","CJ","EB","EM","H2","H3","HL","ID","JL","JV","JT","RI$1","SA","XX","ea_OP","BREAK_MANDATORY","BREAK_NOT_ALLOWED$1","BREAK_ALLOWED$1","UnicodeTrie$1","ALPHABETICS","HARD_LINE_BREAKS","SPACE$1","PREFIX_POSTFIX","LINE_BREAKS","KOREAN_SYLLABLE_BLOCK","HYPHEN","codePointsToCharacterClasses","lineBreak","types","indices","categories","classType","prev","isAdjacentWithSpaceIgnored","a","currentIndex","classTypes","current","next","previousNonSpaceClassType","type","_lineBreakAtIndex","indicies","forbiddenBreaks","beforeIndex","afterIndex","before","prevIndex","count","cssFormattedClasses","options","_a","isLetterNumber","forbiddenBreakpoints","letterNumber","Break","LineBreaker","lastEnd","nextIndex","FLAG_UNRESTRICTED","FLAG_ID","FLAG_INTEGER","FLAG_NUMBER","LINE_FEED","SOLIDUS","REVERSE_SOLIDUS","CHARACTER_TABULATION","SPACE","QUOTATION_MARK","EQUALS_SIGN","NUMBER_SIGN","DOLLAR_SIGN","PERCENTAGE_SIGN","APOSTROPHE","LEFT_PARENTHESIS","RIGHT_PARENTHESIS","LOW_LINE","HYPHEN_MINUS","EXCLAMATION_MARK","LESS_THAN_SIGN","GREATER_THAN_SIGN","COMMERCIAL_AT","LEFT_SQUARE_BRACKET","RIGHT_SQUARE_BRACKET","CIRCUMFLEX_ACCENT","LEFT_CURLY_BRACKET","QUESTION_MARK","RIGHT_CURLY_BRACKET","VERTICAL_LINE","TILDE","CONTROL","REPLACEMENT_CHARACTER","ASTERISK","PLUS_SIGN","COMMA","COLON","SEMICOLON","FULL_STOP","NULL","BACKSPACE","LINE_TABULATION","SHIFT_OUT","INFORMATION_SEPARATOR_ONE","DELETE","EOF","ZERO","u","z","A","E","F","U","Z","isDigit","isSurrogateCodePoint","isHex","isLowerCaseLetter","isUpperCaseLetter","isLetter","isNonASCIICodePoint","isWhiteSpace","isNameStartCodePoint","isNameCodePoint","isNonPrintableCodePoint","isValidEscape","c1","c2","isIdentifierStart","c3","isNumberStart","stringToNumber","c","sign","integers","int","fraction","fracd","frac","expsign","exponent","exp","LEFT_PARENTHESIS_TOKEN","RIGHT_PARENTHESIS_TOKEN","COMMA_TOKEN","SUFFIX_MATCH_TOKEN","PREFIX_MATCH_TOKEN","COLUMN_TOKEN","DASH_MATCH_TOKEN","INCLUDE_MATCH_TOKEN","LEFT_CURLY_BRACKET_TOKEN","RIGHT_CURLY_BRACKET_TOKEN","SUBSTRING_MATCH_TOKEN","BAD_URL_TOKEN","BAD_STRING_TOKEN","CDO_TOKEN","CDC_TOKEN","COLON_TOKEN","SEMICOLON_TOKEN","LEFT_SQUARE_BRACKET_TOKEN","RIGHT_SQUARE_BRACKET_TOKEN","WHITESPACE_TOKEN","EOF_TOKEN","Tokenizer","chunk","tokens","token","flags","e1","e2","e3","a1","a2","a3","u1","u2","delta","digits","questionMarks","start_1","digit","endDigits","stringToken","SLICE_STACK_SIZE","amount","endingCodePoint","repr","number","unit","hex","hexCodePoint","Parser","tokenizer","values","block","isEndingTokenFor","functionToken","cssFunction","isDimensionToken","isNumberToken","isIdentToken","isStringToken","isIdentWithValue","nonWhiteSpace","nonFunctionArgSeparator","parseFunctionArgs","args","arg","isLength","isLengthPercentage","parseLengthPercentageTuple","ZERO_LENGTH","FIFTY_PERCENT","HUNDRED_PERCENT","getAbsoluteValueForTuple","tuple","getAbsoluteValue","parent","DEG","GRAD","RAD","TURN","angle","_context","isAngle","parseNamedSide","sideOrCorner","ident","deg","color$1","colorFunction","SUPPORTED_COLOR_FUNCTIONS","r","namedColor","COLORS","isTransparent","color","asString","alpha","blue","green","red","getTokenColorValue","max","rgb","_b","hue2rgb","t1","t2","hue","hsl","saturation","lightness","parseColor","backgroundClip","backgroundColor","parseColorStop","stop","processColorStops","stops","lineLength","first","last","processStops","previous","stop_1","absoluteValue","gapBegin","stop_2","gapLength","beforeGap","gapValue","getAngleFromCorner","corner","centerX","centerY","calculateGradientDirection","radian","halfWidth","halfHeight","halfLineLength","yDiff","xDiff","distance","findCorner","closest","corners","stat","cx","cy","calculateRadius","gradient","rx","ry","linearGradient","angle$1","firstToken","colorStop","prefixLinearGradient","webkitGradient","shape","size","position","CLOSEST_SIDE","FARTHEST_SIDE","CLOSEST_CORNER","FARTHEST_CORNER","CIRCLE","ELLIPSE","COVER","CONTAIN","radialGradient","isColorStop","isAtPosition_1","acc","prefixRadialGradient","isLinearGradient","background","isRadialGradient","image","image_1","imageFunction","SUPPORTED_IMAGE_FUNCTIONS","isSupportedImage","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","parseBackgroundRepeat","BACKGROUND_SIZE","backgroundSize","isBackgroundSizeInfoToken","borderColorForSide","side","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadiusForSide","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderStyleForSide","style","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderWidthForSide","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","direction","display","bit","parseDisplayValue","float","letterSpacing","LINE_BREAK","lineHeight","computeLineHeight","fontSize","listStyleImage","listStylePosition","listStyleType","marginForSide","marginTop","marginRight","marginBottom","marginLeft","overflow","overflowWrap","paddingForSide","paddingTop","paddingRight","paddingBottom","paddingLeft","textAlign","textShadow","shadow","textTransform","transform$1","transformFunction","SUPPORTED_TRANSFORM_FUNCTIONS","matrix","matrix3d","b1","b2","a4","b4","DEFAULT_VALUE","DEFAULT","transformOrigin","origins","visibility","WORD_BREAK","wordBreak","zIndex","time","opacity","textDecorationColor","textDecorationLine","line","fontFamily","accumulator","results","fontWeight","fontVariant","fontStyle","contains","content","counterIncrement","increments","filtered","counter","increment","counterReset","resets","reset","duration","quotes","open_1","close_1","getQuote","depth","open","quote","boxShadow","paintOrder","layers","webkitTextStrokeColor","webkitTextStrokeWidth","CSSParsedDeclaration","declaration","parse","overflowTuple","CSSParsedPseudoDeclaration","CSSParsedCounterDeclaration","descriptor","parser","length_1","value_1","elementDebuggerAttribute","getElementDebugType","element","attribute","isDebugging","elementType","ElementContainer","isHTMLElementNode","chars$1","lookup$1","i$1","decode","polyUint16Array","polyUint32Array","UTRIE2_SHIFT_2","UTRIE2_SHIFT_1","UTRIE2_INDEX_SHIFT","UTRIE2_SHIFT_1_2","UTRIE2_LSCP_INDEX_2_OFFSET","UTRIE2_DATA_BLOCK_LENGTH","UTRIE2_DATA_MASK","UTRIE2_LSCP_INDEX_2_LENGTH","UTRIE2_INDEX_2_BMP_LENGTH","UTRIE2_UTF8_2B_INDEX_2_OFFSET","UTRIE2_UTF8_2B_INDEX_2_LENGTH","UTRIE2_INDEX_1_OFFSET","UTRIE2_OMITTED_BMP_INDEX_1_LENGTH","UTRIE2_INDEX_2_BLOCK_LENGTH","UTRIE2_INDEX_2_MASK","slice16","slice32","createTrieFromBase64","chars","lookup","Prepend","CR","LF","Control","Extend","SpacingMark","L","V","T","LV","LVT","ZWJ","Extended_Pictographic","RI","toCodePoints","fromCodePoint","UnicodeTrie","BREAK_NOT_ALLOWED","BREAK_ALLOWED","codePointToClass","_graphemeBreakAtIndex","_codePoints","countRI","GraphemeBreaker","graphemeBreak","splitGraphemes","breaker","graphemes","bk","testRangeBounds","TEST_HEIGHT","range","testElement","rangeBounds","rangeHeight","testIOSLineBreak","textList","offset","supports","text","boundAhead","testCORS","testResponseType","testSVG","img","canvas","ctx","isGreenPixel","testForeignObject","greenImageSrc","svg","createForeignObjectSVG","loadSerializedSVG$1","xmlns","foreignObject","FEATURES","TextBounds","bounds","parseTextBounds","styles","breakText","textBounds","clientRects","createRange","subSegments","segmentGraphemes","subOffset_1","subSegment","replacementNode","getWrapperBounds","ownerDocument","wrapper","parentNode","segmenter","segment","segmentWords","breakWords","wordSeparators","words","_loop_1","word_1","TextContainer","transform","CAPITALIZE","capitalize","m","p1","p2","ImageElementContainer","_super","_this","CanvasElementContainer","SVGElementContainer","LIElementContainer","OLElementContainer","CHECKBOX_BORDER_RADIUS","RADIO_BORDER_RADIUS","reformatInputBounds","getInputValue","PASSWORD","CHECKBOX","RADIO","INPUT_COLOR","InputElementContainer","input","SelectElementContainer","option","TextareaElementContainer","IFrameElementContainer","iframe","parseTree","documentBackgroundColor","bodyBackgroundColor","LIST_OWNERS","parseNodeTree","root","childNode","nextNode","isTextNode","isElementNode","isSlotElement","container","createContainer","createsRealStackingContext","createsStackingContext","isTextareaElement","isSVGElement","isSelectElement","isImageElement","isCanvasElement","isLIElement","isOLElement","isInputElement","isIFrameElement","isBodyElement","isSVGElementNode","isHTMLElement","isVideoElement","isStyleElement","isScriptElement","isCustomElement","CounterState","name","counters","canReset","entry","counterNames","ROMAN_UPPER","ARMENIAN","HEBREW","GEORGIAN","createAdditiveCounter","min","symbols","fallback","suffix","createCounterText","string","integer","createCounterStyleWithSymbolResolver","codePointRangeLength","isNumeric","resolver","createCounterStyleFromRange","codePointRangeStart","codePointRangeEnd","createCounterStyleFromSymbols","CJK_ZEROS","CJK_TEN_COEFFICIENTS","CJK_TEN_HIGH_COEFFICIENTS","CJK_HUNDRED_COEFFICIENTS","createCJKCounter","numbers","multipliers","negativeSign","tmp","coefficient","CHINESE_INFORMAL_MULTIPLIERS","CHINESE_FORMAL_MULTIPLIERS","JAPANESE_NEGATIVE","KOREAN_NEGATIVE","appendSuffix","defaultSuffix","cjkSuffix","koreanSuffix","spaceSuffix","IGNORE_ATTRIBUTE","DocumentCloner","windowSize","createIFrameContainer","scrollX","scrollY","cloneWindow","documentClone","iframeLoad","iframeLoader","onclone","referenceElement","restoreNodeScroll","imagesReady","serializeDoctype","restoreOwnerScroll","clone","copyCSSStyles","sheet","css","rule","clonedCanvas","clonedCtx","gl","attribs","video","blankCanvas","child","copyStyles","assignedNodes","assignedNode","window","styleBefore","styleAfter","createPseudoHideStyles","PseudoElementType","after","pseudoElt","anonymousReplacedElement","attr","counterStyle","counterState","counterType","delim","counterStates","counterType_1","separator","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","newClassName","cloneIframeContainer","imageReady","interval","ignoredStyleProperties","target","property","doctype","PSEUDO_BEFORE","PSEUDO_AFTER","PSEUDO_HIDE_ELEMENT_STYLE","createStyles","CacheStorage","url","link","src","Cache","_options","isBlobImage","isRenderable","key","isSameOrigin","useCORS","useProxy","isInlineImage","isInlineBase64Image","proxy","responseType","xhr","reader_1","queryString","timeout_1","INLINE_SVG","INLINE_BASE64","INLINE_IMG","isSVG","Vector","deltaX","deltaY","lerp","BezierCurve","startControl","endControl","firstHalf","ab","bc","cd","abbc","bccd","dest","isBezierCurve","path","BoundCurves","tlh","tlv","trh","trv","_c","brh","brv","_d","blh","blv","factors","maxFactor","topWidth","rightHeight","bottomWidth","leftHeight","getCurvePoints","CORNER","r1","r2","kappa","ox","oy","xm","ym","calculateBorderBoxPath","curves","calculateContentBoxPath","calculatePaddingBoxPath","TransformEffect","offsetX","offsetY","ClipEffect","OpacityEffect","isTransformEffect","effect","isClipEffect","isOpacityEffect","equalPath","transformPath","deltaW","deltaH","point","StackingContext","ElementPaint","borderBox","paddingBox","inFlow","effects","croplessEffects","parseStackTree","stackingContext","realStackingContext","listItems","treatAsRealStackingContext","paintContainer","listOwnerItems","parentStack","stack","order_1","index_1","index_2","processListItems","owner","elements","numbering","reversed","item","parseStackingContexts","parsePathForBorder","borderSide","createPathFromCurves","parsePathForBorderDoubleOuter","parsePathForBorderDoubleInner","parsePathForBorderStroke","createStrokePathFromCurves","outer1","outer2","inner1","inner2","contentBox","calculateBackgroundPositioningArea","calculateBackgroundPaintingArea","calculateBackgroundRendering","intrinsicSize","backgroundPositioningArea","getBackgroundValueForIndex","backgroundPaintingArea","backgroundImageSize","calculateBackgroundSize","sizeWidth","sizeHeight","calculateBackgroundRepeatPath","isAuto","hasIntrinsicValue","intrinsicWidth","intrinsicHeight","intrinsicProportion","second","hasIntrinsicProportion","targetRatio","hasIntrinsicWidth","hasIntrinsicHeight","hasIntrinsicDimensions","width_1","height_1","width_2","height_2","width_3","height_3","repeat","SMALL_IMAGE","SAMPLE_TEXT","FontMetrics","span","baseline","middle","Renderer","MASK_OFFSET","CanvasRenderer","paint","letters","letter","variant","fixIOSSystemFonts","font","paintOrderLayer","textShadows","box","iframeRenderer","isTextInputElement","canvasTextAlign","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","paths","pattern","this_1","x0","x1","y0","y1","gradient_1","top_1","radialGradient_1","midX","midY","invF","curvePoints","outerPaths","innerPaths","hasBackground","borders","borders_1","border","calculateBackgroundCurvedPaintingArea","borderBoxArea","maskOffset","shadowPaintingArea","strokePaths","boxPaths","startX","startY","endX","endY","dashLength","spaceLength","useLineDash","multiplier","numberOfDashes","minSpace","maxSpace","path1","path2","clip","iOSBrokenFonts","fontFamilies","ForeignObjectRenderer","loadSerializedSVG","Logger","id","enabled","Context","windowBounds","renderElement","opts","defaultView","resourceOptions","contextOptions","windowOptions","foreignObjectRendering","cloneOptions","documentCloner","clonedElement","renderOptions","renderer","_q","_r","_s","_t","_u","parseBackgroundColor","backgroundColorOverride","defaultBackgroundColor","checkThroughFilters","url","second_document_string","orgId","resolve","response","data","Logger","error","getS3SignedUrls","recordID","__async","init_contained_visualizer_helpers","__esmMin","init_logger","save_with_visualizer_exports","__export","saveWithVisualizer","updateDynamo","recordID","url","htmlTransformer","orgId","htmlKey","markdownKey","htmlVisualizerKey","delayBetweenExecutions","__async","Logger","getIdentifier","device_identifier","endpoint","requestMessageInfo","getFromRequestMessageStorage","moreInfo","getFromRequestInfoStorage","bodyData","requestOptions","response","data","tellToDeleteIframe","error","content","markDown","second_document_string","openTabOnlyIfMust","checkThroughFilters","signedUrls","getS3SignedUrls","htmlVisualizerURL","htmlURL","markDownURL","sendMessageToBackground","htmlVisualizerTimedOut","base64image","htmlVisualizer","canvas","init_save_with_visualizer","__esmMin","init_message_background","init_identity_helpers","init_logger","init_htmlVisualizer","init_messaging_helpers","init_contained_visualizer_helpers","init_request_info_helpers","init_request_message_helpers","init_types","__esmMin","selectedLogLevel","setLogLevel","getLogLevel","log","isDebug","debug","info","warn","error","fatal","logger","init_logger","__esmMin","init_types","levelName","msg","logLevelNumbers","utf8Encode","base64Encode","uriEncode","init_encoder","__esmMin","str","target","utfText","n","c","output","keyStr","chr1","chr2","chr3","enc1","enc2","enc3","enc4","i","getClassName","getClasses","handleElmCss","getCanvasDataUrl","handleInputElement","handleImageElement","handleCanvasElement","shouldIgnoreElm","recursiveWalk","createBaseClass","getIgnoredElms","getHtmlObject","prepareOutput","goCapture","init_capturer","__esmMin","init_types","init_logger","init_encoder","domElm","className","stringClass","result","c","context","newElm","handleOrigClassAndStyle","handleRegularElmStyle","classStr","computedStyle","i","property","value","mapKey","handlePseudoElmsStyle","pseudoType","canvasDataUrl","ctx","ex","logger","domType","imgDataUrl","computedStyleKeyValuePairsOfIgnoredElements","k","v","handleCss","dummyElm","ignoredElms","cssSelector","elm","createNewHtml","newHtml","appendNewHead","newHead","appendNewBody","newBody","appendNewStyle","style","cssText","newHtmlObject","outputType","output","outerHtml","uriEncode","base64Encode","htmlDocument","options","startTime","__spreadValues","capture","init_src","__esmMin","init_capturer","init_types","outputType","htmlDocument","options","goCapture","save_with_contained_exports","__export","saveWithContained","tellEC2ToRender","recordID","url","htmlTransformer","orgId","delayBetweenExecutions","__async","Logger","getIdentifier","node_identifier","endpoint","requestMessageInfo","getFromRequestMessageStorage","moreInfo","getFromRequestInfoStorage","bodyData","requestOptions","response","data","tellToDeleteIframe","error","content","markDown","second_document_string","not_in_iframe","openTabOnlyIfMust","checkThroughFilters","signedUrls","getS3SignedUrls","htmlContainedURL","htmlURL","markDownURL","sendMessageToBackground","i","capturedHtml","capture","init_save_with_contained","__esmMin","init_message_background","init_identity_helpers","init_logger","init_messaging_helpers","init_contained_visualizer_helpers","init_src","init_request_info_helpers","init_request_message_helpers","executeActions","actions","document","resolve","index","executeNextAction","action","clickElement","activeElement","start","end","inputElement","textareaElement","selectElement","formElement","formData","field","event","Logger","init_actions","__esmMin","init_logger","initCrawl","event","shouldDispatch","__async","initCrawlHelper","numTries","recordID","removeCSSselectors","classNamesToBeRemoved","fastLane","url_to_crawl","htmlTransformer","removeImages","htmlVisualizer","htmlContained","actions","saveHtml","saveMarkdown","cerealObject","rawData","waitBeforeScraping","Logger","document_to_use","url_check_pdf","isPDF","isPdfEmbedElementPresent","orgId","saveText","html","executeActions","processCrawl","removeSelectorsFromDocument","selectors","e","second_document_string","second_document","get_document_html","removeElementsByClassNames","removeImagesDOM","doc_string","markDown","TurndownService","saveWithVisualizer","saveWithContained","saveCrawl","text","extractTextFromPDF","init_init_crawl","__esmMin","init_check_pdf","init_dom_processing","init_save_crawl","init_turndown","init_pdf_getter","init_logger","init_save_with_visualizer","init_save_with_contained","init_actions","muteIframe","videos","audios","mutationsList","_observer","mutation","i","addedNode","init_mute_iframe","__esmMin","executeFunctionIfOrWhenBodyExists","func","_","observer","body","init_document_body_observer","__esmMin","safeRenderIframe","overWriteBlank","e","Logger","originalWindowOpen","url","windowName","windowFeatures","init_safe_render","__esmMin","init_logger","mutation_observer_exports","__export","attachMutationObserver","initialEventListener","listenerAlive","event","muteIframe","executeFunctionIfOrWhenBodyExists","initIframeListeners","safeRenderIframe","inIframe","__async","alreadyReplied","waitForElement","waitForElementTime","Logger","initCrawl","safeEvalSelector","getSelectorInfo","waitForElementDynamicSelector","init_mutation_observer","__esmMin","init_iframe_helpers","init_evaluate_selector","init_logger","init_init_crawl","init_mute_iframe","init_document_body_observer","init_safe_render","setUpContentScriptListeners","__async","pendingCerealRequests","event","_a","Logger","cerealFrame","CEREAL_FRAME_ID","recordID","json","request","sender","sendResponse","iframe","dataId","divIframe","resetAfterCrawl","DATA_ID_IFRAME","hideBadgeIfShould","getSharedMemoryDOM","getIfCurrentlyActiveDOM","getIdentifier","identifier","startConnectionWs","proceedWithActivation","processCrawl","data","BATCH_execution","batch_id","parallelExecutionsBatch","delayBetweenExecutions","preProcessCrawl","initialEventListenerModule","initCerealFrame","result","frame","processFrame","iframeElement","htmlString","cerealObject","resolve","initResult","newFrame","isPDF","numTries","url_to_crawl","htmlTransformer","orgId","fastLane","saveText","removeCSSselectors","classNamesToBeRemoved","html_string","htmlVisualizer","htmlContained","removeImages","openTab","openTabOnlyIfMust","saveHtml","saveMarkdown","refPolicy","saveCrawlModule","get_document_html","removeElementsByClassNames","removeImagesDOM","removeSelectorsFromDocument","TurndownModule","saveWithVisualizerModule","saveWithContainedModule","extractTextFromPDFModule","document_to_use","selectors","e","second_document_string","second_document","doc_string","markDown","text","init_listener_helpers_CS","__esmMin","init_reset_crawl","init_constants","init_badge_settings","init_shared_memory","init_elements_utils","init_identity_helpers","init_websocket","init_execute_crawl","init_logger","init_cereal_utils","checkIfInPermissions","permission","resolve","permissions","checkIfInOptionalPermissions","callback","optionalPermissions","checkHostPermissionsMV2_3","manifest","hostPermissions","optionalHostPermissions","Logger","checkRequiredPermissions","requestAfterChecking","__async","permissionsToRequest","detectBrowser","requiredPermissions","isPermissionPresent","isPresent","checkIfPermissionsGranted","requirePermissions","_0","granted","init_permission_helpers","__esmMin","init_logger","init_utils","getOptInStatus","__async","resolve","optInKey","result","optIn","setLocalStorage","optOut","init_opt_in_out_helpers","__esmMin","init_storage_helpers","KEEP_PING_STATUS","keepAliveInterval","keepAlive","startPing","stopPing","init_keep_ping","__esmMin","init_storage_helpers","init_logger","init_constants","init_utils","error","__async","isInSW","SW_PING_INTERVAL","setLocalStorage","Logger","start","metadata_id","resolve","__async","getOptInStatus","checkRequiredPermissions","startPing","setLocalStorage","error","Logger","optOut","stop","stopPing","startWebsocket","executeFunctionIfOrWhenBodyExists","isCSPEnabled","cspEnabled","setUpContentScriptListeners","websocketModule","getIdentifier","identifier","stopConnection","DATA_ID_IFRAME","iframe","isStarted","result","init_start_stop_helpers","__esmMin","init_test_csp","init_listener_helpers_CS","init_identity_helpers","init_document_body_observer","init_constants","init_permission_helpers","init_storage_helpers","init_opt_in_out_helpers","init_logger","init_keep_ping","RateLimiter","init_rate_limiter","__esmMin","init_constants","init_storage_helpers","init_logger","__async","timestamp","getLocalStorage","count","setLocalStorage","lifetime_total_count","initial_timestamp","now","add_to_count","mllwtl_rate_limit_object","increase_count","REFRESH_INTERVAL","Logger","MAX_DAILY_RATE","isPascoliEnabled","resolve","__async","htmlFileNamePath","getLocalStorage","Logger","webAccessibleResources","resource","resourceV3","init_pascoli_utils","__esmMin","init_storage_helpers","init_logger","websocket_exports","__export","startConnectionWs","identifier","__async","manifestVersion","getManifestVersion","isInServiceWorker","isInSW","Logger","sendMessageToBackground","effectiveConnectionType","getEffectiveConnectionType","HIGH_BANDWIDTH_CONNECTION_TYPES","webSocketConnected","isDeviceDisconnectSession","getLocalStorage","is_websocket_connected","RateLimiter","timestamp","count","now","timeElapsed","REFRESH_INTERVAL","setLocalStorage","extension_identifier","getExtensionIdentifier","speedMpbs","MeasureConnectionSpeed","browser","detectBrowser","isPascoli","isPascoliEnabled","ws","WebSocket","ws_url","VERSION","hiddenInput","_a","isStarted","data","refreshCereal","POST_request","GET_request","BATCH_execution","batch_id","parallelExecutionsBatch","delayBetweenExecutions","type_batch","shouldContinue","isLastCount","addToRequestMessageStorage","tabReply","tabs","tab","sendMessageToContentScript","response","import_isomorphic_ws","init_websocket","__esmMin","init_constants","init_start_stop_helpers","init_rate_limiter","init_logger","init_storage_helpers","init_identity_helpers","init_measure_connection_speed","init_utils","init_messaging_helpers","init_request_message_helpers","init_pascoli_utils","init_cereal_index","setUpBackgroundListeners","__async","startWebsocketMessageQueue","processWebsocketQueue","message","Logger","startConnectionWs","request","sender","sendResponse","_a","_b","_c","_d","disableXFrameHeaders","enableXFrameHeaders","resetTriggersDownload","setSharedMemoryBCK","getSharedMemoryBCK","seeIfTriggersDownload","sendMessageToContentScript","handlePostRequest","handleGetRequest","generateAndOpenOptInLink","link","generateAndOpenUpdateLink","tabId","MeasureConnectionSpeed","speedMbps","tabs","putHTMLToSigned","putMarkdownToSigned","putHTMLVisualizerToSigned","putHTMLContainedToSigned","fixImageRenderHTMLVisualizer","resetImageRenderHTMLVisualizer","getIfCurrentlyActiveBCK","showBadge","hideBadge","getBadgeProperties","restoreBadgeProperties","generateAndOpenFeedbackLink","cerealMain","result","error","startPing","stopPing","shouldRerouteToBackground","resolve","rules","init_listener_helpers_SW","__esmMin","init_dnr_helpers","init_shared_memory","init_triggers_download_helpers","init_messaging_helpers","init_post_helpers","init_generate_links","init_measure_connection_speed","init_put_to_signed","init_elements_utils","init_badge_settings","init_get_helpers","init_websocket","init_logger","init_cereal_index","init_keep_ping","src_exports","__export","M","__toCommonJS","init_identity_helpers","init_messaging_helpers","init_logger","setUpOnTabRemoveListeners","__async","tabId","removeInfo","result","tabs","i","response","sendMessageToContentScript","Logger","init_listener_helpers_SW","init_iframe_helpers","init_storage_helpers","purgeOnStartup","__async","deleteLocalStorage","init_start_stop_helpers","init_logger","setUpStorageChangeListeners","__async","resolve","changes","namespace","key","newValue","Logger","startWebsocket","stopConnection","init_start_stop_helpers","init_opt_in_out_helpers","init_permission_helpers","init_constants","init_logger","init_rate_limiter","init_opt_in_out_helpers","init_identity_helpers","init_constants","init_rate_limiter","init_logger","init_start_stop_helpers","init_document_body_observer","init_messaging_helpers","init_generate_links","init_badge_settings","createMessagingChannels","extension_id","channelFromExtensionToSite","channelFromSiteToExtension","setUpExternalMessageListeners","__async","current_hostname","extension_id_original","getExtensionIdentifier","executeFunctionIfOrWhenBodyExists","Logger","event","message","message_id","extension_id_message","optIn","sendMessageToWebsite","optOut","start","stop","getOptInStatus","status","getIdentifier","deviceId","VERSION","RateLimiter","requestsHandled","rateLimitData","sendMessageToBackground","tab_id","getIfCurrentlyActive","currentlyActive","settingsLink","generateSettingsLink","optInStatus","extensionId","extensionName","getExtensionName","shouldShowBadgeVar","shouldShowBadge","requestsCount","configuration_key","setShouldShowBadge","unsetShouldShowBadge","resolve","response","init_generate_links","init_utils","init_storage_helpers","init_identity_helpers","init_logger","init_utils","switchShouldContinue","res","__async","Logger","isInSW","getLocalStorage","checked_switch_value","extensionId","getExtensionIdentifier","cacheBuster","response","setLocalStorage","data","error","e","init_storage_helpers","init_iframe_helpers","init_logger","initializePascoli","__async","Logger","alreadyReplied","eventDataGlobal","recordIDGlobal","event","url","id","data_id","should_sandbox","sandbox_attributes","htmlVisualizer","htmlContained","screenWidth","screenHeight","eventData","pascoli","refPolicy","recordID","insertIFrame","_a","iframe","timer","M","publishableKey","options","MAX_DAILY_RATE","RateLimiter","Logger","auto_start_if_opted_in","metadata_id","__async","checkRequiredPermissions","purgeOnStartup","setUpOnTabRemoveListeners","setUpBackgroundListeners","getOrGenerateIdentifier","switchShouldContinue","getOptInStatus","start","pascoliHTMLFileName","setLocalStorage","setUpExternalMessageListeners","inIframe","mutationObserverModule","isStarted","startWebsocket","setUpStorageChangeListeners","initializePascoli","optIn","optOut","generateOptInLink","generateAndOpenOptInLink","generateSettingsLink","generateUpdateLink","generateAndOpenUpdateLink","openUserSettingsInPopupWindow","VERSION","getExtensionIdentifier","detectBrowser","stop","generateFeedbackLink","generateAndOpenFeedbackLink"]}